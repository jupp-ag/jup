(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2059],{54719:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/wrap",function(){return r(79899)}])},95207:function(e,n,r){"use strict";r.d(n,{Z:function(){return d}});var t=r(85893),i=r(57747),a=r(45454),l=r(67294);let s=["restake","defi","dashboard","wrap","claim-kep"];var o=()=>((0,l.useEffect)(()=>{let e=document.getElementById("meta-crm-widget-container");return e&&s.includes(window.location.pathname.split("/").filter(Boolean).pop()||"")&&(e.style.display="block"),()=>{let e=document.getElementById("meta-crm-widget-container");e&&(e.style.display="none")}},[]),null),d=e=>{let{Sidebar:n,Header:r,children:l,MobileSideBar:s,RightSidebar:d,extraMarginTop:u=!0}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o,{}),(0,t.jsxs)(i.xu,{pt:{base:0,xl:u?"2rem":0},mb:4,bg:"backgroundCanvas",children:[n&&n,s&&(0,t.jsx)(a.Z,{MobileSideBar:s}),r&&r,(0,t.jsx)(i.xu,{mt:{base:2,xl:u?104:2},children:l}),d&&d]})]})}},30734:function(e,n,r){"use strict";r.d(n,{Z:function(){return s}});var t=r(85893),i=r(82140),a=r(33090),l=r(32735),s=e=>{let{inputRightElement:n,value:r,onChange:s,error:o,disabled:d=!1}=e;return(0,t.jsxs)(i.B,{size:"lg",mt:"12px",children:[(0,t.jsx)(a.I,{type:"text",variant:"unstyled",placeholder:"0.0",borderRadius:"1rem",bg:"backgroundField",border:"1px solid",p:"24px",h:"96px",color:"textPrimary",fontWeight:"700",fontSize:"32px",lineHeight:"38px",value:r,isInvalid:!!o,onChange:e=>null==s?void 0:s(e.target.value),borderColor:o?"error":"backgroundDivider",_placeholder:{color:"textTertiary"},disabled:d}),n&&(0,t.jsx)(l.x,{my:"auto",h:"100%",mr:"1.5rem",w:"auto",children:n})]})}},79899:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return L}});var t=r(85893),i=r(4627),a=r(95207),l=r(46697),s=r(70853),o=r(93717),d=r(14225),u=r(57747),c=r(71293),p=r(7963),h=r(27239),x=r(81136),m=r(40165),f=r(30734),b=r(60387),v=r(76630),g=r(78001),y=r(13821),j=r(37241),k=r(30202),w=r(92321),I=r(12185),E=r(89810),_=()=>{let e=(0,k.NL)(),{isConnected:n,address:r}=(0,w.m)(),{swapConfig:t}=(0,j.Z)(),{rsETH:i,wrsETH:a}=t.tokens,{data:l,queryKey:s}=(0,I.K)({address:r,token:i.address,query:{enabled:n,refetchInterval:1e4},chainId:t.chain.id}),{data:o,queryKey:d}=(0,E.u)({address:i.address,abi:i.abi,functionName:"allowance",args:[r,a.address],query:{enabled:n,refetchInterval:1e4},chainId:t.chain.id}),{data:u,queryKey:c}=(0,I.K)({token:a.address,address:r,query:{enabled:n,refetchInterval:1e4},chainId:t.chain.id}),{data:p,queryKey:h}=(0,E.u)({address:a.address,abi:a.abi,functionName:"allowance",args:[r,a.address],query:{enabled:n,refetchInterval:1e4},chainId:t.chain.id});return{rsETHBalance:(null==l?void 0:l.value)||0n,wrsETHBalance:(null==u?void 0:u.value)||0n,rsETHAllowance:o||0n,wrsETHAllowance:p||0n,invalidateCache:()=>{e.invalidateQueries({queryKey:s}),e.invalidateQueries({queryKey:d}),e.invalidateQueries({queryKey:c}),e.invalidateQueries({queryKey:h})}}},C=r(67294),N=r(83230),S=r(15229),T=r(33305),B=r(36074),q=r(72272),F=r(67667),H=r(92526),P=r(2452),R=r(36227);let z={open:!1,hash:"",error:"",hasUserDenied:!1},D=e=>{let{tokenAmount:n,isConnected:r,onClick:i,token:a,icon:l,hideMax:s=!1}=e;return(0,t.jsxs)(o.k,{flexDir:"column",alignItems:"flex-end",children:[(0,t.jsxs)(o.k,{gap:2,alignItems:"center",children:[!s&&(0,t.jsx)(d.z,{bg:"backgroundDivider",h:"1.5rem",size:"sm",p:"4px 8px",_hover:{bg:"backgroundDivider"},onClick:()=>i(),w:"41px",fontWeight:"700",fontSize:"10px",borderRadius:"8px",children:"MAX"}),l&&(0,t.jsx)(m.Z,{width:24,height:24,alt:a,src:l}),(0,t.jsx)(o.k,{alignItems:"center",justify:"space-between",flex:1,gap:2,children:(0,t.jsx)(u.xu,{flex:1,children:a})})]}),r&&void 0!==n&&null!=n?(0,t.jsxs)(c.x,{fontWeight:"700",fontSize:"12px",mt:"6px",color:"textPrimary",children:["Balance: ",(0,N.uf)(Number(n),!1,4,!0)]}):null]})};var Z=()=>{let{chain:e}=(0,w.m)(),n=(0,k.NL)(),{switchChain:r}=(0,q.o)(),{chain:i}=(0,y.Z)(),{swapConfig:a,isSwapSupported:l}=(0,j.Z)(),{isConnected:s}=(0,w.m)(),E=(0,F.t)(),{rsETH:Z,wrsETH:L}=a.tokens,[K,G]=(0,C.useState)(Z),[O,U]=(0,C.useState)(""),[M,W]=(0,C.useState)(""),[A,Q]=(0,C.useState)(!1),{writeContract:$}=(0,H.S)(),{openConnectModal:Y}=(0,P.We)(),X=(0,p.p)(),{data:V,queryKey:J}=(0,I.K)({token:a.tokens.rsETH.address,address:a.tokens.wrsETH.address,query:{refetchInterval:1e4}}),ee=V?Number((0,S.b)(V.value,a.tokens.rsETH.decimals)):0,en=Z.symbol===K.symbol,[er,et]=(0,C.useState)(z),{rsETHBalance:ei,rsETHAllowance:ea,wrsETHBalance:el,wrsETHAllowance:es,invalidateCache:eo}=_(),ed=(0,S.b)(en?ei:el,18),eu=(0,S.b)(en?el:ei,18),ec=Number((0,S.b)(en?ea:es,18))>=Number(O),ep=en?L:Z,eh=l?i:Object.keys(v.lh)[0],ex=(0,C.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O.trim();if(!s)return"";let n="";return!+e||Number.isNaN(+e)?n="This field can't be blank or zero. Please provide valid input.":Number(e)>Number(ed)?n="You can't wrap/unwrap more than available balance in your wallet.":!en&&Number(e)>Number(ee)&&(n="You can't unwrap more than available limit of ".concat(ee," ").concat(K.symbol,".")),n},[O,s,ed,en,ee,K.symbol]),em=()=>{G(ep),(0,N.L9)(R.Ku,{rsETH_Balance:(0,S.b)(ei,18),wrsETH_Balance:(0,S.b)(el,18)})};(0,C.useEffect)(()=>{""!==O&&W(ex(O))},[ex,O,ed]);let ef=()=>{(0,N.L9)(R.dU,{rsETH_Balance:(0,S.b)(ei,18),wrsETH_Balance:(0,S.b)(el,18)}),U((0,g.Md)(ed,4))},eb=e=>{let n=e.trim().replace(/,/g,"");((0,g.hj)(n)||""===n)&&(-1===n.indexOf(".")?U(n):n.length-(n.indexOf(".")+1)<=g.uO&&U("."===n?"0.":n))},ev=en?"Wrap":"Unwrap";return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.k,{justifyContent:"center",p:{base:"0 16px",sm:"0 40px",md:0},children:(0,t.jsx)(o.k,{flexDir:"column",gap:"16px",mt:{base:"16px",xl:"0px"},w:{base:"100%",md:"648px"},children:(0,t.jsxs)(o.k,{borderRadius:"24px",bg:"backgroundCard",p:{base:"16px 16px 24px",md:"40px"},flexDir:"column",gap:"24px",w:"100%",children:[(0,t.jsxs)(o.k,{justifyContent:"space-between",alignItems:"flex-start",children:[(0,t.jsx)(c.x,{fontSize:{base:"18px",md:"32px"},lineHeight:{base:"20px",md:"38px"},fontWeight:"600",color:"textPrimary",children:ev}),(0,t.jsxs)(c.x,{p:"4px 6px",bg:"backgroundField",fontWeight:"400",fontSize:"10px",lineHeight:"15px",rounded:"6px",children:["1 ",K.symbol," = 1 ",ep.symbol]})]}),(0,t.jsxs)(u.xu,{mt:10,children:[(0,t.jsx)(c.x,{children:"From"}),(0,t.jsx)(f.Z,{inputRightElement:(0,t.jsx)(D,{isConnected:s,tokenAmount:+(0,g.Md)(ed,4),onClick:ef,token:K.symbol,icon:"/assets/rseth.png"}),value:O,onChange:e=>eb(e),error:M}),M&&(0,t.jsxs)(o.k,{alignItems:"center",mt:"8px",children:[(0,t.jsx)(m.Z,{src:"/assets/transactions/error.svg",width:20,height:20,alt:"error-icon"}),(0,t.jsx)(c.x,{ml:"0.5rem",color:"error",fontSize:"12px",fontWeight:"400",children:M||"error"})]})]}),(0,t.jsx)(h.M,{children:(0,t.jsx)(B.E.div,{style:{cursor:"pointer",background:"#B6DFDF",padding:"8px",borderRadius:"50%"},onClick:()=>em(),animate:{rotate:en?180:0},transition:{duration:.3},children:(0,t.jsx)(m.Z,{src:"/assets/sidebar/wrap.svg",alt:"swap",height:24,width:23,loading:"eager",style:{rotate:"90deg"}})})}),(0,t.jsxs)(u.xu,{children:[(0,t.jsx)(c.x,{children:"To"}),(0,t.jsx)(f.Z,{inputRightElement:(0,t.jsx)(D,{isConnected:s,tokenAmount:+(0,g.Md)(eu,4),onClick:ef,token:ep.symbol,icon:"/assets/rseth.png",hideMax:!0}),value:O,disabled:!0})]}),!en&&(0,t.jsxs)(o.k,{justify:"space-between",width:"100%",children:[(0,t.jsx)(c.x,{children:"Unwrap Limit"}),(0,t.jsx)(c.x,{children:+ee.toFixed(4)})]}),(0,t.jsx)(d.z,{borderRadius:"12px",bg:"textPrimary",p:"16px 64px",h:"56px",mt:"12px",width:"100%",_hover:{bg:"textPrimary"},disabled:!!M||A||!O,onClick:s?l?ec?()=>{if(!E)return;let r=ex(O);if(r){W(r);return}if((null==e?void 0:e.id)!==a.chain.id){X({description:"chain and config mismatch. Please refresh",status:"error",duration:5e3,position:"top"}),console.log("chain and config mismatch. Please refresh");return}et({open:!0,hash:"",error:"",hasUserDenied:!1}),Q(!0);let t=K.symbol===Z.symbol?"deposit":"withdraw";$({address:L.address,abi:L.abi,functionName:t,args:[Z.address,(0,T.f)(O)]},{onError:e=>{var n,r,t;Q(!1),et({open:!0,hash:e.transactionHash,error:null!==(t=null!==(r=null!==(n=null==e?void 0:e.reason)&&void 0!==n?n:null==e?void 0:e.error)&&void 0!==r?r:null==e?void 0:e.message)&&void 0!==t?t:"",hasUserDenied:(0,N.f)(e)})},onSuccess:async e=>{et({open:!0,hash:e,error:"",hasUserDenied:!1}),await E.waitForTransactionReceipt({hash:e}),eo(),Q(!1),n.invalidateQueries({queryKey:J}),U("")}})}:()=>{E&&(et({open:!0,hash:"",error:"",hasUserDenied:!1}),Q(!0),$({address:K.address,abi:K.abi,functionName:"approve",args:[L.address,(0,T.f)(O)]},{onError:e=>{var n,r,t;(0,N.L9)(R.G4,e),Q(!1),et({open:!0,hash:e.transactionHash,error:null!==(t=null!==(r=null!==(n=null==e?void 0:e.reason)&&void 0!==n?n:null==e?void 0:e.error)&&void 0!==r?r:null==e?void 0:e.message)&&void 0!==t?t:"",hasUserDenied:(0,N.f)(e)})},onSuccess:async e=>{(0,N.L9)(R.G4,{rsETH_Balance:(0,S.b)(ei,18),wrsETH_Balance:(0,S.b)(el,18)}),et({open:!0,hash:e,error:"",hasUserDenied:!1}),await E.waitForTransactionReceipt({hash:e}),eo(),n.invalidateQueries({queryKey:J}),Q(!1)}}))}:()=>r({chainId:Number(eh)}):()=>{null==Y||Y(),(0,N.L9)(R.vL,{type:"wrap_page"})},children:(0,t.jsx)(c.x,{fontSize:"16px",lineHeight:"24px",fontWeight:"600",color:"backgroundCard",children:s?A?(0,t.jsx)(x.$,{size:"md",color:"primary"}):l?ec?ev:"Approve":"Switch Chain":"Connect Wallet"})})]})})}),(0,t.jsx)(b.Z,{isOpen:er.open,hash:er.hash,error:er.error,transactionType:"",isTxnProcessing:A,hasUserDenied:er.hasUserDenied,closeAlert:()=>et(z),handleTxView:()=>{var e;let n="".concat(null===(e=i.blockExplorers)||void 0===e?void 0:e.default.url,"/tx/").concat(er.hash);window.open(n,"_blank")},chainId:i.id})]})},L=()=>((0,s.Z)(),(0,t.jsx)(a.Z,{Sidebar:(0,t.jsx)(l.Z,{display:{base:"none",xl:"block"},minH:"100vh"}),MobileSideBar:(0,t.jsx)(l.Z,{}),Header:(0,t.jsx)(i.Z,{}),children:(0,t.jsx)(Z,{})}))},60820:function(e,n,r){"use strict";r.d(n,{Y:function(){return f},K:function(){return b}});var t=r(55227),i=r(81103),a=r(16554),l=r(77030),s=r(33179),o=r(7174),d=r(25432),u=r(67294),c=r(85893),[p,h]=(0,t.k)({name:"FormControlStylesContext",errorMessage:"useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<FormControl />\" "}),[x,m]=(0,t.k)({strict:!1,name:"FormControlContext"});function f(e){let{isDisabled:n,isInvalid:r,isReadOnly:t,isRequired:i,...a}=b(e);return{...a,disabled:n,readOnly:t,required:i,"aria-invalid":(0,d.Qm)(r),"aria-required":(0,d.Qm)(i),"aria-readonly":(0,d.Qm)(t)}}function b(e){var n,r,t;let i=m(),{id:a,disabled:l,readOnly:s,required:o,isRequired:u,isInvalid:c,isReadOnly:p,isDisabled:h,onFocus:x,onBlur:f,...b}=e,v=e["aria-describedby"]?[e["aria-describedby"]]:[];return(null==i?void 0:i.hasFeedbackText)&&(null==i?void 0:i.isInvalid)&&v.push(i.feedbackId),(null==i?void 0:i.hasHelpText)&&v.push(i.helpTextId),{...b,"aria-describedby":v.join(" ")||void 0,id:null!=a?a:null==i?void 0:i.id,isDisabled:null!=(n=null!=l?l:h)?n:null==i?void 0:i.isDisabled,isReadOnly:null!=(r=null!=s?s:p)?r:null==i?void 0:i.isReadOnly,isRequired:null!=(t=null!=o?o:u)?t:null==i?void 0:i.isRequired,isInvalid:null!=c?c:null==i?void 0:i.isInvalid,onFocus:(0,d.v0)(null==i?void 0:i.onFocus,x),onBlur:(0,d.v0)(null==i?void 0:i.onBlur,f)}}(0,a.G)(function(e,n){let r=(0,l.jC)("Form",e),{getRootProps:t,htmlProps:a,...h}=function(e){let{id:n,isRequired:r,isInvalid:t,isDisabled:a,isReadOnly:l,...s}=e,o=(0,u.useId)(),c=n||`field-${o}`,p=`${c}-label`,h=`${c}-feedback`,x=`${c}-helptext`,[m,f]=(0,u.useState)(!1),[b,v]=(0,u.useState)(!1),[g,y]=(0,u.useState)(!1),j=(0,u.useCallback)((e={},n=null)=>({id:x,...e,ref:(0,i.lq)(n,e=>{e&&v(!0)})}),[x]),k=(0,u.useCallback)((e={},n=null)=>({...e,ref:n,"data-focus":(0,d.PB)(g),"data-disabled":(0,d.PB)(a),"data-invalid":(0,d.PB)(t),"data-readonly":(0,d.PB)(l),id:void 0!==e.id?e.id:p,htmlFor:void 0!==e.htmlFor?e.htmlFor:c}),[c,a,g,t,l,p]),w=(0,u.useCallback)((e={},n=null)=>({id:h,...e,ref:(0,i.lq)(n,e=>{e&&f(!0)}),"aria-live":"polite"}),[h]),I=(0,u.useCallback)((e={},n=null)=>({...e,...s,ref:n,role:"group","data-focus":(0,d.PB)(g),"data-disabled":(0,d.PB)(a),"data-invalid":(0,d.PB)(t),"data-readonly":(0,d.PB)(l)}),[s,a,g,t,l]);return{isRequired:!!r,isInvalid:!!t,isReadOnly:!!l,isDisabled:!!a,isFocused:!!g,onFocus:()=>y(!0),onBlur:()=>y(!1),hasFeedbackText:m,setHasFeedbackText:f,hasHelpText:b,setHasHelpText:v,id:c,labelId:p,feedbackId:h,helpTextId:x,htmlProps:s,getHelpTextProps:j,getErrorMessageProps:w,getRootProps:I,getLabelProps:k,getRequiredIndicatorProps:(0,u.useCallback)((e={},n=null)=>({...e,ref:n,role:"presentation","aria-hidden":!0,children:e.children||"*"}),[])}}((0,s.Lr)(e)),m=(0,d.cx)("chakra-form-control",e.className);return(0,c.jsx)(x,{value:h,children:(0,c.jsx)(p,{value:r,children:(0,c.jsx)(o.m.div,{...t({},n),className:m,__css:r.container})})})}).displayName="FormControl",(0,a.G)(function(e,n){let r=m(),t=h(),i=(0,d.cx)("chakra-form__helper-text",e.className);return(0,c.jsx)(o.m.div,{...null==r?void 0:r.getHelpTextProps(e,n),__css:t.helperText,className:i})}).displayName="FormHelperText"},32735:function(e,n,r){"use strict";r.d(n,{Z:function(){return u},x:function(){return c}});var t=r(82140),i=r(7174),a=r(16554),l=r(25432),s=r(85893),o=(0,i.m)("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),d=(0,a.G)(function(e,n){var r,i;let{placement:a="left",...l}=e,d=(0,t.m)(),u=d.field,c={["left"===a?"insetStart":"insetEnd"]:"0",width:null!=(r=null==u?void 0:u.height)?r:null==u?void 0:u.h,height:null!=(i=null==u?void 0:u.height)?i:null==u?void 0:u.h,fontSize:null==u?void 0:u.fontSize,...d.element};return(0,s.jsx)(o,{ref:n,__css:c,...l})});d.id="InputElement",d.displayName="InputElement";var u=(0,a.G)(function(e,n){let{className:r,...t}=e,i=(0,l.cx)("chakra-input__left-element",r);return(0,s.jsx)(d,{ref:n,placement:"left",className:i,...t})});u.id="InputLeftElement",u.displayName="InputLeftElement";var c=(0,a.G)(function(e,n){let{className:r,...t}=e,i=(0,l.cx)("chakra-input__right-element",r);return(0,s.jsx)(d,{ref:n,placement:"right",className:i,...t})});c.id="InputRightElement",c.displayName="InputRightElement"},33090:function(e,n,r){"use strict";r.d(n,{I:function(){return u}});var t=r(60820),i=r(16554),a=r(77030),l=r(33179),s=r(7174),o=r(25432),d=r(85893),u=(0,i.G)(function(e,n){let{htmlSize:r,...i}=e,u=(0,a.jC)("Input",i),c=(0,l.Lr)(i),p=(0,t.Y)(c),h=(0,o.cx)("chakra-input",e.className);return(0,d.jsx)(s.m.input,{size:r,...p,__css:u.field,ref:n,className:h})});u.displayName="Input",u.id="Input"},82140:function(e,n,r){"use strict";r.d(n,{B:function(){return m},m:function(){return x}});var t=r(55227),i=r(92495),a=r(16554),l=r(77030),s=r(33179),o=r(7174),d=r(25432),u=r(87052),c=r(67294),p=r(85893),[h,x]=(0,t.k)({name:"InputGroupStylesContext",errorMessage:"useInputGroupStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<InputGroup />\" "}),m=(0,a.G)(function(e,n){let r=(0,l.jC)("Input",e),{children:t,className:a,...x}=(0,s.Lr)(e),m=(0,d.cx)("chakra-input__group",a),f={},b=(0,i.W)(t),v=r.field;b.forEach(e=>{var n,t;r&&(v&&"InputLeftElement"===e.type.id&&(f.paddingStart=null!=(n=v.height)?n:v.h),v&&"InputRightElement"===e.type.id&&(f.paddingEnd=null!=(t=v.height)?t:v.h),"InputRightAddon"===e.type.id&&(f.borderEndRadius=0),"InputLeftAddon"===e.type.id&&(f.borderStartRadius=0))});let g=b.map(n=>{var r,t;let i=(0,u.o)({size:(null==(r=n.props)?void 0:r.size)||e.size,variant:(null==(t=n.props)?void 0:t.variant)||e.variant});return"Input"!==n.type.id?(0,c.cloneElement)(n,i):(0,c.cloneElement)(n,Object.assign(i,f,n.props))});return(0,p.jsx)(o.m.div,{className:m,ref:n,__css:{width:"100%",display:"flex",position:"relative",isolation:"isolate",...r.group},"data-group":!0,...x,children:(0,p.jsx)(h,{value:r,children:g})})});m.displayName="InputGroup"},89810:function(e,n,r){"use strict";r.d(n,{u:function(){return o}});var t=r(37003),i=r(36100),a=r(82451),l=r(82002),s=r(37122);function o(e={}){let{abi:n,address:r,functionName:o,query:d={}}=e,u=(0,s.Z)(e),c=(0,l.x)({config:u}),p=function(e,n={}){return{async queryFn({queryKey:r}){let i=n.abi;if(!i)throw Error("abi is required");let{address:a,functionName:l,scopeKey:s,...o}=r[1];if(!a)throw Error("address is required");if(!l)throw Error("functionName is required");let d=o.args;return(0,t.L)(e,{abi:i,address:a,functionName:l,args:d,...o})},queryKey:function(e={}){let{abi:n,...r}=e;return["readContract",(0,i.O)(r)]}(n)}}(u,{...e,chainId:e.chainId??c}),h=!!(r&&n&&o&&(d.enabled??!0));return(0,a.aM)({...d,...p,enabled:h,structuralSharing:d.structuralSharing??a.if})}}},function(e){e.O(0,[4617,2189,6609,9225,2888,9774,179],function(){return e(e.s=54719)}),_N_E=e.O()}]);
//# sourceMappingURL=wrap-a111b908ce358884.js.map