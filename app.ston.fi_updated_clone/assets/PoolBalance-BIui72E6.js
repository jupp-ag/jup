import{_ as n,a7 as a}from"./index-rYEy9Y7-.js";class h{constructor(t){this.dependencies=t,this.address=t.address;const[o,e]=[t.tokenA,t.tokenB].sort((s,i)=>s.priority-i.priority);this.baseAsset=o,this.quoteAsset=e,this.tokenA=t.tokenA,this.tokenB=t.tokenB,this.lpToken=t.lpToken,this.lpTokenAmount=t.lpTokenAmount,this.lpTokenPriceUSD=t.lpTokenPriceUSD,this.lpFeePercent=t.lpFeePercent,this.protocolFeePercent=t.protocolFeePercent,this.refFeePercent=t.refFeePercent,this.tokenAAmount=t.tokenAAmount,this.tokenBAmount=t.tokenBAmount,this.apy1d=t.apy1d,this.apy7d=t.apy7d,this.apy30d=t.apy30d,this.tvl=t.tvl,this.volume24h=t.volume24h,this.router=t.router,this.routerAddress=t.router.address,this.popularity=Math.log10((this.tvl??0)+1)+Math.log10((this.volume24h??0)+1),this.isInitialized=this.lpTokenAmount.amount.gtn(0),this.isDeprecated=this.tokenA.isDeprecated||this.tokenB.isDeprecated,this.isBlacklisted=this.tokenA.isBlacklisted||this.tokenB.isBlacklisted,this.isCommunity=this.tokenA.isCommunity||this.tokenB.isCommunity,this.isLowLiquidity=this.tvl===void 0||this.tvl<1e3,this.assets=[this.tokenA.contractAddress,this.tokenB.contractAddress],this.tokenARatio=this.tokenBAmount.amount.isZero()?this.tokenAAmount:n.fromFloat((Number(this.tokenAAmount.floatAmount)/Number(this.tokenBAmount.floatAmount)).toFixed(this.tokenA.decimals),this.tokenA),this.tokenBRatio=this.tokenAAmount.amount.isZero()?this.tokenBAmount:n.fromFloat((Number(this.tokenBAmount.floatAmount)/Number(this.tokenAAmount.floatAmount)).toFixed(this.tokenB.decimals),this.tokenB),this.key=this.address.key}key;address;baseAsset;quoteAsset;tokenA;tokenB;lpToken;lpTokenAmount;lpTokenPriceUSD;lpFeePercent;protocolFeePercent;refFeePercent;tokenAAmount;tokenBAmount;apy1d;apy7d;apy30d;tvl;volume24h;router;routerAddress;popularity;isInitialized;isDeprecated;isBlacklisted;isCommunity;isLowLiquidity;assets;tokenARatio;tokenBRatio;get debug(){return`Pool(${this.address.debug} asset0:${this.tokenA.debug} asset1:${this.tokenB.debug})`}convertLpTokenAmountToPoolTokensAmount=t=>{const{lpTokenAmount:o,tokenAAmount:e,tokenBAmount:s}=this,i=new n({...e,amount:o.amount.isZero()?t.amount:t.amount.mul(e.amount).div(o.amount)}),l=new n({...s,amount:o.amount.isZero()?t.amount:t.amount.mul(s.amount).div(o.amount)});return{pooledTokenA:i,pooledTokenB:l}};calculatePoolSharePercent=t=>{const{lpTokenAmount:o}=this;return o.amount.isZero()?0:parseFloat((Number(t.floatAmount)/Number(o.floatAmount)).toFixed(10))}}class r extends h{constructor(t){super(t),this.dependencies=t,this.lpTokensOwned=t.lpTokensOwned,this.accountTokenA=t.accountTokenA,this.accountTokenB=t.accountTokenB,this.pooledAmountUSD=t.pooledAmountUSD,this.lpWalletAddress=this.lpTokensOwned.walletAddress,this.accountWalletAddress=this.accountTokenA.walletAddress||this.accountTokenB.walletAddress,this.pooledTokenA=new a({...this.convertLpTokenAmountToPoolTokensAmount(this.lpTokensOwned).pooledTokenA,walletAddress:this.lpTokensOwned.walletAddress}),this.pooledTokenB=new a({...this.convertLpTokenAmountToPoolTokensAmount(this.lpTokensOwned).pooledTokenB,walletAddress:this.lpTokensOwned.walletAddress}),this.poolSharePercent=this.calculatePoolSharePercent(this.lpTokensOwned),this.hasLpTokens=this.lpTokensOwned.amount.gtn(0),this.hasAccountTokens=this.accountTokenA.amount.gtn(0)||this.accountTokenB.amount.gtn(0),this.hasBothAccountTokens=this.accountTokenA.amount.gtn(0)&&this.accountTokenB.amount.gtn(0)}lpTokensOwned;accountTokenA;accountTokenB;pooledAmountUSD;lpWalletAddress;accountWalletAddress;pooledTokenA;pooledTokenB;poolSharePercent;hasLpTokens;hasAccountTokens;hasBothAccountTokens;get debug(){return`PoolBalance(${super.debug} lpTokensOwned: ${this.lpTokensOwned.debug} accountTokenA: ${this.accountTokenA.debug} accountTokenB: ${this.accountTokenB.debug})`}get hasProvidedLiquidity(){return this.hasLpTokens||this.hasAccountTokens}}export{r as P,h as a};
