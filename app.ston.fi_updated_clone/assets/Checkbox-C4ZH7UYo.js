import{r as y,h as x,o as D,j as A,m as J,k as V,c as j,b as Q,R as Y}from"./vendors-Dtot3KuJ.js";import{c as Z,u as tt,e as et,j as k,P as $,a as M,b as ot,d as nt,a5 as rt,_ as P,a2 as U,f as st}from"./index-rYEy9Y7-.js";import"./Button-BDyEdmnj.js";import{u as it}from"./index-55VlGjJF.js";import{c as at,a as ut}from"./cross-16-D6oclFZd-CQTCwUxD.js";var L="Checkbox",[ct,Ut]=Z(L),[mt,ft]=ct(L),K=y.forwardRef((o,t)=>{const{__scopeCheckbox:e,name:n,checked:r,defaultChecked:s,required:i,disabled:a,value:f="on",onCheckedChange:h,...S}=o,[l,_]=y.useState(null),C=tt(t,d=>_(d)),O=y.useRef(!1),F=l?!!l.closest("form"):!0,[T=!1,p]=et({prop:r,defaultProp:s,onChange:h}),I=y.useRef(T);return y.useEffect(()=>{const d=l?.form;if(d){const b=()=>p(I.current);return d.addEventListener("reset",b),()=>d.removeEventListener("reset",b)}},[l,p]),k.jsxs(mt,{scope:e,state:T,disabled:a,children:[k.jsx($.button,{type:"button",role:"checkbox","aria-checked":v(T)?"mixed":T,"aria-required":i,"data-state":X(T),"data-disabled":a?"":void 0,disabled:a,value:f,...S,ref:C,onKeyDown:M(o.onKeyDown,d=>{d.key==="Enter"&&d.preventDefault()}),onClick:M(o.onClick,d=>{p(b=>v(b)?!0:!b),F&&(O.current=d.isPropagationStopped(),O.current||d.stopPropagation())})}),F&&k.jsx(lt,{control:l,bubbles:!O.current,name:n,value:f,checked:T,required:i,disabled:a,style:{transform:"translateX(-100%)"}})]})});K.displayName=L;var H="CheckboxIndicator",W=y.forwardRef((o,t)=>{const{__scopeCheckbox:e,forceMount:n,...r}=o,s=ft(H,e);return k.jsx(ot,{present:n||v(s.state)||s.state===!0,children:k.jsx($.span,{"data-state":X(s.state),"data-disabled":s.disabled?"":void 0,...r,ref:t,style:{pointerEvents:"none",...o.style}})})});W.displayName=H;var lt=o=>{const{control:t,checked:e,bubbles:n=!0,...r}=o,s=y.useRef(null),i=it(e),a=nt(t);return y.useEffect(()=>{const f=s.current,h=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(h,"checked").set;if(i!==e&&l){const _=new Event("click",{bubbles:n});f.indeterminate=v(e),l.call(f,v(e)?!1:e),f.dispatchEvent(_)}},[i,e,n]),k.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:v(e)?!1:e,...r,tabIndex:-1,ref:s,style:{...o.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function v(o){return o==="indeterminate"}function X(o){return v(o)?"indeterminate":o?"checked":"unchecked"}var G=K,dt=W,kt=Object.defineProperty,ht=Object.getOwnPropertyDescriptor,c=(o,t,e,n)=>{for(var r=n>1?void 0:n?ht(t,e):t,s=o.length-1,i;s>=0;s--)(i=o[s])&&(r=(n?i(t,e,r):i(r))||r);return n&&r&&kt(t,e,r),r};class m extends rt{constructor(t){super(t),this.dependencies=t,J(this),V(()=>({fromAmount:this.fromAmount,fromToken:this.fromToken,toAmount:this.toAmount,toToken:this.toToken}),({fromAmount:e,fromToken:n,toAmount:r,toToken:s})=>{if(!this.readyToBeInitialized||!e&&!n&&!r&&!s)return;const i={fromToken:n?.key,fromAmount:e?.floatAmount,toToken:s?.key,toAmount:r?.floatAmount};t.StorageService.setItem(this.storageStoreKey,JSON.stringify(i))})}_fromToken=null;_fromAmount=null;_toToken=null;_toAmount=null;get fromToken(){return this._fromToken?this.dependencies.AssetsStore.getAsset(this._fromToken):null}get fromAmount(){return this.fromToken&&this._fromAmount?new P({...this.fromToken,amount:this._fromAmount}):null}get toToken(){return this._toToken?this.dependencies.AssetsStore.getAsset(this._toToken):null}get toAmount(){return this.toToken&&this._toAmount?new P({...this.toToken,amount:this._toAmount}):null}get defaultState(){return this.dependencies.DEFAULT_STATE}get state(){return{fromToken:this.fromToken,fromAmount:this.fromAmount,toToken:this.toToken,toAmount:this.toAmount}}get fromTokenOptions(){throw new Error("Override this method in child class")}get toTokenOptions(){throw new Error("Override this method in child class")}get readyToBeInitialized(){const t=!!this.fromTokenOptions,e=!!this.toTokenOptions;return t&&e}setFromToken(t){const e=this._logger.child("setFromToken");try{const n=this._defineTokenFromSource(t),r=n?this._getFromTokenOptionByToken(n):null,s=r&&r.isAvailable&&r.token||null;if(!!this.fromToken?.contractAddress.equals(s?.contractAddress))return;this._set({key:"_fromToken",value:s?.key??null,target:this._fromToken}),this._set({key:"_fromAmount",value:null,target:this._fromAmount}),this.toToken===null||this._getToTokenOptionByToken(this.toToken)?.isAvailable===!0||this.setToToken(null)}catch(n){e.error(n)}}setFromAmount(t){const e=this._logger.child("setFromAmount");try{if(!this.fromToken)return;const n=this._defineTokenAmountFromSource(t,this.fromToken);this._set({key:"_fromAmount",value:n?.amount.toString()??null,target:this._fromAmount}),this._set({key:"_toAmount",value:null,target:this._toAmount})}catch(n){e.error(n)}}setToToken(t){const e=this._logger.child("setToToken");try{const n=this._defineTokenFromSource(t),r=n?this._getToTokenOptionByToken(n):null,s=r&&r.isAvailable&&r.token||null;if(!!this.toToken?.contractAddress.equals(s?.contractAddress))return;this._set({key:"_toToken",value:s?.key??null,target:this._toToken}),this._set({key:"_toAmount",value:null,target:this._toAmount})}catch(n){e.error(n)}}setToAmount(t){const e=this._logger.child("setToAmount");try{if(!this.toToken)return;const n=this._defineTokenAmountFromSource(t,this.toToken);this._set({key:"_toAmount",value:n?.amount.toString()??null,target:this._toAmount}),this._set({key:"_fromAmount",value:null,target:this._fromAmount})}catch(n){e.error(n)}}initState(t){const e=this._logger.child("initState");try{if(!this.readyToBeInitialized){e.warn("Not readyToBeInitialized. State initialization will be skipped.");return}if(t&&(t.fromToken&&this.setFromToken(t.fromToken),t.fromAmount&&this.setFromAmount(t.fromAmount),t.toToken&&this.setToToken(t.toToken),t.toAmount&&this.setToAmount(t.toAmount)),Object.values(this.state).some(Boolean))return;const{DEFAULT_STATE:r}=this.dependencies;r.fromToken&&this.setFromToken(r.fromToken),r.fromAmount&&this.setFromAmount(r.fromAmount),r.toToken&&this.setToToken(r.toToken),r.toAmount&&this.setToAmount(r.toAmount)}catch(n){e.error(n)}}resetState=()=>{this._set({key:"_fromToken",value:null,target:this._fromToken}),this._set({key:"_fromAmount",value:null,target:this._fromAmount}),this._set({key:"_toToken",value:null,target:this._toToken}),this._set({key:"_toAmount",value:null,target:this._toAmount})};_sortTokenOptions(t,e){if(t.isAvailable&&!e.isAvailable)return-1;if(!t.isAvailable&&e.isAvailable)return 1;if(t.token.amount.gtn(0)&&!e.token.amount.gtn(0))return-1;if(e.token.amount.gtn(0)&&!t.token.amount.gtn(0)||t.token.isDeprecated&&!e.token.isDeprecated)return 1;if(!t.token.isDeprecated&&e.token.isDeprecated)return-1;if(t.token.isCommunity&&!e.token.isCommunity)return 1;if(!t.token.isCommunity&&e.token.isCommunity||t.token.amountUSD&&!e.token.amountUSD)return-1;if(!t.token.amountUSD&&e.token.amountUSD)return 1;if(t.token.amountUSD&&e.token.amountUSD)return e.token.amountUSD-t.token.amountUSD;if(t.token.amount.gt(e.token.amount))return-1;if(t.token.amount.lt(e.token.amount))return 1;const n=U.sortReverse(t.token,e.token);return n!==0?n:t.token.symbol.localeCompare(e.token.symbol)}_getFromTokenOptionByToken(t){return this.fromTokenOptions?.find(e=>e.token.contractAddress.equals(t.contractAddress))??null}_getToTokenOptionByToken(t){return this.toTokenOptions?.find(e=>e.token.contractAddress.equals(t.contractAddress))??null}_defineTokenFromSource(t){return t instanceof U?t:typeof t=="string"?this.dependencies.AssetsStore.getAsset(t):null}_defineTokenAmountFromSource(t,e){let n=null;if(t instanceof P&&t.contractAddress.equals(e.contractAddress)&&(n=t),typeof t=="string")try{n=P.fromFloat(t,e)}catch{}return n&&n.amount.gten(0)?n:null}get storageStoreKey(){return this.constructor.name}getStorageState=()=>{try{const t=this.dependencies.StorageService.getItem(this.storageStoreKey);if(!t)return{};const e=JSON.parse(t);if(Object.values(e).some(Boolean))return e}catch{}return{}}}c([D],m.prototype,"_fromToken",2);c([D],m.prototype,"_fromAmount",2);c([D],m.prototype,"_toToken",2);c([D],m.prototype,"_toAmount",2);c([A],m.prototype,"fromToken",1);c([A],m.prototype,"fromAmount",1);c([A],m.prototype,"toToken",1);c([A],m.prototype,"toAmount",1);c([A],m.prototype,"state",1);c([A],m.prototype,"fromTokenOptions",1);c([A],m.prototype,"toTokenOptions",1);c([A],m.prototype,"readyToBeInitialized",1);c([x.bound],m.prototype,"setFromToken",1);c([x.bound],m.prototype,"setFromAmount",1);c([x.bound],m.prototype,"setToToken",1);c([x.bound],m.prototype,"setToAmount",1);c([x.bound],m.prototype,"initState",1);c([x.bound],m.prototype,"resetState",2);var Tt="Expected a function",z=NaN,pt="[object Symbol]",gt=/^\s+|\s+$/g,yt=/^[-+]0x[0-9a-f]+$/i,At=/^0b[01]+$/i,_t=/^0o[0-7]+$/i,bt=parseInt,vt=typeof j=="object"&&j&&j.Object===Object&&j,xt=typeof self=="object"&&self&&self.Object===Object&&self,St=vt||xt||Function("return this")(),Ct=Object.prototype,Ot=Ct.toString,Et=Math.max,Ft=Math.min,B=function(){return St.Date.now()};function It(o,t,e){var n,r,s,i,a,f,h=0,S=!1,l=!1,_=!0;if(typeof o!="function")throw new TypeError(Tt);t=q(t)||0,R(e)&&(S=!!e.leading,l="maxWait"in e,s=l?Et(q(e.maxWait)||0,t):s,_="trailing"in e?!!e.trailing:_);function C(u){var g=n,E=r;return n=r=void 0,h=u,i=o.apply(E,g),i}function O(u){return h=u,a=setTimeout(p,t),S?C(u):i}function F(u){var g=u-f,E=u-h,N=t-g;return l?Ft(N,s-E):N}function T(u){var g=u-f,E=u-h;return f===void 0||g>=t||g<0||l&&E>=s}function p(){var u=B();if(T(u))return I(u);a=setTimeout(p,F(u))}function I(u){return a=void 0,_&&n?C(u):(n=r=void 0,i)}function d(){a!==void 0&&clearTimeout(a),h=0,n=f=r=a=void 0}function b(){return a===void 0?i:I(B())}function w(){var u=B(),g=T(u);if(n=arguments,r=this,f=u,g){if(a===void 0)return O(f);if(l)return a=setTimeout(p,t),C(f)}return a===void 0&&(a=setTimeout(p,t)),i}return w.cancel=d,w.flush=b,w}function R(o){var t=typeof o;return!!o&&(t=="object"||t=="function")}function jt(o){return!!o&&typeof o=="object"}function Pt(o){return typeof o=="symbol"||jt(o)&&Ot.call(o)==pt}function q(o){if(typeof o=="number")return o;if(Pt(o))return z;if(R(o)){var t=typeof o.valueOf=="function"?o.valueOf():o;o=R(t)?t+"":t}if(typeof o!="string")return o===0?o:+o;o=o.replace(gt,"");var e=At.test(o);return e||_t.test(o)?bt(o.slice(2),e?2:8):yt.test(o)?z:+o}var Dt=It;const zt=Q(Dt),wt=Y.forwardRef(({className:o,onCheckedChange:t,...e},n)=>k.jsx(G,{ref:n,className:st("animate-ui-element-transition w-6 h-6 rounded-[6px] border border-stroke","hover:border-accent","disabled:cursor-not-allowed disabled:opacity-50 disabled:border-stroke","data-[state=checked]:bg-accent data-[state=checked]:border-accent",o),onCheckedChange:t?r=>{t(typeof r=="boolean"?r:!1)}:void 0,...e,children:k.jsx(dt,{forceMount:e.checked||e.disabled||void 0,className:"flex items-center justify-center text-white",children:e.checked?k.jsx(at,{}):k.jsx(ut,{})})}));wt.displayName=G.displayName;export{wt as C,m as P,zt as d};
