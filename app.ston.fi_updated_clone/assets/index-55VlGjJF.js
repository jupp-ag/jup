import{r as n}from"./vendors-Dtot3KuJ.js";import{c as H,j as d,u as V,e as z,b8 as q,P as D,a as m,p as J}from"./index-rYEy9Y7-.js";import{a6 as Q,u as W}from"./Button-BDyEdmnj.js";function fe(e){const t=n.useRef({value:e,previous:e});return n.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var _="rovingFocusGroup.onEntryFocus",X={bubbles:!1,cancelable:!0},b="RovingFocusGroup",[h,G,Z]=Q(b),[$,de]=H(b,[Z]),[ee,te]=$(b),N=n.forwardRef((e,t)=>d.jsx(h.Provider,{scope:e.__scopeRovingFocusGroup,children:d.jsx(h.Slot,{scope:e.__scopeRovingFocusGroup,children:d.jsx(oe,{...e,ref:t})})}));N.displayName=b;var oe=n.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:c,orientation:o,loop:F=!1,dir:g,currentTabStopId:R,defaultCurrentTabStopId:E,onCurrentTabStopIdChange:p,onEntryFocus:u,preventScrollOnEntryFocus:w=!1,...C}=e,v=n.useRef(null),I=V(t,v),r=W(g),[l=null,T]=z({prop:R,defaultProp:E,onChange:p}),[a,i]=n.useState(!1),S=q(u),j=G(c),x=n.useRef(!1),[k,y]=n.useState(0);return n.useEffect(()=>{const s=v.current;if(s)return s.addEventListener(_,S),()=>s.removeEventListener(_,S)},[S]),d.jsx(ee,{scope:c,orientation:o,dir:r,loop:F,currentTabStopId:l,onItemFocus:n.useCallback(s=>T(s),[T]),onItemShiftTab:n.useCallback(()=>i(!0),[]),onFocusableItemAdd:n.useCallback(()=>y(s=>s+1),[]),onFocusableItemRemove:n.useCallback(()=>y(s=>s-1),[]),children:d.jsx(D.div,{tabIndex:a||k===0?-1:0,"data-orientation":o,...C,ref:I,style:{outline:"none",...e.style},onMouseDown:m(e.onMouseDown,()=>{x.current=!0}),onFocus:m(e.onFocus,s=>{const L=!x.current;if(s.target===s.currentTarget&&L&&!a){const P=new CustomEvent(_,X);if(s.currentTarget.dispatchEvent(P),!P.defaultPrevented){const A=j().filter(f=>f.focusable),U=A.find(f=>f.active),B=A.find(f=>f.id===l),Y=[U,B,...A].filter(Boolean).map(f=>f.ref.current);M(Y,w)}}x.current=!1}),onBlur:m(e.onBlur,()=>i(!1))})})}),O="RovingFocusGroupItem",K=n.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:c,focusable:o=!0,active:F=!1,tabStopId:g,...R}=e,E=J(),p=g||E,u=te(O,c),w=u.currentTabStopId===p,C=G(c),{onFocusableItemAdd:v,onFocusableItemRemove:I}=u;return n.useEffect(()=>{if(o)return v(),()=>I()},[o,v,I]),d.jsx(h.ItemSlot,{scope:c,id:p,focusable:o,active:F,children:d.jsx(D.span,{tabIndex:w?0:-1,"data-orientation":u.orientation,...R,ref:t,onMouseDown:m(e.onMouseDown,r=>{o?u.onItemFocus(p):r.preventDefault()}),onFocus:m(e.onFocus,()=>u.onItemFocus(p)),onKeyDown:m(e.onKeyDown,r=>{if(r.key==="Tab"&&r.shiftKey){u.onItemShiftTab();return}if(r.target!==r.currentTarget)return;const l=se(r,u.orientation,u.dir);if(l!==void 0){if(r.metaKey||r.ctrlKey||r.altKey||r.shiftKey)return;r.preventDefault();let a=C().filter(i=>i.focusable).map(i=>i.ref.current);if(l==="last")a.reverse();else if(l==="prev"||l==="next"){l==="prev"&&a.reverse();const i=a.indexOf(r.currentTarget);a=u.loop?ce(a,i+1):a.slice(i+1)}setTimeout(()=>M(a))}})})})});K.displayName=O;var re={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ne(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function se(e,t,c){const o=ne(e.key,c);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return re[o]}function M(e,t=!1){const c=document.activeElement;for(const o of e)if(o===c||(o.focus({preventScroll:t}),document.activeElement!==c))return}function ce(e,t){return e.map((c,o)=>e[(t+o)%e.length])}var pe=N,me=K;export{me as I,pe as R,de as c,fe as u};
