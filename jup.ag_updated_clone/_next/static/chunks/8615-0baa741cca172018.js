"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8615,4710],{53636:function(e,t,n){var r=n(63956),a=n(54423),i=n(93981),s=n(87821),l=n(25546),o=n(29541),c=["currency"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.currency,n=void 0===t||t,r=(0,a.Z)(e,c),d=i.useMemo((function(){return","===l.A5?".":","}),[]);return(0,o.jsx)(s.Z,u(u({displayType:"text",prefix:n?"$":""},r),{},{decimalSeparator:l.A5,thousandSeparator:d}))}},78615:function(e,t,n){n.d(t,{Z:function(){return He}});var r=n(27195),a=n(97620),i=n(8857),s=n.n(i),l=n(73360),o=n(7761),c=n(43165),d=n(14518),u=n(93981),m=n(71048),x=n(87821),f=n(39787),v=n(71052),h=n(84985),p=n(17769),b=n(76613),g=n(94728),w=n(13838),j=n(13170),y=n(69667),k=n(24201),N=n(25546),P=n(99438),C=n(26260),S=n(3561),M=n(70107),Z=n(59978),A=n(45462),O=n(33130),T=n(66956),V=n(41118),F=n(71932),D=n(88381),I=n(49488),_=n(82574),B=n(3011),R=n(49839),L=n(90342),E=n(57722),K=n(45009),H=n(29541),U=3e5,q=function(e){var t=e.data,n=e.fillHistory,a=t.nextCycleAt,i=t.isLaunchToken,l=t.publicKey,c=t.warnings,d=c.tooFarFromExecution,m=c.lessThanDCALimit,x=u.useMemo((function(){return l.toBase58()}),[l]),f=(0,K.a)(["dca-errors",m,x],(0,r.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://errors.jup.ag/logs?service=dca&accountID=".concat(x));case 2:if(!(t=e.sent).ok){e.next=8;break}return e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n.data.length?n.data[0].friendlyError:void 0);case 8:case"end":return e.stop()}}),e)}))),{enabled:!m,keepPreviousData:!0,retry:5,retryDelay:2e3}).data,v=u.useMemo((function(){var e=(new Date).getTime(),t=a&&e-a.getTime()>U,r=(null===n||void 0===n?void 0:n.length)&&e-n[0].confirmedAt.getTime()>U;return t&&r}),[n,a]);return m?(0,H.jsx)("div",{className:"rounded-lg bg-v2-lily/5 p-5 space-y-2  border border-v2-lily/5 mb-2",children:(0,H.jsxs)("div",{className:"text-warning text-xs flex space-x-1",children:[(0,H.jsx)("div",{className:"w-3 h-3 mt-0.5",children:(0,H.jsx)(F.Z,{width:12,height:12})}),(0,H.jsx)("div",{children:o.ag._("Jupiter is not filling this DCA because the value per order is less than {ACTIVE_DCA_MINIMUM_VALUE_PER_ORDER} USD",{ACTIVE_DCA_MINIMUM_VALUE_PER_ORDER:E.hl})})]})}):f&&v?(0,H.jsx)("div",{className:"rounded-lg bg-v2-lily/5 p-5 space-y-2  border border-v2-lily/5 mb-2",children:(0,H.jsxs)("div",{className:"text-warning text-xs flex space-x-1",children:[(0,H.jsx)("div",{className:"w-3 h-3 mt-0.5",children:(0,H.jsx)(F.Z,{width:12,height:12})}),(0,H.jsx)("div",{className:"flex flex-col space-y-1",children:(0,H.jsx)("div",{children:f})})]})}):d&&!i?(0,H.jsx)("div",{className:"rounded-lg bg-v2-lily/5 p-5 space-y-2  border border-v2-lily/5 mb-2",children:(0,H.jsxs)("div",{className:"text-warning text-xs flex space-x-1",children:[(0,H.jsx)("div",{className:"w-3 h-3 mt-0.5",children:(0,H.jsx)(F.Z,{width:12,height:12})}),(0,H.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,H.jsx)("span",{children:o.ag._("Jupiter tried to execute your order multiple times but could not do so. This can happen when:")}),(0,H.jsxs)("div",{className:"flex space-x-1",children:[(0,H.jsx)("span",{children:o.ag._("-")}),(0,H.jsx)("span",{children:o.ag._("The market no longer exists")})]}),(0,H.jsxs)("div",{className:"flex space-x-1",children:[(0,H.jsx)("span",{children:o.ag._("-")}),(0,H.jsx)("span",{children:o.ag._("The market price is out of the range of your advanced pricing strategy")})]}),(0,H.jsxs)("div",{className:"flex space-x-1",children:[(0,H.jsx)("span",{children:o.ag._("-")}),(0,H.jsx)("span",{children:o.ag._("The market is extremely volatile")})]}),(0,H.jsx)("div",{className:"pt-3",children:(0,H.jsx)("span",{className:"italic",children:o.ag._("Note that this DCA will continue to be attempted and your end date may be extended until your deposited tokens are fully utilized")})})]})]})}):null},W=n(91799),G=function(e){var t,n,i=e.dcaClient,l=e.data,c=e.fillHistory,m=e.hideButtons,x=(0,p.NL)(),v=(0,h.Os)().publicKey,g=(0,B.KO)(_.P.refetchId),j=(0,a.Z)(g,1)[0],y=(0,h.Bn)().connection,k=u.useState(!1),P=(0,a.Z)(k,2),C=P[0],S=P[1],M=(0,h.C9)(),A=(0,O.R3)(),E=(0,B.KO)(R.yz),K=(0,a.Z)(E,1)[0],U=(0,L.gs)().priorityLevel,G=(0,I.QX)().isReady,Q=u.useMemo((function(){return null===l||void 0===l?void 0:l.outRemaining.gt(0)}),[null===l||void 0===l?void 0:l.outRemaining]),Y=u.useCallback((0,r.Z)(s().mark((function e(){var t,n,r,a,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Q&&l&&v){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,i.withdraw({user:v,dca:l.publicKey,outputMint:l.outputToken.address,withdrawOutAmount:null===l||void 0===l?void 0:l.outRemainingInBN});case 5:return t=e.sent,n=t.tx,e.next=9,y.getLatestBlockhash("confirmed");case 9:return r=e.sent,a=r.blockhash,c=r.lastValidBlockHeight,n.recentBlockhash=a,n.lastValidBlockHeight=c,n.feePayer=v,e.next=17,A(n,{blockhash:a,lastValidBlockHeight:c,idl:f.xO,idlProgramId:f.PN["mainnet-beta"]},{errorMessage:o.ag._("Failed to withdraw balances. Please try again."),submittingMessage:o.ag._("Withdrawing balances"),successMessage:o.ag._("Successfully withdrawed {0} {1}",{0:l.outRemaining.toString(),1:l.outputToken.symbol}),referenceFee:"MEDIUM"===U?K.loAndDCA:"HIGH"===U&&K.loAndDCA?1.5*K.loAndDCA:"VERY_HIGH"===U&&K.loAndDCA?3*K.loAndDCA:void 0});case 17:x.invalidateQueries({queryKey:["dca"]}),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0);case 23:if(e.prev=23,l){e.next=26;break}return e.abrupt("return");case 26:return M([l.inputToken.address,l.outputToken.address]),e.finish(23);case 28:case"end":return e.stop()}}),e,null,[[0,20,23,28]])}))),[Q,l,v,i,y,A,x,K.loAndDCA,U,M]),z=u.useCallback((0,r.Z)(s().mark((function e(){var t,n,r,a,c,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l&&v){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,i.closeDCA({dca:l.publicKey,user:v});case 5:return t=e.sent,n=t.tx,e.next=9,y.getLatestBlockhash("confirmed");case 9:return r=e.sent,a=r.blockhash,c=r.lastValidBlockHeight,n.recentBlockhash=a,n.lastValidBlockHeight=c,n.feePayer=v,e.next=17,A(n,{blockhash:a,lastValidBlockHeight:c,idl:f.xO,idlProgramId:f.PN["mainnet-beta"]},{errorMessage:o.ag._("Failed to close order. Please try again."),submittingMessage:o.ag._("Closing DCA order"),successMessage:o.ag._("Successfully closed order"),referenceFee:"MEDIUM"===U?K.loAndDCA:"HIGH"===U&&K.loAndDCA?1.5*K.loAndDCA:"VERY_HIGH"===U&&K.loAndDCA?3*K.loAndDCA:void 0,minimumFee:R.uo,requestComputeBudgetLimit:3e5});case 17:d=e.sent,d.success&&x.setQueryData(["dca",null===v||void 0===v?void 0:v.toString(),j],(function(e){return e?e.filter((function(e){return!e.publicKey.equals(l.publicKey)})):e})),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),console.log(e.t0);case 25:if(e.prev=25,l){e.next=28;break}return e.abrupt("return");case 28:return M([l.inputToken.address,l.outputToken.address]),e.finish(25);case 30:case"end":return e.stop()}}),e,null,[[0,22,25,30]])}))),[y,l,i,A,U,v,x,K.loAndDCA,M,j]),J=(0,T.b)(null===l||void 0===l?void 0:l.inputToken,null===l||void 0===l?void 0:l.outputToken).baseTokenInfo,$=u.useMemo((function(){var e;if(!V.d.find((function(e){var t,n;return e===(null===l||void 0===l||null===(t=l.inputToken)||void 0===t?void 0:t.address)||e===(null===l||void 0===l||null===(n=l.outputToken)||void 0===n?void 0:n.address)})))return null;var t=(null===l||void 0===l||null===(e=l.inputToken)||void 0===e?void 0:e.address)===(null===J||void 0===J?void 0:J.address);return{isFromBase:Boolean(t)}}),[null===J||void 0===J?void 0:J.address,null===l||void 0===l||null===(t=l.inputToken)||void 0===t?void 0:t.address,null===l||void 0===l||null===(n=l.outputToken)||void 0===n?void 0:n.address]);if(!l)return null;var X=l.inputToken,ee=l.outputToken,te=l.warnings,ne=te.hasUnknownToken,re=(te.tooFarFromExecution,te.lessThanDCALimit,l.createdAt),ae=l.totalFilled,ie=l.cycleFrequency,se=l.inWithdrawn,le=l.outWithdrawn,oe=l.outRemaining,ce=l.initialDeposited,de=l.avgPrice,ue=l.inverseAvgPrice,me=l.balance,xe=l.cyclesLeft,fe=l.filledPercentage,ve=l.nextCycleAt,he=l.minOutAmount,pe=l.maxOutAmount,be=l.inRemaining,ge=l.isLaunchToken,we=l.inAmountPerCycle;l.publicKey;return(0,H.jsxs)("div",{className:"bg-[#161B27] p-6 text-xs",children:[ne?(0,H.jsx)("div",{className:"rounded-lg bg-v2-lily/5 p-5 space-y-2  border border-v2-lily/5 mb-2",children:(0,H.jsxs)("div",{className:"text-warning text-xs flex space-x-1",children:[(0,H.jsx)("div",{className:"w-3 h-3 mt-0.5",children:(0,H.jsx)(F.Z,{width:12,height:12})}),(0,H.jsx)("span",{children:o.ag._("One or both tokens in your order can no longer be found on the token list.")})]})}):null,(0,H.jsx)(q,{data:l,fillHistory:c}),(0,H.jsxs)("div",{className:"rounded-lg bg-v2-lily/5 p-5 space-y-2  border border-v2-lily/5",children:[(0,H.jsxs)("div",{className:"flex justify-between",children:[(0,H.jsx)("span",{className:"text-white/50",children:o.ag._("DCA {0} balance",{0:X.symbol})}),(0,H.jsxs)("span",{className:"text-v2-lily/[.75] font-semibold",children:[me.toString()," ",X.symbol]})]}),(0,H.jsxs)("div",{className:"flex justify-between",children:[(0,H.jsx)("span",{className:"text-white/50",children:o.ag._("DCA {0} balance",{0:ee.symbol})}),(0,H.jsxs)("span",{className:"text-v2-lily/[.75] font-semibold",children:[oe.toString()," ",ee.symbol]})]}),(0,H.jsxs)("div",{className:"flex justify-between",children:[(0,H.jsx)("span",{className:"text-white/50",children:o.ag._("Amount Withdrawn")}),se?(0,H.jsxs)("div",{className:"flex flex-col",children:[(0,H.jsx)("span",{className:"text-v2-lily/[.75] font-semibold text-right",children:se?"".concat(se.toString()," ").concat(X.symbol):null}),(0,H.jsxs)("span",{className:"text-v2-lily/[.75] font-semibold text-right",children:[le.toString()," ",ee.symbol]})]}):(0,H.jsxs)("span",{className:"text-v2-lily/[.75] font-semibold text-right",children:[le.toString()," ",ee.symbol]})]})]}),(0,H.jsxs)("div",{className:"mt-5 space-y-3 text-v2-lily/30",children:[(0,H.jsxs)("div",{className:"flex justify-between",children:[(0,H.jsx)("span",{children:o.ag._("Total Deposited")}),(0,H.jsxs)("span",{children:[b.uf.format(ce.toNumber())," ",X.symbol]})]}),(0,H.jsxs)("div",{className:"flex justify-between",children:[(0,H.jsx)("span",{children:o.ag._("Total Spent")}),(0,H.jsxs)("span",{children:[b.uf.format(ae.toNumber())," ",X.symbol," (",new w.Z(fe).mul(100).round().toNumber(),"%)"]})]}),(0,H.jsxs)("div",{className:"flex justify-between",children:[(0,H.jsx)("span",{children:o.ag._("Each order size")}),(0,H.jsxs)("span",{children:[we.toString()," ",X.symbol]})]}),de.isNaN()?null:(0,H.jsxs)("div",{className:"flex justify-between",children:[(0,H.jsx)("span",{children:be.eq(0)?o.ag._("Average Price"):o.ag._("Current Average Price")}),(0,H.jsx)("span",{className:"cursor-pointer hover:text-v2-primary",onClick:function(){return S(!C)},children:C?o.ag._("{0}  {1} per {2}",{0:(0,D.M)({value:+ue.toSignificantDigits(6)}),1:ee.symbol,2:X.symbol}):o.ag._("{0}  {1} per {2}",{0:(0,D.M)({value:+de.toSignificantDigits(6)}),1:X.symbol,2:ee.symbol})})]}),(0,H.jsx)(W.Z,{}),(0,H.jsxs)("div",{className:"flex justify-between",children:[(0,H.jsx)("span",{children:o.ag._("Buying")}),(0,H.jsxs)("div",{className:"flex space-x-1",children:[(0,H.jsx)(Z.Z,{info:ee,width:16,height:16}),(0,H.jsx)("span",{children:ee.symbol})]})]}),(0,H.jsxs)("div",{className:"flex justify-between",children:[(0,H.jsx)("span",{children:o.ag._("Interval")}),(0,H.jsx)("span",{children:o.ag._("Every {0}(s)",{0:(0,N.FM)(ie)})})]}),(0,H.jsxs)("div",{className:"flex justify-between",children:[(0,H.jsx)("span",{children:o.ag._("# of Orders Left")}),(0,H.jsx)("span",{children:xe.toNumber()})]}),ve?(0,H.jsxs)("div",{className:"flex justify-between",children:[(0,H.jsx)("span",{children:o.ag._("Next Order")}),ge&&ve.toString()===re.toString()&&!G?(0,H.jsx)("span",{children:"Start when trading is enabled"}):(0,H.jsx)("span",{children:(0,d.Z)(ve,"dd MMM y HH:mm")})]}):null,(0,H.jsxs)("div",{className:"flex justify-between",children:[(0,H.jsx)("span",{children:o.ag._("Created")}),(0,H.jsx)("span",{children:(0,d.Z)(re,"dd MMM y HH:mm")})]}),pe?(0,H.jsxs)("div",{className:"flex items-center justify-between",children:[(0,H.jsx)("span",{children:o.ag._("Minimum Price")}),(0,H.jsx)("div",{className:"flex items-center h-2",children:"".concat(pe.toFixed(null!==$&&void 0!==$&&$.isFromBase?ee.decimals:X.decimals)," ").concat(null!==$&&void 0!==$&&$.isFromBase?ee.symbol:X.symbol)})]}):null,he?(0,H.jsxs)("div",{className:"flex items-center justify-between",children:[(0,H.jsx)("span",{children:o.ag._("Maximum Price")}),(0,H.jsx)("div",{className:"flex items-center h-2",children:"".concat(he.toFixed(null!==$&&void 0!==$&&$.isFromBase?ee.decimals:X.decimals)," ").concat(null!==$&&void 0!==$&&$.isFromBase?ee.symbol:X.symbol)})]}):null]}),m?null:(0,H.jsxs)("div",{className:"mt-6 flex flex-col lg:flex-row w-full space-y-2 lg:space-y-0 lg:space-x-3",children:[Q?(0,H.jsx)("button",{onClick:Y,type:"button",className:"w-full px-4 py-1.5 rounded-lg text-sm text-white border border-v2-lily/10 bg-[#121D28] hover:bg-v2-primary/5 hover:bg-gradient-to-r from-[rgba(199,242,132,1))] to-[rgba(0,190,240,1)] dark:hover:border dark:hover:border-v2-primary disabled:opacity-50 disabled:cursor-not-allowed",children:o.ag._("Withdraw balance")}):null,(0,H.jsx)("button",{onClick:z,type:"button",className:"w-full px-4 py-1.5 rounded-lg text-sm text-white border border-v2-lily/10 bg-[#121D28] hover:bg-v2-primary/5 hover:bg-gradient-to-r from-[rgba(199,242,132,1))] to-[rgba(0,190,240,1)] dark:hover:border dark:hover:border-v2-primary",children:l.balance.gt(0)?o.ag._("Close and Withdraw"):o.ag._("Close DCA")})]})]})},Q=n(24628),Y=function(e){var t=e.fillHistory,n=t.inputMint,r=t.outputMint,a=t.inAmount,i=t.outAmount,s=t.confirmedAt,l=t.txId,o=e.inverseRate,c=e.setInverseRate,m=(0,h.Bn)().getTokenInfo,x=(0,h.oP)().getExplorer,f=u.useMemo((function(){return{fromTokenInfo:m(n.toString()),toTokenInfo:m(r.toString())}}),[m,n,r]),v=f.fromTokenInfo,p=f.toTokenInfo,g=u.useMemo((function(){return v?new w.Z(a).div(Math.pow(10,v.decimals)).toString():void 0}),[v,a]),j=u.useMemo((function(){return p?new w.Z(i).div(Math.pow(10,p.decimals)).toString():void 0}),[p,i]),y=u.useMemo((function(){return(0,d.Z)(s,"y/MM/dd HH:mm")}),[s]),k=u.useMemo((function(){return x(l)}),[x,l]),P=(0,u.useMemo)((function(){return v&&p?new w.Z(new w.Z(i).div(Math.pow(10,p.decimals))).div(new w.Z(a).div(Math.pow(10,v.decimals))):new w.Z(0)}),[v,a,i,p]);return(0,H.jsxs)("div",{className:"text-xs flex space-x-4 justify-between",children:[(0,H.jsx)("span",{className:"w-[80px] text-v2-lily/50 flex space-x-1 items-center",children:g?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)("span",{children:(0,N.Om)(g,5)}),(0,H.jsx)(Z.Z,{info:v,width:16,height:16})]}):"N/A"}),(0,H.jsx)("span",{className:"w-[80px] text-v2-lily/50 flex items-center cursor-pointer hover:text-v2-primary",onClick:function(){return c(!o)},children:P.gt(0)?o?(0,D.M)({value:+new w.Z(1).div(P).toSignificantDigits(6)}):(0,D.M)({value:+P.toSignificantDigits(6)}):"N/A"}),(0,H.jsx)("span",{className:(0,b.cn)("w-[100px] flex space-x-1 items-center",j?"":"text-v2-lily/50"),children:j?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)("span",{children:(0,D.M)({value:+new w.Z(j).toSignificantDigits(6)})}),(0,H.jsx)(Z.Z,{info:p,width:16,height:16})]}):"N/A"}),(0,H.jsx)("span",{className:"w-[120px] text-v2-lily/50 flex items-center",children:y}),(0,H.jsx)("div",{className:"w-3 flex items-center",children:(0,H.jsx)("a",{href:k,target:"_blank",rel:"noreferrer",className:"w-3 h-5 text-xs text-v2-lily/50 hover:text-v2-primary",children:(0,H.jsx)(Q.Z,{width:12,height:20})})})]})},z=function(e){var t=e.fillHistory,n=u.useState(!0),r=(0,a.Z)(n,2),i=r[0],s=r[1];return(0,H.jsxs)("div",{className:"p-6 bg-[#161B27] min-h-[300px]",children:[(0,H.jsxs)("div",{className:"flex w-full justify-between space-x-4 text-xs text-v2-lily/50",children:[(0,H.jsx)("span",{className:"w-[80px]",children:o.ag._("From")}),(0,H.jsx)("span",{className:"w-[80px]",children:o.ag._("Rate")}),(0,H.jsx)("span",{className:"w-[100px]",children:o.ag._("To")}),(0,H.jsx)("span",{className:"w-[120px]",children:o.ag._("Date/Time")}),(0,H.jsx)("div",{className:"w-3"})]}),(0,H.jsx)("div",{className:"mt-3 space-y-3 max-h-[300px] overflow-y-auto hideScrollbar",children:t&&(null===t||void 0===t?void 0:t.length)>0?null===t||void 0===t?void 0:t.map((function(e){return(0,H.jsx)(Y,{fillHistory:e,inverseRate:i,setInverseRate:s},e.txId)})):(0,H.jsx)("div",{className:"text-v2-lily/50 mt-4 text-xs flex items-center justify-center",children:o.ag._("No filled trades yet.")})})]})},J=n(64508),$=n.n(J),X=n(3955),ee=function(e){var t=e.data,n=e.dcaClient,i=e.hideButtons,l=u.useState(!1),c=(0,a.Z)(l,2),d=c[0],m=c[1],x=u.useState("Overview"),f=(0,a.Z)(x,2),v=f[0],p=f[1],b=t.inputToken,g=t.outputToken,j=t.netDeposited,N=t.filledPercentage,P=t.isLaunchToken,C=t.warnings,S=C.tooFarFromExecution,M=C.hasUnknownToken,O=(0,h.Os)().publicKey,T=(0,h.oP)().getExplorer,V=(0,B.KO)(_.P.refetchId),D=(0,a.Z)(V,1)[0],I=(0,K.a)(["dca-fill-history",null===O||void 0===O?void 0:O.toString(),t.publicKey.toString(),D],(function(){return O?t.fillHistory&&t.fillHistory.length>0?t.fillHistory:n.getFillHistory(t.publicKey.toString()):[]}),{keepPreviousData:!0}).data,R=(0,K.a)(["missing-signatures",t.publicKey.toString()],(0,r.Z)(s().mark((function e(){var n,r,a,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://dca-api.jup.ag/missing-signatures/".concat(t.publicKey.toString()));case 3:if(!(n=e.sent).ok){e.next=13;break}return e.next=7,n.json();case 7:if(r=e.sent,a=r.data,!(i=a.missingSignatures).length){e.next=13;break}return e.next=13,fetch("https://dca-api.jup.ag/recover-signatures",{method:"POST",body:JSON.stringify({missingSignatures:i})});case 13:e.next=17;break;case 15:e.prev=15,e.t0=e.catch(0);case 17:case"end":return e.stop()}}),e,null,[[0,15]])}))),{enabled:!1}).refetch,L=u.useMemo((function(){return T(t.publicKey.toString(),"account")}),[T,t.publicKey]);return(0,H.jsxs)("div",{className:"bg-dca-item rounded-lg mb-2",children:[(0,H.jsxs)("button",{className:"flex justify-between items-center h-[64px] w-full text-xs px-2 md:px-4",onClick:function(){d||R(),m((function(e){return!e}))},children:[(0,H.jsxs)("div",{className:"text-left basis-2/12 flex items-center space-x-2",children:[!M&&!S||P?(0,H.jsxs)("div",{className:"flex -space-x-2 cursor-pointer",children:[(0,H.jsx)(Z.Z,{info:b,height:20,width:20}),(0,H.jsx)(Z.Z,{info:g,height:20,width:20})]}):(0,H.jsx)("div",{className:"text-warning fill-current",children:(0,H.jsx)(F.Z,{height:20,width:20})}),(0,H.jsxs)("div",{className:"flex items-center justify-center space-x-1.5 text-white",children:[(0,H.jsx)("span",{children:b.symbol}),(0,H.jsx)("div",{className:"text-v2-lily/50 fill-current",children:(0,H.jsx)(A.Z,{width:10,height:10})}),(0,H.jsx)("span",{children:g.symbol})]}),(0,H.jsx)($(),{href:L,target:"_blank",className:"text-v2-lily/50 hover:text-v2-primary",children:(0,H.jsx)(Q.Z,{width:12,height:20})})]}),(0,H.jsxs)("div",{className:"text-white/[.75]",children:[j.toString()," ",b.symbol]}),(0,H.jsxs)("div",{className:"flex space-x-4",children:[(0,H.jsx)("div",{className:"bg-dca-fill-bg w-[60px] md:w-[106px] h-2 rounded-xl overflow-hidden",children:(0,H.jsx)("div",{className:"h-full rounded-xl bg-[#19C5E4]",style:{width:new w.Z(N).mul(100).toNumber()+"%"}})}),(0,H.jsx)("div",{className:(0,k.cn)(["text-v2-lily/[.35] fill-current",d?"":"-rotate-90"]),children:(0,H.jsx)(y.Z,{})})]})]}),(0,H.jsxs)("div",{className:(0,k.cn)("bg-dca-item rounded-b-lg overflow-hidden transition-max-height duration-200",d?"animate-fade-in":"animate-fade-out max-h-[0px]"),children:[(0,H.jsxs)("div",{className:"flex text-sm space-x-2 px-2 md:space-x-4 md:px-4",children:[(0,H.jsx)("button",{type:"button",onClick:function(){return p("Overview")},className:(0,k.cn)("text-v2-lily/50 p-3 border-b-2 border-transparent","Overview"===v?"font-semibold text-white border-b-v2-primary":""),children:o.ag._("Overview")}),(0,H.jsx)("button",{type:"button",onClick:function(){return p("Orders")},className:(0,k.cn)("text-v2-lily/50 p-3 border-b-2 border-transparent","Orders"===v?"font-semibold text-white border-b-v2-primary":""),children:o.ag._("Orders {0}",{0:null!==I&&void 0!==I&&I.length?"(".concat(null===I||void 0===I?void 0:I.length,")"):""})})]}),"Overview"===v?(0,H.jsx)(G,{dcaClient:n,data:t,hideButtons:i,fillHistory:I}):null,"Orders"===v?(0,H.jsx)(z,{fillHistory:I}):null]})]})},te=function(e){var t=e.dca,n=e.dcaClient,r=(0,h.Bn)(),i=r.getTokenInfo,s=r.newTokenListMap,l=(0,h.y6)().tokenPriceMap,c=u.useMemo((function(){return[i(t.account.inputMint.toString()),i(t.account.outputMint.toString())]}),[t.account.inputMint,t.account.outputMint,i]),d=(0,a.Z)(c,2),m=d[0],x=d[1],f=u.useMemo((function(){var e;return l&&m?null===(e=l[null===m||void 0===m?void 0:m.address])||void 0===e?void 0:e.usd:null}),[l,m]),v=(0,T.b)(m,x).baseTokenInfo,p=u.useMemo((function(){if(!V.d.find((function(e){return e===(null===m||void 0===m?void 0:m.address)||e===(null===x||void 0===x?void 0:x.address)})))return null;var e=(null===m||void 0===m?void 0:m.address)===(null===v||void 0===v?void 0:v.address);return{isFromBase:Boolean(e)}}),[null===v||void 0===v?void 0:v.address,null===m||void 0===m?void 0:m.address,null===x||void 0===x?void 0:x.address]),b=u.useMemo((function(){var e=t.account,n=e.inputMint,r=e.outputMint,a=e.createdAt,l=e.cycleFrequency,c=e.outReceived,d=e.outWithdrawn,u=e.inAmountPerCycle,m=e.inDeposited,x=e.inUsed,v=e.inWithdrawn,h=e.nextCycleAt,b=e.nextCycleAmountLeft,g=e.minOutAmount,j=e.maxOutAmount,y=m.sub(v).sub(x),k=i(n.toString()),N=i(r.toString()),P=k?new w.Z(x.toString()).div(Math.pow(10,k.decimals)).toFixed(k.decimals):new w.Z(0),C=N?new w.Z(c.toString()).div(Math.pow(10,N.decimals)).toFixed(N.decimals):new w.Z(0),S=new w.Z(P).div(new w.Z(C)),M=new w.Z(C).div(new w.Z(P)),Z=new w.Z(y.toString()).div(u.toString()).floor(),A=i(n.toString()),O=null!==A&&void 0!==A?A:(0,X.T)({address:n.toString()}),T=i(r.toString()),V=null!==T&&void 0!==T?T:(0,X.T)({address:r.toString()}),F=new w.Z(h.toString()).add(3600).lte(Date.now()/1e3);w.Z.set({rounding:w.Z.ROUND_DOWN});var D=new w.Z(m.div(u).toString()).round(),I=f&&k?new w.Z(m.toString()).div(D).mul(f).div(new w.Z(10).pow(k.decimals)):void 0,_=!!I&&I.lessThan(new w.Z(E.Ye)),B=new w.Z(m.toString()).minus(new w.Z(v.toString())).div(new w.Z(10).pow(O.decimals)),R=new w.Z(x.toString()).div(new w.Z(10).pow(O.decimals)),L=s.has(V.address)||s.has(O.address);return{publicKey:t.publicKey,inputToken:O,outputToken:V,isLaunchToken:L,warnings:{hasUnknownToken:!A||!T,tooFarFromExecution:F,lessThanDCALimit:_},inAmountPerCycle:new w.Z(u.toString()).div(Math.pow(10,O.decimals)),createdAt:new Date(1e3*a.toNumber()),cycleFrequency:l.toNumber(),balance:new w.Z(y.toString()).div(new w.Z(10).pow(O.decimals)),initialDeposited:new w.Z(m.toString()).div(Math.pow(10,O.decimals)),netDeposited:B,totalFilled:R,outReceived:new w.Z(c.toString()).div(new w.Z(10).pow(V.decimals)),outRemainingInBN:c.sub(d),outRemaining:new w.Z(c.sub(d).toString()).div(new w.Z(10).pow(V.decimals)),outWithdrawn:new w.Z(d.toString()).div(new w.Z(10).pow(V.decimals)),inRemaining:new w.Z(m.sub(x).sub(v).toString()).div(new w.Z(10).toPower(O.decimals)),avgPrice:S,inverseAvgPrice:M,filledPercentage:R.div(B),status:R.eq(B)?o.ag._("Completed"):o.ag._("Ongoing"),cyclesLeft:Z,nextCycleAt:new Date(1e3*h.toNumber()),adjustedNextCycleAmountLeft:h?new w.Z(b.toString()).div(new w.Z(10).pow(O.decimals)):null,minOutAmount:function(){var e;if(null!==p&&void 0!==p&&p.isFromBase){if(!j||j.eqn(0))return null;var t=new w.Z(u.toString()).div(Math.pow(10,(null===k||void 0===k?void 0:k.decimals)||0));return new w.Z(j.toString()).div(Math.pow(10,(null===N||void 0===N?void 0:N.decimals)||0)).div(t)}if(!g||g.eqn(0))return null;var n=new w.Z(u.toString()).div(Math.pow(10,null!==(e=null===k||void 0===k?void 0:k.decimals)&&void 0!==e?e:0)),r=new w.Z(g.toString()).div(Math.pow(10,(null===N||void 0===N?void 0:N.decimals)||0));return n.div(r)}(),maxOutAmount:function(){if(null!==p&&void 0!==p&&p.isFromBase){if(!g||g.eqn(0))return null;var e=new w.Z(u.toString()).div(Math.pow(10,(null===k||void 0===k?void 0:k.decimals)||0));return new w.Z(g.toString()).div(Math.pow(10,(null===N||void 0===N?void 0:N.decimals)||0)).div(e)}if(!j||j.eqn(0))return null;var t=new w.Z(u.toString()).div(Math.pow(10,(null===k||void 0===k?void 0:k.decimals)||0)),n=new w.Z(j.toString()).div(Math.pow(10,(null===N||void 0===N?void 0:N.decimals)||0));return t.div(n)}()}}),[t.account,t.publicKey,i,null===p||void 0===p?void 0:p.isFromBase,f,s]);return b?(0,H.jsx)(ee,{data:b,dcaClient:n}):null},ne=function(e){return e instanceof g.PublicKey?e:e?new g.PublicKey(e):void 0},re=n(56100),ae=function(e){var t,n=e.dcaClient,i=e.inputMint,l=e.outputMint,c=(0,h.Os)(),d=(0,B.KO)(_.P.refetchId),u=(0,a.Z)(d,1)[0],m=(0,B.KO)(_.P.isLoading),x=(0,a.Z)(m,2),f=x[0],v=x[1],b=(0,h.Bn)().requestTokenInfo,g=(0,p.aM)(["dca",null===(t=c.publicKey)||void 0===t?void 0:t.toString(),u],(0,r.Z)(s().mark((function e(){var t,r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.publicKey){e.next=19;break}return v(!0),e.prev=2,e.next=5,n.getCurrentByUser(c.publicKey,ne(i),ne(l));case 5:return t=e.sent,r=t.map((function(e){return e.account.inputMint})),a=t.map((function(e){return e.account.outputMint})),e.next=10,b(Array.from(new Set([].concat((0,M.Z)(r),(0,M.Z)(a)))).map((function(e){return e.toString()})));case 10:return e.abrupt("return",t.sort((function(e,t){return t.account.createdAt.cmp(e.account.createdAt)})));case 13:e.prev=13,e.t0=e.catch(2),console.log("DCA List failed to load",e.t0);case 16:return e.prev=16,v(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])}))),{enabled:Boolean(c.publicKey),keepPreviousData:!0}).data;return(0,H.jsxs)("div",{className:"mt-3 relative",children:[f&&!g&&(0,H.jsx)(re.O,{className:"mt-2"}),g&&g.length>0?(0,H.jsx)("div",{className:"w-full border-white/5 overflow-x-auto hideScrollbar",children:g&&(null===g||void 0===g?void 0:g.map((function(e){return(0,H.jsx)(te,{dca:e,dcaClient:n},e.publicKey.toString())})))}):null,g&&g.length>0&&f?(0,H.jsx)("div",{className:"absolute top-0 left-0 bg-black/10 backdrop-blur-sm w-full min-h-[620px]"}):null,0===(null===g||void 0===g?void 0:g.length)?(0,H.jsx)("div",{className:"bg-v2-lily/5 border border-v2-lily/10 rounded-lg text-white/20 text-sm h-full w-full flex items-center justify-center min-h-[180px]",children:(0,H.jsx)("span",{children:o.ag._("You have no active orders")})}):null]})},ie=n(65558),se=n(32070),le=function(e){var t,n=e.dcaClient,i=e.inputMint,l=e.outputMint,c=(0,h.Os)(),d=(0,h.Bn)().getTokenInfo,m=(0,B.KO)(_.P.refetchId),x=(0,a.Z)(m,1)[0],f=(0,B.KO)(_.P.isLoading),v=(0,a.Z)(f,2),p=v[0],b=v[1],g=(0,se.N)({queryKey:["dcaclosed",null===(t=c.publicKey)||void 0===t?void 0:t.toString(),x],queryFn:function(){var e=(0,r.Z)(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.pageParam,b(!0),c.publicKey){e.next=4;break}return e.abrupt("return",[]);case 4:return e.next=6,n.getClosedByUser(c.publicKey,r,5,ne(i),ne(l)).finally((function(){return b(!1)}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getNextPageParam:function(e){if(e&&e.length>0)return new Date(1e3*e[e.length-1].account.createdAt.toNumber())}}),j=g.data,y=g.isFetching,k=g.hasNextPage,N=g.fetchNextPage,P=u.useMemo((function(){return null!==j&&void 0!==j&&j.pages?null===j||void 0===j?void 0:j.pages.flat().sort((function(e,t){return t.account.createdAt.cmp(e.account.createdAt)})).map((function(e){var t=e.account,n=t.inputMint,r=t.outputMint,a=t.createdAt,i=t.cycleFrequency,s=t.inAmountPerCycle,l=t.inDeposited,o=t.inFilled,c=t.outReceived,u=t.inWithdrawn,m=d(n.toString()),x=d(r.toString());if(!m||!x)return null;var f=new w.Z(l.toString()).div(Math.pow(10,m.decimals)),v=new w.Z(o.toString()).div(Math.pow(10,m.decimals)),h=new w.Z(c.toString()).div(Math.pow(10,x.decimals)),p=new w.Z(u.toString()).div(Math.pow(10,m.decimals)),b=new w.Z(l.toString()).div(new w.Z(10).pow(m.decimals));return{account:e.account,publicKey:e.publicKey,inputToken:m,outputToken:x,isLaunchToken:!1,warnings:{},createdAt:new Date(1e3*a.toNumber()),initialDeposited:f,inAmountPerCycle:new w.Z(s.toString()).div(Math.pow(10,m.decimals)),cycleFrequency:i.toNumber(),outReceived:h,totalFilled:v,inWithdrawn:p,outWithdrawn:h,avgPrice:v.div(h),inverseAvgPrice:h.div(v),filledPercentage:v.div(f),fills:e.fills,netDeposited:b,cyclesLeft:new w.Z(0),balance:new w.Z(0),outRemainingInBN:new ie.BN(0),outRemaining:new w.Z(0),inRemaining:new w.Z(0),status:"closed",nextCycleAt:null,adjustedNextCycleAmountLeft:new w.Z(0),closedFills:e.fills}})).filter(Boolean):[]}),[null===j||void 0===j?void 0:j.pages,d]);return p&&!j?(0,H.jsx)(re.O,{className:"mt-2"}):(0,H.jsx)("div",{className:"mt-3 relative",children:P.length>0?(0,H.jsxs)("div",{className:"mt-3 w-full border-white/5 overflow-x-auto hideScrollbar",children:[P.map((function(e){return(0,H.jsx)(ee,{data:e,dcaClient:n,hideButtons:!0},e.publicKey.toString())})),y&&(0,H.jsx)(re.O,{}),k&&!y&&(0,H.jsx)("div",{className:"w-full flex items-center justify-center",children:(0,H.jsx)("button",{className:"w-1/2 py-2 rounded-2xl mt-3 text-white/20 text-sm dark:hover:!text-v2-primary",onClick:function(){return N()},children:o.ag._("Load More")})})]}):(0,H.jsx)("div",{className:"mt-3 bg-v2-lily/5 border border-v2-lily/10 rounded-lg text-white/20 text-sm h-full w-full flex items-center justify-center min-h-[180px]",children:(0,H.jsx)("span",{children:o.ag._("You have no closed orders")})})})},oe=n(13246),ce=n(39268),de=n.n(ce),ue=n(23632),me=n(42082),xe=n(89521),fe=n(87148),ve=n(3082),he=function(e){var t,n=e.defaultDuration,r=(0,ve.useRouter)(),a=(0,fe.Z)(null===r||void 0===r||null===(t=r.query)||void 0===t?void 0:t.period);return{period:(0,u.useMemo)((function(){var e,t;if(null!==r&&void 0!==r&&null!==(e=r.query)&&void 0!==e&&e.period&&a!==(null===r||void 0===r||null===(t=r.query)||void 0===t?void 0:t.period))switch(r.query.period){case"minute":return"minute";case"hour":return"hour";case"day":return"day";case"week":return"week";case"month":return"month";default:return}}),[r.query]),duration:n}},pe=n(50269),be=n(54566),ge=n(53636),we=n(6397),je=n(85394),ye=n(73413),ke=n(69825),Ne=n(95523),Pe=n(40558),Ce=n(55259),Se=n(44710),Me=function(e){var t=e.value,n=e.onClick;return(0,H.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,H.jsxs)("div",{className:"flex items-center cursor-pointer text-xs md:text-sm",children:[(0,H.jsx)(l.cC,{id:"Enable Pricing Strategy"}),(0,H.jsx)(Pe.Z,{variant:"dark",content:(0,H.jsx)("span",{className:"flex rounded-lg text-xs text-white-75",children:(0,H.jsx)(l.cC,{id:"Advanced pricing strategy allows you to set a minimum and maximum price range."})}),children:(0,H.jsx)("div",{className:"flex items-center ml-1 text-white/30 fill-current",children:(0,H.jsx)(pe.Z,{height:16,width:16})})})]}),(0,H.jsx)("div",{className:"flex justify-center",children:(0,H.jsx)(Se.default,{active:t,onClick:n})})]})},Ze=n(66032),Ae=n(32044),Oe=n(78013),Te=n(96721),Ve=n(1242),Fe=n(71130),De=n(68718),Ie=n(63956);function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){(0,Ie.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Re=n(54569),Le=de()((function(){return Promise.resolve().then(n.bind(n,73413))}),{ssr:!1,loadableGenerated:{webpack:function(){return[73413]}}}),Ee={fromTokenAddress:"",toTokenAddress:"",period:"minute",fromValue:{formattedValue:"",value:"",floatValue:void 0},intervalNumber:{formattedValue:"1",value:"1",floatValue:1},numberOfOrders:{formattedValue:"2",value:"2",floatValue:2},enableMinMaxPrice:!1,minValue:{formattedValue:"",value:"",floatValue:void 0},maxValue:{formattedValue:"",value:"",floatValue:void 0}},Ke="PAIRS_SELECT_TO_PAIR_MODAL_ID",He=function(e){var t=e.inToken,n=e.outToken,i=e.type,M=(0,h.Os)(),Z=(0,h.Rc)(),A=u.useMemo((function(){return new f.DA(Z,"mainnet-beta")}),[Z]),T=(0,h.C9)(),V=(0,p._)("dca-interval-number",Ee.intervalNumber),F=(0,a.Z)(V,2),I=F[0],K=F[1],U=(0,p._)("dca-period",Ee.period),q=(0,a.Z)(U,2),W=q[0],G=q[1],Q=(0,p._)("dca-number-of-orders",Ee.numberOfOrders),Y=(0,a.Z)(Q,2),z=Y[0],J=Y[1],$=(0,B.KO)(Ve.dS),ee=(0,a.Z)($,1)[0].GRAPH_PARAMS,te=(0,m.cI)({defaultValues:Ee}),ne=te.control,ie=te.setValue,se=te.handleSubmit,ce=te.formState,de=ce.isDirty,fe=ce.isSubmitting,ve=te.watch,Se=(0,h.Bn)(),Ie=Se.getTokenInfo,_e=Se.newTokenListMap,He=Se.tokenMap,Ue=(0,p.NL)(),qe=(0,me.T)(),We=(0,h.MG)().constants.MAX_INPUT_LIMIT,Ge=u.useMemo((function(){return Array.from(He.values()).map((function(e){return e.address}))}),[He]),Qe=(0,m.qo)({control:ne,name:"fromValue"}),Ye=(0,m.qo)({control:ne,name:"fromTokenAddress"}),ze=(0,m.qo)({control:ne,name:"toTokenAddress"}),Je=(0,m.qo)({control:ne,name:"intervalNumber"}),$e=(0,m.qo)({control:ne,name:"period"}),Xe=(0,m.qo)({control:ne,name:"numberOfOrders"}),et=(0,m.qo)({control:ne,name:"enableMinMaxPrice"}),tt=(0,m.qo)({control:ne,name:"minValue"}),nt=(0,m.qo)({control:ne,name:"maxValue"}),rt="launch-page"===(null===i||void 0===i?void 0:i.mode);u.useEffect((function(){i&&ie("enableMinMaxPrice",!0)}),[i,ie]),u.useEffect((function(){var e=ve((function(e,t){var n=e.intervalNumber,r=e.numberOfOrders,a=e.period,i=t.name;"intervalNumber"===i?K(n):"period"===i?G(a):"numberOfOrders"===i&&r&&J(r)}));return function(){return e.unsubscribe()}}),[ve,ie,K,J,G]),u.useEffect((function(){ie("intervalNumber",I),ie("period",W),ie("numberOfOrders",z)}),[ie]),u.useEffect((function(){t!==n&&(t&&ie("fromTokenAddress",t.address),n&&ie("toTokenAddress",n.address))}),[t,n,ie,qe,Ye,ze]);var at=u.useMemo((function(){return{fromTokenInfo:Ie(Ye)||(0,X.T)({address:Ye}),toTokenInfo:Ie(ze)||(0,X.T)({address:ze})}}),[Ie,Ye,ze]),it=at.fromTokenInfo,st=at.toTokenInfo,lt=u.useMemo((function(){return E.tc.find((function(e){return e.id===$e}))}),[$e]),ot=u.useMemo((function(){return{selectedPeriodName:(null===lt||void 0===lt?void 0:lt.name)||"",periodOption:E.tc.map((function(e){return e.id})),secondsInPeriod:(null===lt||void 0===lt?void 0:lt.secondsInPeriod)||0}}),[lt]),ct=ot.selectedPeriodName,dt=ot.periodOption,ut=ot.secondsInPeriod,mt=(0,h.y6)(),xt=mt.tokenPriceMap,ft=mt.getUSDValue,vt=mt.isLatest,ht=u.useMemo((function(){var e,t;if(!it||!st)return[null,null];var n=null===(e=xt[it.address])||void 0===e?void 0:e.usd,r=null===(t=xt[st.address])||void 0===t?void 0:t.usd;return n||ft(it.address),r||ft(st.address),[n,r]}),[it,ft,st,xt,vt]),pt=(0,a.Z)(ht,2),bt=pt[0],gt=pt[1],wt=u.useMemo((function(){if(lt&&Je.floatValue&&it&&null!==Qe&&void 0!==Qe&&Qe.floatValue&&null!==Xe&&void 0!==Xe&&Xe.floatValue&&(0,b.Hd)(null===Xe||void 0===Xe?void 0:Xe.floatValue)&&(0,b.Hd)(Qe.floatValue)){var e=new w.Z(Qe.floatValue).div(Xe.floatValue).toDP(it.decimals).toFixed(),t=new w.Z(Je.floatValue).mul(lt.secondsInPeriod),n=Xe.floatValue-1,r=(0,c.Z)(new Date,{seconds:new w.Z(t).mul(n).toNumber()});return{perCycle:e,endDate:(0,d.Z)(r,"dd MMM y HH:mm")}}}),[it,null===Qe||void 0===Qe?void 0:Qe.floatValue,null===Xe||void 0===Xe?void 0:Xe.floatValue,Je.floatValue,lt]),jt=u.useMemo((function(){return _e.has(Ye)||_e.has(ze)}),[_e,Ye,ze]),yt=(0,p.FB)(Ye).balance,kt=(0,p.FB)(ze).hasBalance,Nt=u.useMemo((function(){return!(null===it||void 0===it?void 0:it.decimals)||new w.Z((null===Qe||void 0===Qe?void 0:Qe.floatValue)||0).lessThanOrEqualTo(yt)}),[yt,null===it||void 0===it?void 0:it.decimals,null===Qe||void 0===Qe?void 0:Qe.floatValue]),Pt=u.useCallback((function(){var e=new w.Z(yt);Ye===j.W4.toBase58()&&(e=e.minus(j.WO)),ie("fromValue",{floatValue:e.toNumber(),formattedValue:e.toString(),value:e.toString()})}),[yt,Ye,ie]),Ct=u.useMemo((function(){return null===it||void 0===it?void 0:it.symbol}),[it]),St=u.useMemo((function(){return null===st||void 0===st?void 0:st.symbol}),[st]),Mt=u.useRef(!1),Zt=(0,Te.s)({fromPair:Ye,fromTokenInfo:it,toTokenInfo:st,side:null===i||void 0===i?void 0:i.side,isSubmitting:fe}),At=u.useCallback((function(e,t){if(e){var n=t?e.mul(t):e;ie("maxValue",{formattedValue:n.toFixed(),value:n.toFixed(),floatValue:n.toNumber()}),ie("minValue",{formattedValue:"0",value:"0",floatValue:0})}}),[ie]),Ot=u.useCallback((function(e,t){if(e){var n=t?e.mul(t):e;ie("maxValue",{formattedValue:"0",value:"0",floatValue:0}),ie("minValue",{formattedValue:n.toFixed(),value:n.toFixed(),floatValue:n.toNumber()})}}),[ie]),Tt=Zt.rateDecimals,Vt=Zt.isBaseQuoteMode,Ft=Zt.isFetchingMarketPrice,Dt=Zt.quoteTokenInfo,It=Zt.baseTokenInfo,_t=function(e,t){var n=t.swapMarketPrice,r=t.jupSwapMarketPrice,i=t.fromTokenPrice,s=t.toTokenPrice,l=t.side,o=t.isEditingTargetPrice,c=t.onClickSetMaxPrice,d=t.onClickSetMinPrice,m=(0,B.KO)(Ve.dS),x=(0,a.Z)(m,1)[0],f=x.GRAPH_PARAMS,v=x.FORM_CONFIG.DCA,h=u.useState({marketStatus:"unset",swapMarketPrice:new w.Z(f.i),hasNewToken:!1,constants:v.PRE_LAUNCH_CONSTANTS}),p=(0,a.Z)(h,2),b=p[0],g=p[1];return u.useEffect((function(){e&&g((function(e){return Be(Be({},e),{},{constants:v.PRE_LAUNCH_CONSTANTS,marketStatus:"unset",swapMarketPrice:n||null})}))}),[g,n,v,e]),u.useEffect((function(){if(e){if("unset"===b.marketStatus&&!r){if("buy"===l&&!i)return;if("sell"===l&&!s)return;if(g((function(e){return Be(Be({},e),{},{marketStatus:"pre-launch"})})),o.current)return;"buy"===l?b.constants.initialPrice&&c(new w.Z(b.constants.initialPrice||0).div(i||0)):d(new w.Z(b.constants.minPrice||0).div(s||0))}if(("unset"===b.marketStatus||"pre-launch"===b.marketStatus)&&r&&r.mul(.99).lt(f.m)){if(g((function(e){return Be(Be({},e),{},{constants:v.IN_RANGE_CONSTANTS,marketStatus:"in-range",swapMarketPrice:r})})),o.current)return;"buy"===l?c(new w.Z(r||0)):d(new w.Z(b.constants.minPrice||0).div(s||0))}if(r&&r.mul(.99).gte(f.m)){if(g((function(e){return Be(Be({},e),{},{constants:v.OUT_OF_RANGE_CONSTANTS,marketStatus:"out-of-range",swapMarketPrice:r})})),o.current)return;c(new w.Z(0)),d(new w.Z(0))}}}),[v,b.constants.initialPrice,b.constants.minPrice,b.marketStatus,b.swapMarketPrice,i,c,d,g,s,f,r,o,l,e]),e?b:null}(rt,{swapMarketPrice:Zt.swapMarketPrice,jupSwapMarketPrice:Zt.jupSwapMarketPrice,fromTokenPrice:bt,toTokenPrice:gt,side:null===i||void 0===i?void 0:i.side,isEditingTargetPrice:Mt,onClickSetMaxPrice:At,onClickSetMinPrice:Ot});u.useMemo((function(){Mt.current=!1,it&&ie("fromTokenAddress",it.address),st&&ie("toTokenAddress",st.address)}),[null===it||void 0===it?void 0:it.address,null===st||void 0===st?void 0:st.address,null===i||void 0===i?void 0:i.side,rt]);var Bt=(0,ye.useIsAccountFrozen)(it),Rt=(0,ye.useIsAccountFrozen)(st),Lt=(0,ue.Z)().fetchPrice,Et=(0,N.Nr)(u.useMemo((function(){return{fromTokenPrice:bt,toTokenPrice:gt,quoteTokenInfo:Dt,baseTokenInfo:It,isBaseQuoteMode:Vt,rateDecimals:Tt,fromValue:Qe,numberOfOrders:Xe}}),[bt,gt,Dt,It,Vt,Tt,Qe,Xe]),200),Kt=(0,p.aM)(["jupiter-quote",Et],(0,r.Z)(s().mark((function e(){var t,n,r,a,i,l,o,c,d,u,m,x,f;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=Et.fromTokenPrice,n=Et.toTokenPrice,r=Et.quoteTokenInfo,a=Et.baseTokenInfo,i=Et.isBaseQuoteMode,l=Et.rateDecimals,o=Et.fromValue,c=Et.numberOfOrders,t&&n&&r&&a&&o.floatValue&&null!==c&&void 0!==c&&c.floatValue){e.next=4;break}return e.abrupt("return",null);case 4:return d=null!==i&&void 0!==i&&i.isFromBase?{fromTokenInfo:a,toTokenInfo:r}:{fromTokenInfo:r,toTokenInfo:a},u=d.fromTokenInfo,m=d.toTokenInfo,x=new w.Z(o.floatValue).div(new w.Z(c.floatValue)).mul(Math.pow(10,u.decimals)).toFixed(0),null!==i&&void 0!==i&&i.isFromBase,f={fromTokenInfo:u,toTokenInfo:m,amount:x,decimals:l},e.next=9,Lt(f);case 9:return e.abrupt("return",e.sent);case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[0,12]])}))),{enabled:!fe,keepPreviousData:!0}),Ht=Kt.data,Ut=Kt.isLoading,qt=(0,O.R3)(),Wt=(0,B.KO)(R.yz),Gt=(0,a.Z)(Wt,1)[0],Qt=(0,L.gs)().priorityLevel,Yt=u.useCallback(function(){var e=(0,r.Z)(s().mark((function e(t){var n,r,a,i,o,c,d,u,m,x,v,h,p,b,j;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("",e.prev=1,n=t.fromValue,r=t.numberOfOrders,a=t.minValue,i=t.maxValue,o=t.enableMinMaxPrice,!(it&&st&&n.floatValue&&null!==r&&void 0!==r&&r.floatValue&&M.signTransaction&&M.publicKey)){e.next=24;break}return c=new w.Z(n.floatValue).mul(Math.pow(10,it.decimals)),d=c.div(r.floatValue),u=function(){if(!o)return null;if(null!==Vt&&void 0!==Vt&&Vt.isFromBase){if(!a.floatValue)return null;var e=new w.Z(d).div(Math.pow(10,it.decimals)),t=new w.Z(a.floatValue),n=e.mul(t).mul(Math.pow(10,st.decimals)).floor().toFixed(0);return BigInt(n)}if(!i.floatValue)return null;var r=new w.Z(d).div(Math.pow(10,it.decimals)),s=new w.Z(i.floatValue),l=r.div(s).mul(Math.pow(10,st.decimals)).floor().toFixed(0);return BigInt(l)}(),m=function(){if(!o)return null;if(null!==Vt&&void 0!==Vt&&Vt.isFromBase){if(!i.floatValue)return null;var e=new w.Z(d).div(Math.pow(10,it.decimals)),t=new w.Z(i.floatValue),n=e.mul(t).mul(Math.pow(10,st.decimals)).floor().toFixed(0);return BigInt(n)}if(!a.floatValue)return null;var r=new w.Z(d).div(Math.pow(10,it.decimals)),s=new w.Z(a.floatValue),l=r.div(s).mul(Math.pow(10,st.decimals)).floor().toFixed(0);return BigInt(l)}(),x=we.Zt.address==ze?void 0:!!kt||void 0,e.next=11,A.createDcaV2({inAmount:BigInt(c.toFixed(0)),cycleSecondsApart:BigInt(ut*((null===Je||void 0===Je?void 0:Je.floatValue)||1)),inAmountPerCycle:BigInt(d.toFixed(0)),inputMint:new g.PublicKey(Ye),outputMint:new g.PublicKey(ze),minOutAmountPerCycle:u,maxOutAmountPerCycle:m,startAt:null,user:M.publicKey,payer:M.publicKey},!0,x);case 11:return v=e.sent,h=v.tx,e.next=15,Z.getLatestBlockhash("confirmed");case 15:return p=e.sent,b=p.blockhash,j=p.lastValidBlockHeight,h.recentBlockhash=b,h.lastValidBlockHeight=j,h.feePayer=M.publicKey,e.next=23,qt(h,{blockhash:b,idl:f.xO,idlProgramId:f.PN["mainnet-beta"],lastValidBlockHeight:j},{successMessage:(0,H.jsx)(l.cC,{id:"DCA created for {0} {1} to {2} over {3} orders",values:{0:n.floatValue,1:it.symbol,2:st.symbol,3:r.floatValue}}),submittingMessage:(0,H.jsx)(l.cC,{id:"Creating DCA"}),errorMessage:(0,H.jsx)(l.cC,{id:"Failed to create DCA"}),referenceFee:"MEDIUM"===Qt?Gt.loAndDCA:"HIGH"===Qt&&Gt.loAndDCA?1.5*Gt.loAndDCA:"VERY_HIGH"===Qt&&Gt.loAndDCA?3*Gt.loAndDCA:void 0,minimumFee:R.uo,requestComputeBudgetLimit:3e5});case 23:Ue.invalidateQueries({queryKey:["dca"]});case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(1),console.error(e.t0);case 29:if(e.prev=29,t){e.next=32;break}return e.abrupt("return");case 32:return T([t.fromTokenAddress,t.toTokenAddress]),e.finish(29);case 34:case"end":return e.stop()}}),e,null,[[1,26,29,34]])})));return function(t){return e.apply(this,arguments)}}(),[it,st,M.signTransaction,M.publicKey,ze,kt,A,ut,null===Je||void 0===Je?void 0:Je.floatValue,Ye,Z,qt,Ue,null===Vt||void 0===Vt?void 0:Vt.isFromBase,Gt.loAndDCA,Qt,T]),zt=u.useState("Active DCAs"),Jt=(0,a.Z)(zt,2),$t=Jt[0],Xt=Jt[1],en=u.useRef(!1);u.useEffect((function(){jt&&!1===en.current&&(en.current=!0,ie("enableMinMaxPrice",!0))}),[jt,ie]);var tn=(0,xe.Z)();u.useEffect((function(){tn&&ie("fromValue",{formattedValue:tn,value:tn,floatValue:Number(tn)})}),[ie,tn]);var nn=he({defaultDuration:10}),rn=nn.period,an=nn.duration;u.useEffect((function(){rn&&an&&(ie("period",rn),ie("numberOfOrders",{value:String(an),floatValue:an,formattedValue:String(an)}))}),[ie,rn,an]);var sn=u.useMemo((function(){return Math.min(((null===it||void 0===it?void 0:it.decimals)||0)+((null===st||void 0===st?void 0:st.decimals)||0),12)||6}),[null===it||void 0===it?void 0:it.decimals,null===st||void 0===st?void 0:st.decimals]),ln=u.useCallback((function(){qe(st,it)}),[st,it,qe]),on=u.useMemo((function(){var e;return M.connected&&Qe.floatValue&&it&&st&&wt?(0,H.jsxs)("div",{className:"w-full py-4 mb-3 px-3 rounded-lg bg-v2-lily/5 border border-v2-lily/10 text-xs",children:[(0,H.jsx)("span",{className:"text-v2-lily/[.75]",children:o.ag._("DCA Summary")}),(0,H.jsxs)("div",{className:"mt-3 space-y-1",children:[(0,H.jsxs)("div",{className:"flex justify-between",children:[(0,H.jsx)("span",{className:"text-white/40",children:o.ag._("Sell total")}),(0,H.jsxs)("span",{className:"text-white/[.75]",children:[(0,H.jsx)(ge.Z,{currency:!1,value:Qe.floatValue})," ",it.symbol]})]}),(0,H.jsxs)("div",{className:"flex justify-between",children:[(0,H.jsx)("span",{className:"text-white/40",children:o.ag._("Sell per order")}),(0,H.jsxs)("span",{className:"text-white/[.75] flex space-x-1",children:[(0,H.jsx)(ge.Z,{currency:!1,value:wt.perCycle}),(0,H.jsx)("span",{children:it.symbol})]})]}),(0,H.jsxs)("div",{className:"flex justify-between",children:[(0,H.jsx)("span",{className:"text-white/40",children:o.ag._("Receive")}),(0,H.jsx)("span",{className:"text-white/[.75]",children:st.symbol})]}),(0,H.jsxs)("div",{className:"flex justify-between",children:[(0,H.jsx)("span",{className:"text-white/40",children:o.ag._("Order interval")}),(0,H.jsx)("span",{className:"text-white/[.75]",children:o.ag._("{0} {selectedPeriodName}(s)",{0:Je.formattedValue,selectedPeriodName:ct})})]}),(0,H.jsxs)("div",{className:"flex justify-between",children:[(0,H.jsx)("span",{className:"text-white/40",children:o.ag._("Start date")}),(0,H.jsx)("span",{className:"text-white/[.75]",children:"pre-launch"===(null===_t||void 0===_t?void 0:_t.marketStatus)?o.ag._("Start when trading is enabled"):o.ag._("Immediate")})]}),(0,H.jsxs)("div",{className:"flex justify-between",children:[(0,H.jsx)("span",{className:"text-white/40",children:o.ag._("Estimated end date")}),(0,H.jsx)("span",{className:"text-white/[.75]",children:"pre-launch"===(null===_t||void 0===_t?void 0:_t.marketStatus)?o.ag._("TBD when trading is enabled"):wt.endDate})]}),!rt&&(0,H.jsxs)("div",{className:"flex justify-between",children:[(0,H.jsx)("span",{className:"text-white/40",children:o.ag._("Estimated price impact per order")}),(0,H.jsxs)("span",{className:"text-white/[.75] flex space-x-1",children:[(null===Ht||void 0===Ht||null===(e=Ht.priceImpactPct)||void 0===e?void 0:e.toFixed(2))||"-","%"]})]}),(0,H.jsxs)("div",{className:"flex justify-between",children:[(0,H.jsx)("span",{className:"text-white/40",children:o.ag._("Platform fee")}),(0,H.jsx)("span",{className:"text-v2-primary",children:"0.1%"})]})]})]}):null}),[M.connected,Qe.floatValue,it,st,wt,Je.formattedValue,ct,null===_t||void 0===_t?void 0:_t.marketStatus,rt,null===Ht||void 0===Ht?void 0:Ht.priceImpactPct]),cn=u.useMemo((function(){var e=new w.Z(0);Zt.swapMarketPrice||null===_t||void 0===_t||_t.swapMarketPrice;if(null===_t||void 0===_t||!_t.swapMarketPrice)return e;if("buy"===(null===i||void 0===i?void 0:i.side)&&!nt.floatValue)return e;if("sell"===(null===i||void 0===i?void 0:i.side)&&!tt.floatValue)return e;var t="buy"===(null===i||void 0===i?void 0:i.side)?new w.Z(nt.floatValue||0).sub(_t.swapMarketPrice).div(_t.swapMarketPrice):new w.Z(tt.floatValue||0).sub(_t.swapMarketPrice).div(_t.swapMarketPrice);return(e=new w.Z(100).mul(t).toDP(2)).isFinite()?e:new w.Z(0)}),[null===_t||void 0===_t?void 0:_t.swapMarketPrice,nt.floatValue,tt.floatValue,Zt.swapMarketPrice,null===i||void 0===i?void 0:i.side]),dn=u.useMemo((function(){return cn.gt(1e4)?">10000":"".concat(cn.toNumber()>0?"+":"").concat(cn.toDP(2).toString())}),[cn]),un=u.useMemo((function(){return null!==Vt&&void 0!==Vt&&Vt.isFromBase?cn.toNumber()<0:cn.toNumber()>0}),[null===Vt||void 0===Vt?void 0:Vt.isFromBase,cn]),mn=u.useMemo((function(){return null!==Vt&&void 0!==Vt&&Vt.isFromBase?cn.toNumber()>0:cn.toNumber()<0}),[null===Vt||void 0===Vt?void 0:Vt.isFromBase,cn]),xn=u.useMemo((function(){return"pre-launch"!==(null===_t||void 0===_t?void 0:_t.marketStatus)&&un||mn}),[null===_t||void 0===_t?void 0:_t.marketStatus,un,mn]),fn=u.useRef(),vn=u.useRef(null),hn=u.useRef(null),pn=u.useState(!1),bn=(0,a.Z)(pn,2),gn=(bn[0],bn[1]),wn=u.useState(!1),jn=(0,a.Z)(wn,2),yn=(jn[0],jn[1]);(0,b.O3)(vn,(function(){gn(!1)})),(0,b.O3)(hn,(function(){yn(!1)}));var kn=u.useState(!1),Nn=(0,a.Z)(kn,2),Pn=Nn[0],Cn=Nn[1],Sn=(0,B.KO)(_.P.refetchId),Mn=(0,a.Z)(Sn,2),Zn=(Mn[0],Mn[1]),An=(0,B.KO)(_.P.isLoading),On=(0,a.Z)(An,1)[0],Tn=function(){Zn((function(e){return e+1}))},Vn=u.useMemo((function(){var e=[];"pre-launch"===(null===_t||void 0===_t?void 0:_t.marketStatus)&&(!("buy"!==(null===i||void 0===i?void 0:i.side)||!nt.floatValue)&&new w.Z(nt.floatValue).mul(bt||0).lt(new w.Z(ee.m).mul(.99))&&e.push(o.ag._("Your DCA will most likely NOT FILL, try setting a higher max price")));return e}),[null===_t||void 0===_t?void 0:_t.marketStatus,bt,nt.floatValue,null===i||void 0===i?void 0:i.side,ee]),Fn=u.useMemo((function(){if(!xt||void 0===(null===Xe||void 0===Xe?void 0:Xe.floatValue)||!lt||!wt||!Je.floatValue)return{isIntervalTooLow:!Je.floatValue,isPerCycleTooLow:!1,isNumberOfOrdersTooLow:!1,isMinBiggerThanMax:!1,isNewMintPerOrderTooLow:!1};var e=new w.Z(Qe.floatValue||0).mul(bt||0).div(Xe.floatValue),t="pre-launch"===(null===_t||void 0===_t?void 0:_t.marketStatus)||"in-range"===(null===_t||void 0===_t?void 0:_t.marketStatus);return{isIntervalTooLow:!Je.floatValue,isPerCycleTooLow:!jt&&e.lt(E.Ye),isNewMintPerOrderTooLow:!!jt&&e.lt(t?_t.constants.minUSDPerOrder:E.Pf),isNumberOfOrdersTooLow:Number((null===Xe||void 0===Xe?void 0:Xe.floatValue)||0)<E.YB,isMinBiggerThanMax:!!(et&&tt.floatValue&&nt.floatValue)&&new w.Z(tt.floatValue||0).gte(nt.floatValue||0)}}),[jt,bt,wt,Je,Qe.floatValue,xt,null===Xe||void 0===Xe?void 0:Xe.floatValue,lt,et,tt,nt,_t]),Dn=Fn.isNumberOfOrdersTooLow,In=Fn.isIntervalTooLow,_n=Fn.isPerCycleTooLow,Bn=Fn.isMinBiggerThanMax,Rn=Fn.isNewMintPerOrderTooLow,Ln=u.useMemo((function(){var e=[],t="pre-launch"===(null===_t||void 0===_t?void 0:_t.marketStatus)||"in-range"===(null===_t||void 0===_t?void 0:_t.marketStatus);t&&(!("buy"!==(null===i||void 0===i?void 0:i.side)||!_t.constants.minPrice)&&new w.Z(nt.floatValue||0).mul(bt||0).lt(_t.constants.minPrice)&&(nt.floatValue||0)>0&&e.push(o.ag._("Max price is below the minimum price of {0} USD",{0:_t.constants.minPrice})));if(et&&(rt?("buy"===i.side&&0===nt.floatValue&&e.push(o.ag._("Please enter a Maximum Price greater than 0")),"sell"===i.side&&0===tt.floatValue&&e.push(o.ag._("Please enter a Maximum Price greater than 0"))):(0===tt.floatValue&&e.push(o.ag._("Please enter a Minimum Price greater than 0")),0===nt.floatValue&&e.push(o.ag._("Please enter a Maximum Price greater than 0")),Bn&&e.push(o.ag._("Minimum Price must be lower than Maximum Price.")))),In&&e.push(o.ag._("Please enter an interval above 0")),Dn&&e.push(o.ag._("Number of Orders cannot be lower than 2")),M.connected&&Qe.floatValue&&null!==Xe&&void 0!==Xe&&Xe.floatValue){if(Rn){var n,r=t?null===_t||void 0===_t||null===(n=_t.constants)||void 0===n?void 0:n.minUSDPerOrder:E.Pf;e.push(o.ag._("Minimum {minimumValue} USD per order required, increase your allocation to at least {0} USD for {1} orders",{0:Xe.floatValue*r,1:null===Xe||void 0===Xe?void 0:Xe.floatValue,minimumValue:r}))}_n&&e.push(o.ag._("Minimum {MINIMUM_VALUE_PER_ORDER} USD per order required, increase your allocation to at least {0} USD for {1} orders",{0:Xe.floatValue*E.Ye,1:null===Xe||void 0===Xe?void 0:Xe.floatValue,MINIMUM_VALUE_PER_ORDER:E.Ye})),Nt||e.push((0,H.jsxs)("div",{className:"space-y-1",children:[o.ag._("Insufficient balance, you have {balance} {fromTokenSymbol}.",{balance:yt,fromTokenSymbol:Ct}),(0,H.jsx)("br",{}),(0,H.jsx)("button",{type:"button",className:"underline cursor-pointer",onClick:Pt,children:o.ag._("Use available balance")})]}))}return function(){if("pre-launch"===(null===_t||void 0===_t?void 0:_t.marketStatus)||"in-range"===(null===_t||void 0===_t?void 0:_t.marketStatus)){if("sell"===(null===i||void 0===i?void 0:i.side))return;if(!_t.constants.maxPrice)return;new w.Z(nt.floatValue||0).mul(bt||0).mul(.99).gt(_t.constants.maxPrice||0)&&e.push(o.ag._("Max Price is more than the pool max price."))}}(),e}),[null===_t||void 0===_t?void 0:_t.marketStatus,null===_t||void 0===_t?void 0:_t.constants,et,In,Dn,M.connected,Qe.floatValue,null===Xe||void 0===Xe?void 0:Xe.floatValue,null===i||void 0===i?void 0:i.side,nt.floatValue,bt,rt,tt.floatValue,Bn,Rn,_n,Nt,yt,Ct,Pt]),En=u.useMemo((function(){return Boolean(!Qe.floatValue||Ln.length>0||Dn||Bt||Rt)}),[Ln.length,Qe.floatValue,Dn,Bt,Rt]),Kn=(0,De.Z)({tokens:[]}),Hn=u.useCallback((function(e){ie("fromValue",{floatValue:e.toNumber(),formattedValue:e.toString(),value:e.toString()},{shouldDirty:!0})}),[ie]),Un=u.useCallback((function(e){e&&ie("fromTokenAddress",e)}),[ie]);return rt?(0,H.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-between text-v2-lily",children:[(0,H.jsx)("form",{className:"flex flex-col items-center justify-between w-full",onSubmit:se(Yt),children:(0,H.jsx)("div",{className:"w-full text-lg lg:text-2xl",children:(0,H.jsxs)("div",{className:"flex-col space-y-2 relative",children:[(0,H.jsxs)("div",{className:"flex justify-between items-center",children:[(0,H.jsxs)("label",{htmlFor:"fromValue",className:"text-xs md:text-sm font-medium text-black/90 dark:text-white flex items-center",children:[(0,H.jsx)(l.cC,{id:"I want to allocate"}),(0,H.jsx)(Pe.Z,{content:o.ag._("The higher the amount per order, the higher the priority fee, the higher the chances of getting filled."),children:(0,H.jsx)("div",{className:"-mt-0.5 md:mt-0 ml-2 text-white/20 fill-current",children:(0,H.jsx)(pe.Z,{width:12,height:12})})})]}),(0,H.jsxs)("div",{className:"flex space-x-2",children:[(0,H.jsx)("div",{className:"flex item-center ml-1 cursor-pointer hover:text-white-50",onClick:Pt,children:(0,H.jsx)(Ae.Z,{tokenInfo:it,className:"hover:text-white-50"})}),(0,H.jsx)(Ze.Z,{onChange:Hn,tokenInfo:it})]})]}),(0,H.jsx)("div",{className:(0,k.cn)("p-4 h-[72px] border border-transparent relative bg-v2-background-dark rounded-xl flex flex-col space-y-3 group","focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)(oe.Z,{onChange:Un,fromTokenAddress:Ye,toTokenAddress:ze,modalId:Ke,name:"fromTokenAddress",mintsList:Ge,type:"tokenAndInput",disabled:"sell"===i.side}),(0,H.jsx)("span",{className:"flex-1 text-right",children:(0,H.jsx)(m.Qr,{name:"fromValue",control:ne,rules:{required:"Required"},render:function(e){var t=e.field,n=t.onChange,r=t.value,a=t.onBlur;return(0,H.jsx)(Ce.Z,{onBlur:a,onChange:n,tokenAddress:Ye,value:r,name:"fromValue"})}})})]})}),(0,H.jsxs)("div",{className:"flex justify-between items-center",children:[(0,H.jsx)("label",{className:"text-xs md:text-sm font-medium text-black/90 dark:text-white",children:(0,H.jsx)(l.cC,{id:"To buy"})}),(0,H.jsx)("div",{className:"flex",children:(0,H.jsx)(Ae.Z,{tokenInfo:st})})]}),(0,H.jsx)("div",{className:"h-[72px] border border-[#EFF0F0] dark:border-0 bg-v2-background-dark rounded-xl flex flex-col space-y-3",children:(0,H.jsx)(oe.Z,{onChange:Un,fromTokenAddress:Ye,toTokenAddress:ze,modalId:Ke,name:"toTokenAddress",mintsList:Ge,type:"tokenSelectOnly",disabled:"buy"===i.side})}),(0,H.jsxs)("div",{className:"flex space-x-2 items-end",children:[(0,H.jsxs)("div",{className:"flex flex-col justify-between w-full",children:[(0,H.jsx)("label",{className:"text-xs md:text-sm font-medium text-black/90 dark:text-white",children:(0,H.jsx)(l.cC,{id:"Every"})}),(0,H.jsx)(m.Qr,{control:ne,name:"intervalNumber",render:function(e){var t=e.field,n=t.onChange,r=t.value;return(0,H.jsx)("div",{className:(0,k.cn)("h-[54px] mt-2 rounded-xl flex space-x-3 items-center px-2 bg-v2-background-dark","text-sm lg:text-base","group-hover/select:border-v2-active-state group-hover/select:bg-[rgba(199,242,132,0.2)] group-hover/select:shadow-swap-input-dark"),children:(0,H.jsx)(x.Z,{className:"w-full py-3 px-4 bg-transparent !outline-none",value:null===r||void 0===r?void 0:r.floatValue,onValueChange:n,thousandSeparator:","===N.A5?".":",",decimalSeparator:","===N.A5?",":".",decimalScale:0,allowNegative:!1,allowLeadingZeros:!1,isAllowed:function(e){var t=e.floatValue;return!t||t<=1e4}})})}})]}),(0,H.jsx)("div",{className:"flex flex-col justify-between w-full",children:(0,H.jsx)(m.Qr,{control:ne,name:"period",render:function(e){var t=e.field,n=(t.name,t.onChange),r=(t.onBlur,t.value);return(0,H.jsx)("div",{className:(0,k.cn)("h-[54px] mt-2 rounded-xl flex space-x-3 items-center px-2 bg-v2-background-dark","text-sm lg:text-base","group-hover/select:border-v2-active-state group-hover/select:bg-[rgba(199,242,132,0.2)] group-hover/select:shadow-swap-input-dark"),children:(0,H.jsxs)(C.Z,{onChange:n,className:"!bg-transparent !px-3 !py-1 !text-v2-lily flex justify-between !w-full text-sm",contentClassName:"!w-full",data:dt,value:r,rowRenderer:function(e){return(0,H.jsx)("div",{className:"text-sm",children:e})},children:[r,(0,H.jsx)("div",{className:"ml-auto text-black/25 dark:text-white/25 group-hover/select:text-[#00D1DF] dark:group-hover/select:text-dark-active-state fill-current",children:(0,H.jsx)(y.Z,{})})]})})}})}),(0,H.jsxs)("div",{className:" flex-col justify-between w-full hidden md:flex",children:[(0,H.jsxs)("label",{className:"text-xs md:text-sm font-medium text-black/90 dark:text-white flex items-center",children:[(0,H.jsx)(l.cC,{id:"Over"}),(0,H.jsx)(Pe.Z,{content:o.ag._("To minimise the predictability of your DCA strategy, orders are filled within a randomised padding of +/- 26 seconds."),children:(0,H.jsx)("div",{className:"-mt-0.5 md:mt-0 ml-2 text-white/20 fill-current",children:(0,H.jsx)(pe.Z,{width:12,height:12})})})]}),(0,H.jsx)(m.Qr,{control:ne,name:"numberOfOrders",render:function(e){var t=e.field,n=t.onChange,r=t.value;return(0,H.jsxs)("div",{className:(0,k.cn)("h-[54px] mt-2 rounded-xl flex space-x-3 items-center px-2 bg-v2-background-dark","text-sm lg:text-base","group-hover/select:border-v2-active-state group-hover/select:bg-[rgba(199,242,132,0.2)] group-hover/select:shadow-swap-input-dark"),children:[(0,H.jsx)(x.Z,{className:"w-full py-3 pl-2 bg-transparent !outline-none",value:null===r||void 0===r?void 0:r.floatValue,onValueChange:n,thousandSeparator:","===N.A5?".":",",decimalSeparator:","===N.A5?",":".",decimalScale:0,allowNegative:!1,isAllowed:function(e){var t=e.floatValue;return!t||t<=1e6}}),(0,H.jsx)("div",{className:"text-sm",children:o.ag._("orders")})]})}})]})]}),(0,H.jsxs)("div",{className:"flex flex-col w-full md:hidden",children:[(0,H.jsxs)("label",{className:"text-xs md:text-sm font-medium text-black/90 dark:text-white flex items-center",children:[(0,H.jsx)(l.cC,{id:"Over"}),(0,H.jsx)(Pe.Z,{content:o.ag._("To minimise the predictability of your DCA strategy, orders are filled within a randomised padding of +/- 26 seconds."),children:(0,H.jsx)("div",{className:"-mt-0.5 md:mt-0 ml-2 text-white/20 fill-current",children:(0,H.jsx)(pe.Z,{width:12,height:12})})})]}),(0,H.jsx)(m.Qr,{control:ne,name:"numberOfOrders",render:function(e){var t=e.field,n=t.onChange,r=t.value;return(0,H.jsxs)("div",{className:(0,k.cn)("h-[54px] mt-2 rounded-xl flex space-x-3 items-center px-2 bg-v2-background-dark","text-sm lg:text-base","group-hover/select:border-v2-active-state group-hover/select:bg-[rgba(199,242,132,0.2)] group-hover/select:shadow-swap-input-dark"),children:[(0,H.jsx)(x.Z,{className:"w-full py-3 pl-2 bg-transparent !outline-none",value:null===r||void 0===r?void 0:r.floatValue,onValueChange:n,thousandSeparator:","===N.A5?".":",",decimalSeparator:","===N.A5?",":".",decimalScale:0,allowNegative:!1,isAllowed:function(e){var t=e.floatValue;return!t||t<=1e6}}),(0,H.jsx)("div",{className:"text-sm",children:o.ag._("orders")})]})}})]}),(0,H.jsx)("div",{children:"buy"===i.side?(0,H.jsxs)("div",{className:"flex flex-col justify-between w-full",children:[(0,H.jsxs)("label",{className:"text-xs md:text-sm font-medium text-black/90 dark:text-white flex items-center",children:[(0,H.jsx)(l.cC,{id:"Max Price"}),(0,H.jsx)(Pe.Z,{content:o.ag._("Max Price of the token you want to buy. If the price of the token is higher than the Max Price, the order will not be executed."),children:(0,H.jsx)("div",{className:"-mt-0.5 md:mt-0 ml-2 text-white/20 fill-current",children:(0,H.jsx)(pe.Z,{width:12,height:12})})})]}),(0,H.jsx)(m.Qr,{control:ne,name:"maxValue",render:function(e){var t=e.field,n=t.onChange,r=t.value;return(0,H.jsxs)("div",{className:(0,k.cn)("mt-2 w-full bg-jupiter-input-light dark:bg-v2-background-dark pt-2 px-4 pb-6 rounded-xl flex flex-col justify-center relative","border border-transparent focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),onFocus:function(){return gn(!0)},ref:vn,children:[(0,H.jsxs)("div",{className:"flex justify-between",children:[(0,H.jsx)("button",{type:"button",className:"absolute right-2 top-2 hover:text-white-75 text-white-35 hover:text-black text-xxs cursor-pointer underline rounded",onClick:function(){Mt.current=!0,"unset"!==(null===_t||void 0===_t?void 0:_t.marketStatus)&&"pre-launch"!==(null===_t||void 0===_t?void 0:_t.marketStatus)||At(new w.Z((null===_t||void 0===_t?void 0:_t.constants.maxPrice)||0).div(bt||0)),"in-range"!==(null===_t||void 0===_t?void 0:_t.marketStatus)&&"out-of-range"!==(null===_t||void 0===_t?void 0:_t.marketStatus)||At(new w.Z((null===_t||void 0===_t?void 0:_t.swapMarketPrice)||0))},children:"unset"===(null===_t||void 0===_t?void 0:_t.marketStatus)||"pre-launch"===(null===_t||void 0===_t?void 0:_t.marketStatus)?(0,H.jsx)(l.cC,{id:"Use Max"}):(0,H.jsx)(l.cC,{id:"Use Market"})}),(0,H.jsx)(x.Z,{className:"w-full bg-transparent !outline-none text-lg font-semibold",value:null===r||void 0===r?void 0:r.floatValue,onValueChange:n,thousandSeparator:","===N.A5?".":",",decimalSeparator:","===N.A5?",":".",decimalScale:sn,allowNegative:!1,onFocus:function(){Mt.current=!0}}),Dt?(0,H.jsx)("div",{className:"flex items-center absolute top-6 right-2",children:(0,H.jsx)("span",{className:"font-semibold text-sm",children:null===Dt||void 0===Dt?void 0:Dt.symbol})}):(0,H.jsx)(re.O,{className:"w-11 h-6"})]}),Dt&&(0,H.jsxs)("div",{className:"text-xs text-v2-lily/30 absolute bottom-2 flex gap-x-1",children:[(0,H.jsx)(be.default,{tokenInfo:Dt,amount:r.floatValue,maxDecimals:sn}),xn?(0,H.jsx)("div",{className:(0,k.cn)("flex items-center text-xs font-medium text-v2-lily/30",{}),children:"(".concat(dn,"%)")}):null]})]})}}),(0,H.jsx)("div",{className:"pr-2 text-xxs text-black-50 dark:text-[#CFF3FF] dark:text-opacity-[0.35] flex justify-end",children:o.ag._("{toTokenSymbol} / {fromTokenSymbol}",{toTokenSymbol:St,fromTokenSymbol:Ct})})]}):(0,H.jsxs)("div",{className:"flex flex-col justify-between w-full",children:[(0,H.jsxs)("label",{className:"text-xs md:text-sm font-medium text-black/90 dark:text-white flex justify-between items-center",children:[(0,H.jsx)(l.cC,{id:"Min Price"}),(0,H.jsx)(Pe.Z,{content:o.ag._("Min Price of the token you want to sell. If the price of the token is lower than the Min Price, the order will not be executed."),children:(0,H.jsx)("div",{className:"-mt-0.5 md:mt-0 ml-2 text-white/20 fill-current",children:(0,H.jsx)(pe.Z,{width:12,height:12})})})]}),(0,H.jsx)(m.Qr,{control:ne,name:"minValue",render:function(e){var t=e.field,n=t.onChange,r=t.value;return(0,H.jsxs)("div",{className:(0,k.cn)("mt-2 w-full bg-jupiter-input-light dark:bg-v2-background-dark pt-2 px-4 pb-6 rounded-xl flex flex-col justify-center relative","border border-transparent focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),onFocus:function(){return yn(!0)},ref:hn,children:[(0,H.jsxs)("div",{className:"flex justify-between",children:[(0,H.jsxs)("div",{className:"flex items-center",children:[It?(0,H.jsxs)("p",{className:"text-v2-lily/50 text-xs flex items-center",children:[null!==Vt&&void 0!==Vt&&Vt.isFromBase?(0,H.jsx)(l.cC,{id:"Sell"}):(0,H.jsx)(l.cC,{id:"Buy"})," ",(0,H.jsx)(l.cC,{id:"{0} at rate",values:{0:null===It||void 0===It?void 0:It.symbol}}),Ft?(0,H.jsx)(je.Z,{className:"ml-1",width:8,height:8}):null]}):(0,H.jsx)(re.O,{className:"h-4 w-2"}),xn?(0,H.jsx)("div",{className:(0,k.cn)("flex items-center text-xs ml-1 font-medium text-v2-lily/50",{}),children:"(".concat(dn,"%)")}):null]}),(0,H.jsx)("button",{type:"button",className:"dark:text-white-35 dark:hover:text-white-75 text-black-35 hover:text-black text-xxs cursor-pointer underline rounded",onClick:function(){"in-range"===(null===_t||void 0===_t?void 0:_t.marketStatus)||"out-of-range"===(null===_t||void 0===_t?void 0:_t.marketStatus)?Ot(new w.Z((null===_t||void 0===_t?void 0:_t.swapMarketPrice)||0).div(gt||0)):null!==_t&&void 0!==_t&&_t.constants.minPrice&&Ot(new w.Z(null===_t||void 0===_t?void 0:_t.constants.minPrice).div(gt||0))},children:"in-range"===(null===_t||void 0===_t?void 0:_t.marketStatus)||"out-of-range"===(null===_t||void 0===_t?void 0:_t.marketStatus)?(0,H.jsx)(l.cC,{id:"Use Market"}):(0,H.jsx)(l.cC,{id:"Use Default"})})]}),(0,H.jsxs)("div",{className:"flex justify-between",children:[(0,H.jsx)(x.Z,{className:"w-full bg-transparent !outline-none text-sm font-semibold",value:null===r||void 0===r?void 0:r.floatValue,onValueChange:n,thousandSeparator:","===N.A5?".":",",decimalSeparator:","===N.A5?",":".",decimalScale:sn,allowNegative:!1,isAllowed:function(e){var t=e.floatValue;return!t||t<=1e4}}),Dt?(0,H.jsx)("div",{className:"flex items-center",children:(0,H.jsx)("span",{className:"font-semibold text-sm",children:null===Dt||void 0===Dt?void 0:Dt.symbol})}):(0,H.jsx)(re.O,{className:"w-11 h-6"})]}),Dt&&(0,H.jsx)("div",{className:"text-xs text-v2-lily/30 absolute bottom-2",children:(0,H.jsx)(be.default,{prefix:"\u2248 ",tokenInfo:Dt,amount:r.floatValue,maxDecimals:sn})})]})}}),(0,H.jsx)("div",{className:"pr-2 text-xxs text-black-50 dark:text-[#CFF3FF] dark:text-opacity-[0.35] flex justify-end",children:o.ag._("{toTokenSymbol} / {fromTokenSymbol}",{toTokenSymbol:St,fromTokenSymbol:Ct})})]})}),de&&Vn.length>0&&(0,H.jsxs)("div",{className:"mt-3 py-3 pl-2 rounded-lg text-xs flex items-center text-white space-x-2 w-full bg-warning",children:[(0,H.jsx)("div",{className:"h-3 w-3 mt-0.5 fill-current",children:(0,H.jsx)(S.Z,{fill:"inherit"})}),(0,H.jsx)("div",{className:"flex flex-col space-y-1",children:Vn.map((function(e,t){return(0,H.jsx)("div",{children:e},t)}))})]}),En&&de&&Ln.length>0?(0,H.jsxs)("div",{className:"mb-4 py-3 px-2 rounded-lg text-xs flex items-center text-white space-x-2 w-full bg-[#F04A44]",children:[(0,H.jsx)("div",{className:"h-3 w-3 mt-0.5 fill-current",children:(0,H.jsx)(S.Z,{fill:"inherit"})}),(0,H.jsx)("div",{className:"flex flex-col space-y-1",children:Ln.map((function(e,t){return(0,H.jsx)("div",{children:e},t)}))})]}):null,on,(0,H.jsx)(Fe.Z,{className:"text-v2-lily/60 text-xs !px-0",iconSize:12,message:o.ag._("Priority fees are only used to create new orders, and will not improve your chances of getting filled.")}),M.connected?(0,H.jsx)(P.Z,{disabled:En,loading:fe,type:"submit",className:"border border-v2-lily/20 w-full",children:o.ag._("Start DCA")}):(0,H.jsx)(v.uS,{buttonClassName:"!bg-transparent w-full",overrideContent:(0,H.jsx)(P.Z,{type:"button",className:"border border-v2-lily/20 w-full",children:o.ag._("Connect Wallet")})})]})})}),(0,H.jsx)("div",{className:"mt-3 w-full flex flex-col justify-center xl:max-w-7xl lg:max-w-[90vw] lg:mx-auto text-lg lg:text-2xl",children:(0,H.jsx)("div",{className:"w-full max-w-full overflow-hidden",children:Pn?(0,H.jsx)("div",{className:"md:flex flex-row justify-between px-5 lg:px-0",children:M.connected?(0,H.jsxs)(Oe.Z,{tabs:["Active DCAs","Past DCAs"],activeTab:$t,setActiveTab:Xt,isLoading:On,refetch:Tn,children:["Active DCAs"===$t?(0,H.jsx)(ae,{dcaClient:A,inputMint:i.targetToken,outputMint:i.targetToken}):null,"Past DCAs"===$t?(0,H.jsx)(le,{dcaClient:A,inputMint:i.targetToken,outputMint:i.targetToken}):null]}):null}):(0,H.jsx)("div",{className:"w-full mt-3 text-xs overflow-x-auto border rounded-lg border-white/5 flex flex-col justify-center items-center p-4",children:(0,H.jsx)(P.Z,{type:"button",size:"sm",className:"w-auto px-4 bg-[#121D28] border border-transparent",onClick:function(){Tn(),Cn(!0)},children:(0,H.jsx)("span",{className:"text-sm",children:"View Orders"})})})})})]}):(0,H.jsx)("div",{className:"w-full h-full flex flex-col items-center justify-between text-lg lg:text-2xl text-v2-lily",children:(0,H.jsxs)("div",{className:"mt-10 md:mt-20 sm:max-w-[90vw] md:w-[460px] w-full z-10",children:[(0,H.jsx)(Re.Z,{product:"dca"}),(0,H.jsx)("form",{className:"flex flex-col items-center justify-between w-full",onSubmit:se(Yt),children:(0,H.jsxs)("div",{className:"w-full bg-white dark:bg-v2-background rounded-2xl p-2 sm:p-4 shadow-swap2-light dark:shadow-swap2-dark",children:[(0,H.jsxs)("div",{className:"flex-col space-y-2 relative",children:[(0,H.jsxs)("div",{className:"flex justify-between items-center",children:[(0,H.jsx)("label",{htmlFor:"fromValue",className:"text-xs md:text-sm font-medium text-black/90 dark:text-white",children:(0,H.jsx)(l.cC,{id:"I want to allocate"})}),(0,H.jsxs)("div",{className:"flex space-x-2",children:[(0,H.jsx)(Ae.Z,{tokenInfo:it}),(0,H.jsx)(Ze.Z,{onChange:Hn,tokenInfo:it})]})]}),(0,H.jsx)("div",{className:(0,k.cn)("p-4 h-[72px] border border-transparent relative bg-v2-background-dark rounded-xl flex flex-col space-y-3 group","focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)(oe.Z,{onChange:Un,fromTokenAddress:Ye,toTokenAddress:ze,modalId:Ke,name:"fromTokenAddress",mintsList:Ge,type:"tokenAndInput"}),(0,H.jsx)("span",{className:"flex-1 text-right",children:(0,H.jsx)(m.Qr,{name:"fromValue",control:ne,rules:{required:"Required"},render:function(e){var t=e.field,n=t.onChange,r=t.value,a=t.onBlur;return(0,H.jsx)(Ce.Z,{onBlur:a,onChange:n,tokenAddress:Ye,value:r,name:"fromValue"})}})})]})}),(0,H.jsx)(Le,{tokenInfo:it,className:"mt-2"}),(0,H.jsxs)("div",{className:"relative flex justify-center",children:[(0,H.jsx)("hr",{className:"absolute w-full border-jupiter-input-light dark:border-[rgba(25,35,45,0.35)] top-[calc(50%-1px)] -z-0"}),(0,H.jsx)("div",{className:"inline-block z-10",children:(0,H.jsx)("button",{type:"button",className:(0,k.cn)("group/flip bg-[#EBEFF1] dark:bg-v2-background w-8 h-8 rounded-full cursor-pointer flex flex-col justify-center border-[3px] dark:border-[rgba(25,35,45,0.75)] dark:text-white-25","dark:hover:border-v2-primary dark:hover:shadow-swap-input-dark"),onClick:ln,children:(0,H.jsx)("span",{className:"w-full text-white/50 fill-current flex justify-center transition-none group-hover/flip:text-v2-primary/50 dark:group-hover/flip:text-v2-primary",children:(0,H.jsx)(Ne.Z,{})})})})]}),(0,H.jsxs)("div",{className:"flex justify-between items-center",children:[(0,H.jsx)("label",{className:"text-xs md:text-sm font-medium text-black/90 dark:text-white",children:(0,H.jsx)(l.cC,{id:"To buy"})}),(0,H.jsx)("div",{className:"flex",children:(0,H.jsx)(Ae.Z,{tokenInfo:st})})]}),(0,H.jsx)("div",{className:"h-[72px] border border-[#EFF0F0] dark:border-0 bg-v2-background-dark rounded-xl flex flex-col space-y-3",children:(0,H.jsx)(oe.Z,{onChange:Un,fromTokenAddress:Ye,toTokenAddress:ze,modalId:Ke,mintsList:Ge,name:"toTokenAddress",type:"tokenSelectOnly"})}),(0,H.jsx)(Le,{tokenInfo:st,className:"mt-2"}),(0,H.jsxs)("div",{className:"flex space-x-2",children:[(0,H.jsxs)("div",{className:"flex flex-col justify-between w-full",children:[(0,H.jsx)("label",{className:"text-xs md:text-sm font-medium text-black/90 dark:text-white",children:(0,H.jsx)(l.cC,{id:"Every"})}),(0,H.jsx)(m.Qr,{control:ne,name:"intervalNumber",render:function(e){var t=e.field,n=(t.name,t.onChange),r=(t.onBlur,t.value);return(0,H.jsx)("div",{className:(0,k.cn)("h-[54px] mt-2 rounded-xl flex space-x-3 items-center px-2 bg-v2-background-dark","text-sm lg:text-base","group-hover/select:border-v2-active-state group-hover/select:bg-[rgba(199,242,132,0.2)] group-hover/select:shadow-swap-input-dark"),children:(0,H.jsx)(x.Z,{className:"w-full py-3 px-4 bg-transparent !outline-none",value:null===r||void 0===r?void 0:r.floatValue,onValueChange:n,thousandSeparator:","===N.A5?".":",",decimalSeparator:","===N.A5?",":".",decimalScale:0,allowNegative:!1,allowLeadingZeros:!1,isAllowed:function(e){var t=e.floatValue;return!t||t<=1e4}})})}})]}),(0,H.jsx)("div",{className:"flex flex-col justify-end w-full",children:(0,H.jsx)(m.Qr,{control:ne,name:"period",render:function(e){var t=e.field,n=(t.name,t.onChange),r=(t.onBlur,t.value);return(0,H.jsx)("div",{className:(0,k.cn)("h-[54px] mt-2 rounded-xl flex space-x-3 items-center px-2 bg-v2-background-dark","text-sm lg:text-base","group-hover/select:border-v2-active-state group-hover/select:bg-[rgba(199,242,132,0.2)] group-hover/select:shadow-swap-input-dark"),children:(0,H.jsxs)(C.Z,{onChange:n,className:"!bg-transparent !px-3 !py-1 !text-v2-lily flex justify-between !w-full text-sm",contentClassName:"!w-full",data:dt,value:r,rowRenderer:function(e){return(0,H.jsx)("div",{className:"text-sm",children:e})},children:[r,(0,H.jsx)("div",{className:"ml-auto text-black/25 dark:text-white/25 group-hover/select:text-[#00D1DF] dark:group-hover/select:text-dark-active-state fill-current",children:(0,H.jsx)(y.Z,{})})]})})}})})]}),(0,H.jsxs)("div",{className:"flex flex-col justify-between w-full",children:[(0,H.jsxs)("label",{className:"text-xs md:text-sm font-medium text-black/90 dark:text-white flex justify-between items-center",children:[(0,H.jsx)(l.cC,{id:"Over"}),(0,H.jsx)(Pe.Z,{content:o.ag._("To minimise the predictability of your DCA strategy, orders are filled within a randomised padding of +/- 26 seconds."),children:(0,H.jsx)("div",{className:"-mt-0.5 md:mt-0 ml-2 text-white/20 fill-current",children:(0,H.jsx)(pe.Z,{width:12,height:12})})})]}),(0,H.jsx)(m.Qr,{control:ne,name:"numberOfOrders",render:function(e){var t=e.field,n=t.onChange,r=t.value;return(0,H.jsxs)("div",{className:(0,k.cn)("h-[54px] mt-2 rounded-xl flex space-x-3 items-center px-2 bg-v2-background-dark","text-sm lg:text-base","group-hover/select:border-v2-active-state group-hover/select:bg-[rgba(199,242,132,0.2)] group-hover/select:shadow-swap-input-dark"),children:[(0,H.jsx)(x.Z,{className:"w-full py-3 px-4 bg-transparent !outline-none",value:null===r||void 0===r?void 0:r.floatValue,onValueChange:n,thousandSeparator:","===N.A5?".":",",decimalSeparator:","===N.A5?",":".",decimalScale:0,allowNegative:!1,isAllowed:function(e){var t=e.floatValue;return!t||t<=1e6}}),(0,H.jsx)("div",{className:"pr-2 lg:pr-5",children:o.ag._("orders")})]})}})]}),(0,H.jsxs)("div",{children:[(0,H.jsx)(m.Qr,{control:ne,name:"enableMinMaxPrice",render:function(e){var t=e.field,n=t.onChange,r=t.value;return(0,H.jsx)(Me,{value:r,onClick:function(){return n(!r)}})}}),et?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)("div",{className:"flex space-x-2",children:[(0,H.jsx)("div",{className:"flex flex-col justify-between w-full",children:(0,H.jsx)(m.Qr,{control:ne,name:"minValue",render:function(e){var t=e.field,n=t.onChange,r=t.value;return(0,H.jsx)("div",{className:(0,k.cn)("h-[54px] mt-2 rounded-xl flex space-x-3 items-center px-2 bg-v2-background-dark","text-sm lg:text-base","group-hover/select:border-v2-active-state group-hover/select:bg-[rgba(199,242,132,0.2)] group-hover/select:shadow-swap-input-dark"),children:(0,H.jsx)(ke.Z,{placeholder:o.ag._("Min Price"),className:"w-full py-3 pl-2 bg-transparent !outline-none placeholder:text-sm",value:r.value,onChange:n,decimals:Tt,isAllowed:function(e){var t=e.floatValue;return!t||t<=We},allowNegative:!1})})}})}),(0,H.jsx)("div",{className:"mx-2 flex items-end mb-4 text-base text-white/50",children:"~"}),(0,H.jsx)("div",{className:"flex flex-col justify-between w-full",children:(0,H.jsx)(m.Qr,{control:ne,name:"maxValue",render:function(e){var t=e.field,n=t.onChange,r=t.value;return(0,H.jsx)("div",{className:(0,k.cn)("h-[54px] mt-2 rounded-xl flex space-x-3 items-center px-2 bg-v2-background-dark","text-sm lg:text-base","group-hover/select:border-v2-active-state group-hover/select:bg-[rgba(199,242,132,0.2)] group-hover/select:shadow-swap-input-dark"),children:(0,H.jsx)(ke.Z,{className:"w-full py-3 pl-2 bg-transparent !outline-none placeholder:text-sm",value:r.value,onChange:n,placeholder:o.ag._("Max Price"),isAllowed:function(e){var t=e.floatValue;return!t||t<=We},ref:fn,decimals:Tt,allowNegative:!1})})}})})]}),(0,H.jsxs)("div",{className:"text-xs text-white/50 flex items-center justify-between h-4 mt-1",children:[It?(0,H.jsxs)("p",{children:[null!==Vt&&void 0!==Vt&&Vt.isFromBase?(0,H.jsx)(l.cC,{id:"Current sell"}):(0,H.jsx)(l.cC,{id:"Current buy"})," ",(0,H.jsx)(l.cC,{id:"{0} rate",values:{0:null===It||void 0===It?void 0:It.symbol}})]}):(0,H.jsx)(re.O,{className:"h-4 w-2"}),Ut?(0,H.jsx)(re.O,{className:"!h-3 !w-12"}):Ht?(0,H.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,H.jsx)(D.ZP,{value:null!==Vt&&void 0!==Vt&&Vt.isFromBase?new w.Z(1).div(Ht.marketRate).toNumber():Ht.marketRate.toNumber(),maxSuffix:6}),(0,H.jsx)("span",{children:null!==Vt&&void 0!==Vt&&Vt.isFromBase?"".concat(Ct," / ").concat(St):"".concat(St," / ").concat(Ct)})]}):"-"]}),(0,H.jsxs)("div",{className:"my-2 py-2 px-4 bg-v2-lily/5 rounded-lg text-xs flex items-center text-white space-x-2 w-full",children:[(0,H.jsx)("div",{className:"h-3 w-3 mt-0.5 fill-white/40",children:(0,H.jsx)(S.Z,{fill:"inherit"})}),(0,H.jsx)("div",{className:"text-white/40",children:(0,H.jsx)("p",{children:o.ag._("DCA will only be executed if the price falls within the range of your pricing strategy.")})})]})]}):null,jt&&(0,H.jsxs)("div",{className:"my-2 py-2 px-4 bg-warning/80 rounded-lg text-xs flex items-center text-white space-x-2 w-full leading-tight",children:[(0,H.jsx)("div",{className:"h-3 w-3 mt-0.5 fill-current",children:(0,H.jsx)(S.Z,{fill:"inherit"})}),(0,H.jsx)("div",{className:"space-y-2",children:(0,H.jsx)("p",{children:(0,H.jsx)(l.cC,{id:"Given the new token's high volatility during its price discovery phase, please exercise caution while trading. You should use <0>pricing strategy</0> to prevent buying or selling at an unfavorable price.",components:{0:(0,H.jsx)("b",{})}})})})]})]})]}),(0,H.jsxs)("div",{className:"flex flex-col items-center justify-center w-full mt-3",children:[En&&Ln.length>0?(0,H.jsxs)("div",{className:"mb-4 py-3 px-2 rounded-lg text-xs flex items-center text-white space-x-2 w-full bg-[#F04A44]",children:[(0,H.jsx)("div",{className:"h-3 w-3 mt-0.5 fill-current",children:(0,H.jsx)(S.Z,{fill:"inherit"})}),(0,H.jsx)("div",{className:"flex flex-col space-y-1",children:Ln.map((function(e,t){return(0,H.jsx)("div",{children:e},t)}))})]}):null,on,Kn?(0,H.jsx)(De.y,{}):M.connected?(0,H.jsx)(P.Z,{disabled:En,loading:fe,type:"submit",className:"border border-v2-lily/20 w-full",children:Bt||Rt?(0,H.jsx)(l.cC,{id:"Token account frozen"}):o.ag._("Start DCA")}):(0,H.jsx)(v.uS,{buttonClassName:"!bg-transparent w-full",overrideContent:(0,H.jsx)(P.Z,{type:"button",className:"border border-v2-lily/20 w-full",children:o.ag._("Connect Wallet")})})]})]})}),(0,H.jsx)("div",{className:"mt-3 w-full flex flex-col justify-center xl:max-w-7xl lg:max-w-[90vw] lg:mx-auto",children:(0,H.jsx)("div",{className:"w-full max-w-full overflow-hidden",children:(0,H.jsx)("div",{className:"md:flex flex-row justify-between px-5 lg:px-0",children:M.connected?(0,H.jsx)("div",{className:"flex space-x-2 justify-start items-start overflow-y-auto py-3 lg:py-0 w-full",children:(0,H.jsxs)(Oe.Z,{tabs:["Active DCAs","Past DCAs"],activeTab:$t,setActiveTab:Xt,isLoading:On,refetch:Tn,children:["Active DCAs"===$t?(0,H.jsx)(ae,{dcaClient:A}):null,"Past DCAs"===$t?(0,H.jsx)(le,{dcaClient:A}):null]})}):null})})})]})})}},55259:function(e,t,n){var r=n(84985),a=n(24201),i=n(93981),s=n(56100),l=n(69825),o=n(82625),c=n(29541);t.Z=function(e){var t=e.onChange,n=e.onBlur,d=e.tokenAddress,u=e.loading,m=e.value,x=e.name,f=e.disabled,v=(0,r.Bn)().getTokenInfo,h=i.useRef(null),p=i.useMemo((function(){return v(d)}),[v,d]);return(0,c.jsxs)("div",{className:"flex flex-col text-right h-full",children:[u||!p?(0,c.jsx)(s.O,{className:"ml-2 w-24 h-6 self-end"}):(0,c.jsx)(l.Z,{name:x,className:"outline-none",decimals:p.decimals,onChange:t,value:m.floatValue,disabled:f,ref:h,onBlur:n}),u?(0,c.jsx)(s.O,{className:"ml-2 mt-0.5 w-8 h-4 self-end"}):null!==m&&void 0!==m&&m.value?(0,c.jsx)("div",{className:(0,a.cn)("text-xs text-black-35 dark:text-white-35"),onClick:function(){var e;return null===h||void 0===h||null===(e=h.current)||void 0===e?void 0:e.focus()},children:(0,c.jsx)(o.Z,{tokenAddress:d,value:m})}):null]})}},66032:function(e,t,n){var r=n(73360),a=n(84985),i=n(17769),s=n(24201),l=n(13838),o=n(93981),c=n(13170),d=n(29541);t.Z=function(e){var t=e.disabled,n=e.tokenInfo,u=e.onChange,m=(0,a.Os)().connected,x=(0,a.jB)().useWSol,f=n.address,v=(0,i.FB)(f).balance,h=o.useCallback((function(e){return u(e)}),[u]);return m&&n?(0,d.jsxs)("div",{className:"flex justify-between items-center space-x-1",children:[(0,d.jsx)("button",{type:"button",onClick:function(){var e=new l.Z(v).div(2).toDP(n.decimals);h(e)},disabled:t,className:(0,s.cn)(t&&"cursor-not-allowed opacity-50","cursor-pointer text-[10px] text-black-35 border-black-10 dark:text-white-35 dark:bg-black-10 leading-4 py-[1px] px-2 rounded-full border dark:border-white-10 font-semibold","hover:border-v2-primary/50 hover:bg-[#2C3F54] hover:text-v2-primary/50","dark:hover:text-v2-primary dark:hover:bg-v2-primary/10 dark:hover:border-v2-primary"),children:(0,d.jsx)(r.cC,{id:"HALF"})}),(0,d.jsx)("button",{type:"button",onClick:function(){var e=new l.Z(v);f!==c.W4.toBase58()||x||(e=e.minus(c.WO)),e.lt(0)&&(e=new l.Z(v)),h(e)},disabled:t,className:(0,s.cn)(t&&"cursor-not-allowed opacity-50","cursor-pointer text-[10px] text-black-35 border-black-10 dark:text-white-35 dark:bg-black-10 leading-4 py-[1px] px-2 rounded-full border dark:border-white-10 font-semibold","hover:border-[#00D1DF] hover:bg-[#2C3F54] hover:text-v2-primary/50","dark:hover:text-v2-primary dark:hover:bg-v2-primary/10 dark:hover:border-v2-primary"),children:(0,d.jsx)(r.cC,{id:"MAX"})})]}):null}},13246:function(e,t,n){var r=n(93981),a=n(84985),i=n(10361),s=n(59978),l=n(20255),o=n(69667),c=n(42082),d=n(24201),u=n(63153),m=n(70006),x=n(1242),f=n(29541),v=function(e){var t=e.showAllPairs,n=e.currentTokenInfo,r=e.disabled;return(0,f.jsx)("div",{className:"flex justify-between items-center group/select",children:(0,f.jsxs)("button",{disabled:r,type:"button",className:(0,d.cn)("py-2 px-3 h-10 rounded-xl flex space-x-3 items-center  border border-transparent",r?"cursor-default":"bg-white dark:bg-v2-background dark:group-hover/select:border-v2-primary/50 dark:group-hover/select:bg-[rgba(199,242,132,0.2)] dark:group-hover/select:shadow-swap-input-dark"),onClick:t,children:[(0,f.jsx)("div",{className:"rounded-full",children:(null===n||void 0===n?void 0:n.logoURI)&&(0,f.jsx)(s.Z,{width:24,height:24,info:n})}),(0,f.jsx)("div",{className:"font-semibold text-sm",translate:"no",children:null===n||void 0===n?void 0:n.symbol}),!r&&(0,f.jsx)("div",{className:"text-black/25 dark:text-white/25 group-hover/select:text-[#00D1DF] dark:group-hover/select:text-v2-primary fill-current",children:(0,f.jsx)(o.Z,{})})]})})},h=function(e){var t=e.showAllPairs,n=e.currentTokenInfo,r=e.disabled;return(0,f.jsx)("div",{className:"flex justify-between items-center group/select w-full h-full",children:(0,f.jsxs)("button",{type:"button",className:(0,d.cn)("py-2 px-5 h-full rounded-xl flex space-x-3 items-center border border-transparent w-full",r?"cursor-default":"dark:group-hover/select:border-v2-primary/50 dark:group-hover/select:bg-[rgba(199,242,132,0.2)] dark:group-hover/select:shadow-swap-input-dark"),onClick:t,children:[(0,f.jsx)("div",{className:"rounded-full",children:(null===n||void 0===n?void 0:n.logoURI)&&(0,f.jsx)(s.Z,{width:24,height:24,info:n})}),(0,f.jsx)("div",{className:"font-semibold text-base",translate:"no",children:null===n||void 0===n?void 0:n.symbol}),!r&&(0,f.jsx)("div",{className:"!ml-auto text-black/25 dark:text-white/25 group-hover/select:text-[#00D1DF] dark:group-hover/select:text-v2-primary fill-current",children:(0,f.jsx)(o.Z,{})})]})})};t.Z=function(e){var t=e.fromTokenAddress,n=e.toTokenAddress,s=e.onChange,o=e.name,d=e.modalId,p=e.mintsList,b=e.type,g=e.disabled,w=(0,a.Bn)(),j=w.unknownTokenMap,y=w.getTokenInfo,k=(0,l.B)(),N=k.add,P=k.get,C=(0,m.JT)(),S=C.openModal,M=C.closeModal,Z=C.openContextualModal,A=C.setContextValue,O=C.ModalContextConsumer,T=(0,c.T)(),V=(0,r.useMemo)((function(){return"fromTokenAddress"===o?t:n}),[t,n,o]),F=(0,r.useMemo)((function(){return y(V)}),[y,V]),D=function(e){if(e){var r,a,l,c,d=j.get(e.address),u=P(e.address);if("fromTokenAddress"===o)n===e.address?(r=e,a=y(t)):(r=e,a=y(n));else t===e.address?(r=y(n),a=e):(r=y(t),a=e);if(d&&!u)setTimeout((function(){S((0,f.jsx)(i.ZP,{tokensInfo:[e],onClickReject:I,onClickAccept:function(){var t,n;s("fromTokenAddress"===o?null===(t=r)||void 0===t?void 0:t.address:null===(n=a)||void 0===n?void 0:n.address),N(e.address),T(r,a),M()}}),{canDismiss:!1,containerStyle:{background:"none"}})}),0);else s("fromTokenAddress"===o?null===(l=r)||void 0===l?void 0:l.address:null===(c=a)||void 0===c?void 0:c.address),T(r,a),M()}},I=function(){O&&!g&&(A(d,p),Z(d,p,(0,f.jsx)(O,{children:function(e){return(0,f.jsx)(u.ZP,{filterToken2022:!0,onSubmit:D,mintsList:e,bestTokens:x.KG})}}),{position:"top",noCloseButton:!0}))};return"tokenAndInput"===b?(0,f.jsx)(v,{disabled:g,showAllPairs:I,currentTokenInfo:F}):(0,f.jsx)(h,{disabled:g,showAllPairs:I,currentTokenInfo:F})}},32044:function(e,t,n){n(93981);var r=n(84985),a=n(94223),i=n(1622),s=n(24201),l=n(29541);t.Z=function(e){var t=e.className,n=e.tokenInfo;if(!(0,r.Os)().connected||!n)return null;var o=n.address;return(0,l.jsxs)("div",{className:"flex space-x-1 items-center text-black-50 dark:text-[#CFF3FF] dark:text-opacity-[0.35]",children:[(0,l.jsx)("div",{className:"mb-px",children:(0,l.jsx)(a.Z,{width:11,height:11})}),(0,l.jsxs)("div",{className:(0,s.cn)("text-xs font-normal whitespace-nowrap",t),children:[(0,l.jsx)(i.Z,{mintAddress:o})," ",(0,l.jsx)("span",{children:null===n||void 0===n?void 0:n.symbol})]})]})}},57722:function(e,t,n){n.d(t,{Pf:function(){return l},YB:function(){return i},Ye:function(){return s},hl:function(){return o},tc:function(){return d}});var r,a=n(7761),i=2,s=3,l=20,o=.5,c=86400,d=[{id:"minute",name:a.ag._("minute"),secondsInPeriod:60},{id:"hour",name:a.ag._("hour"),secondsInPeriod:3600},{id:"day",name:a.ag._("day"),secondsInPeriod:c},{id:"week",name:a.ag._("week"),secondsInPeriod:604800},{id:"month",name:a.ag._("month"),secondsInPeriod:2592e3}];!function(e){e.DCA="DCA",e.VA="VA"}(r||(r={}))},3955:function(e,t,n){n.d(t,{T:function(){return s}});var r=n(63956),a=n(94728);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var s=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({address:e.address||a.PublicKey.default.toString(),decimals:0,name:"Unknown",chainId:101,symbol:"Unknown"},e)}},96721:function(e,t,n){n.d(t,{Z:function(){return ve},s:function(){return xe}});var r=n(63956),a=n(70107),i=n(27195),s=n(97620),l=n(8857),o=n.n(l),c=n(73360),d=n(7761),u=n(93981),m=n(1361),x=n(71052),f=n(84985),v=n(17769),h=n(22060),p=n(91511),b=n(13170),g=n(71048),w=n(66956),j=n(65558),y=n(13838),k=n(94728),N=function(){var e=(0,i.Z)(o().mark((function e(t){var n,r,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("standard"in t)||!("fuse:getEphemeralSigners"in t.wallet.features)){e.next=10;break}return n=t.wallet.features["fuse:getEphemeralSigners"],e.next=4,n.getEphemeralSigners(1);case 4:return r=e.sent,a=(0,s.Z)(r,1),i=a[0],e.abrupt("return",{publicKey:new k.PublicKey(i)});case 10:return e.abrupt("return",k.Keypair.generate());case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=n(11003),C=n(85394),S=n(59394),M=n(76613),Z=n(59243),A=n(25546),O=n(12939),T=n(46267),V=n(41118),F=n(77798),D=n(23632),I=n(94223),_=n(1622),B=n(69921),R=n(24201),L=n(56100),E=n(16330),K=n(99438),H=n(42082),U=n(78013),q=n(74376),W=n(86883),G=n(71932),Q=n(70006),Y=n(33130),z=n(3011),J=n(49839),$=n(54566),X=n(29541),ee=function(e){var t=e.actions;return(0,X.jsx)("div",{className:(0,R.cn)("flex bg-black/60 rounded-lg overflow-hidden shadow-xl backdrop-blur-lg"),children:t.map((function(e,n){return(0,X.jsx)("button",{type:"button",onClick:e.onClick,className:(0,R.cn)("text-xs w-13 p-2 flex justify-center font-semibold hover:bg-white/20",0!==n&&n!==t.length?"border-l border-r border-white/20":""),children:e.text},n)}))})},te=n(78232),ne=n(59295),re=n(9319),ae=n.n(re),ie=n(50269),se=n(1242),le=n(71130),oe=n(90342);function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ue(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return me(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw i}}}}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xe=function(e){var t=e.fromPair,n=e.fromTokenInfo,r=e.toTokenInfo,a=e.side,i=e.isSubmitting,l=(0,f.Bn)().newTokenListMap,o=(0,w.b)(n,r),c=o.quoteTokenInfo,d=o.baseTokenInfo,m=o.quoteTokenPrice,x=o.baseTokenPrice,v=o.rateDecimals,h=(0,z.KO)(se.dS),p=(0,s.Z)(h,1)[0].GRAPH_PARAMS,b=(0,u.useMemo)((function(){return!(!c||!d)&&(l.has(c.address)||l.has(d.address))}),[l,c,d]),g=(0,u.useMemo)((function(){if(!V.d.find((function(e){return e===(null===n||void 0===n?void 0:n.address)||e===(null===r||void 0===r?void 0:r.address)})))return null;var e=t===(null===d||void 0===d?void 0:d.address);return{isFromBase:Boolean(e)}}),[null===d||void 0===d?void 0:d.address,t,null===n||void 0===n?void 0:n.address,null===r||void 0===r?void 0:r.address]),j=(0,D.s)({quoteTokenInfo:c,baseTokenInfo:d,quoteTokenPrice:m,baseTokenPrice:x,isBaseQuoteMode:g,rateDecimals:v,isSubmitting:i}),k=j.swapMarketPrice,N=j.isFetching,P=j.isFetched,C=(0,u.useMemo)((function(){if(b&&!k){var e=Number(p.i),t="buy"===a?m:"sell"===a?null!==g&&void 0!==g&&g.isFromBase?m:x:void 0;return t?"sell"!==a||null!==g&&void 0!==g&&g.isFromBase?new y.Z(e).div(t):new y.Z(t).div(e):null}return k}),[x,b,null===g||void 0===g?void 0:g.isFromBase,k,m,a,p]);return{rateDecimals:v,isBaseQuoteMode:g,swapMarketPrice:C,isMarketPriceFetched:P,isFetchingMarketPrice:N,jupSwapMarketPrice:k,quoteTokenInfo:c,baseTokenInfo:d}},fe=function(e){var t,n=e.limitOrder,r=e.fromTokenInfo,a=e.toTokenInfo,l=e.onOrderCreationFailed,p=e.onOrderCreationStart,w=e.onOrderCreationSuccess,P=e.side,S=e.description,V=e.setForm,D=(0,v.aM)(["limit-order-fee-structure"],(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getFee();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{staleTime:1/0}),U=(0,g.cI)({defaultValues:{fromPair:r.address,toPair:a.address,fromPairValue:"100",targetPrice:"",toPairValue:"",expiry:"Never"}}),q=U.control,W=U.handleSubmit,re=U.watch,ce=U.setValue,ue=U.formState,me=(0,H.T)(),fe=(0,Q.JT)(),ve=(fe.openContextualModal,fe.ModalContextConsumer,fe.openModal),he=(fe.closeModal,(0,m.O)()),pe=he.wallet,be=he.signTransaction,ge=he.signAllTransactions,we=(0,u.createRef)(),je=(0,f.Bn)(),ye=je.tokenMap,ke=je.connection,Ne=(0,u.useState)({day:0,hour:0,minute:0}),Pe=(Ne[0],Ne[1],(0,u.useState)(!1)),Ce=(Pe[0],Pe[1],(0,u.useRef)(!1)),Se=(0,u.useMemo)((function(){var e=new Array(ye.size);return ye.forEach((function(t){(0,M.kL)(t)||e.push(t.address)})),e}),[ye]),Me=re(),Ze=(0,Y.R3)(),Ae=(0,z.KO)(J.yz),Oe=(0,s.Z)(Ae,1)[0],Te=(0,oe.gs)().priorityLevel,Ve=u.useCallback((function(e){var t=e,n=a;a.address===e.address&&(t=a,n=r),n&&me(t,n)}),[me,r,a]),Fe=u.useCallback((function(e){var t=r,n=e;r.address===e.address&&(t=a,n=r),t&&me(t,n)}),[me,r,a]),De=(0,u.useMemo)((function(){return(0,M.Hd)(Me.targetPrice)?Number(Me.targetPrice):0}),[Me.targetPrice]),Ie=(0,z.KO)(se.dS),_e=(0,s.Z)(Ie,1)[0],Be=_e.RECOMMENDED_PARAMS,Re=_e.GRAPH_PARAMS,Le=_e.FORM_CONFIG.LIMIT_ORDER,Ee=(0,u.useState)({marketStatus:"unset",swapMarketPrice:new y.Z(Re.i),hasNewToken:!1,constants:Le.PRE_LAUNCH_CONSTANTS}),Ke=Ee[0],He=Ee[1],Ue=xe({fromPair:Me.fromPair,fromTokenInfo:r,toTokenInfo:a,side:P,isSubmitting:ue.isSubmitting}),qe=Ue.rateDecimals,We=Ue.isBaseQuoteMode,Ge=Ue.isFetchingMarketPrice,Qe=Ue.quoteTokenInfo,Ye=Ue.baseTokenInfo;(0,u.useEffect)((function(){He((function(e){return de(de({},e),{},{swapMarketPrice:Ue.swapMarketPrice||null})}))}),[He,Ue.swapMarketPrice]);var ze=u.useCallback((function(e){(0,M.Hd)(e)&&ce("toPairValue",e)}),[ce]),Je=(0,f.y6)(),$e=Je.tokenPriceMap,Xe=Je.getUSDValue,et=Je.isLatest,tt=u.useMemo((function(){var e,t;if(!r||!a)return[null,null];var n=null===(e=$e[r.address])||void 0===e?void 0:e.usd,i=null===(t=$e[a.address])||void 0===t?void 0:t.usd;return n||Xe(r.address),i||Xe(a.address),[n,i]}),[r,Xe,a,$e,et]),nt=(0,s.Z)(tt,2),rt=nt[0],at=nt[1],it=(0,u.useCallback)((function(e){if(e){var t=(0,A.KU)(Number(e));ce("targetPrice",new y.Z(e).toFixed(Math.min(qe,t+5))),ze(null!==We&&void 0!==We&&We.isFromBase?new y.Z(e.toFixed()).mul(Me.fromPairValue||0).toDP(qe).toFixed():new y.Z(Me.fromPairValue||0).div(e).toDP(qe).toFixed())}}),[null===We||void 0===We?void 0:We.isFromBase,ze,qe,ce,Me.fromPairValue]),st=(0,u.useCallback)((function(e,t){if(e){var n=(0,A.KU)(Number(e)),r=t?new y.Z(e.toFixed()).mul(t):e;ce("targetPrice",new y.Z(r).toFixed(Math.min(qe,n+5))),ze(null!==We&&void 0!==We&&We.isFromBase?new y.Z(r.toFixed()).mul(Me.fromPairValue||0).toDP(qe).toFixed():new y.Z(Me.fromPairValue||0).div(r).toDP(qe).toFixed())}}),[ce,qe,ze,null===We||void 0===We?void 0:We.isFromBase,Me.fromPairValue]);(0,u.useEffect)((function(){if("unset"===Ke.marketStatus&&!Ue.jupSwapMarketPrice){if(He((function(e){return de(de({},e),{},{marketStatus:"pre-launch"})})),Ce.current)return;if("buy"===P){if(Le.PRE_LAUNCH_CONSTANTS.initialPrice){var e=new y.Z(Le.PRE_LAUNCH_CONSTANTS.initialPrice||0).div(rt||0);it(e)}}else ce("targetPrice","")}if("pre-launch"===Ke.marketStatus&&Ue.jupSwapMarketPrice&&Ue.jupSwapMarketPrice.mul(.99).lt(Re.m)){if(He((function(e){return de(de({},e),{},{constants:Le.IN_RANGE_CONSTANTS,marketStatus:"in-range"})})),Ce.current)return;st(Ue.jupSwapMarketPrice,"buy"===P?Le.IN_RANGE_CONSTANTS.initialFactor:1)}if(Ue.jupSwapMarketPrice&&Ue.jupSwapMarketPrice.mul(.99).gte(Re.m)){if(He((function(e){return de(de({},e),{},{constants:Le.OUT_OF_RANGE_CONSTANTS,marketStatus:"out-of-range"})})),Ce.current)return;st(Ue.jupSwapMarketPrice,"buy"===P?Le.OUT_OF_RANGE_CONSTANTS.initialFactor:1)}}),[Ke.constants.initialFactor,Ke.marketStatus,Ke.swapMarketPrice,st,Ue.jupSwapMarketPrice,He,Le,Re,P,rt,it,ce]);var lt=(0,F.E)(),ot=(0,u.useMemo)((function(){var e=new y.Z(0);if(!Me.targetPrice||!Ke.swapMarketPrice)return e;var t=new y.Z(De).sub(Ke.swapMarketPrice).div(Ke.swapMarketPrice);return(e=new y.Z(100).mul(t).toDP(2)).isFinite()?e:new y.Z(0)}),[Me.targetPrice,Ke.swapMarketPrice,De]),ct=(0,u.useMemo)((function(){return ot.gt(1e4)?">10000":"".concat(ot.toNumber()>0?"+":"").concat(ot.toDP(2).toString())}),[ot]),dt=(0,u.useMemo)((function(){return null!==We&&void 0!==We&&We.isFromBase?ot.toNumber()<0:ot.toNumber()>0}),[null===We||void 0===We?void 0:We.isFromBase,ot]),ut=(0,u.useMemo)((function(){return null!==We&&void 0!==We&&We.isFromBase?ot.toNumber()>0:ot.toNumber()<0}),[null===We||void 0===We?void 0:We.isFromBase,ot]),mt=(0,u.useMemo)((function(){return"pre-launch"!==Ke.marketStatus&&dt||ut}),[Ke.marketStatus,dt,ut]),xt=(0,u.useMemo)((function(){if(lt){if("unset"===Ke.marketStatus||"pre-launch"===Ke.marketStatus)return;if(!Ke.swapMarketPrice)return(0,X.jsx)(c.cC,{id:"Could not retrieve market price for this pair. Trade with caution"});var e=(0,X.jsx)("button",{type:"button",onClick:function(){V("swap")},className:"font-semibold underline",children:d.ag._("Jupiter Swap")}),t=(0,X.jsx)(c.cC,{id:"Limit price is {0}% {1} than market, you are {2} at a much {3} rate. We recommend that you use {swapLink} instead",values:{0:ot.absoluteValue(),1:null!==We&&void 0!==We&&We.isFromBase?"lower":"higher",2:null!==We&&void 0!==We&&We.isFromBase?"selling":"buying",3:null!==We&&void 0!==We&&We.isFromBase?"lower":"higher",swapLink:e}});if(null!==We&&void 0!==We&&We.isFromBase){if(ot.toNumber()<=-.5)return t}else if(ot.toNumber()>=.5)return t}}),[lt,Ke.marketStatus,Ke.swapMarketPrice,ot,null===We||void 0===We?void 0:We.isFromBase,V]),ft=(0,v.FB)(r.address).balance,vt=u.useCallback((function(e){var t;e.preventDefault(),t=Me.fromPair===b.W4.toBase58()?String(ft>b.WO?ft-b.WO:0):String(ft),ce("fromPairValue",t);var n=null!==We&&void 0!==We&&We.isFromBase?De:De?1/De:0;ce("toPairValue",new y.Z(t).mul(n).toFixed())}),[Me.fromPair,ce,null===We||void 0===We?void 0:We.isFromBase,De,ft]),ht=u.useCallback((function(e){e.preventDefault();var t=new y.Z(ft).div(2).toString();ce("fromPairValue",t);var n=null!==We&&void 0!==We&&We.isFromBase?De:De?1/De:0;ce("toPairValue",new y.Z(t).mul(n).toFixed())}),[null===We||void 0===We?void 0:We.isFromBase,ft,ce,De]),pt=(0,u.useMemo)((function(){if(null===pe||void 0===pe||!pe.adapter.connected)return!1;if((null===r||void 0===r?void 0:r.address)!==b.W4.toBase58())return!1;if(!(0,M.Hd)(Me.fromPairValue))return!1;var e=ft-b.WO;return new y.Z(Me.fromPairValue||0).gt(e)}),[null===r||void 0===r?void 0:r.address,ft,null===pe||void 0===pe?void 0:pe.adapter.connected,Me.fromPairValue]),bt=(0,u.useMemo)((function(){return new y.Z(Me.fromPairValue||0).lte(ft)}),[ft,Me.fromPairValue]),gt=(0,u.useMemo)((function(){var e=Z.CO.includes(r.address)&&Z.CO.includes(a.address),t=Z.Jx.includes(r.address)&&Z.Jx.includes(a.address);return D.data?e||t?new y.Z(D.data.makerStableFee.toString()).div(100).toFixed(1)+"%":new y.Z(D.data.makerFee.toString()).div(100).toFixed(1)+"%":null}),[r.address,a.address,D.data]);(0,u.useMemo)((function(){Ce.current=!1,r&&ce("fromPair",r.address),a&&ce("toPair",a.address),ce("targetPrice",""),ce("toPairValue","")}),[r.address,a.address,P]);var wt=u.useRef(null),jt=u.useState(!1),yt=(0,s.Z)(jt,2),kt=yt[0],Nt=yt[1];(0,M.O3)(wt,(function(){Nt(!1)}));var Pt=(0,u.useMemo)((function(){return new y.Z(Me.fromPairValue||0).mul(rt||0)}),[rt,Me.fromPairValue]),Ct=u.useMemo((function(){return{isFromValueTooLow:Pt.lt(.99*Ke.constants.minUSD)}}),[Ke.constants.minUSD,Pt]).isFromValueTooLow,St=(0,u.useMemo)((function(){var e=[];"pre-launch"===Ke.marketStatus&&("buy"===P&&new y.Z(rt||0).mul(De).lt((null===Be||void 0===Be?void 0:Be.min)||0)&&Be&&e.push((0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)("p",{children:d.ag._("Your Limit Order will most likely NOT FILL")}),(0,X.jsxs)("p",{children:["Recommended Range: ",(0,X.jsxs)("span",{className:"font-semibold",children:[Be.min," USDC"]})," -"," ",(0,X.jsxs)("span",{className:"font-semibold",children:[Be.max," USDC"]})]})]})));return e}),[Be,Ke.marketStatus,rt,P,De]),Mt=(0,u.useMemo)((function(){var e,t=[];return null!==pe&&void 0!==pe&&null!==(e=pe.adapter)&&void 0!==e&&e.publicKey&&Me.fromPairValue&&Ct&&t.push(d.ag._("Minimum {0} USD required",{0:Ke.constants.minUSD})),function(){if(De){if("pre-launch"===Ke.marketStatus||"in-range"===Ke.marketStatus){if(!Ke.constants.maxPrice)return void t.push(d.ag._("Missing maxPrice"));if("buy"===P){if(!rt)return void t.push(d.ag._("Missing fromTokenPrice"));var e=new y.Z(rt).mul(De);e.gt(Ke.constants.maxPrice)&&t.push(d.ag._("Your Limit Order price is higher than the max price of {0} USD.",{0:Ke.constants.maxPrice})),Ke.constants.minPrice&&e.lt(Ke.constants.minPrice)&&t.push(d.ag._("Your Limit Order price is lower than the minimum price of {0} USD.",{0:Ke.constants.minPrice}))}if("sell"===P){if(!at)return void t.push(d.ag._("Missing toTokenPrice"));var n=new y.Z(at).mul(De);Ke.constants.minPrice&&n.lt(Ke.constants.minPrice)&&t.push(d.ag._("Your Limit Order price is lower than the min price of {0} USD.",{0:Ke.constants.minPrice}))}}}else t.push(d.ag._("Please enter a target price"))}(),function(){if(De&&("in-range"===Ke.marketStatus||"out-of-range"===Ke.marketStatus)){if(!Ke.constants.maxGuardRails)return void t.push(d.ag._("maxGuardRails is not defined"));(null!==We&&void 0!==We&&We.isFromBase?ot.toNumber()<-Ke.constants.maxGuardRails:ot.toNumber()>Ke.constants.maxGuardRails)&&t.push(d.ag._("Your Limit Order price is {0} than the max allowed percentage of {1}%",{0:null!==We&&void 0!==We&&We.isFromBase?"higher":"lower",1:Ke.constants.maxGuardRails}))}}(),bt||t.push((0,X.jsxs)("div",{className:"space-y-1",children:[d.ag._("Insufficient balance, you have {maxBalance} {0}.",{0:r.symbol,maxBalance:ft}),(0,X.jsx)("br",{}),(0,X.jsx)("button",{type:"button",className:"underline cursor-pointer",onClick:vt,children:d.ag._("Use available balance")})]})),t}),[null===pe||void 0===pe||null===(t=pe.adapter)||void 0===t?void 0:t.publicKey,Me.fromPairValue,De,Ct,Ke.marketStatus,Ke.constants.minUSD,Ke.constants.maxPrice,Ke.constants.minPrice,Ke.constants.maxGuardRails,bt,ft,r.symbol,vt,P,rt,at,null===We||void 0===We?void 0:We.isFromBase,ot]),Zt=(0,u.useMemo)((function(){var e=Me.fromPairValue,t=Me.targetPrice,n=Me.toPairValue;return Number(e)<=0||Number(n)<=0||Number(t)<=0||ue.isSubmitting||!bt||pt||Mt.length>0}),[ue.isSubmitting,Me,bt,pt,Mt]),At=(0,u.useCallback)(function(){var e=(0,i.Z)(o().mark((function e(t){var i,s,u,m,x,f,v,b,g,C,S,Z,A;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(pe&&pe.adapter.publicKey&&be&&ge&&r&&a){e.next=2;break}return e.abrupt("return");case 2:return i=new j.BN(new y.Z(t.fromPairValue).mul(Math.pow(10,r.decimals)).round().toString()),s=new j.BN(new y.Z(t.toPairValue).mul(Math.pow(10,a.decimals)).round().toString()),u=k.PublicKey.default,e.prev=5,e.next=8,N(pe.adapter);case 8:return m=e.sent,e.next=11,n.createOrder({owner:pe.adapter.publicKey,inAmount:i,outAmount:s,inputMint:new k.PublicKey(t.fromPair),outputMint:new k.PublicKey(t.toPair),expiredAt:null,base:m.publicKey});case 11:return x=e.sent,f=x.tx,v=x.orderPubKey,p({publicKey:u=v,account:{oriMakingAmount:i,makingAmount:i,takingAmount:s,oriTakingAmount:s,inputMint:new k.PublicKey(t.fromPair),outputMint:new k.PublicKey(t.toPair),expiredAt:null}}),e.next=18,ke.getLatestBlockhash("confirmed");case 18:return b=e.sent,e.next=21,new Promise((function(e){var t=(0,ne.c)({inAmount:ae().BigInt(s.toString()),inputDecimal:a.decimals,outAmount:ae().BigInt(i.toString()),outputDecimal:r.decimals},!0),n="buy"===P?rt?new y.Z(rt).mul(Me.targetPrice).toNumber():null:"sell"===P&&at?new y.Z(at).mul(Me.targetPrice).toNumber():null;ve((0,X.jsx)(te.Z,{quotedRate:t,onConfirm:function(){return e(!0)},inputAmount:(0,M.lt)(i,r.decimals),outputAmount:(0,M.lt)(s,a.decimals),inputPair:r,outputPair:a,usdRate:n}),{onClose:function(){e(!1)},containerStyle:{borderRadius:"12px"}})}));case 21:if(e.sent){e.next=25;break}return l(u),e.abrupt("return");case 25:return e.next=27,b;case 27:return g=e.sent,C=g.blockhash,S=g.lastValidBlockHeight,Z=new k.Transaction({feePayer:pe.adapter.publicKey,blockhash:C,lastValidBlockHeight:S}).add(f),e.next=33,Ze(Z,{extraSigners:"secretKey"in m?[m]:[],blockhash:C,lastValidBlockHeight:S,idl:h.xO,idlProgramId:h.zy["mainnet-beta"],skipPreflight:!0},{successMessage:(0,X.jsx)(c.cC,{id:"Limit order placed for {0} {1} @ {2} {3}",values:{0:new y.Z(t.fromPairValue).toDP(2).toString(),1:r.symbol,2:new y.Z(t.toPairValue).toDP(a.decimals).toString(),3:a.symbol}}),submittingMessage:(0,X.jsx)(c.cC,{id:"Placing limit order"}),errorMessage:d.ag._("Failed to create order"),referenceFee:"MEDIUM"===Te?Oe.loAndDCA:"HIGH"===Te&&Oe.loAndDCA?1.5*Oe.loAndDCA:"VERY_HIGH"===Te&&Oe.loAndDCA?3*Oe.loAndDCA:void 0,minimumFee:J.uo,requestComputeBudgetLimit:3e5});case 33:if(A=e.sent,A.success){e.next=37;break}throw new Error("Failed to create order");case 37:w(u),e.next=44;break;case 40:e.prev=40,e.t0=e.catch(5),console.error(e.t0),l(u);case 44:case"end":return e.stop()}}),e,null,[[5,40]])})));return function(t){return e.apply(this,arguments)}}(),[pe,be,ge,r,a,n,p,ke,Ze,w,ve,P,rt,Me.targetPrice,at,l,Oe.loAndDCA,Te]);return(0,X.jsx)(X.Fragment,{children:(0,X.jsxs)("form",{className:"flex flex-col justify-center h-auto w-full",onSubmit:W(At),children:[S,(0,X.jsxs)("div",{children:[(0,X.jsxs)("div",{className:"flex justify-between items-end",children:[(0,X.jsx)("div",{className:"text-black/50 dark:text-white text-xs md:text-sm",children:(0,X.jsx)(c.cC,{id:"You're Selling"})}),(0,X.jsxs)("div",{className:"text-black-25 dark:text-[#CFF3FF]/[0.35] text-xs flex items-center",children:[(0,X.jsx)("div",{children:(0,X.jsx)(I.Z,{width:12,height:12})}),a.address?(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsxs)("div",{className:"flex item-center ml-1 cursor-pointer dark:hover:text-white-50 hover:text-black-50",onClick:vt,children:[(0,X.jsx)(_.Z,{mintAddress:r.address}),(0,X.jsx)("span",{className:"ml-1",children:r.symbol})]}),(0,X.jsx)(B.Z,{tokenAddress:r.address,onClickHalf:ht,onClickMax:vt})]}):(0,X.jsx)("span",{children:"0.00"})]})]}),(0,X.jsx)("div",{className:"mt-2 border-b border-transparent",children:(0,X.jsx)("div",{className:(0,R.cn)("p-4 border border-transparent rounded-xl bg-jupiter-input-light dark:bg-v2-background-dark group","focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:(0,X.jsx)(T.Z,{disableTokenSelect:"sell"===P,testId:"fromPair",pair:r,pairName:"fromPairValue",disabled:!1,control:q,onSubmit:Ve,mintsList:Se,modalId:Z.r$,watchAllFields:Me,onChangeCalculate:function(e){var t=(0,M.Hd)(e)?e:0,n=null!==We&&void 0!==We&&We.isFromBase?De:De?1/De:0;ce("fromPairValue",t||"",{shouldDirty:!0}),ce("toPairValue",new y.Z(t).mul(n).toDP(a.decimals).toFixed())}})})}),pt?(0,X.jsxs)("div",{className:"mt-2 flex items-center fill-current text-v2-lily/60 text-xs mb-2 gap-2",children:[(0,X.jsx)(ie.Z,{}),(0,X.jsx)(c.cC,{id:"We recommend having at least ${MINIMUM_SOL_BALANCE} SOL for any transaction",values:{MINIMUM_SOL_BALANCE:b.WO}})]}):null,(0,X.jsx)("div",{className:"mt-2 sm:space-x-3 space-y-2 sm:space-y-0 flex-col-reverse sm:flex sm:flex-row mb-2 relative",children:(0,X.jsxs)("div",{className:(0,R.cn)("w-full bg-jupiter-input-light dark:bg-v2-background-dark space-y-1 pt-2 pb-6 px-4 rounded-xl flex flex-col justify-center relative","border border-transparent focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:[(0,X.jsxs)("div",{className:"flex justify-between",children:[(0,X.jsxs)("div",{className:"flex items-center",children:[Ye?(0,X.jsxs)("div",{className:"text-v2-lily/50 text-xs flex items-center",children:[null!==We&&void 0!==We&&We.isFromBase?(0,X.jsx)(c.cC,{id:"Sell"}):(0,X.jsx)(c.cC,{id:"Buy"})," ",(0,X.jsx)(c.cC,{id:"{0} at rate",values:{0:null===Ye||void 0===Ye?void 0:Ye.symbol}}),Ge?(0,X.jsx)(C.Z,{className:"ml-1",width:8,height:8}):null]}):(0,X.jsx)(L.O,{className:"h-4 w-2"}),mt?(0,X.jsx)("div",{className:(0,R.cn)("flex items-center text-xs ml-1 font-medium text-v2-lily/50",{}),children:"(".concat(ct,"%)")}):null]}),Ke.swapMarketPrice&&("in-range"===Ke.marketStatus||"out-of-range"===Ke.marketStatus)&&(0,X.jsx)("button",{type:"button",className:"dark:text-white-35 dark:hover:text-white-75 text-black-35 hover:text-black text-xxs cursor-pointer underline rounded",onClick:function(){return st(Ke.swapMarketPrice)},children:(0,X.jsx)(c.cC,{id:"Use Market"})})]}),(0,X.jsx)(g.Qr,{name:"targetPrice",control:q,render:function(e){var t=e.field,n=t.onChange,r=t.value;return(0,X.jsxs)("div",{className:"",ref:wt,onFocus:function(){return Nt(!0)},children:[(0,X.jsxs)("div",{className:"flex items-end",children:[(0,X.jsx)(E.Z,{testId:"targetPrice",decimals:qe,onChangeWithoutEffect:function(e){(0,M.Hd)(e)&&ze(null!==We&&void 0!==We&&We.isFromBase?new y.Z(e).mul(Me.fromPairValue||0).toDP(qe).toFixed():new y.Z(Me.fromPairValue||0).div(e).toDP(qe).toFixed()),n(e)},onFocus:function(){return Ce.current=!0},value:r,disabled:!1,ref:we,className:"!text-left !text-sm flex-1"}),Qe?(0,X.jsx)("div",{className:"flex items-center",children:(0,X.jsx)("span",{className:"font-semibold text-sm",children:null===Qe||void 0===Qe?void 0:Qe.symbol})}):(0,X.jsx)(L.O,{className:"w-11 h-6"})]}),Qe&&(0,X.jsx)("div",{className:"text-xs text-v2-lily/30 absolute bottom-2",children:(0,X.jsx)($.default,{prefix:"\u2248 ",tokenInfo:Qe,amount:Number(r),maxDecimals:6})}),"buy"===P&&(0,X.jsx)("div",{className:(0,R.cn)("absolute pointer-events-none opacity-0 left-0 -bottom-6 transition-all duration-100 ease-in-out",kt?"pointer-events-auto opacity-100":""),children:(0,X.jsx)(ee,{actions:Ke.constants.quickPrice.map((function(e){return{text:e.text,onClick:function(){st(Ke.swapMarketPrice,e.factor)}}}))})})]})}})]})}),"pre-launch"===Ke.marketStatus&&(null===Be||void 0===Be?void 0:Be.min)&&Be.max&&(0,X.jsxs)("div",{className:"flex items-center fill-current text-v2-lily/60 text-xs mb-2 gap-2",children:[(0,X.jsx)(ie.Z,{}),(0,X.jsxs)("span",{children:["Recommended Range: ",(0,X.jsxs)("span",{className:"font-semibold",children:[Be.min," USDC"]})," -"," ",(0,X.jsxs)("span",{className:"font-semibold",children:[Be.max," USDC"]})]})]}),(0,X.jsx)("div",{className:(0,R.cn)("bg-transparent transition-all duration-700 align-bottom my-4",{"opacity-0 h-0":!Boolean(xt),"opacity-100":Boolean(xt)}),children:xt&&(0,X.jsx)("div",{className:(0,R.cn)("border-yellow-500 bg-yellow-300/25 rounded-xl px-3 border text-yellow-500 transition-all duration-500 text-xs font-medium align-middle py-2"),children:xt})})]}),(0,X.jsxs)("div",{className:"flex flex-col",children:[(0,X.jsxs)("div",{className:"border-b border-transparent",children:[(0,X.jsxs)("div",{className:"flex justify-between items-end",children:[(0,X.jsx)("div",{className:"text-black/50 dark:text-white text-xs md:text-sm",children:(0,X.jsx)(c.cC,{id:"To receive"})}),(0,X.jsxs)("div",{className:"text-black-25 dark:text-[#CFF3FF]/[0.35] text-xs flex",children:[(0,X.jsx)("div",{className:"mt-[1px]",children:(0,X.jsx)(I.Z,{width:12,height:12})}),a.address?(0,X.jsxs)("div",{className:"ml-1",children:[(0,X.jsx)(_.Z,{mintAddress:a.address}),(0,X.jsx)("span",{className:"ml-1",children:a.symbol})]}):(0,X.jsx)("span",{children:"0.00"})]})]}),(0,X.jsx)("div",{className:"mt-2 border-b border-transparent",children:(0,X.jsx)("div",{className:(0,R.cn)("p-4 border border-transparent rounded-xl bg-jupiter-input-light dark:bg-v2-background-dark group","focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:(0,X.jsx)(T.Z,{disableTokenSelect:"buy"===P,testId:"toPair",pair:a,pairName:"toPairValue",control:q,onSubmit:Fe,mintsList:Se,modalId:Z.re,watchAllFields:Me,onChangeCalculate:function(e){var t=(0,M.Hd)(e)?e:0,n=null!==We&&void 0!==We&&We.isFromBase?De:De?1/De:0;ce("toPairValue",0===t?"":t,{shouldDirty:!0}),ce("fromPairValue",0===t?"0":new y.Z(t).div(n).toFixed())}})})})]}),(0,X.jsx)("div",{className:"flex justify-between mt-3",children:(0,X.jsx)(c.cC,{id:"<0>Platform fee:{0}</0>",values:{0:D.isLoading?(0,X.jsx)(L.O,{className:"w-20 h-4"}):(0,X.jsx)("span",{className:"ml-1 text-v2-primary",children:gt})},components:{0:(0,X.jsx)("span",{className:"text-black-50 dark:text-white-50 text-[11px] font-medium inline"})}})}),ue.isDirty&&St.length>0&&(0,X.jsxs)("div",{className:"mt-3 py-3 pl-2 rounded-lg text-xs flex items-center text-white space-x-2 w-full bg-warning/80",children:[(0,X.jsx)("div",{className:"h-3 w-3 mt-0.5 fill-current",children:(0,X.jsx)(G.Z,{fill:"inherit"})}),(0,X.jsx)("div",{className:"flex flex-col space-y-1",children:St.map((function(e,t){return(0,X.jsx)("div",{children:e},t)}))})]}),ue.isDirty&&Mt.length>0&&(0,X.jsxs)("div",{className:"my-3 py-3 pl-2 rounded-lg text-xs flex items-center text-white space-x-2 w-full bg-[#F04A44]",children:[(0,X.jsx)("div",{className:"h-3 w-3 mt-0.5 fill-current",children:(0,X.jsx)(G.Z,{fill:"inherit"})}),(0,X.jsx)("div",{className:"flex flex-col space-y-1",children:Mt.map((function(e,t){return(0,X.jsx)("div",{children:e},t)}))})]}),(0,X.jsx)(le.Z,{className:"text-v2-lily/60 text-xs !px-0",iconSize:12,message:d.ag._("Priority fees are only used to create new orders, and will not improve your chances of getting filled.")}),null!==pe&&void 0!==pe&&pe.adapter.publicKey?(0,X.jsx)("button",{type:"submit",className:(0,R.cn)("w-full mt-3 bg-[#121D28] border border-transparent dark:hover:border dark:hover:border-v2-primary rounded-xl",{"opacity-50 cursor-not-allowed":Zt}),disabled:Zt,children:(0,X.jsx)("div",{className:"flex items-center justify-center px-8 py-4 rounded-xl dark:bg-[rgba(18,29,40,1)]",children:(0,X.jsx)("span",{className:"text-center",children:pt||!bt?(0,X.jsx)(c.cC,{id:"Insufficient {0}",values:{0:null===r||void 0===r?void 0:r.symbol}}):(0,X.jsx)(O.Z,{children:(0,X.jsx)(c.cC,{id:"Place Limit Order"})})})})}):(0,X.jsx)(x.uS,{buttonClassName:"!bg-transparent",overrideContent:(0,X.jsx)(K.Z,{className:"w-full mt-2",size:"md",children:(0,X.jsx)("span",{children:(0,X.jsx)(c.cC,{id:"Connect Wallet"})})})})]})]})})},ve=function(e){var t=e.side,n=e.fromTokenInfo,r=e.toTokenInfo,l=e.targetToken,x=e.description,g=e.setForm,w=(0,m.O)(),j=w.wallet,N=w.signAllTransactions,C=w.publicKey,O=(0,f.Bn)(),T=O.getTokenInfo,V=O.connection,F=(0,v.lm)(),D=F.toast,I=F.close,_=(0,u.useMemo)((function(){return new h.vN(V)}),[V]),B=(0,oe.gs)().priorityLevel,R=(0,u.useState)("Open Orders"),L=R[0],E=R[1],H=(0,u.useState)(0),G=H[0],Q=H[1];(0,u.useEffect)((function(){Q(0)}),[L]);var $=(0,u.useState)(!1),ee=$[0],te=$[1],ne=u.useState(1),re=(0,s.Z)(ne,2),ae=re[0],ie=re[1],se=(0,v.aM)([(null===C||void 0===C?void 0:C.toString())||"",l,ae],(0,i.Z)(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,_.getOrders([(0,h.Gt)(C)]);case 4:return t=e.sent,n=t.filter((function(e){var t=e.account,n=t.outputMint;return t.inputMint.toString()===l||n.toString()===l})),e.abrupt("return",n||[]);case 7:case"end":return e.stop()}}),e)}))),{enabled:ee&&Boolean(C)&&"Open Orders"===L,refetchInterval:!1,keepPreviousData:!0}),le=se.data,ce=se.isFetching,de=se.refetch,me=(0,u.useMemo)((function(){return null!==le&&void 0!==le&&le.length?Math.ceil(le.length/b.eN):0}),[le]),xe=(0,u.useMemo)((function(){return le||[]}),[le]),ve=(0,u.useMemo)((function(){return xe?xe.slice(G*b.eN,G*b.eN+10):[]}),[G,xe]),he=p.d.orderWithTradeHistoryWithItemsCount.useQuery({wallet:C?null===C||void 0===C?void 0:C.toString():"",inputMint:l,outputMint:l,pageIndex:G},{enabled:Boolean(C)&&"Order History"===L,refetchInterval:!1,refetchOnWindowFocus:!1,keepPreviousData:!0}),pe=he.data,be=he.isFetching,ge=he.refetch,we=(0,u.useMemo)((function(){return null!==pe&&void 0!==pe&&pe.itemsCount?Math.ceil((null===pe||void 0===pe?void 0:pe.itemsCount)/b.eN):0}),[pe]),je=(0,u.useState)([]),ye=je[0],ke=je[1];(0,u.useEffect)((function(){ke((function(e){return e.filter((function(e){return!Boolean(null===le||void 0===le?void 0:le.find((function(t){return t.publicKey&&e.publicKey.equals(t.publicKey)})))}))}))}),[le,ke]);var Ne=(0,Y.R3)(),Pe=(0,z.KO)(J.yz),Ce=(0,s.Z)(Pe,1)[0],Se=(0,u.useCallback)(function(){var e=(0,i.Z)(o().mark((function e(t){var n,r,a,s,l,u,m,x,f,v,p,b,g,w,C,O,F,R;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="cancel-limit-order-toast",r=(0,X.jsx)(X.Fragment,{}),a=[],s=[],ie((function(e){return e+1})),j&&j.adapter.publicKey&&N&&le&&0!==t.length){e.next=7;break}return e.abrupt("return");case 7:if(!(l=1===t.length?le.find((function(e){return e.publicKey.equals(t[0])})):null)||!l.publicKey){e.next=23;break}return e.prev=9,u=T(l.account.inputMint.toString()),m=T(l.account.outputMint.toString()),e.next=14,_.cancelOrder({owner:j.adapter.publicKey,orderPubKey:new k.PublicKey(l.publicKey)});case 14:a[0]=e.sent,u&&m?(x=(0,M.lt)(l.account.makingAmount||0,u.decimals),f=(0,M.lt)(l.account.takingAmount||0,m.decimals),r=(0,X.jsx)("p",{children:(0,X.jsx)(c.cC,{id:"Cancelling order for {0} {1} @ {2} {3}",values:{0:new y.Z(x).toDP(2).toString(),1:u.symbol,2:new y.Z(f).toDP(2).toString(),3:m.symbol}})})):r=(0,X.jsx)("p",{children:(0,X.jsx)(c.cC,{id:"Cancelling order"})}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(9),console.log(e.t0);case 21:e.next=29;break;case 23:if(!(t.length>1)){e.next=29;break}return r=(0,X.jsx)("div",{children:t.length>Z.TC?(0,X.jsxs)("div",{className:"flex flex-col",children:[(0,X.jsx)("p",{children:(0,X.jsx)(c.cC,{id:"You may need to approve"})}),(0,X.jsx)("p",{children:(0,X.jsx)(c.cC,{id:"multiple transactions."})})]}):(0,X.jsx)("p",{children:(0,X.jsx)(c.cC,{id:"Cancelling {0} orders...",values:{0:t.length}})})}),v=(0,A.OZ)(t,Z.TC),e.next=28,Promise.all(v.map(function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.batchCancelOrder({owner:j.adapter.publicKey,ordersPubKey:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 28:a=e.sent;case 29:if(a){e.next=31;break}throw new Error("Failed to get cancel order instructions");case 31:e.prev=31,p=ue(a),e.prev=33,p.s();case 35:if((b=p.n()).done){e.next=47;break}return g=b.value,e.next=39,V.getLatestBlockhash("confirmed");case 39:return w=e.sent,C=w.blockhash,O=w.lastValidBlockHeight,F=new k.Transaction({feePayer:j.adapter.publicKey,blockhash:C,lastValidBlockHeight:O}).add(g),e.next=45,Ne(F,{blockhash:C,idl:h.xO,idlProgramId:h.zy["mainnet-beta"],lastValidBlockHeight:O},{successMessage:(0,X.jsx)(c.cC,{id:"Orders cancelled"}),submittingMessage:r,errorMessage:(0,X.jsx)(c.cC,{id:"Failed to cancel orders"}),referenceFee:"MEDIUM"===B?Ce.loAndDCA:"HIGH"===B&&Ce.loAndDCA?1.5*Ce.loAndDCA:"VERY_HIGH"===B&&Ce.loAndDCA?3*Ce.loAndDCA:void 0,minimumFee:J.uo,requestComputeBudgetLimit:3e5});case 45:e.next=35;break;case 47:e.next=52;break;case 49:e.prev=49,e.t1=e.catch(33),p.e(e.t1);case 52:return e.prev=52,p.f(),e.finish(52);case 55:I(n),e.next=64;break;case 58:e.prev=58,e.t2=e.catch(31),I(n),R=t.length>1?d.ag._("Failed to cancel some orders"):d.ag._("Failed to cancel order"),D({duration:5e3,title:R,description:(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)("p",{children:e.t2.message}),s.map((function(e,t){return(0,X.jsx)("p",{children:(0,X.jsx)(S.Z,{txid:e})},t)}))]}),closeOnClick:!1,variant:P.Lb.INFO}),console.error({err:e.t2});case 64:return e.prev=64,de(),e.finish(64);case 67:case"end":return e.stop()}}),e,null,[[9,18],[31,58,64,67],[33,49,52,55]])})));return function(t){return e.apply(this,arguments)}}(),[j,N,le,T,_,I,V,Ne,Ce.loAndDCA,B,D,de]),Me=(0,u.useMemo)((function(){return!le||0===le.length||"Order History"===L}),[L,le]),Ze=(0,u.useCallback)((function(){if(le&&!Me){var e=le.map((function(e){return e.publicKey})).filter(Boolean);Se(e)}}),[Me,le,Se]),Ae=(0,u.useCallback)((function(){de(),ge()}),[de,ge]),Oe=(0,u.useCallback)((function(e){ke((function(t){return t.filter((function(t){return!t.publicKey.equals(e)}))}))}),[ke]),Te=(0,u.useCallback)((function(e){ke((function(t){return[].concat((0,a.Z)(t),[e])}))}),[ke]),Ve=(0,u.useCallback)((function(e){ke((function(t){return t.filter((function(t){return!t.publicKey.equals(e)}))})),Ae()}),[ke,Ae]);return n&&r?(0,X.jsxs)("div",{children:[(0,X.jsx)(fe,{side:t,setForm:g,limitOrder:_,fromTokenInfo:n,toTokenInfo:r,onOrderCreationFailed:Oe,onOrderCreationStart:Te,onOrderCreationSuccess:Ve,description:x}),ee?(0,X.jsxs)(U.Z,{tabs:["Open Orders","Order History"],activeTab:L,setActiveTab:E,isLoading:ce||be,cancelAllOrderDisabled:Me,cancelAllOrder:Ze,refetch:Ae,className:"!py-0 mt-3",children:["Open Orders"===L?(0,X.jsx)(q.Z,{orders:ve,cancelOrder:Se,ongoingSubmission:ye,loading:ce,pageIndex:G,setPageIndex:Q,pageCount:me,isV2:!0}):null,"Order History"===L?(0,X.jsx)(W.Z,{orders:(null===pe||void 0===pe?void 0:pe.orders)||[],loading:be,pageIndex:G,setPageIndex:Q,pageCount:we,isV2:!0}):null]}):(0,X.jsx)("div",{className:"w-full mt-3 text-xs overflow-x-auto border rounded-lg border-white/5 flex flex-col justify-center items-center p-4",children:(0,X.jsx)(K.Z,{type:"button",size:"sm",className:"w-auto px-4 bg-[#121D28] border border-transparent",onClick:function(){return te(!0)},children:(0,X.jsx)("span",{className:"text-sm",children:"View Orders"})})})]}):null}},26260:function(e,t,n){var r=n(97620),a=n(93981),i=n(30610),s=n(24201),l=n(25546),o=n(29541);t.Z=function(e){var t=e.className,n=e.children,c=e.data,d=e.rowRenderer,u=(e.value,e.onChange),m=e.contentClassName,x=e.rowClassName,f=e.filter,v=e.disabled,h=a.useState(!1),p=(0,r.Z)(h,2),b=p[0],g=p[1],w=a.useState(""),j=(0,r.Z)(w,2),y=j[0],k=j[1],N=(0,l.Nr)(y,150),P=a.useMemo((function(){return f&&N?f(c,N):c}),[c,N,f]);return(0,o.jsx)(i.Z,{isOpen:b,onClose:function(){return g(!1)},id:"settings-button",placement:"bottom-start",matchWidth:!0,buttonContent:(0,o.jsx)("button",{type:"button",onClick:function(){return g((function(e){return!e}))},className:(0,s.cn)("flex items-center py-3 pl-4 pr-5 space-x-2 rounded-lg bg-jupiter-light dark:bg-white/10 text-white/75",t),disabled:v,children:n}),buttonContentClassName:"!w-full",popoverContent:(0,o.jsxs)("div",{className:"mt-1 bg-jupiter-light rounded-lg dark:bg-white/10",children:[f?(0,o.jsx)("div",{className:"sticky top-0 flex",children:(0,o.jsx)("input",{placeholder:"Search...",className:"w-full py-2 px-4 bg-v2-background-dark text-white text-sm !outline-none",value:y,onChange:function(e){return k(e.target.value)}})}):null,P.map((function(e,t){return(0,o.jsx)("button",{onClick:function(){u(e),g(!1)},className:(0,s.cn)("first:pt-3 last:pb-3 w-full flex items-center py-1.5 pl-4 pr-3 space-x-2 text-white/75 hover:bg-porcelain dark:hover:bg-shark",x),children:d(e)},t)}))]}),contentClassName:(0,s.cn)("!bg-transparent !shadow-none z-50 webkit-scrollbar",m)})}},44710:function(e,t,n){n.r(t);var r=n(24201),a=n(29541);t.default=function(e){var t=e.active,n=e.onClick,i=e.className,s=e.dotClassName,l=e.activeClassName,o=e.inactiveClassName,c=(0,r.cn)("bg-white transform translate-x-full",l),d=(0,r.cn)("bg-white dark:bg-white-35",o);return(0,a.jsx)("button",{type:"button",className:(0,r.cn)("w-9 h-5 flex items-center rounded-full p-0.5 cursor-pointer",{"bg-[#71E5EC]":t,"bg-[#010101]":!t},i),onClick:function(){return n(!t)},children:(0,a.jsx)("div",{className:(0,r.cn)("h-4 w-4 rounded-full shadow-md transform duration-300 ease-in-out",t?c:d,s)})})}},71932:function(e,t,n){var r=n(63956),a=n(54423),i=(n(93981),n(29541)),s=["width","height"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.width,n=void 0===t?"12":t,r=e.height,l=void 0===r?"12":r,c=(0,a.Z)(e,s);return(0,i.jsx)("svg",o(o({width:n,height:l,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c),{},{children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 10C18 14.4183 14.4183 18 10 18C5.58172 18 2 14.4183 2 10C2 5.58172 5.58172 2 10 2C14.4183 2 18 5.58172 18 10ZM9.93793 12.1728C9.47107 12.1733 9.08835 11.8037 9.07186 11.3372L8.86888 5.61643C8.86042 5.3813 8.94838 5.15338 9.11162 4.98422C9.27485 4.81507 9.49982 4.71992 9.73494 4.71992H10.1409C10.376 4.71992 10.601 4.81507 10.7642 4.98422C10.9275 5.15338 11.0154 5.38131 11.007 5.61643L10.804 11.3372C10.7875 11.8037 10.4048 12.1733 9.93793 12.1728ZM9.93783 15.4176C10.6106 15.4176 11.1557 14.8725 11.1557 14.1997C11.1557 13.5269 10.6106 12.9818 9.93783 12.9818C9.26502 12.9818 8.71992 13.5269 8.71992 14.1997C8.71992 14.8725 9.26502 15.4176 9.93783 15.4176Z",fill:"currentColor"})}))}},82574:function(e,t,n){n.d(t,{P:function(){return a}});var r=n(9364),a={refetchId:(0,r.cn)(0),isLoading:(0,r.cn)(!1)}}}]);
//# sourceMappingURL=8615-0baa741cca172018.js.map