(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6353],{57841:function(e,n,t){var i=t(29226).Symbol;e.exports=i},4815:function(e,n,t){var i=t(57841),r=t(72429),o=t(99930),a=i?i.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?r(e):o(e)}},24253:function(e){e.exports=function(e,n,t){var i=-1,r=e.length;n<0&&(n=-n>r?0:r+n),(t=t>r?r:t)<0&&(t+=r),r=n>t?0:t-n>>>0,n>>>=0;for(var o=Array(r);++i<r;)o[i]=e[i+n];return o}},34482:function(e,n,t){var i=t(88460),r=/^\s+/;e.exports=function(e){return e?e.slice(0,i(e)+1).replace(r,""):e}},86947:function(e,n,t){var i="object"==typeof t.g&&t.g&&t.g.Object===Object&&t.g;e.exports=i},72429:function(e,n,t){var i=t(57841),r=Object.prototype,o=r.hasOwnProperty,a=r.toString,u=i?i.toStringTag:void 0;e.exports=function(e){var n=o.call(e,u),t=e[u];try{e[u]=void 0;var i=!0}catch(s){}var r=a.call(e);return i&&(n?e[u]=t:delete e[u]),r}},97999:function(e){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var i=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==i||"symbol"!=i&&n.test(e))&&e>-1&&e%1==0&&e<t}},72251:function(e,n,t){var i=t(59954),r=t(92054),o=t(97999),a=t(46139);e.exports=function(e,n,t){if(!a(t))return!1;var u=typeof n;return!!("number"==u?r(t)&&o(n,t.length):"string"==u&&n in t)&&i(t[n],e)}},99930:function(e){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},29226:function(e,n,t){var i=t(86947),r="object"==typeof self&&self&&self.Object===Object&&self,o=i||r||Function("return this")();e.exports=o},88460:function(e){var n=/\s/;e.exports=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}},59954:function(e){e.exports=function(e,n){return e===n||e!==e&&n!==n}},92054:function(e,n,t){var i=t(49274),r=t(483);e.exports=function(e){return null!=e&&r(e.length)&&!i(e)}},49274:function(e,n,t){var i=t(4815),r=t(46139);e.exports=function(e){if(!r(e))return!1;var n=i(e);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n}},483:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},46139:function(e){e.exports=function(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}},4394:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},26080:function(e,n,t){var i=t(4815),r=t(4394);e.exports=function(e){return"symbol"==typeof e||r(e)&&"[object Symbol]"==i(e)}},65525:function(e,n,t){var i=t(60738),r=1/0;e.exports=function(e){return e?(e=i(e))===r||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}},63792:function(e,n,t){var i=t(65525);e.exports=function(e){var n=i(e),t=n%1;return n===n?t?n-t:n:0}},60738:function(e,n,t){var i=t(34482),r=t(46139),o=t(26080),a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(r(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=r(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=i(e);var t=u.test(e);return t||s.test(e)?c(e.slice(2),t?2:8):a.test(e)?NaN:+e}},83064:function(e,n,t){"use strict";t.d(n,{xO:function(){return O},Rn:function(){return w},v4:function(){return E},D9:function(){return K},JK:function(){return z},AU:function(){return C}});var i=t(57565),r=t(94728);const o=new r.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),a=(new r.PublicKey("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb"),new r.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL")),u=new r.PublicKey("So11111111111111111111111111111111111111112");new r.PublicKey("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");var s=t(52466),c=t(78200);class m extends Error{constructor(e){super(e)}}class p extends m{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}t(795).Buffer;const l=(0,s.struct)([(0,s.u32)("mintAuthorityOption"),(0,c.ZL)("mintAuthority"),(0,c.AW)("supply"),(0,s.u8)("decimals"),(0,c.Xg)("isInitialized"),(0,s.u32)("freezeAuthorityOption"),(0,c.ZL)("freezeAuthority")]);l.span;function d(e,n,t=!1,i=o,u=a){if(!t&&!r.PublicKey.isOnCurve(n.toBuffer()))throw new p;const[s]=r.PublicKey.findProgramAddressSync([n.toBuffer(),i.toBuffer(),e.toBuffer()],u);return s}var f,y=t(795).Buffer;function g(e,n,t,i,r=o,u=a){return M(e,n,t,i,y.from([1]),r,u)}function M(e,n,t,i,u,s=o,c=a){const m=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:r.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1}];return new r.TransactionInstruction({keys:m,programId:c,data:u})}!function(e){e[e.InitializeMint=0]="InitializeMint",e[e.InitializeAccount=1]="InitializeAccount",e[e.InitializeMultisig=2]="InitializeMultisig",e[e.Transfer=3]="Transfer",e[e.Approve=4]="Approve",e[e.Revoke=5]="Revoke",e[e.SetAuthority=6]="SetAuthority",e[e.MintTo=7]="MintTo",e[e.Burn=8]="Burn",e[e.CloseAccount=9]="CloseAccount",e[e.FreezeAccount=10]="FreezeAccount",e[e.ThawAccount=11]="ThawAccount",e[e.TransferChecked=12]="TransferChecked",e[e.ApproveChecked=13]="ApproveChecked",e[e.MintToChecked=14]="MintToChecked",e[e.BurnChecked=15]="BurnChecked",e[e.InitializeAccount2=16]="InitializeAccount2",e[e.SyncNative=17]="SyncNative",e[e.InitializeAccount3=18]="InitializeAccount3",e[e.InitializeMultisig2=19]="InitializeMultisig2",e[e.InitializeMint2=20]="InitializeMint2",e[e.GetAccountDataSize=21]="GetAccountDataSize",e[e.InitializeImmutableOwner=22]="InitializeImmutableOwner",e[e.AmountToUiAmount=23]="AmountToUiAmount",e[e.UiAmountToAmount=24]="UiAmountToAmount",e[e.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",e[e.TransferFeeExtension=26]="TransferFeeExtension",e[e.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",e[e.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",e[e.Reallocate=29]="Reallocate",e[e.MemoTransferExtension=30]="MemoTransferExtension",e[e.CreateNativeMint=31]="CreateNativeMint",e[e.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",e[e.InterestBearingMintExtension=33]="InterestBearingMintExtension",e[e.CpiGuardExtension=34]="CpiGuardExtension",e[e.InitializePermanentDelegate=35]="InitializePermanentDelegate",e[e.TransferHookExtension=36]="TransferHookExtension",e[e.MetadataPointerExtension=39]="MetadataPointerExtension",e[e.GroupPointerExtension=40]="GroupPointerExtension",e[e.GroupMemberPointerExtension=41]="GroupMemberPointerExtension"}(f||(f={}));var k=t(795).Buffer;const A=(0,s.struct)([(0,s.u8)("instruction")]);function b(e,n=o){const t=[{pubkey:e,isSigner:!1,isWritable:!0}],i=k.alloc(A.span);return A.encode({instruction:f.SyncNative},i),new r.TransactionInstruction({keys:t,programId:n,data:i})}var v=t(795).Buffer;const S=(0,s.struct)([(0,s.u8)("instruction")]);function P(e,n,t,i=[],a=o){const u=function(e,n,t){if(t.length){e.push({pubkey:n,isSigner:!1,isWritable:!1});for(const n of t)e.push({pubkey:n instanceof r.PublicKey?n:n.publicKey,isSigner:!0,isWritable:!1})}else e.push({pubkey:n,isSigner:!0,isWritable:!1});return e}([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}],t,i),s=v.alloc(S.span);return S.encode({instruction:f.CloseAccount},s),new r.TransactionInstruction({keys:u,programId:a,data:s})}var x=t(81423),h=t(42754),I=t(795).Buffer,T=(e,n,t)=>new Promise(((i,r)=>{var o=e=>{try{u(t.next(e))}catch(n){r(n)}},a=e=>{try{u(t.throw(e))}catch(n){r(n)}},u=e=>e.done?i(e.value):Promise.resolve(e.value).then(o,a);u((t=t.apply(e,n)).next())})),O={version:"0.1.0",name:"limit_order_2",instructions:[{name:"updateFee",accounts:[{name:"admin",isMut:!0,isSigner:!0},{name:"feeAuthority",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"params",type:{defined:"UpdateFeeParams"}}]},{name:"withdrawFee",accounts:[{name:"admin",isMut:!0,isSigner:!0},{name:"feeAuthority",isMut:!1,isSigner:!1,docs:["CHECK"]},{name:"programFeeAccount",isMut:!0,isSigner:!1},{name:"adminTokenAcocunt",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1}],args:[]},{name:"initializeOrder",accounts:[{name:"payer",isMut:!0,isSigner:!0},{name:"maker",isMut:!1,isSigner:!0},{name:"order",isMut:!0,isSigner:!1},{name:"inputMintReserve",isMut:!0,isSigner:!1},{name:"makerInputMintAccount",isMut:!0,isSigner:!1},{name:"fee",isMut:!1,isSigner:!1},{name:"referral",isMut:!1,isSigner:!1,isOptional:!0},{name:"inputMint",isMut:!1,isSigner:!1},{name:"outputMint",isMut:!1,isSigner:!1},{name:"inputTokenProgram",isMut:!1,isSigner:!1},{name:"outputTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"eventAuthority",isMut:!1,isSigner:!1},{name:"program",isMut:!1,isSigner:!1}],args:[{name:"params",type:{defined:"InitializeOrderParams"}}]},{name:"cancelOrder",accounts:[{name:"signer",isMut:!1,isSigner:!0},{name:"maker",isMut:!0,isSigner:!1},{name:"order",isMut:!0,isSigner:!1},{name:"inputMintReserve",isMut:!0,isSigner:!1},{name:"makerInputMintAccount",isMut:!0,isSigner:!1,isOptional:!0},{name:"inputMint",isMut:!1,isSigner:!1},{name:"inputTokenProgram",isMut:!1,isSigner:!1},{name:"eventAuthority",isMut:!1,isSigner:!1},{name:"program",isMut:!1,isSigner:!1}],args:[]},{name:"preFlashFillOrder",accounts:[{name:"taker",isMut:!1,isSigner:!0},{name:"order",isMut:!0,isSigner:!1},{name:"inputMintReserve",isMut:!0,isSigner:!1},{name:"takerInputMintAccount",isMut:!0,isSigner:!1},{name:"inputMint",isMut:!1,isSigner:!1},{name:"inputTokenProgram",isMut:!1,isSigner:!1},{name:"instruction",isMut:!1,isSigner:!1}],args:[{name:"params",type:{defined:"PreFlashFillOrderParams"}}]},{name:"flashFillOrder",accounts:[{name:"taker",isMut:!0,isSigner:!0},{name:"maker",isMut:!0,isSigner:!1},{name:"order",isMut:!0,isSigner:!1},{name:"inputMintReserve",isMut:!0,isSigner:!1},{name:"makerOutputMintAccount",isMut:!0,isSigner:!1,isOptional:!0},{name:"takerOutputMintAccount",isMut:!0,isSigner:!1,isOptional:!0},{name:"feeAccount",isMut:!0,isSigner:!1},{name:"inputTokenProgram",isMut:!1,isSigner:!1},{name:"outputMint",isMut:!1,isSigner:!1},{name:"outputTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"eventAuthority",isMut:!1,isSigner:!1},{name:"program",isMut:!1,isSigner:!1}],args:[{name:"params",type:{defined:"FlashFillOrderParams"}}]}],accounts:[{name:"order",type:{kind:"struct",fields:[{name:"maker",type:"publicKey"},{name:"inputMint",type:"publicKey"},{name:"outputMint",type:"publicKey"},{name:"inputTokenProgram",type:"publicKey"},{name:"outputTokenProgram",type:"publicKey"},{name:"inputMintReserve",type:"publicKey"},{name:"uniqueId",type:"u64"},{name:"oriMakingAmount",type:"u64"},{name:"oriTakingAmount",type:"u64"},{name:"makingAmount",type:"u64"},{name:"takingAmount",type:"u64"},{name:"borrowMakingAmount",type:"u64"},{name:"expiredAt",type:{option:"i64"}},{name:"feeBps",type:"u16"},{name:"feeAccount",type:"publicKey"},{name:"createdAt",type:"i64"},{name:"updatedAt",type:"i64"},{name:"bump",type:"u8"}]}},{name:"fee",type:{kind:"struct",fields:[{name:"normalFeeBps",type:"u16"},{name:"stableFeeBps",type:"u16"}]}}],types:[{name:"FlashFillOrderParams",type:{kind:"struct",fields:[{name:"maxTakingAmount",type:"u64"}]}},{name:"InitializeOrderParams",type:{kind:"struct",fields:[{name:"uniqueId",type:"u64"},{name:"makingAmount",type:"u64"},{name:"takingAmount",type:"u64"},{name:"expiredAt",type:{option:"i64"}},{name:"feeBps",type:{option:"u16"}}]}},{name:"PreFlashFillOrderParams",type:{kind:"struct",fields:[{name:"makingAmount",type:"u64"}]}},{name:"UpdateFeeParams",type:{kind:"struct",fields:[{name:"normalFeeBps",type:"u16"},{name:"stableFeeBps",type:"u16"}]}}],events:[{name:"TradeEvent",fields:[{name:"orderKey",type:"publicKey",index:!1},{name:"taker",type:"publicKey",index:!1},{name:"remainingMakingAmount",type:"u64",index:!1},{name:"remainingTakingAmount",type:"u64",index:!1},{name:"makingAmount",type:"u64",index:!1},{name:"takingAmount",type:"u64",index:!1}]},{name:"CancelOrderEvent",fields:[{name:"orderKey",type:"publicKey",index:!1}]},{name:"CreateOrderEvent",fields:[{name:"orderKey",type:"publicKey",index:!1},{name:"maker",type:"publicKey",index:!1},{name:"inputMint",type:"publicKey",index:!1},{name:"outputMint",type:"publicKey",index:!1},{name:"inputTokenProgram",type:"publicKey",index:!1},{name:"outputTokenProgram",type:"publicKey",index:!1},{name:"makingAmount",type:"u64",index:!1},{name:"takingAmount",type:"u64",index:!1},{name:"expiredAt",type:{option:"i64"},index:!1},{name:"feeBps",type:"u16",index:!1},{name:"feeAccount",type:"publicKey",index:!1}]}],errors:[{code:6e3,name:"InvalidMakingAmount"},{code:6001,name:"InvalidTakingAmount"},{code:6002,name:"InvalidMaxTakingAmount"},{code:6003,name:"InvalidInputAccount"},{code:6004,name:"InvalidMakerOutputAccount"},{code:6005,name:"InvalidTakerOutputAccount"},{code:6006,name:"InvalidPair"},{code:6007,name:"OrderExpired"},{code:6008,name:"OrderNotExpired"},{code:6009,name:"InvalidAdmin"},{code:6010,name:"InvalidKeeper"},{code:6011,name:"MathOverflow"},{code:6012,name:"ProgramMismatch"},{code:6013,name:"UnknownInstruction"},{code:6014,name:"MissingRepayInstructions"},{code:6015,name:"InstructionNotAllowed"},{code:6016,name:"InvalidOrder"},{code:6017,name:"InvalidBorrowMakingAmount"},{code:6018,name:"InvalidExpiredDate"},{code:6019,name:"FeeBpsTooLow"},{code:6020,name:"FeeBpsTooHigh"},{code:6021,name:"TransferTaxMint"},{code:6022,name:"InvalidOutputMint"}]},w=((0,x.K5)({links:[(0,x.N8)({url:"https://jup.ag/api/trpc"})],transformer:h.ZP}),new r.PublicKey("j1o2qRpjcyUwEvwtcfhEQefh773ZgjxcVRry7LDqg5X")),K=e=>T(void 0,[e],(function*({params:e,maker:n,payer:t=n,inputMint:a,outputMint:s,inputTokenProgram:c=o,outputTokenProgram:m=o,wrapAndUnwrapSol:p=!0,referral:l=null,connection:f}){const y=new i.AnchorProvider(f,{},i.AnchorProvider.defaultOptions()),M=new i.Program(O,w,y),k=r.PublicKey.findProgramAddressSync([I.from("order"),n.toBuffer(),e.uniqueId.toArrayLike(I,"le",8)],w)[0],A=d(a,k,!0,c),v=d(a,n,!0,c),S=d(s,n,!0,m);let x=r.PublicKey.findProgramAddressSync([I.from("fee")],w)[0],h=[],T=null;a.equals(u)&&p&&(h=[g(n,v,n,u),r.SystemProgram.transfer({fromPubkey:n,toPubkey:v,lamports:Number(e.makingAmount)}),b(v)],T=P(v,n,n)),h.push(g(n,S,n,s,m));return{setupIxs:h,ix:yield M.methods.initializeOrder(e).accounts({maker:n,payer:t,order:k,inputMintReserve:A,makerInputMintAccount:v,fee:x,referral:l,inputMint:a,outputMint:s,inputTokenProgram:c,outputTokenProgram:m}).instruction(),cleanupIx:T,orderPubKey:k}})),E=e=>T(void 0,[e],(function*({maker:e,order:{account:n,publicKey:t},inputTokenProgram:r=o,connection:a}){const s=new i.AnchorProvider(a,{},i.AnchorProvider.defaultOptions()),c=new i.Program(O,w,s);let m=null,p=null;if(!n.inputMint.equals(u)){const t=d(n.inputMint,e,!0,r);p=t;m=g(e,t,e,n.inputMint,r)}return{cancelIx:yield c.methods.cancelOrder().accounts({maker:e,signer:e,inputMintReserve:n.inputMintReserve,order:t,makerInputMintAccount:p,inputMint:n.inputMint,inputTokenProgram:r}).instruction(),setupIx:m}})),z=e=>T(void 0,null,(function*(){const n=new i.AnchorProvider(e,{},i.AnchorProvider.defaultOptions()),t=new i.Program(O,w,n);let o=r.PublicKey.findProgramAddressSync([I.from("fee")],w)[0];return yield t.account.fee.fetch(o)})),C=(...e)=>T(void 0,[...e],(function*(e=[],n){const t=new i.AnchorProvider(n,{},i.AnchorProvider.defaultOptions()),r=new i.Program(O,w,t);return yield r.account.order.all(e)}))},76770:function(e,n,t){"use strict";function i(e){if(null==e)throw new TypeError("Cannot destructure undefined")}t.d(n,{Z:function(){return i}})}}]);
//# sourceMappingURL=6353-20daa2f1d043d481.js.map