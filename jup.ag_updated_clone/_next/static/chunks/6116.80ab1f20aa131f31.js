"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6116],{56116:function(e,t,n){n.r(t),n.d(t,{default:function(){return J}});var r=n(73360),s=n(93981),a=n(6099),c=n.n(a),i={src:"/_next/static/media/white-icon-info.eab507fc.svg",height:20,width:20,blurWidth:0,blurHeight:0},o=n(25546),l=n(13170),u=n(84985),d=n(63956),p=n(27195),x=n(8857),f=n.n(x),h=n(17769),b=n(70107),m=n(7761),j=n(75206),g=n(94728),w=n(11003),O=n(59394),v=n(3872),y=n.n(v),k=n(29541);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(){return L=(0,p.Z)(f().mark((function e(t,n){var r,s,a,c,i=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},s=r.toast,a=r.toastId,s&&a&&s({id:a,duration:3e4,render:function(e){return(0,k.jsx)(w.ZJ,S(S({},e),{},{variant:w.Lb.INFO,title:m.ag._("Confirming transaction..."),description:(0,k.jsx)(O.Z,{txid:n})}))}}),e.next=4,y()(function(){var e=(0,p.Z)(f().mark((function e(r){var s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTransaction(n,{commitment:"confirmed"});case 2:return(s=e.sent)||r(new Error("Transaction not found yet")),e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{retries:5,minTimeout:500}).catch((function(){return null}));case 4:return c=e.sent,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}var C=function(e,t){return L.apply(this,arguments)};function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=function(){var e=(0,u.Os)(),t=(0,u.Rc)(),n=(0,h.lm)(),a=n.toast,c=n.close,i=(0,u.C9)(),o=(0,s.useCallback)(function(){var n=(0,p.Z)(f().mark((function n(s){var o,l,u,d,p,x,h,v,y,N,S;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.publicKey&&e.signTransaction){n.next=2;break}return n.abrupt("return");case 2:return l=e.publicKey,u=s.map((function(e){return j.Token.createCloseAccountInstruction(j.TOKEN_PROGRAM_ID,e,l,l,[])})),n.next=6,t.getLatestBlockhash("confirmed");case 6:return d=n.sent,p=d.blockhash,x=d.lastValidBlockHeight,h=new g.Transaction({feePayer:e.publicKey,blockhash:p,lastValidBlockHeight:x}),(o=h).add.apply(o,(0,b.Z)(u)),n.next=13,e.signTransaction(h);case 13:return h=n.sent,v=h.serialize(),n.next=17,t.sendRawTransaction(v,{skipPreflight:!0});case 17:return y=n.sent,N="close-".concat(Math.floor(1e3*Math.random())),n.next=21,C(t,y,{toast:a,toastId:N});case 21:if(S=n.sent,c(N),!S){n.next=27;break}return i(s),a({render:function(e){return(0,k.jsx)(w.ZJ,Z(Z({},e),{},{variant:w.Lb.SUCCESS,title:"Transaction successful",description:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{children:["Successfully closed ",s.length," token account",s.length>1?"s":""," "]}),(0,k.jsx)("div",{children:(0,k.jsx)(O.Z,{txid:y})})]})}))}}),n.abrupt("return");case 27:a({duration:5e3,title:m.ag._("SOL unwrapping failed"),description:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("p",{children:(0,k.jsx)(r.cC,{id:"Failed to unwrap wSOL, please try again"})}),(0,k.jsx)("p",{children:(0,k.jsx)(O.Z,{txid:y})})]}),variant:w.Lb.ERROR});case 28:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[t,e,c,i,a]);return o};function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=function(e){var t=(0,h.lm)().toast,n=T(),r=(0,u.gZ)(),a=r.userAccounts,c=r.refetchAccounts,i=a.filter((function(e){return e.info.mint.equals(l.W4)&&!e.pubkey.equals(e.info.owner)})),o=s.useCallback((0,p.Z)(f().mark((function e(){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=i.map((function(e){return e.pubkey})).slice(0,27),e.next=4,n(r);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),t({variant:w.Lb.ERROR,title:"Failed",description:e.t0 instanceof Error?e.t0.message:"Something went wrong. Please try again later."});case 9:return e.prev=9,c(),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])}))),[n,i,t,c]);return(0,k.jsx)("button",_(_({},e),{},{onClick:o}))},E=n(76613),R=n(97620),F=n(58532),M=n(13838),D=n(24201),I=function(e){var t=e.className,n=e.style,r=e.children,s=e.onClick;return(0,k.jsx)("div",{style:n,className:(0,D.cn)("w-full rounded-xl bg-white-75 dark:bg-tuna shadow-lg flex",t),onClick:s,children:r})},B=n(85394),H=n(12866),K=n(70006),U=n(71130),V=n(69825),q=function(){var e=(0,u.Os)(),t=e.publicKey,n=e.sendTransaction,a=(0,h.lm)(),i=a.toast,d=a.close,x=(0,u.Bn)().connection,b=(0,K.JT)().closeModal,j=(0,h.x$)(),v=j.totalWrappedSOL,y=j.wrappedSOLAccounts,N=(0,h.hW)(),S=s.useState("wrap"),L=(0,R.Z)(S,2),C=L[0],P=L[1],Z=s.useState(""),W=(0,R.Z)(Z,2),_=W[0],A=W[1],q=Number(_),J=s.useState(!1),Y=(0,R.Z)(J,2),z=Y[0],G=Y[1],$=s.useState(!1),Q=(0,R.Z)($,2),X=Q[0],ee=Q[1],te=(0,u.C9)(),ne=T(),re="WRAP_UNWRAP_SOL_TOAST_ID",se=q>N,ae=new M.Z(N).sub((0,E.Hd)(_)?Number(_):0).toNumber(),ce=function(){var e=(0,p.Z)(f().mark((function e(){var s,a,c,o,u,p,h;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return G(!0),e.prev=3,s=new M.Z(_).mul(g.LAMPORTS_PER_SOL).toNumber(),e.next=7,x.getLatestBlockhash("confirmed");case 7:return a=e.sent,c=a.blockhash,o=a.lastValidBlockHeight,e.next=12,(0,F.cO)({connection:x,publicKey:t,amountToTransferInLamports:s,blockhash:c,lastValidBlockHeight:o});case 12:return u=e.sent,e.next=15,n(u,x);case 15:return p=e.sent,i({duration:12e4,id:re,title:m.ag._("Submitting transaction"),description:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("p",{children:(0,k.jsx)(r.cC,{id:"Wrapping {solAmountToWrap} SOL",values:{solAmountToWrap:_}})}),(0,k.jsx)("p",{children:(0,k.jsx)(O.Z,{txid:p})})]}),closeOnClick:!1,variant:w.Lb.INFO}),e.next=19,x.confirmTransaction({signature:p,blockhash:c,lastValidBlockHeight:o});case 19:if(h=e.sent,d(re),!h){e.next=24;break}return i({duration:5e3,title:m.ag._("Transaction successful"),description:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("p",{children:(0,k.jsx)(r.cC,{id:"Wrapped {solAmountToWrap} SOL successfully",values:{solAmountToWrap:_}})}),(0,k.jsx)("p",{children:(0,k.jsx)(O.Z,{txid:p})})]}),variant:w.Lb.SUCCESS}),e.abrupt("return");case 24:i({duration:5e3,title:m.ag._("SOL wrapping failed"),description:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("p",{children:(0,k.jsx)(r.cC,{id:"Failed to wrap {solAmountToWrap} SOL, please try again",values:{solAmountToWrap:_}})}),(0,k.jsx)("p",{children:(0,k.jsx)(O.Z,{txid:p})})]}),variant:w.Lb.ERROR}),e.next=30;break;case 27:e.prev=27,e.t0=e.catch(3),console.error(e.t0);case 30:return e.prev=30,setTimeout((function(){te([l.W4])}),400),G(!1),A(""),e.finish(30);case 35:case"end":return e.stop()}}),e,null,[[3,27,30,35]])})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=(0,p.Z)(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ee(!0),t=y.map((function(e){return e.pubkey})).slice(0,27),e.prev=2,e.next=5,ne(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:return e.prev=10,setTimeout((function(){te(t)}),400),ee(!1),b(),e.finish(10);case 15:case"end":return e.stop()}}),e,null,[[2,7,10,15]])})));return function(){return e.apply(this,arguments)}}();return(0,k.jsx)(I,{className:(0,D.cn)("!bg-v2-background text-white-75 py-6 px-5 text-xs"),children:(0,k.jsxs)("div",{className:"w-full text-white-75",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsx)("h2",{className:"text-base font-semibold",children:"Your SOL / wSOL"}),(0,k.jsx)("button",{type:"button",onClick:b,children:(0,k.jsx)(H.Z,{width:16,height:16})})]}),(0,k.jsxs)("div",{className:"mt-3 max-h-[70vh] overflow-auto webkit-scrollbar",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{children:"You can manually wrap SOL and unwrap wSOL here."}),(0,k.jsx)("a",{href:"https://station.jup.ag/guides/general/wrapped-sol",target:"_blank",className:"underline",children:"Read more"})]}),(0,k.jsx)("div",{className:"mt-6",children:(0,k.jsxs)("div",{children:[(0,k.jsxs)("button",{type:"button",className:(0,D.cn)("space-y-1 px-4 py-2 text-left rounded-t-lg",{"bg-black-10":"wrap"===C}),onClick:function(){return P("wrap")},children:[(0,k.jsx)("p",{children:"SOL"}),(0,k.jsx)("p",{className:"text-white text-base font-semibold",children:N<.01?"0.00":o.uf.format(Number(N.toFixed(4)))})]}),(0,k.jsxs)("button",{type:"button",className:(0,D.cn)("space-y-1 px-4 py-2 text-left rounded-t-lg",{"bg-black-10":"unwrap"===C}),onClick:function(){return P("unwrap")},children:[(0,k.jsx)("p",{children:"wSOL"}),(0,k.jsx)("p",{className:"text-white text-base font-semibold",children:v<.01?"0.00":o.uf.format(Number(v.toFixed(4)))})]}),(0,k.jsx)("div",{className:(0,D.cn)("px-3 py-4 rounded-lg bg-black-10",{"rounded-tl-none":"wrap"===C}),children:"wrap"===C?(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"flex items-baseline space-x-2",children:[(0,k.jsx)("p",{className:"text-white",children:"You wrap"}),(0,k.jsxs)("p",{className:"!ml-auto",children:["Balance ",o.uf.format(Number(N.toFixed(2)))," SOL"]}),(0,k.jsx)("button",{onClick:function(){return A((N/2).toFixed(2))},className:"px-2 py-0.5 rounded-full text-xxs font-semibold text-white-35 uppercase bg-white-25",children:"Half"}),(0,k.jsx)("button",{onClick:function(){return A(String(N>l.WO?N-l.WO:0))},className:"px-2 py-0.5 rounded-full text-xxs font-semibold text-white-35 uppercase bg-white-25",children:"Max"})]}),(0,k.jsx)("div",{className:"mt-4",children:(0,k.jsxs)("div",{className:"py-4 px-3 flex justify-between items-center bg-black-25 rounded-lg",children:[(0,k.jsxs)("div",{className:" flex items-center",children:[(0,k.jsx)("div",{className:"flex rounded-full overflow-hidden",children:(0,k.jsx)(c(),{src:"/images/sol.png",alt:"",width:24,height:24})}),(0,k.jsx)("div",{className:"ml-2 text-sm font-medium",children:"SOL"})]}),(0,k.jsx)("div",{className:"text-right",children:(0,k.jsx)(V.Z,{decimals:9,disabled:!1,onChange:function(e){var t=e.floatValue;return A(t?String(t):"")},className:"!outline-none",value:_?String(_):""})})]})}),(0,k.jsxs)("button",{onClick:ce,disabled:!q||se||z,className:"flex items-center space-x-2 justify-center mt-3 w-full p-5 text-base font-semibold text-white bg-[#141519] rounded-lg disabled:cursor-not-allowed disabled:opacity-50",children:[z&&(0,k.jsx)(B.Z,{className:"h-6 w-6",spinnerColor:"white"}),(0,k.jsx)("span",{children:se?m.ag._("Insufficient SOL"):m.ag._("Wrap SOL")})]}),ae<l.WO&&(0,k.jsx)(U.Z,{className:"text-white !px-2",message:m.ag._("We recommend having at least {MINIMUM_SOL_BALANCE} SOL for any transaction",{MINIMUM_SOL_BALANCE:l.WO})})]}):(0,k.jsx)("div",{children:(0,k.jsxs)("button",{onClick:ie,disabled:!v||X,className:"flex items-center justify-center space-x-2 w-full p-5 text-base font-semibold text-white bg-[#141519] rounded-lg disabled:cursor-not-allowed disabled:opacity-50",children:[X&&(0,k.jsx)(B.Z,{className:"h-6 w-6",spinnerColor:"white"}),(0,k.jsx)("span",{children:"Unwrap wSOL to SOL"})]})})})]})})]})]})})},J=function(){var e=(0,u.gZ)(),t=e.userAccounts,n=(e.refetchAccounts,(0,u.jB)().useWSol),a=(0,K.JT)().openModal,d=(0,h.hW)(),p=(0,s.useMemo)((function(){var e=t.filter((function(e){return e.info.mint.equals(l.W4)&&!e.pubkey.equals(e.info.owner)})).reduce((function(e,t){return e+t.info.amount.toNumber()}),0);return(0,o.lt)(e,9)}),[t]);return n?(0,k.jsxs)("div",{className:"mb-2 py-3 px-5 bg-v2-background text-white rounded-lg text-xs font-medium flex space-x-4 items-center",children:[(0,k.jsxs)("div",{className:"space-y-[1px]",children:[(0,k.jsx)("p",{className:"text-white-75",children:"SOL"}),(0,k.jsx)("p",{className:"text-base font-semibold leading-none",children:d<.01?"0.00":E.uf.format(Number(d.toFixed(6)))})]}),(0,k.jsx)("div",{className:"self-stretch flex-shrink-0 w-[1px] bg-white-25"}),(0,k.jsxs)("div",{className:"space-y-[1px]",children:[(0,k.jsx)("p",{className:"text-white-75",children:"wSOL"}),(0,k.jsx)("p",{className:"text-base font-semibold leading-none",children:p<.01?"0.00":p})]}),(0,k.jsx)("div",{className:"!ml-auto",children:(0,k.jsx)("button",{className:"rounded-lg text-xxs px-4 py-2 bg-black-25 hover:bg-black-50 transition duration-300",type:"button",onClick:function(){return a((0,k.jsx)(q,{}))},children:"Manage"})})]}):0===p?null:(0,k.jsxs)("div",{className:"py-3 px-5 mb-4 bg-v2-background text-white rounded-lg text-xs flex items-center space-x-3",children:[(0,k.jsx)(c(),{alt:"info icon",src:i,width:16,height:16}),(0,k.jsx)("div",{children:(0,k.jsx)(r.cC,{id:"You have {totalWrappedSOL} wrapped SOL that you can <0>unwrap</0>",values:{totalWrappedSOL:p},components:{0:(0,k.jsx)(A,{className:"font-bold underline cursor-pointer"})}})})]})}}}]);
//# sourceMappingURL=6116.80ab1f20aa131f31.js.map