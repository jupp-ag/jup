"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2428],{41264:function(e,t,n){n.d(t,{Z:function(){return d},i:function(){return c}});var r=n(97620),a=n(88932),i=n(93981),o=n(48645),s=n(13170),l=n(29541),u=function(e){var t=e.percentage,n=e.strokeWidth,r=void 0===n?2:n,a=e.sqSize,i=void 0===a?14:a,o=(i-r)/2,s="0 0 ".concat(i," ").concat(i),u=o*Math.PI*2,c=u-u*t/100;return(0,l.jsxs)("svg",{width:i,height:i,viewBox:s,children:[(0,l.jsx)("circle",{className:"fill-transparent stroke-black-10 dark:stroke-white-75",cx:i/2,cy:i/2,r:o,strokeWidth:"".concat(r,"px")}),(0,l.jsx)("circle",{className:"fill-transparent stroke-black",strokeLinecap:"round",strokeLinejoin:"round",cx:i/2,cy:i/2,r:o,strokeWidth:"".concat(r+.4,"px"),transform:"rotate(-90 ".concat(i/2," ").concat(i/2,")"),style:{strokeDasharray:u,strokeDashoffset:c}})]})},c=function(e){var t=e.isSubmitting,n=e.lastRefreshTimestamp,l=e.value,u=e.refresh,c=i.useState((0,a.Z)((new Date).getTime(),n)),d=(0,r.Z)(c,2),p=d[0],m=d[1];return(0,o.Z)((function(){if(!t){var e=(0,a.Z)((new Date).getTime(),n);m(e),e>=s.GJ&&(l||0)>0&&u()}}),1e3),{timeDiff:p}},d=function(e){var t=e.lastRefreshTimestamp,n=e.isSubmitting,r=e.value,a=e.refresh,o=c({isSubmitting:n,lastRefreshTimestamp:t,value:r,refresh:a}).timeDiff,d=i.useCallback((function(e){e.stopPropagation(),a()}),[a]);return(0,l.jsx)("div",{className:"cursor-pointer",onClick:d,children:(0,l.jsx)(u,{sqSize:10,percentage:o/s.GJ*100})})}},57715:function(e,t,n){n.d(t,{ZP:function(){return y},Kc:function(){return w},BE:function(){return j}});var r=n(73360),a=n(7761),i=n(93981),o=n(71048),s=n(24201),l=n(96065),u=n(70602),c=n(84985),d=n(25546),p=n(70006),m=n(39268),x=n.n(m),f=n(64138),h=n(29541),v=x()((function(){return Promise.all([n.e(1197),n.e(7743),n.e(5165),n.e(6029)]).then(n.bind(n,95165))}),{loading:function(){return(0,h.jsx)(f.Z,{width:600,height:380})},loadableGenerated:{webpack:function(){return[95165]}}}),g=x()((function(){return n.e(6170).then(n.bind(n,26170))}),{loading:function(){return(0,h.jsx)(f.Z,{width:600,height:380})},loadableGenerated:{webpack:function(){return[26170]}}}),b=function(e){var t=e.control,n=(0,o.qo)({control:t,name:"selectedRoute"}),r="Graphviz"===i.useMemo((function(){var e;return null===(e=localStorage)||void 0===e?void 0:e.getItem("preferred-graph")}),[])?g:v;return(0,h.jsx)(r,{quoteResponse:null===n||void 0===n?void 0:n.quoteResponse})},j={"Orca V1":"Orca","Orca V2":"Orca","Lifinity V2":"Lifinity","Lifinity V1":"Lifinity",Whirlpool:"Orca","Raydium CLMM":"Raydium",Mercurial:"Meteora"},w=function(e){var t=0,n=0,r=new Set,a=new Set,i=new Set;return e.forEach((function(e){var o=e.swapInfo,s=o.inputMint,l=o.outputMint,u=o.label;a.has(s)?t+=1:a.add(s),i.has(s+l)||(n+=1,i.add(s+l)),r.add(j[u]||u)})),{splits:t,hops:n,labels:r}},y=function(e){var t=e.loading,n=e.control,m=(0,p.JT)().openModal,x=(0,c.jB)().onlyDirectRoutes,f=(0,o.qo)({control:n,name:"selectedRoute"}),v=i.useMemo((function(){return f?w(f.quoteResponse.routePlan):null}),[f]),g=(0,d.Nr)(t,100),j=(0,d.Nr)(Boolean(!f||!v),100);return(0,h.jsxs)("button",{type:"button",className:(0,s.cn)("flex space-x-1 items-center group w-full relative transition-all overflow-hidden",j?"h-0 opacity-0":"h-[22px] opacity-100",g?"blur-xs opacity-50 pointer-events-none":"opacity-100"),onClick:function(){m((0,h.jsx)(b,{control:n}),{noCloseButton:!1,containerStyle:{background:"none"}})},children:[(0,h.jsx)("div",{className:(0,s.cn)("rounded-full border border-v2-primary","group-hover:from-[#00D1DF] group-hover:to-[#00D1DF]","dark:group-hover:from-v2-primary/25 dark:group-hover:to-v2-primary/25"),children:(0,h.jsx)("span",{className:(0,s.cn)("rounded-[100px] flex space-x-1 items-center text-xxs bg-[rgba(199,242,132,0.1)]","group-hover:bg-[#e5fafc]","dark:group-hover:bg-[#3a474f] group-hover:bg-none"),children:(0,h.jsxs)("span",{className:(0,s.cn)("flex items-center px-2 py-0.5 text-[rgba(199,242,132,1)] font-semibold whitespace-nowrap","group-hover:text-v2-primary/50 dark:group-hover:text-v2-primary"),children:[(0,h.jsx)(u.Z,{className:"mb-[1px] text-[rgba(199,242,132,1)] group-hover:text-v2-primary/50 dark:group-hover:text-v2-primary"}),x?a.ag._("Direct Route"):(0,h.jsxs)(h.Fragment,{children:[((null===v||void 0===v?void 0:v.splits)||0)>0&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(r.cC,{id:"{0, plural, one {# Split} other {# Splits}}",values:{0:null===v||void 0===v?void 0:v.splits}})," +"," "]}),(0,h.jsx)(r.cC,{id:"{0, plural, one {# Hop} other {# Hops}}",values:{0:null===v||void 0===v?void 0:v.hops}})]})]})})}),(0,h.jsxs)("div",{className:"space-x-2 items-center justify-between w-full flex",children:[(0,h.jsx)("span",{className:"text-black-50 dark:text-white-50 text-xs group-hover:text-v2-primary/50 dark:group-hover:text-v2-primary text-left max-w-[120px] md:max-w-[200px] truncate",children:(null===v||void 0===v?void 0:v.labels)&&(0,h.jsx)(r.cC,{id:"via {0}",values:{0:Array.from(v.labels).join(", ")}})}),(0,h.jsx)(l.Z,{className:"ml-auto text-black-35 dark:text-white-35 group-hover:text-v2-primary/50 dark:group-hover:text-v2-primary"})]})]})}},42428:function(e,t,n){n.d(t,{Z:function(){return Jt}});var r=n(27195),a=n(70107),i=n(97620),o=n(63956),s=n(8857),l=n.n(s),u=n(73360),c=n(7761),d=n(13845),p=n(84985),m=n(17769),x=n(94728),f=n(13838),h=n(9319),v=n.n(h),g=n(93981),b=n(71048),j=n(59644),w=n(44495),y=n(13170),k=n(42082),N=n(89521),S=n(22466),T=n(24201),A=n(25546),C=n(99438),M=n(29541),I=function(e){var t=e.disabled,n=e.setValue,r=e.control,a=e.name,i=e.onActionClicked,o=(0,p.Os)().connected,s=(0,b.qo)({control:r,name:a}),l=(0,p.Bn)().getTokenInfo,c=(0,p.jB)().useWSol,d=(0,m.FB)(s,void 0,c).balance,x=l(s);return o&&x?(0,M.jsxs)("div",{className:"flex justify-between items-center space-x-1",children:[(0,M.jsx)("button",{type:"button",onClick:function(){null===i||void 0===i||i();var e=new f.Z(d).div(2).toDP(x.decimals);n("fromValue",{floatValue:e.toNumber(),formattedValue:e.toString(),value:e.toString()})},disabled:t,className:(0,T.cn)(t&&"cursor-not-allowed opacity-50","cursor-pointer text-[10px] text-black-35 border-black-10 dark:text-white-35 dark:bg-black-10 leading-4 py-[1px] px-2 rounded-full border dark:border-white-10 font-semibold","hover:border-v2-primary/50 hover:bg-[#2C3F54] hover:text-v2-primary/50","dark:hover:text-v2-primary dark:hover:bg-v2-primary/10 dark:hover:border-v2-primary"),children:(0,M.jsx)(u.cC,{id:"HALF"})}),(0,M.jsx)("button",{type:"button",onClick:function(){null===i||void 0===i||i();var e=new f.Z(d);s!==y.W4.toBase58()||c||(e=e.minus(y.WO)),e.lt(0)&&(e=new f.Z(d)),n("fromValue",{floatValue:e.toNumber(),formattedValue:e.toString(),value:e.toString()})},disabled:t,className:(0,T.cn)(t&&"cursor-not-allowed opacity-50","cursor-pointer text-[10px] text-black-35 border-black-10 dark:text-white-35 dark:bg-black-10 leading-4 py-[1px] px-2 rounded-full border dark:border-white-10 font-semibold","hover:border-[#00D1DF] hover:bg-[#2C3F54] hover:text-v2-primary/50","dark:hover:text-v2-primary dark:hover:bg-v2-primary/10 dark:hover:border-v2-primary"),children:(0,M.jsx)(u.cC,{id:"MAX"})})]}):null},P=n(56100),Z=n(82625),O=n(69825),D=function(e){var t=e.loading,n=e.name,r=e.control,a=e.disabled,i=e.onFocus,o=e.onKeyDown,s=e.placeholder,l=e.onChange,u=(0,p.Bn)().getTokenInfo,c=g.useRef(null),d=(0,b.qo)({control:r,name:"fromValue"===n?"fromTokenAddress":"toTokenAddress"}),m=g.useMemo((function(){return u(d)}),[u,d]);return(0,M.jsx)(b.Qr,{name:n,control:r,rules:{required:"Required"},render:function(e){var r=e.field,u=r.onChange,p=r.value,x=r.onBlur;return(0,M.jsxs)("div",{className:"flex flex-col text-right h-full",children:[t||!m?(0,M.jsx)(P.O,{className:"ml-2 w-24 h-6 self-end"}):(0,M.jsx)(O.Z,{name:n,className:"outline-none",decimals:m.decimals,onChange:l?function(e){u(e),l(e)}:u,value:null===p||void 0===p?void 0:p.value,disabled:a,ref:c,onBlur:x,onFocus:i,onKeyDown:o,placeholder:s}),t?(0,M.jsx)(P.O,{className:"ml-2 mt-0.5 w-8 h-4 self-end"}):null!==p&&void 0!==p&&p.value?(0,M.jsx)("div",{className:(0,T.cn)("text-xs text-black-35 dark:text-white-35"),onClick:function(){var e;return null===c||void 0===c||null===(e=c.current)||void 0===e?void 0:e.focus()},children:(0,M.jsx)(Z.Z,{tokenAddress:d,value:p})}):null]})}})},R=n(41264),E=n(20255),V=n(69667),B=n(63153),F=n(70006),L=n(1242),_=n(59978),q=function(e){var t=e.control,n=e.name,r=e.modalId,a=e.getValues,o=e.disableTokenSelect,s=(0,p.Bn)(),l=s.getTokenInfo,u=s.tokenMap,c=(0,E.B)(),d=(c.add,c.get,(0,F.JT)()),m=(d.openModal,d.closeModal),x=(d.visible,d.modalContextId,d.openContextualModal),f=d.setContextValue,h=d.ModalContextConsumer,v=(0,k.T)(),j=(0,b.bc)({control:t,name:n}).field,w=(0,b.qo)({control:t,name:["fromTokenAddress","toTokenAddress"]}),y=(0,i.Z)(w,2),N=y[0],S=y[1],A=(0,g.useMemo)((function(){return"fromTokenAddress"===n?N:S}),[N,S,n]),C=(0,g.useMemo)((function(){return l(A)}),[l,A]),I=(0,g.useMemo)((function(){return Array.from(u.values()).map((function(e){return e.address}))}),[u]),P=(0,g.useCallback)((function(e){h&&(f(r,I),x(r,I,(0,M.jsx)(h,{children:function(t){return(0,M.jsx)(B.ZP,{onSubmit:function(t){e.current(t)},mintsList:t,bestTokens:L.KG})}}),{position:"top",noCloseButton:!0}))}),[h,I,r,x,f]),Z=(0,g.useCallback)((function(e){var t,r;if(e){var i,o,s=a(),u=s.toTokenAddress,c=s.fromTokenAddress;if("fromTokenAddress"===n)u===e.address?(i=e,o=l(c)):(i=e,o=l(u));else c===e.address?(i=l(u),o=e):(i=l(c),o=e);j.onChange("fromTokenAddress"===n?null===(t=i)||void 0===t?void 0:t.address:null===(r=o)||void 0===r?void 0:r.address),v(i,o),m()}}),[m,j,l,a,n,v]),O=(0,g.useRef)(Z);return O.current=Z,(0,g.useEffect)((function(){f(r,I)}),[r,f,I]),(0,M.jsx)("div",{className:"flex justify-between items-center group/select",children:(0,M.jsxs)("button",{type:"button",disabled:o,className:(0,T.cn)("py-2 px-3 h-10 rounded-xl flex space-x-3 items-center border-transparent",o?"":"bg-white dark:bg-v2-background border dark:group-hover/select:border-v2-primary/50 dark:group-hover/select:bg-[rgba(199,242,132,0.2)] dark:group-hover/select:shadow-swap-input-dark"),onClick:function(){return P(O)},children:[(0,M.jsx)("div",{className:"rounded-full",children:(null===C||void 0===C?void 0:C.logoURI)&&(0,M.jsx)(_.Z,{width:24,height:24,info:C})}),(0,M.jsx)("div",{className:"font-semibold text-sm",translate:"no",children:null===C||void 0===C?void 0:C.symbol}),!o&&(0,M.jsx)("div",{className:"text-black/25 dark:text-white/25 group-hover/select:text-[#00D1DF] dark:group-hover/select:text-v2-primary fill-current",children:(0,M.jsx)(V.Z,{})})]})})},W=n(13154),z=n(55948),U=n(43723),G=n(24684),K=n(60466),J=n(76613),Y="!text-jupiter-jungle-green",H="!text-jupiter-primary",Q="!text-jupiter-red",X=function(e){var t=e.loading,n=e.inputPair,r=e.outputPair,a=(0,G.tX)(),i=a.rate,o=a.isMoreExp,s=a.isDanger,l=a.isWarning,u=a.percent,d=a.formattedPercent,p=a.isWithinTwoPercent,m=a.rateDiff,x=(0,g.useMemo)((function(){return o&&!p?c.ag._("{formattedPercent}% more than Birdeye",{formattedPercent:d}):o?c.ag._("Within {formattedPercent}%",{formattedPercent:d}):0===u?"< ".concat(J.uf.format(.1),"% cheaper"):"".concat(d,"% cheaper")}),[o,d,p,u]),f=(0,g.useMemo)((function(){return l?H:s?Q:Y}),[s,l]),h={inAmount:i?v().BigInt(Math.round(1/i*Math.pow(10,n.decimals))):v().BigInt(0),inputDecimal:n.decimals,outAmount:v().BigInt(1*Math.pow(10,r.decimals)),outputDecimal:r.decimals};return t?(0,M.jsx)(P.O,{className:"mt-1 h-3 w-20"}):null!==i&&x?(0,M.jsxs)("div",{className:"mt-1 flex items-center leading-none text-xs h-3",children:[(0,M.jsxs)("div",{className:"flex flex-row items-center border-b border-b-transparent -mb-[1px] space-x-1",children:[(0,M.jsx)("span",{className:"".concat(f),children:x}),(0,M.jsx)("div",{className:"fill-current ".concat(f)})]}),f!==Y&&"number"===typeof m?(0,M.jsxs)("div",{className:"ml-1 flex text-xs text-black-50 dark:text-white-50 justify-end ".concat(f),children:["(",v().greaterThan(h.inAmount,K.xE)&&v().greaterThan(h.outAmount,K.xE)?(0,M.jsx)(W.Z,{className:"".concat(f," items-center"),inputAmount:h.inAmount,outputAmount:h.outAmount,inputPair:n,outputPair:r,reversible:!0}):null,")"]}):null]}):null},$=n(40558),ee=n(87148),te=function(e){var t=e.loading,n=e.hasAtaDeposit,r=e.feeInformation,a=(0,ee.Z)(n),i=t&&a;return n||i?(0,M.jsxs)("div",{className:"flex items-start justify-between text-xs",children:[(0,M.jsxs)("div",{className:"flex w-[50%] text-black-50 dark:text-white-50",children:[(0,M.jsx)(u.cC,{id:"Deposit"}),(0,M.jsx)($.Z,{variant:"dark",content:(0,M.jsx)("div",{className:"max-w-xs rounded-lg text-white-75",children:(0,M.jsx)("ul",{className:"pl-2",children:n&&(0,M.jsx)("li",{children:(0,M.jsx)("p",{children:(0,M.jsx)(u.cC,{id:"You need to have the token accounts in order to execute the trade."})})})})}),children:(0,M.jsx)("span",{className:"ml-1 cursor-pointer",children:"[?]"})})]}),i?(0,M.jsx)(P.O,{className:"w-12 h-4 self-end"}):(0,M.jsx)("div",{className:"w-[50%] text-black-50 dark:text-white-50 text-xs text-right",children:function(){var e,t,a=[n&&r&&(0,M.jsx)("p",{children:(0,M.jsx)(u.cC,{id:"{0} SOL for {1} {2, plural, one {ATA account} other {ATA accounts}}",values:{0:A.uf.format((0,A.lt)(r.ataDeposits.reduce((function(e,t){return e+=t}),0),9)),1:null===r||void 0===r||null===(e=r.ataDeposits)||void 0===e?void 0:e.length,2:(null===r||void 0===r||null===(t=r.ataDeposits)||void 0===t?void 0:t.length)||0}})},"ata")].filter(Boolean);return a.length?a:"-"}()})]}):null},ne=n(90342),re=function(e){var t=e.feeInformation,n=(0,ne.gs)().prioritizationFee,r=(0,g.useMemo)((function(){if(!t)return"-";var e=t.signatureFee;return new f.Z(e).div(Math.pow(10,9)).add("number"===typeof n&&n||0).toString()}),[t,n]);return(0,M.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,M.jsxs)("div",{className:"flex w-[50%] text-black-50 dark:text-white-50",children:[(0,M.jsx)(u.cC,{id:"Max Transaction Fee"}),(0,M.jsx)($.Z,{content:(0,M.jsx)(u.cC,{id:"This is for Solana transaction fee and Priority fee"}),children:(0,M.jsx)("span",{className:"ml-1 cursor-pointer",children:"[?]"})})]}),(0,M.jsxs)("div",{className:"text-black-50 dark:text-white-50",children:[r," SOL"]})]})},ae="text-jupiter-jungle-green",ie="text-jupiter-primary",oe="text-jupiter-red",se=function(e){var t,n=e.loading,r=e.route,a=e.inputPair,i=e.outputPair,o=(0,G.gJ)(),s=A.uf.format(new f.Z(r.priceImpactPct||0).mul(100).toDP(4).toNumber()),l=Number(s)<.1?"< ".concat(A.uf.format(.1),"%"):"~ ".concat(s,"%"),c=(0,g.useMemo)((function(){if(o){if(o.isMediumImpact)return ie;if(o.isHighImpact)return oe}return ae}),[o]),p=(0,g.useMemo)((function(){var e=r.swapMode===d.jr.ExactIn?i:a,t=new f.Z(r.otherAmountThreshold.toString()).div(Math.pow(10,e.decimals)),n=A.uf.format(t.toNumber());return"".concat(n," ").concat(e.symbol)}),[r.swapMode,r.otherAmountThreshold,i,a]),m=(null!==(t=null===o||void 0===o?void 0:o.ataDeposits.length)&&void 0!==t?t:0)>0,x=o;return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(X,{loading:n,route:r,inputPair:a,outputPair:i}),(0,M.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,M.jsx)("div",{className:"text-black-50 dark:text-white-50",children:(0,M.jsx)(u.cC,{id:"Price Impact"})}),(0,M.jsx)("div",{className:c,children:l})]}),(0,M.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,M.jsx)("div",{className:"text-black-50 dark:text-white-50",children:r.swapMode===d.jr.ExactIn?(0,M.jsx)(u.cC,{id:"Minimum Received"}):(0,M.jsx)(u.cC,{id:"Maximum Consumed"})}),(0,M.jsx)("div",{className:"text-black-50 dark:text-white-50",children:p})]}),(0,M.jsx)(re,{feeInformation:x}),(0,M.jsx)(te,{loading:n,hasAtaDeposit:m,feeInformation:x})]})]})},le=n(74925),ue=n(77169),ce=n(60021),de=n(31242),pe=n(39913),me=n(80049),xe=(0,ue.z)({chartName:"LineChart",GraphicalChild:ce.x,axisComponents:[{axisType:"xAxis",AxisComp:de.K},{axisType:"yAxis",AxisComp:pe.B}],formatAxisMap:me.t9}),fe=n(89349),he=n(41144);function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var be=function(e,t){return{name:t,timestamp:1e3*e.unixTime,price:e.value}};var je=n(14518),we=n(62348),ye=n(3082),ke=n(88381),Ne=function(e){var t=e.active,n=e.payload;if(t&&n&&n.length&&"number"===typeof n[0].value){var r=n[0].value,a=(0,je.Z)(n[0].payload.timestamp,"p");return(0,M.jsxs)("div",{className:"flex flex-col bg-white dark:bg-black px-2 py-1 text-xs rounded-md",children:[(0,M.jsx)("span",{children:a}),(0,M.jsxs)("span",{className:"flex space-x-1 items-center h-5",children:[(0,M.jsx)("span",{children:"$"}),(0,M.jsx)("span",{children:Number(r)<1e-6?(0,M.jsx)(ke.ZP,{value:Number(r),maxSuffix:6}):(0,M.jsx)("span",{children:new f.Z(r).toDP(6).toString()})})]})]})}return null},Se=function(e){var t=e.token,n=e.priceInUsd,r=g.useCallback((function(e){var t=String(e).split(".");return t.length>1?t[1].length:0}),[]);return Number.isNaN(Number(null===n||void 0===n?void 0:n.usd))?(0,M.jsx)(M.Fragment,{children:"N/A"}):Number(null===n||void 0===n?void 0:n.usd)<1e-6?(0,M.jsx)(ke.ZP,{value:Number(null===n||void 0===n?void 0:n.usd),maxSuffix:6}):r(null===n||void 0===n?void 0:n.usd)>t.decimals?(0,M.jsx)(M.Fragment,{children:null===n||void 0===n?void 0:n.usd.toFixed(t.decimals)}):(0,M.jsx)(M.Fragment,{children:null===n||void 0===n?void 0:n.usd})},Te=function(e){var t=e.token,n=(0,m.XA)(),a=(0,p.y6)(),i=a.tokenPriceMap,o=a.getUSDValue,s=(0,ye.useRouter)(),u=function(e,t){var n=e.token,a=e.interval,i=void 0===a?"":a,o=t.enabled,s=t.staleTime,u=n.address,c=g.useMemo((function(){new Date(Date.now()-864e5);var e=new Date;return new URLSearchParams({address:u,type:"5m",time_to:(e.getTime()/1e3).toFixed(0)})}),[u]),d="".concat("https://birdeye-proxy.jup.ag/defi/history_price","?").concat(c.toString());return ge(ge({},(0,m.aM)(["".concat(u,"-useChartData-").concat(i)],(0,r.Z)(l().mark((function e(){var t,n,r,a,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,he.ZP.get(d,{headers:{"X-API-KEY":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE2NzI5MDEwNzZ9.c66gFnI20ymHoPWapB0JgISzqDIK6Q_Zg0oAVp8Ssyc"}}).json();case 5:return t=e.sent,n=t.data,r=new f.Z(n.items[n.items.length-1].value),a=new f.Z(n.items[0].value),i=new f.Z(r).div(a),e.abrupt("return",{marketChart:n.items.map(be),change24H:new f.Z(i).sub(1).mul(100).toDP(2).toNumber()});case 13:throw e.prev=13,e.t0=e.catch(2),console.error("useChartData",e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[2,13]])}))),{enabled:o&&Boolean(u),refetchInterval:6e4,staleTime:s||3e4,retry:2,retryDelay:5e3,keepPreviousData:!0})),{},{apiURL:{marketChart:d}})}({token:t,interval:"5m"},{enabled:s.isReady,cacheTime:18e5,staleTime:12e5}),c=u.data;(0,g.useEffect)((function(){var e,n;null!==(e=t.extensions)&&void 0!==e&&e.coingeckoId&&o(t.address||(null===(n=t.extensions)||void 0===n?void 0:n.coingeckoId))}),[t,o]);var d=(0,g.useMemo)((function(){return i[t.address]}),[i,t.address]),x=(0,g.useMemo)((function(){if(!c)return null;var e=A.uf.format(c.change24H);return c.change24H>0?"+".concat(e,"%"):"".concat(e,"%")}),[c]),h=(0,g.useMemo)((function(){return"https://birdeye.so/token/".concat(t.address,"?chain=solana")}),[t.address]);return(0,M.jsxs)("div",{className:"flex justify-between dark:text-white",translate:"no",children:[(0,M.jsxs)("div",{className:"flex items-center w-full max-w-[60%] md:max-w-[35%] text-ellipsis space-x-3",children:[(0,M.jsx)(_.Z,{info:t,width:24,height:24}),(0,M.jsxs)("div",{className:"flex flex-col",children:[(0,M.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,M.jsx)("span",{className:"text-sm dark:text-white-75 font-semibold",children:t.symbol}),(0,M.jsx)(we.Z,{tokenInfo:t,customUrl:h})]}),(0,M.jsx)("span",{className:"text-xs text-black-50 dark:text-white-50 text-ellipsis",children:t.name})]})]}),(0,M.jsxs)("div",{className:"w-full max-w-[50%]",children:[(0,M.jsxs)("div",{className:"w-full flex items-center",children:[(0,M.jsx)("span",{className:"w-[60%] mr-2.5 text-[14px] font-semibold text-ellipsis",children:(0,M.jsx)(Se,{token:t,priceInUsd:d})}),(0,M.jsx)("span",{className:"w-[40%] mr-2.5 text-[14px] font-semibold text-ellipsis ".concat(((null===c||void 0===c?void 0:c.change24H)||0)>=0?"text-jupiter-jungle-green":"text-[#FF0000]"),children:x})]}),(0,M.jsx)("svg",{width:0,height:0,children:(0,M.jsx)("defs",{children:(0,M.jsxs)("linearGradient",{id:"linear",children:[(0,M.jsx)("stop",{offset:"0%",stopColor:"#FCC00A"}),(0,M.jsx)("stop",{offset:"100%",stopColor:"#4EBAE9"})]})})}),(0,M.jsx)("div",{className:"flex w-full h-6 items-center",children:null!==c&&void 0!==c&&c.marketChart?(0,M.jsx)(le.h,{width:"100%",height:24,children:(0,M.jsxs)(xe,{data:c.marketChart,children:[(0,M.jsx)(fe.u,{position:{x:n?-64:230,y:n?-16:-6},content:function(e){return(0,M.jsx)(Ne,{active:e.active,payload:e.payload})}}),(0,M.jsx)(ce.x,{type:"monotone",dataKey:"price",stroke:"url(#linear)",strokeWidth:2,dot:!1}),(0,M.jsx)(pe.B,{hide:!0,domain:["dataMin","dataMax"]})]})}):null})]})]})},Ae=function(e){var t=e.loading,n=e.control,r=e.intervalRefresher,a=(0,b.qo)({control:n,name:"selectedRoute"}),o=(0,b.qo)({control:n,name:"fromValue.floatValue"}),s=(0,G.on)(),l=s.inputTokenInfo,c=s.outputTokenInfo,d=(0,G.tX)(),p=d.isWarning,x=d.isDanger,f=(0,m._)("SHOW_PRICE_INFO",!1),h=(0,i.Z)(f,2),v=h[0],j=h[1],w=g.useState(v),y=(0,i.Z)(w,2),k=y[0],N=y[1];if(g.useEffect((function(){(p||x)&&N(!0)}),[p,x]),!l||!c)return null;return(0,M.jsxs)("div",{className:"my-4",children:[a?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:"flex justify-between",children:[(0,M.jsx)("span",{className:"flex space-x-2 relative",children:(0,M.jsx)(W.Z,{className:"text-xs font-medium",inputAmount:a.quoteResponse.inAmount,outputAmount:a.quoteResponse.outAmount,inputPair:l,outputPair:c,reversible:!0})}),(0,M.jsxs)("button",{type:"button",onClick:function(){k?(N(!1),j(!1)):(N(!0),j(!0))},className:"flex items-center space-x-2 cursor-pointer text-black/25 dark:text-white/25 hover:text-light-active-state dark:hover:text-v2-primary",children:[(0,M.jsx)("div",{className:"h-4 w-4 flex items-center fill-current",children:k?(0,M.jsx)(U.Z,{}):(0,M.jsx)(z.Z,{})}),(0,M.jsx)("span",{className:"text-xs font-medium",children:k?(0,M.jsx)(u.cC,{id:"Hide price info"}):(0,M.jsx)(u.cC,{id:"Show price info"})}),r]})]}),k&&(0,M.jsx)(se,{route:a.quoteResponse,loading:t,inputPair:l,outputPair:c})]}):o>0?(0,M.jsxs)("div",{className:"flex justify-between",children:[(0,M.jsx)("div",{className:"h-4 w-4 flex items-center fill-current"}),r]}):null,(0,M.jsxs)("div",{className:"flex flex-col space-y-2 mt-2 sm:mt-4",children:[(0,M.jsx)(Te,{token:l}),(0,M.jsx)(Te,{token:c})]})]})},Ce=n(57715),Me=n(94223),Ie=n(1622),Pe=function(e){var t=e.control,n=e.name,r=e.className,a=e.useWSol,i=(0,p.Bn)().tokenMap,o=(0,p.Os)().connected,s=(0,b.qo)({control:t,name:n}),l=g.useMemo((function(){return i.get(s)}),[i,s]);return o?(0,M.jsxs)("div",{className:"flex space-x-1 items-center text-black-50 dark:text-[#CFF3FF] dark:text-opacity-[0.35]",children:[(0,M.jsx)("div",{className:"mb-px",children:(0,M.jsx)(Me.Z,{width:11,height:11})}),(0,M.jsxs)("div",{className:(0,T.cn)("text-xs font-normal whitespace-nowrap",r),children:[(0,M.jsx)(Ie.Z,{mintAddress:s,useWSOL:a})," ",(0,M.jsx)("span",{children:null===l||void 0===l?void 0:l.symbol})]})]}):null},Ze=n(95523),Oe=n(57281),De=n(3011),Re=n(39268),Ee=n.n(Re),Ve=n(33130),Be=n(9364),Fe={amms:(0,Be.cn)([]),excludedAmms:(0,Be.cn)([])},Le=n(51503),_e=n(49839),qe=n(11421),We=n(14167),ze=n(49488),Ue=n(11003),Ge=n(65558),Ke=n.n(Ge);function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function He(e){return Object.keys(e).reduce((function(t,n){var r=e[n];return r?Ye(Ye({},t),{},(0,o.Z)({},n,"string"===typeof r?r:"function"===typeof r.toString?r.toString():"")):t}),{})}var Qe=function(e){var t=e.loading,n=e.listOfSuggestions,r=(0,A.Nr)(t,100),a=(0,g.useMemo)((function(){return[n.additional,n.fromToken,n.toToken].flat().filter(Boolean).length>0}),[n]);return(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("div",{className:(0,J.cn)("transition-all duration-200",a?"opacity-100 !h-auto":"opacity-0 !h-0"),children:[a&&(0,M.jsx)("hr",{className:"w-full border-[rgba(25,35,45,0.35)] my-2 z-0"}),(0,M.jsxs)("div",{className:(0,J.cn)("relative flex flex-wrap gap-y-1 gap-x-2 transition-all",r?"blur-xs opacity-50 pointer-events-none":"opacity-100"),children:[n.additional,n.fromToken,n.toToken]})]})})},Xe=n(99410),$e=n(81097),et=n(64508),tt=n.n(et),nt=n(11017),rt=function(e){var t=e.fromTokenInfo,n=e.toTokenInfo,r=e.inAmountDecimal;return(0,M.jsx)($.Z,{placement:"top",drawShades:!0,buttonContentClassName:"!cursor-help",content:(0,M.jsxs)("div",{className:"p-2",children:[(0,M.jsx)("span",{className:"flex space-x-2 items-center",children:(0,M.jsx)("span",{children:c.ag._("DCA can significantly soften your price impact.")})}),(0,M.jsx)(tt(),{shallow:!0,href:"/dca/".concat(null===t||void 0===t?void 0:t.symbol,"-").concat(null===n||void 0===n?void 0:n.symbol,"?inAmount=").concat(r,"&frequency=minute&frequencyValue=10"),className:"text-white text-xs cursor-pointer flex items-center",children:(0,M.jsx)(C.Z,{size:"xs",className:"!mt-2 !w-[120px]",children:(0,M.jsxs)("div",{className:"flex gap-x-2 items-center justify-center",children:[(0,M.jsx)("span",{children:c.ag._("Go to DCA")}),(0,M.jsx)(nt.Z,{className:"text-white"})]})})})]}),children:(0,M.jsx)("p",{className:"select-none rounded-md text-xxs leading-none transition-all py-1 px-2 bg-v2-primary/10 font-semibold text-white whitespace-nowrap",children:(0,M.jsx)(u.cC,{id:"DCA suggested"})})})},at=n(50269),it=function(e){var t=e.apyInPercent,n=(0,g.useMemo)((function(){if(t)return new f.Z(t).mul(100).toFixed(2)}),[t]);return(0,M.jsx)($.Z,{placement:"top",drawShades:!0,buttonContentClassName:"!cursor-help",content:(0,M.jsxs)("div",{className:"text-xs p-2",children:[(0,M.jsx)("p",{children:(0,M.jsx)(u.cC,{id:"JupSOL is a liquid-staked token, representing SOL staked to Jupiter\u2019s 0% fee validator. Jupiter uses this validator to help land transactions for all users."})}),(0,M.jsx)("p",{children:(0,M.jsx)(u.cC,{id:"Swap for this token and hold it in your wallet or across DeFi while enjoying staking yields!"})}),n&&(0,M.jsxs)("div",{className:"border rounded-lg border-[#667085] bg-white/5 px-4 py-2 gap-x-10 flex justify-between mt-4",children:[(0,M.jsx)("div",{className:"text-white/75",children:"Estimated APY:"}),(0,M.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[n,"%",(0,M.jsx)($.Z,{variant:"dark",content:(0,M.jsx)("span",{className:"flex rounded-lg text-xs text-white-75",children:(0,M.jsx)(u.cC,{id:"APY estimation based on last few epochs"})}),children:(0,M.jsx)("div",{className:"flex items-center text-white/30 fill-current",children:(0,M.jsx)(at.Z,{height:12,width:12})})})]})]})]}),children:(0,M.jsxs)("p",{className:"select-none rounded-md text-xxs leading-none transition-all p-1 text-v2-primary/50 border border-v2-primary/50 font-semibold !h-[18px] flex items-center",children:[t?"".concat(new f.Z(t).mul(100).toFixed(2),"% "):null,(0,M.jsx)(u.cC,{id:"LST"})]})})},ot=function(e){var t=e.tokenInfo;return(0,M.jsx)($.Z,{placement:"top",drawShades:!0,buttonContentClassName:"!cursor-help",content:(0,M.jsx)("div",{className:"text-xs",children:(0,M.jsx)(u.cC,{id:"{0} is a new token, and may be volatile, please trade with caution.",values:{0:t.symbol}})}),children:(0,M.jsx)("p",{className:"select-none rounded-md text-xxs leading-none transition-all py-0.5 px-1 bg-warning/80 text-white",children:(0,M.jsx)(u.cC,{id:"New"})})})},st=function(e){var t=e.inputAmount,n=e.inputTokenInfo,r=e.outputAmount,a=e.outputTokenInfo,o=e.priceImpact,s=e.birdeyeRate,l=e.isWarning,c=e.isDanger,d=g.useState(!0),p=(0,i.Z)(d,2),m=p[0],x=p[1],h=g.useCallback((function(e){e.stopPropagation(),x((function(e){return!e}))}),[]),b=(0,G.gJ)(),j=(0,g.useMemo)((function(){return l||(null===b||void 0===b?void 0:b.isMediumImpact)}),[l,null===b||void 0===b?void 0:b.isMediumImpact]),w=(0,g.useMemo)((function(){return c||(null===b||void 0===b?void 0:b.isHighImpact)}),[c,null===b||void 0===b?void 0:b.isHighImpact]);return(0,M.jsx)($.Z,{placement:"top",drawShades:!0,buttonContentClassName:"!cursor-help",content:(0,M.jsxs)("div",{children:[(0,M.jsxs)("div",{className:(0,J.cn)("p-4",{"bg-jupiter-primary/50":j,"bg-perps-red":w}),children:[(0,M.jsx)("div",{className:"flex items-center justify-between",children:(0,M.jsx)("h2",{className:"font-bold text-white",children:(0,M.jsx)(u.cC,{id:"Price Warning"})})}),(0,M.jsx)("p",{className:"text-v2-lily mt-1 ",children:(0,M.jsx)(u.cC,{id:"Looks like you are getting a bad price. Are you sure you want to continue with this trade?"})})]}),(0,M.jsxs)("div",{className:"bg-white dark:bg-[#2B2C32] p-3  font-medium",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between",children:[(0,M.jsx)("p",{className:"text-black/50 dark:text-white/50",children:(0,M.jsx)(u.cC,{id:"Quoted Rate"})}),(0,M.jsx)("button",{type:"button",className:"cursor-pointer flex",onClick:h,children:(0,M.jsx)(W.y,{className:(0,J.cn)("text-xs font-medium text-white"),textClassName:(0,J.cn)({"text-jupiter-primary":j,"text-perps-red":w}),inputAmount:v().BigInt(t),outputAmount:v().BigInt(r),inputPair:n,outputPair:a,reversible:!0,isReversed:m})})]}),s>0&&(0,M.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,M.jsx)("p",{className:"text-black/50 dark:text-white/50",children:(0,M.jsx)(u.cC,{id:"Birdeye rate"})}),(0,M.jsx)("button",{type:"button",className:"cursor-pointer flex",onClick:h,children:(0,M.jsx)(W.y,{className:(0,J.cn)("text-xs font-medium text-white"),textClassName:(0,J.cn)({"text-jupiter-primary":j,"text-perps-red":w}),inputAmount:v().BigInt(t),outputAmount:v().BigInt(new f.Z(t).div(Math.pow(10,n.decimals)).mul(s).mul(Math.pow(10,a.decimals)).toFixed(0)),inputPair:n,outputPair:a,reversible:!0,isReversed:m})})]}),(0,M.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,M.jsx)("p",{className:"text-black/50 dark:text-white/50",children:(0,M.jsx)(u.cC,{id:"Price Impact"})}),(0,M.jsxs)("p",{className:(0,J.cn)("text-white",{"text-jupiter-primary":null===b||void 0===b?void 0:b.isMediumImpact,"text-perps-red":null===b||void 0===b?void 0:b.isHighImpact}),children:[o.toFixed(3),"%"]})]}),(0,M.jsxs)("div",{className:"mt-5 px-3.5 py-[11px] bg-white dark:bg-white/5 rounded-xl border border-black/10 dark:border-white/10 flex items-center justify-between",children:[(0,M.jsx)("p",{className:" text-black/75 dark:text-white/75 font-medium",children:(0,M.jsx)(u.cC,{id:"You will pay"})}),(0,M.jsxs)("p",{className:"leading-6 text-white font-semibold text-end",children:[A.uf.format(new f.Z(t).div(Math.pow(10,n.decimals)),n.decimals)," ",n.symbol]})]}),(0,M.jsxs)("div",{className:"mt-5 px-3.5 py-[11px] bg-white dark:bg-white/5 rounded-xl border border-black/10 dark:border-white/10 flex items-center justify-between",children:[(0,M.jsx)("p",{className:" text-black/75 dark:text-white/75 font-medium",children:(0,M.jsx)(u.cC,{id:"You will receive"})}),(0,M.jsxs)("p",{className:"leading-6 text-white font-semibold text-end",children:[A.uf.format(new f.Z(r).div(Math.pow(10,a.decimals)),a.decimals)," ",a.symbol]})]})]})]}),children:(0,M.jsx)("p",{className:(0,J.cn)("select-none rounded-md !text-xxs !leading-none transition-all py-1 px-2 font-semibold whitespace-nowrap bg-warning text-limit-bg",{"bg-perps-red":w}),children:(0,M.jsx)(u.cC,{id:"Price Warning"})})})},lt=n(78907),ut=function(e){var t=e.tokenInfo,n=e.dasAsset,r=e.transferFee;return(0,M.jsx)($.Z,{placement:"top",drawShades:!0,buttonContentClassName:"!cursor-help",content:n?(0,M.jsx)(lt.J,{tokenInfo:t,dasAssets:[n],isLoading:!1}):null,children:(0,M.jsx)("div",{className:"select-none rounded-md text-xxs leading-none transition-all py-1 px-2 bg-warning font-semibold text-limit-bg whitespace-nowrap",children:(0,M.jsxs)("div",{className:"flex gap-x-1",children:[(0,M.jsx)("span",{children:t.symbol}),(0,M.jsxs)("span",{children:["(",r,"% Tax)"]})]})})})},ct=function(e){var t=e.tokenInfo;return(0,M.jsx)($.Z,{placement:"top",drawShades:!0,buttonContentClassName:"!cursor-help",content:(0,M.jsx)("div",{className:"text-xs",children:(0,M.jsx)(u.cC,{id:"{0} is not on the strict list, make sure the mint address is correct before trading",values:{0:t.symbol}})}),children:(0,M.jsx)("p",{className:"select-none rounded-md text-xxs leading-none transition-all py-1 px-2 bg-warning font-semibold text-limit-bg whitespace-nowrap",children:(0,M.jsx)(u.cC,{id:"{0} is not verified",values:{0:t.symbol}})})})},dt=n(91799),pt=function(e){var t=e.freeze,n=e.permanent;return(0,M.jsx)($.Z,{placement:"top",drawShades:!0,buttonContentClassName:"!cursor-help",content:(0,M.jsxs)("div",{className:"p-1",children:[t.length>0&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("p",{className:"font-semibold",children:c.ag._("Freeze Authority")}),(0,M.jsx)("div",{className:"text-v2-lily/50 mt-1",children:(0,M.jsx)("p",{children:c.ag._("The token you are trading have Freeze Authority, and can be frozen.")})}),(0,M.jsx)("div",{className:"mt-2 flex gap-2",children:t.map((function(e){return(0,M.jsxs)("div",{className:(0,J.cn)("flex pl-2 overflow-hidden gap-x-2 items-center border border-v2-lily/10 rounded-lg bg-v2-lily/10",(0,J.OR)(e)?"":"bg-warning text-limit-bg"),children:[(0,M.jsx)("span",{className:"font-semibold",children:e.symbol}),(0,M.jsx)(we.Z,{tokenInfo:e,className:(0,J.OR)(e)?"":"text-black"})]},e.address)}))})]}),t.length>0&&n.length>0&&(0,M.jsx)(dt.Z,{}),n.length>0&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("p",{className:"font-semibold",children:c.ag._("Permanent Delegates")}),(0,M.jsx)("div",{className:"text-v2-lily/50 mt-1",children:(0,M.jsx)("p",{children:c.ag._("The token you are trading have Permanent Delegates, permanent delegate has unrestricted delegate privileges over all Token Accounts for that mint, enabling them to burn or transfer tokens without limitation")})}),(0,M.jsx)("div",{className:"mt-2 flex gap-2",children:n.map((function(e){return(0,M.jsxs)("div",{className:(0,J.cn)("flex pl-2 overflow-hidden gap-x-2 items-center border border-v2-lily/10 rounded-lg bg-v2-lily/10",(0,J.OR)(e)?"":"bg-warning text-limit-bg"),children:[(0,M.jsx)("span",{className:"font-semibold",children:e.symbol}),(0,M.jsx)(we.Z,{tokenInfo:e,className:(0,J.OR)(e)?"":"text-black"})]},e.address)}))})]})]}),children:(0,M.jsx)("p",{className:(0,J.cn)("select-none rounded-md !text-xxs !leading-none transition-all py-1 px-2 font-semibold text-limit-bg whitespace-nowrap bg-warning"),children:(0,M.jsx)(u.cC,{id:"Authority Warning"})})})},mt=[y.E6.toString(),y.IL.toString(),y.Th.toString()],xt=n(35186),ft=function(e){var t=e.ammName,n=e.excludeAmm,r=(0,F.JT)().closeModal;return(0,M.jsxs)("div",{className:"p-5 max-w-md dark:bg-v2-background",children:[(0,M.jsx)("p",{className:"font-medium text-xl mb-8 leading-5",children:"Transaction Failure"}),(0,M.jsxs)("p",{className:"text-sm text-v2-lily/75 mb-2",children:["Your transaction failed due to an issue with ",t]}),(0,M.jsx)("p",{className:"text-sm text-v2-lily/75 mb-8",children:"We recommend that you exclude affected DEX(es) and fetch a new quote for your swap."}),(0,M.jsxs)(C.Z,{className:"mb-2",size:"md",onClick:function(){n(),r()},children:["Exclude ",t," and Fetch New Quote"]}),(0,M.jsx)("button",{className:"border border-v2-lily/25 rounded-xl w-full mt-2 h-14",onClick:r,children:"Cancel"})]})},ht=function(e){var t=e.onClickExactIn;return(0,M.jsxs)("div",{className:"bg-warning/10 border border-warning/50 text-perps-warning px-3 py-2 rounded-lg text-xs mt-2 flex flex-col justify-start",children:[(0,M.jsx)("p",{children:c.ag._("ExactOut swap supports less liquidity venues and less routes. It might also offer a worse price. Slippage is only applied on input amount, not output amount.")}),t&&(0,M.jsx)("div",{onClick:t,className:"mt-2 underline cursor-pointer",children:c.ag._("Switch back to ExactIn")})]})},vt=n(1361),gt=n(71052),bt=n(12939),jt=n(73413),wt=n(57917),yt=function(e){var t=e.control,n=e.loading,r=e.error,a=e.moreErrors,o=e.simulationButtonText,s=(e.isLaunchPage,(0,vt.O)().connected),l=(0,b.cl)({control:t}).isSubmitting,x=(0,b.qo)({control:t,name:"fromTokenAddress"}),h=(0,b.qo)({control:t,name:"toTokenAddress"}),v=(0,b.qo)({control:t,name:"selectedRoute"}),j=(0,b.qo)({control:t,name:"fromValue"}),w=(0,b.qo)({control:t,name:"toValue"}),y=(0,b.qo)({control:t,name:"toastId"}),k=(0,p.jB)().useWSol,N=(0,p.Bn)().tokenMap,S=(0,m.FB)(x,void 0,k).balance,T=(0,p.gZ)().nativeAccount,A=(0,G.gJ)(),I=g.useMemo((function(){return null===N||void 0===N?void 0:N.get(x)}),[x,N]),P=g.useMemo((function(){return null===N||void 0===N?void 0:N.get(h)}),[h,N]),Z=g.useMemo((function(){var e=S,t=null===I||void 0===I?void 0:I.decimals;if(v&&t){var n=v.quoteResponse.swapMode===Oe.jr.ExactOut?new f.Z(v.quoteResponse.otherAmountThreshold.toString()).div(Math.pow(10,I.decimals)):null===j||void 0===j?void 0:j.value;return new f.Z(n||0).lessThanOrEqualTo(e)}return!0}),[I,j,S,v]),O=g.useMemo((function(){if(A&&v){var e=!k&&v.quoteResponse.inputMint.equals(Oe.W4)?new(Ke())(v.quoteResponse.inAmount.toString()):new(Ke())(0);return((null===T||void 0===T?void 0:T.info.amount)||new(Ke())(0)).sub(e).gt(new(Ke())(A.minimumSOLForTransaction))}return!0}),[A,v,T,k]),D=(0,jt.useIsAccountFrozen)(I),R=(0,jt.useIsAccountFrozen)(P),E=(0,wt.kH)(y),V=E.isProcessing,B=E.isTxProcessed,F=(E.isTxSuccess,E.isWaitingWalletToSign),L=g.useState(""),_=(0,i.Z)(L,2),q=_[0],W=_[1],z=g.useState(null),U=(0,i.Z)(z,2),K=U[0],Y=U[1],H=g.useCallback((function(e){W("opacity-0"),setTimeout((function(){Y(e),W("opacity-100")}),200)}),[]);return g.useEffect((function(){n?H((0,M.jsx)(u.cC,{id:"Loading"})):r?r===d.D1.TOKEN_NOT_TRADABLE?H(c.ag._("Tokens not tradable")):r===d.D1.COULD_NOT_FIND_ANY_ROUTE||r===d.D1.NO_ROUTES_ERROR?H(c.ag._("No routes found")):r===d.D1.INVALID_REQUEST?H(c.ag._("Invalid request")):H((0,M.jsx)(u.cC,{id:"Error fetching route.<0/> Try changing your trade amount.",components:{0:(0,M.jsx)("br",{})}})):v||null===j||void 0===j||!j.value?H(l?o||(B?(0,M.jsx)(u.cC,{id:"Processed"}):F?(0,M.jsx)(u.cC,{id:"Pending Approval"}):V?(0,M.jsx)(u.cC,{id:"Processing"}):(0,M.jsx)(u.cC,{id:"Swapping"})):(0,M.jsx)(bt.Z,{children:(0,M.jsx)(u.cC,{id:"Swap"})})):H((0,M.jsx)(u.cC,{id:"No routes found"}))}),[V,l,B,F,n,H,v,null===j||void 0===j?void 0:j.value,o,r]),s?(0,M.jsx)(M.Fragment,{children:(0,M.jsx)("div",{className:(0,J.cn)("relative mt-3"),children:(0,M.jsx)(C.Z,{disabled:!v||!Z||!O||n||a.notTradableYet||!(null!==j&&void 0!==j&&j.value)||!(null!==w&&void 0!==w&&w.value),loading:l,type:"submit",className:(0,J.cn)("relative !transition-none w-full bg-[#121D28] border border-transparent",l?(0,J.cn)("transition-all duration-200 dark:bg-[#0f2d3d] dark:[&>div]:!text-labs"):""),children:n?(0,M.jsx)(u.cC,{id:"Loading"}):null!==a&&void 0!==a&&a.notTradableYet?(0,M.jsx)(u.cC,{id:"Not tradable yet"}):null!==j&&void 0!==j&&j.value?Z?O?D||R?(0,M.jsx)(u.cC,{id:"Token account frozen"}):(0,M.jsx)("span",{className:(0,J.cn)("duration-200",q),children:K}):(0,M.jsx)(u.cC,{id:"Insufficient SOL"}):(0,M.jsx)(u.cC,{id:"Insufficient {0}",values:{0:null===I||void 0===I?void 0:I.symbol}}):(0,M.jsx)(u.cC,{id:"Enter an amount"})})})}):(0,M.jsx)(gt.uS,{buttonClassName:"!bg-transparent",overrideContent:(0,M.jsx)(C.Z,{className:"mt-3",size:"md",children:(0,M.jsx)("span",{children:(0,M.jsx)(u.cC,{id:"Connect Wallet"})})})})},kt=n(41118),Nt=n(66956),St=n(23632),Tt=n(85394),At=Ee()((function(){return n.e(1672).then(n.bind(n,81672))}),{ssr:!1,loadableGenerated:{webpack:function(){return[81672]}}}),Ct="PAIRS_SELECT_TO_PAIR_MODAL_ID",Mt=function(e){var t=e.onSubmit,n=e.refresh,r=e.loading,a=e.onClickMax,i=e.control,o=e.setValue,s=e.type,l=e.getValues,d=e.fromTokenInfo,m=e.toTokenInfo,x=e.isSubmitting,h=e.notTradableYet,b=e.error,j=e.simulationButtonText,w=(0,p.mQ)(),y=(w.slippage,w.slippageSettings),k=(0,Nt.b)(d,m),N=k.quoteTokenInfo,S=k.baseTokenInfo,T=k.quoteTokenPrice,A=k.baseTokenPrice,Z=k.rateDecimals,R=(k.priceFetched,g.useMemo((function(){if(!kt.d.find((function(e){return e===(null===d||void 0===d?void 0:d.address)||e===(null===m||void 0===m?void 0:m.address)})))return null;var e=(null===d||void 0===d?void 0:d.address)===(null===S||void 0===S?void 0:S.address);return{isFromBase:Boolean(e)}}),[null===S||void 0===S?void 0:S.address,null===d||void 0===d?void 0:d.address,null===m||void 0===m?void 0:m.address])),E=(0,St.s)({quoteTokenInfo:N,baseTokenInfo:S,quoteTokenPrice:T,baseTokenPrice:A,isBaseQuoteMode:R,rateDecimals:Z,isSubmitting:x}),V=E.swapMarketPrice,B=E.isFetching,F=(0,g.useState)({formattedValue:"",value:"",floatValue:0}),L=F[0],_=F[1],W=(0,g.useState)({formattedValue:"",value:"",floatValue:0}),z=W[0],U=W[1],G=Boolean(!B&&V),K=g.useMemo((function(){var e=new f.Z(0);if(!G||!L||!V||!L.floatValue)return e;var t=new f.Z(L.floatValue).sub(V).div(V);return(e=new f.Z(100).mul(t).toDP(2)).isFinite()?e:new f.Z(0)}),[G,L,V]),Y=g.useMemo((function(){return K.gt(1e4)?">10000":"".concat(K.toNumber()>0?"+":"").concat(K.toDP(2).toString())}),[K]),H=g.useMemo((function(){return null!==R&&void 0!==R&&R.isFromBase?K.toNumber()<0:K.toNumber()>0}),[null===R||void 0===R?void 0:R.isFromBase,K]),Q=g.useMemo((function(){return null!==R&&void 0!==R&&R.isFromBase?K.toNumber()>0:K.toNumber()<0}),[null===R||void 0===R?void 0:R.isFromBase,K]),X=g.useMemo((function(){return H||Q}),[H,Q]),$=l().fromValue;(0,g.useEffect)((function(){if(null!==$&&void 0!==$&&$.floatValue&&L.floatValue&&m){var e=new f.Z($.floatValue).div(L.floatValue).toDP(m.decimals);U({formattedValue:e.toString(),value:e.toString(),floatValue:e.toNumber()})}else U({formattedValue:"",value:"",floatValue:void 0})}),[null===$||void 0===$?void 0:$.floatValue,V,L.floatValue,m]);var ee=(0,g.useCallback)((function(e){if(e.preventDefault(),"minimum-output"!==y.mode)t();else{if(!z.floatValue||!m)return;t({minimumOutput:v().BigInt(new f.Z(z.floatValue).mul(Math.pow(10,m.decimals)).toFixed())})}}),[z.floatValue,t,y.mode,m]);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(At,{onlySlippageSettings:!0,refresh:n,loading:r,isLaunchPage:!0}),(0,M.jsxs)("form",{onSubmit:ee,children:[(0,M.jsxs)("div",{className:"mt-1 flex-col space-y-2 relative",children:[(0,M.jsxs)("div",{className:"flex justify-between",children:[(0,M.jsx)("label",{htmlFor:"fromValue",className:"text-xs md:text-sm font-medium text-black/90 dark:text-white",children:(0,M.jsx)(u.cC,{id:"You're paying"})}),(0,M.jsxs)("div",{className:"flex space-x-2",children:[(0,M.jsx)("div",{className:"flex item-center ml-1 cursor-pointer hover:text-white-50",onClick:a,children:(0,M.jsx)(Pe,{control:i,name:"fromTokenAddress",className:"hover:text-white-50"})}),(0,M.jsx)(I,{setValue:o,control:i,name:"fromTokenAddress"})]})]}),(0,M.jsx)("div",{className:(0,J.cn)("p-4 h-[72px] border border-transparent relative bg-[#EFF0F0] dark:bg-v2-background-dark rounded-xl flex flex-col space-y-3 group","focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:(0,M.jsxs)("div",{className:"flex",children:[(0,M.jsx)(q,{disableTokenSelect:"sell"===(null===s||void 0===s?void 0:s.side),getValues:l,control:i,modalId:Ct,name:"fromTokenAddress"}),(0,M.jsx)("span",{className:"flex-1 text-right",children:(0,M.jsx)(D,{control:i,name:"fromValue"})})]})}),"minimum-output"===y.mode&&(0,M.jsx)("div",{className:"mt-2 sm:space-x-3 space-y-2 sm:space-y-0 flex-col-reverse sm:flex sm:flex-row mb-2",children:(0,M.jsxs)("div",{className:(0,J.cn)("w-full bg-jupiter-input-light dark:bg-v2-background-dark space-y-1 p-4 rounded-xl flex flex-col justify-center","border border-transparent focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark","relative"),children:[(0,M.jsxs)("div",{className:"flex justify-between",children:[(0,M.jsxs)("div",{className:"flex items-center",children:[S?(0,M.jsxs)("p",{className:"text-black-35 dark:text-white-35 text-xs flex items-center",children:[null!==R&&void 0!==R&&R.isFromBase?(0,M.jsx)(u.cC,{id:"Sell"}):(0,M.jsx)(u.cC,{id:"Buy"})," ",(0,M.jsx)(u.cC,{id:"{0} at rate",values:{0:null===S||void 0===S?void 0:S.symbol}}),B?(0,M.jsx)(Tt.Z,{className:"ml-1",width:8,height:8}):null]}):(0,M.jsx)(P.O,{className:"h-4 w-2"}),X?(0,M.jsx)("div",{className:(0,J.cn)("flex items-center text-xs ml-1 font-medium",{"text-jupiter-yellow":H,"text-v2-primary":Q}),children:"(".concat(Y,"%)")}):null]}),V&&V.gt(0)?(0,M.jsx)("button",{type:"button",className:"dark:text-white-35 dark:hover:text-white-75 text-black-35 hover:text-black text-xxs cursor-pointer underline rounded",onClick:function(){V&&_({formattedValue:V.toString(),value:V.toString(),floatValue:V.toNumber()})},children:(0,M.jsx)(u.cC,{id:"Use Market"})}):null]}),(0,M.jsxs)("div",{className:"flex items-end relative",children:[(0,M.jsx)(O.Z,{decimals:Z,onChange:function(e){_(e)},value:L.floatValue,disabled:!1,className:"!text-left !text-sm flex-1"}),N?(0,M.jsx)("div",{className:"flex items-center",children:(0,M.jsx)("span",{className:"font-semibold text-sm",children:null===N||void 0===N?void 0:N.symbol})}):(0,M.jsx)(P.O,{className:"w-11 h-6"})]})]})}),(0,M.jsxs)("div",{className:"flex justify-between mt-2",children:[(0,M.jsx)("label",{className:"text-xs md:text-sm font-medium text-black/90 dark:text-white",children:"minimum-output"===y.mode?c.ag._("To receive at least"):c.ag._("To receive")}),(0,M.jsx)("div",{className:"flex",children:(0,M.jsx)(Pe,{control:i,name:"toTokenAddress"})})]}),(0,M.jsx)("div",{className:"p-4 h-[72px] border border-[#EFF0F0] dark:border-0 dark:bg-[rgba(14,19,32,0.3)] rounded-xl flex flex-col space-y-3",children:(0,M.jsxs)("div",{className:"flex",children:[(0,M.jsx)(q,{disableTokenSelect:"buy"===(null===s||void 0===s?void 0:s.side),getValues:l,control:i,modalId:Ct,name:"toTokenAddress"}),(0,M.jsx)("span",{className:"flex-1 text-right h-10",children:m&&(0,M.jsx)(O.Z,{className:"outline-none",decimals:m.decimals,onChange:function(){},value:z.floatValue,disabled:!0})})]})})]}),z.floatValue?(0,M.jsx)(yt,{isLaunchPage:!0,loading:r,control:i,error:b,moreErrors:{notTradableYet:h},simulationButtonText:j}):(0,M.jsx)("div",{className:(0,J.cn)("relative mt-3"),children:(0,M.jsx)(C.Z,{disabled:!0,loading:x,type:"submit",className:(0,J.cn)("relative !transition-none w-full bg-[#121D28] border border-transparent",x?(0,J.cn)("transition-all duration-200 dark:bg-[#0f2d3d] dark:[&>div]:!text-labs"):""),children:c.ag._("Enter target price")})})]})]})},It=n(132),Pt=n(31562),Zt=n(57565),Ot=n(18849),Dt=n(795).Buffer;function Rt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e[t],r=e[t+7];if(void 0===n||void 0===r)return console.error("Out of bounds",e),null;var a=n+e[++t]*Math.pow(2,8)+e[++t]*Math.pow(2,16)+e[++t]*Math.pow(2,24),i=e[++t]+e[++t]*Math.pow(2,8)+e[++t]*Math.pow(2,16)+r*Math.pow(2,24);return BigInt(a)+(BigInt(i)<<BigInt(32))}var Et=function(){function e(){(0,It.Z)(this,e)}return(0,Pt.Z)(e,null,[{key:"isRouting",value:function(e){return"route"===e||"routeWithTokenLedger"===e||"sharedAccountsRoute"===e||"sharedAccountsRouteWithTokenLedger"===e||"sharedAccountsExactOutRoute"===e||"exactOutRoute"===e}}]),e}();function Vt(e,t){var n,r,a;if((e instanceof x.VersionedTransaction?e.message.compiledInstructions:e.instructions).some((function(e,t){try{var n=Dt.from(e.data);if(!n)return!1;var i=Et.coder.instruction.decode(n);Et.isRouting((null===i||void 0===i?void 0:i.name)||"")&&(r=i,a=t)}catch(o){console.log(o)}})),null===(n=r)||void 0===n||!n.data||!("slippageBps"in r.data)||"number"!==typeof r.data.slippageBps||"undefined"===typeof a)throw new Error("Could not find slippageBps in decoded data");return r.data.slippageBps=t,e instanceof x.VersionedTransaction?e.message.compiledInstructions[a].data=Et.coder.instruction.encode(r.name,r.data):e.instructions[a].data=Et.coder.instruction.encode(r.name,r.data),e}function Bt(e,t,n){return Ft.apply(this,arguments)}function Ft(){return Ft=(0,r.Z)(l().mark((function e(t,n,a){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=(0,r.Z)(l().mark((function e(r,i){var o,s,u,c,d,p,m,h,v,g;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=4,s=null,setTimeout((function(){r(s)}),1e4);case 3:if(!(o>=0)){e.next=33;break}if("swapTransaction"in n){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,function(){var e;if(n.swapTransaction instanceof x.VersionedTransaction)e=n.swapTransaction;else{if(!n.swapTransaction.feePayer)throw new Error("No fee payer found");var r=new x.TransactionMessage({payerKey:n.swapTransaction.feePayer,recentBlockhash:n.blockhash,instructions:n.swapTransaction.instructions}).compileToV0Message();e=new x.VersionedTransaction(r)}return t.simulateTransaction(e,{replaceRecentBlockhash:!0,commitment:"processed"})}();case 8:if(u=e.sent,c=u.value,c.err,d=c.logs,p=null===d||void 0===d?void 0:d.reverse().find((function(e){return e.startsWith("Program return: JUP6LkbZbjS1jKKwapdHNy74zcZ3tLUZoi5QNyVTaV4")})),m=(null===p||void 0===p?void 0:p.split(" ").reverse()[0])||"",h=Ot.base64.decode(m),v=Rt(h)){e.next=21;break}return o--,e.next=20,(0,J.gw)(200);case 20:return e.abrupt("continue",3);case 21:if(g="ExactIn"===a.quoteResponse.swapMode?new f.Z(v.toString()).div(a.quoteResponse.outAmount.toString()).minus(1).mul(-1e4):new f.Z(a.quoteResponse.inAmount.toString()).div(v.toString()).minus(1).mul(-1e4),s=g,!(o>=0&&(g.isNegative()||g.lte(20)))){e.next=30;break}return o--,e.next=27,(0,J.gw)(200);case 27:return e.abrupt("continue",3);case 30:return e.abrupt("break",33);case 31:e.next=3;break;case 33:r(s);case 34:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),Ft.apply(this,arguments)}(0,o.Z)(Et,"coder",new Zt.BorshCoder(Oe.GS)),(0,o.Z)(Et,"programId",Oe.Cc);var Lt=n(11805);function _t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wt=Ee()((function(){return Promise.all([n.e(9438),n.e(6116)]).then(n.bind(n,56116))}),{ssr:!1,loadableGenerated:{webpack:function(){return[56116]}}}),zt=Ee()((function(){return Promise.resolve().then(n.bind(n,73413))}),{ssr:!1,loadableGenerated:{webpack:function(){return[73413]}}}),Ut=Ee()((function(){return n.e(1672).then(n.bind(n,81672))}),{ssr:!1,loadableGenerated:{webpack:function(){return[81672]}}}),Gt="PAIRS_SELECT_TO_PAIR_MODAL_ID";function Kt(e){return e.map((function(e){return qt(qt({},e),{},{data:Object.keys(e.data).reduce((function(t,n){var r;return e.data&&null!==(r=e.data[n])&&void 0!==r&&r.toString?t[n]=e.data[n].toString():t[n]=e.data,t}),{})})}))}var Jt=function(e){var t=e.inToken,n=e.outToken,o=e.type,s=(0,p.Os)().wallet,h=(0,p.jB)(),P=h.useWSol,Z=h.asLegacyTransaction,O=(0,m.NL)(),E=(0,p.y6)(),V=E.tokenPriceMap,B=E.getUSDValue,_=g.useMemo((function(){return"launch-page"===(null===o||void 0===o?void 0:o.mode)}),[null===o||void 0===o?void 0:o.mode]),W=(0,p.C9)(),z=(0,k.T)(),U=(0,b.cI)({defaultValues:{fromTokenAddress:"",toTokenAddress:"",toastId:g.useMemo((function(){return(0,We.w)()}),[])},mode:"all",criteriaMode:"all"}),K=U.handleSubmit,Y=U.setValue,H=U.reset,Q=U.control,X=U.formState,$=X.isSubmitting,ee=X.dirtyFields,te=X.isDirty,re=U.getValues,ae=(0,F.JT)().openModal,ie=(0,p.Bn)(),oe=ie.getTokenInfo,se=ie.newTokenListMap,le=ie.connection,ue=(0,b.qo)({control:Q}),ce=ue.fromTokenAddress,de=ue.fromValue,pe=ue.toValue,me=ue.toTokenAddress,xe=(0,p.mQ)(),fe=xe.slippage,he=xe.slippageSettings,ve=xe.setSlippageSettings,ge=(0,j.Z)(S.J,null),be=(0,i.Z)(ge,2),je=(be[0],be[1]),we=g.useState((function(){return Math.random()>.5})),ye=(0,i.Z)(we,1)[0],ke=(0,ne.gs)(),Ne=ke.prioritizationFeeLamports,Se=ke.priorityLevel,Te=g.useMemo((function(){return{fromTokenInfo:oe(ce),toTokenInfo:oe(me)}}),[oe,ce,me]),Me=Te.fromTokenInfo,Ie=Te.toTokenInfo;g.useEffect((function(){var e=[];t&&(e.push(t.address),Y("fromTokenAddress",t.address)),n&&(e.push(n.address),Y("toTokenAddress",n.address)),B(e)}),[Y,B,t,n]);var Re=g.useRef(!1),Ee=g.useMemo((function(){return!1===Re.current?Me&&null!==de&&void 0!==de&&de.value?v().BigInt(new f.Z(de.value).mul(Math.pow(10,Me.decimals)).floor().toFixed()):v().BigInt(0):Ie&&null!==pe&&void 0!==pe&&pe.value?v().BigInt(new f.Z(pe.value).mul(Math.pow(10,Ie.decimals)).floor().toFixed()):v().BigInt(0)}),[Me,null===de||void 0===de?void 0:de.value,Ie,null===pe||void 0===pe?void 0:pe.value]),Be=Re.current?Oe.jr.ExactOut:Oe.jr.ExactIn,Ge=g.useMemo((function(){if(Be!==Oe.jr.ExactOut)return Z?void 0:64}),[Be,Z]),Ke=g.useMemo((function(){return qt(qt({amount:Ee,inputMint:ce?new x.PublicKey(ce):void 0,outputMint:me?new x.PublicKey(me):void 0,maxAccounts:Ge,swapMode:Be},"minimum-output"===he.mode?{slippageBps:0}:"dynamic"===he.mode?{slippageBps:Math.ceil(100*Number(he.maxDynamicSlippagePct)),computeAutoSlippage:!0}:"auto"===he.mode?{autoSlippage:!0,autoSlippageCollisionUsdValue:1e3,computeAutoSlippage:!0,maxAutoSlippageBps:he.maxAutoSlippagePct?Math.ceil(100*Number(he.maxAutoSlippagePct)):void 0}:"fixed"===he.mode?{slippageBps:Math.ceil(100*Number(fe)),computeAutoSlippage:!0}:void 0),{},{preferLiquidDexes:ye,minimizeSlippage:Boolean("true"===Lt.env.NEXT_PUBLIC_IS_EDGE)})}),[Ee,ce,Ge,fe,he,Be,me,ye]),Je=(0,d.OO)(Ke),Ye=Je.quoteResponseMeta,et=Je.loading,tt=Je.refresh,nt=Je.fetchQuote,at=Je.fetchSwapTransaction,dt=Je.lastRefreshTimestamp,vt=Je.programIdToLabelMap,gt=Je.programIdsExcluded,bt=Je.setProgramIdsExcluded,jt=Je.error,wt=(0,De.KO)(Le.L.quotedSlippage),kt=(0,i.Z)(wt,2),Nt=kt[0],St=kt[1];g.useEffect((function(){null!==Ye&&void 0!==Ye&&Ye.quoteResponse.slippageBps?St(null===Ye||void 0===Ye?void 0:Ye.quoteResponse.slippageBps):St(void 0)}),[Nt,null===Ye||void 0===Ye?void 0:Ye.quoteResponse.slippageBps,St,fe]);var Tt=(0,De.KO)(Fe.amms),At=(0,i.Z)(Tt,2)[1];g.useEffect((function(){if(vt&&vt.size>0){var e=(0,a.Z)(vt.entries()).map((function(e){var t=(0,i.Z)(e,2),n=t[0];return{label:t[1],ammProgramId:n}}));At(e)}}),[vt,At]);var Ct=(0,De.KO)(Fe.excludedAmms),It=(0,i.Z)(Ct,1)[0];g.useEffect((function(){bt(new Set(It))}),[It,bt]),g.useEffect((function(){if(Y("selectedRoute",Ye),Ye){if(!Ie)return;if(!1===Re.current){var e=new f.Z(Ye.quoteResponse.outAmount.toString()||"0").div(Math.pow(10,Ie.decimals)),t=e.toFixed()||"",n=e?e.toNumber():e;Y("toValue",{formattedValue:t,value:t,floatValue:n})}else{if(!Me)return;var r=new f.Z(Ye.quoteResponse.inAmount.toString()||"0").div(Math.pow(10,Me.decimals)),a=r.toFixed()||"",i=r?r.toNumber():r;Y("fromValue",{formattedValue:a,value:a,floatValue:i})}}else Y(!1===Re.current?"toValue":"fromValue",void 0)}),[Ye,Ie,Y,Me]),(0,G.Gl)(et||null===Ye||void 0===Ye?void 0:Ye.quoteResponse,ce,me),g.useEffect((function(){et&&Y(!1===Re.current?"toValue":"fromValue",{formattedValue:"",value:"",floatValue:0})}),[et,Y]);var Pt=(0,Ve.R3)(),Zt=(0,De.KO)(_e.yz),Ot=(0,i.Z)(Zt,1)[0],Dt=g.useState(),Rt=(0,i.Z)(Dt,2),Et=Rt[0],Ft=Rt[1],_t=(0,m.lm)().toast,Jt=g.useCallback(function(){var e=(0,r.Z)(l().mark((function e(t){var n,o,m,x,h,v,g,b,j,w,k,N,S,T,I,D,R,E,B,F,L,q,z,U,G;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.selectedRoute,m=t.fromTokenAddress,x=t.toTokenAddress,h=t.toastId,v=t.minimumOutput,s&&s.adapter.publicKey&&o&&m&&x){e.next=3;break}return e.abrupt("return");case 3:return g={startTime:void 0},b=o,j=(null===(n=V[m||""])||void 0===n?void 0:n.usd)||0,w=new f.Z((null===de||void 0===de?void 0:de.value)||0).mul(j).toString(),k={quoteResponseMeta:b.original,wallet:s.adapter.name,inputAmountInUSD:w,ammLabels:(0,a.Z)((0,Ce.Kc)(b.quoteResponse.routePlan).labels),slippageSettings:he,jupiterParams:He(Ke)},(0,qe.Kz)("Swap clicked",qt({},k)),N=oe(m),S=oe(x),T=function(e){var t=e.txid,n=e.destinationAddress,r=e.inputMint,a=e.outputMint,l=e.sourceAddress,u=e.transactionResponse;try{var c=(0,Oe.Od)({txid:t,destinationAddress:n,hasWrappedSOL:P,inputMint:r,outputMint:a,sourceAddress:l,transactionResponse:u,user:s.adapter.publicKey}),d=(0,i.Z)(c,2),p=d[0],m=d[1],x=N.symbol,h=A.V2.format(new f.Z(p).div(Math.pow(10,N.decimals)).toNumber()),v=S.symbol,g=A.V2.format(new f.Z(m).div(Math.pow(10,S.decimals)).toNumber()),b=m?new f.Z(m).div(o.quoteResponse.outAmount.toString()).minus(1).mul(-1e4).toNumber():null,j=b?new f.Z(b).div(100).toFixed(2):null;return{sourceTokenBalanceChange:p,destinationTokenBalanceChange:m,inputSymbol:x,inputAmount:h,outputSymbol:v,outputAmount:g,incurredSlippageBps:b,incurredSlippagePct:j}}catch(w){return null}},I=[],D=function(){var e=(0,r.Z)(l().mark((function e(t,n){var r,o,f,v,j,w;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b.quoteResponse,o=r.inputMint,f=r.outputMint,e.next=3,(0,Oe.Bj)({connection:le,inputMint:o,outputMint:f,userPublicKey:s.adapter.publicKey});case 3:if(v=e.sent,j=v.destinationAddress,w=v.sourceAddress,!("error"in t)){e.next=10;break}console.error("Error in swapTransactionResponse",t.error),e.next=14;break;case 10:return e.next=12,Pt(t.swapTransaction,{blockhash:t.blockhash,idl:Oe.GS,idlProgramId:d.Cc,lastValidBlockHeight:t.lastValidBlockHeight,skipPreflight:!0},{toastId:h,submittingMessage:null,onSending:function(){g.startTime=Date.now()},autoResolveOnProcessed:!0,resolveSuccessTitleAndDescription:function(e,t){I=(0,Oe.vw)(e);var r=T({txid:t,destinationAddress:j,inputMint:o,outputMint:f,sourceAddress:w,transactionResponse:e}),a=c.ag._("Swap successful");return r&&(a=c.ag._("Successfully swapped {0} {1} for {2} {3}",{0:r.inputAmount,1:r.inputSymbol,2:r.outputAmount,3:r.outputSymbol})),g.startTime&&(0,qe.Kz)("Swap success ping",qt(qt(qt({},k),{},{ping:(Date.now()-g.startTime)/1e3},"number"!==typeof Ne?{fee:Ne}:{feeType:JSON.stringify(Ne)}),{},{txid:t,sourceTokenBalanceChange:null===r||void 0===r?void 0:r.sourceTokenBalanceChange,destinationTokenBalanceChange:null===r||void 0===r?void 0:r.destinationTokenBalanceChange,incurredSlippage:null===r||void 0===r?void 0:r.incurredSlippageBps,events:Kt(I)},null!==n&&void 0!==n&&n.length?{dynamicSlippageAnalysis:n}:void 0)),{title:"",description:a}},resolveErrorTitleAndDescription:function(e,t){var n=(0,Oe.IS)(e),r=n.message,s=n.code,l=n.programIds,p=n.txid,m=!1,x=p&&null!==t&&void 0!==t&&t.transactionResponse?T({txid:p,destinationAddress:j,inputMint:o,outputMint:f,sourceAddress:w,transactionResponse:t.transactionResponse}):null,h=function(){var e,t=(null===l||void 0===l?void 0:l.reduce((function(e,t){var n=vt.get(t);return n?[n,t]:e}),["",""]))||["",""],n=(0,i.Z)(t,2),o=n[0],p=n[1],f=s&&(null===(e={LBUZKhRxPF3XUpBCjp4YzTKgLccjZhTSDM9YuVaPwxo:[6001,3005],CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK:[6019],whirLbMiicVdio4qvUfM5KAg6Ct8VwpYzGff3uctyCc:[6023]}[p])||void 0===e?void 0:e.includes(s));if(o&&!f)return ae((0,M.jsx)(ft,{ammName:o,excludeAmm:function(){bt((function(e){return Z?new Set([].concat((0,a.Z)(It),[p])):(e.add(p),new Set([].concat((0,a.Z)(It),(0,a.Z)(e))))}))}}),{noCloseButton:!1}),{title:c.ag._("{faultyAmmLabel} error",{faultyAmmLabel:o}),description:s?c.ag._("A custom error: {code} was returned. Please contact Jupiter in the discord with the transaction signature for help.",{code:s}):r,shouldShowFeedbackLink:!0};var h=d.Cc.toBase58(),v=d.sv;if(null!==l&&void 0!==l&&l.some((function(e){return e===h}))||f){if(s===d.sv.SlippageToleranceExceeded.code||f){m=!0;var g=c.ag._("Unable to complete the swap as the slippage exceeded your settings. Try again or change your slippage limit."),b=null!==x&&void 0!==x&&x.incurredSlippagePct?c.ag._("Slippage incurred for your failed swap was {0}%",{0:null===x||void 0===x?void 0:x.incurredSlippagePct}):null,j=(0,M.jsx)(u.cC,{id:"{paragraphOne}<0/><1/>{paragraphTwo}",values:{paragraphOne:g,paragraphTwo:b},components:{0:(0,M.jsx)("br",{}),1:(0,M.jsx)("br",{})}});return{title:c.ag._("Slippage reached"),description:j,shouldShowFeedbackLink:!1}}if(s===v.BalancesNotExtractedProperly.code)return{title:c.ag._("Unable to extract balances. Check transaction"),shouldShowFeedbackLink:!0};if(s===v.TransactionNotConfirmed.code)return{title:c.ag._("Transaction not confirmed"),description:c.ag._("Transaction has expired. Increasing transaction priority fee may help."),shouldShowFeedbackLink:!1,shouldShowUpdatePriorityFee:!1}}switch(s){case v.InsufficientSOL.code:return{title:c.ag._("Insufficient SOL"),description:c.ag._("You do not have enough SOL to pay the transaction fee and any related SOL account deposits needed to execute the swap."),shouldShowFeedbackLink:!0};case v.FrozenAccount.code:return{title:c.ag._("Frozen Token Account"),description:c.ag._("Your token account is frozen. Contact the token project about it."),shouldShowFeedbackLink:!0}}return{title:r||(null===s||void 0===s?void 0:s.toString())||"",description:s?c.ag._("A custom error: {code} was returned. Please contact Jupiter in the discord with the transaction signature for help.",{code:s}):r,shouldShowFeedbackLink:!0}}();return m&&(0,qe.Kz)("Swap failed",qt(qt(qt({txid:p,code:s,message:r,programIds:l},k),h),{},{sourceTokenBalanceChange:null===x||void 0===x?void 0:x.sourceTokenBalanceChange,destinationTokenBalanceChange:null===x||void 0===x?void 0:x.destinationTokenBalanceChange,incurredSlippage:null===x||void 0===x?void 0:x.incurredSlippageBps,events:Kt(I)})),h},referenceFee:Ot.jup.m&&Ot.jup.h&&Ot.jup.vh?"MEDIUM"===Se?Ot.jup.m:"HIGH"===Se?Ot.jup.h:"VERY_HIGH"===Se?Ot.jup.vh:void 0:Ot.swapFee,minimumFee:_e.uo});case 12:e.sent.success&&(je({fromPair:N.address,toPair:S.address}),O.invalidateQueries({queryKey:[p.gj]}));case 14:W([m,x,y.W4]),tt();case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.prev=14,Ft(c.ag._("Preparing swap")),"minimum-output"===he.mode&&v&&(b.quoteResponse.outAmount=v,b.original.outAmount=v.toString()),e.next=19,at({quoteResponseMeta:b,userPublicKey:s.adapter.publicKey,prioritizationFeeLamports:1,wrapUnwrapSOL:!P});case 19:if(R=e.sent,E=!1,B=(null===Ye||void 0===Ye?void 0:Ye.quoteResponse.slippageBps)||0,F=[],"swapTransaction"in R){e.next=25;break}throw new Error("No swapTransaction in swapTransactionResponseToUse");case 25:if("dynamic"!==he.mode){e.next=60;break}Ft(c.ag._("Optimizing slippage")),L=2;case 28:if(!(L>=0)){e.next=60;break}return R.swapTransaction=Vt(R.swapTransaction,1e4),e.next=32,Bt(le,R,o);case 32:if(q=e.sent,!(z=Boolean(L>0&&q&&q.gte(100*he.maxDynamicSlippagePct)))){e.next=46;break}return console.log("Getting new quote"),Ft((0,M.jsx)(u.cC,{id:"Refreshing quote"})),L--,e.next=40,nt();case 40:return(U=e.sent)&&(U.original.outAmount=b.original.outAmount,U.quoteResponse.outAmount=b.quoteResponse.outAmount,b=U,L--),F.push({simulatedIncurredSlippage:null===q||void 0===q?void 0:q.toNumber(),shouldGetAnotherQuote:z,amplificationRatio:void 0,slippageToUse:void 0,ammLabels:(0,a.Z)((0,Ce.Kc)(b.quoteResponse.routePlan).labels)}),e.abrupt("continue",28);case 46:if(!(L<0)){e.next=51;break}return F.push({simulatedIncurredSlippage:null===q||void 0===q?void 0:q.toNumber(),shouldGetAnotherQuote:z,amplificationRatio:void 0,slippageToUse:void 0,ammLabels:(0,a.Z)((0,Ce.Kc)(b.quoteResponse.routePlan).labels)}),E=!0,_t({title:c.ag._("Warning, try increasing your slippage"),variant:Ue.Lb.ERROR,description:(0,M.jsxs)(M.Fragment,{children:[q&&(0,M.jsxs)("p",{children:[c.ag._("Your slippage may be too low, the simulated slippage was {0}%",{0:q.div(100).toDP(2).toString()}),"."]}),(0,M.jsx)("p",{className:"mt-2",children:c.ag._("Try refreshing a new quote, or update your slippage.")}),(0,M.jsx)(C.Z,{size:"xs",type:"button",className:"mt-4 !h-",onClick:function(){return ae((0,M.jsx)(xt.ZP,{isLaunchPage:_}),{canDismiss:!1})},children:"Update slippage"})]}),duration:1e4}),e.abrupt("break",60);case 51:return G=q?new f.Z(1).minus(q.div(100*he.maxDynamicSlippagePct)).plus(1).toNumber():0,B=f.Z.max(f.Z.max(100*he.maxDynamicSlippagePct/100,10),q?f.Z.min(100*he.maxDynamicSlippagePct,q.mul(G).toNumber()):0).round().toNumber(),b.quoteResponse.slippageBps=B,b.original.slippageBps=B,Ft((0,M.jsxs)("div",{children:[c.ag._("Optimized slippage")," ",B/100,"%"]})),F.push({simulatedIncurredSlippage:null===q||void 0===q?void 0:q.toNumber(),shouldGetAnotherQuote:z,amplificationRatio:G,slippageToUse:B,ammLabels:(0,a.Z)((0,Ce.Kc)(b.quoteResponse.routePlan).labels)}),e.abrupt("break",60);case 60:if(!E){e.next=63;break}return tt(),e.abrupt("return");case 63:if(R){e.next=67;break}console.log("No swapTransactionResponseToUse"),e.next=71;break;case 67:return setTimeout((function(){Ft(void 0)}),1500),R.swapTransaction=Vt(R.swapTransaction,B),e.next=71,D(R,F);case 71:return e.prev=71,Y("toastId",(0,We.w)()),e.finish(71);case 74:case"end":return e.stop()}}),e,null,[[14,,71,74]])})));return function(t){return e.apply(this,arguments)}}(),[s,V,null===de||void 0===de?void 0:de.value,he,Ke,oe,P,le,W,tt,Pt,Ne,vt,ae,bt,Z,It,Ot.jup.m,Ot.jup.h,Ot.jup.vh,Ot.swapFee,Se,je,O,at,null===Ye||void 0===Ye?void 0:Ye.quoteResponse.slippageBps,nt,_t,_,Y]),Yt=(0,S.V)();(0,w.Z)((function(){Yt[0]&&Yt[1]&&(Me&&Me.address!==Yt[0].address&&Y("fromTokenAddress",Yt[0].address),Ie&&Ie.address!==Yt[1].address&&Y("toTokenAddress",Yt[1].address))}),Yt);var Ht=(0,N.Z)();g.useEffect((function(){Ht&&Y("fromValue",{formattedValue:Ht,value:Ht,floatValue:Number(Ht)})}),[Y,Ht]);var Qt=g.useRef("");g.useEffect((function(){((!1===Re.current?ee.fromValue:ee.toValue)||ee.toTokenAddress||ee.fromTokenAddress)&&(Qt.current="")}),[ee.fromValue,ee.toTokenAddress,ee.fromTokenAddress,ee.toValue]);var Xt=g.useCallback((function(){if(!et&&Ie&&Me){var e=re(),t=e.fromTokenAddress,n=e.toTokenAddress,r=e.fromValue,a=e.toValue,i=Qt.current;!Qt.current&&Number((null===r||void 0===r?void 0:r.floatValue)||0)>0&&null!==Ye&&void 0!==Ye&&Ye.quoteResponse&&(i=!1===Re.current?new f.Z(Ye.quoteResponse.outAmount.toString()).div(Math.pow(10,Ie.decimals)).toString():new f.Z(Ye.quoteResponse.inAmount.toString()).div(Math.pow(10,Me.decimals)).toString()),H(qt({fromTokenAddress:t,toTokenAddress:n},!1===Re.current?{fromValue:{value:i,floatValue:Number(i),formattedValue:i}}:{toValue:{value:i,floatValue:Number(i),formattedValue:i}})),setTimeout((function(){Qt.current=!1===Re.current?(null===r||void 0===r?void 0:r.value)||"":(null===a||void 0===a?void 0:a.value)||""}),0),z(Ie,Me)}}),[et,Ie,Me,null===Ye||void 0===Ye?void 0:Ye.quoteResponse,z,re,H]);!function(e){var t=(0,m.lm)().toast,n=(0,p.mQ)(),r=n.slippage,a=n.slippageSettings,i=g.useRef(!1),o=(0,xt.zY)({mode:a.mode,slippageInput:r}),s=o.slippageSuggestionText,l=o.shouldShowWarning;g.useEffect((function(){l&&!1===i.current&&!e&&(i.current=!0,t({title:c.ag._("Warning, high slippage"),variant:Ue.Lb.ERROR,description:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("p",{children:[c.ag._("Warning, your slippage is currently set to {slippage}%",{slippage:r}),"."]}),(0,M.jsx)("p",{children:s})]})}))}),[i,l,r,s,t,e])}(_);var $t=(0,m.FB)(ce,void 0,P).balance,en=g.useCallback((function(){var e=new f.Z($t);ce===y.W4.toBase58()&&(e=e.minus(y.WO)),Y("fromValue",{floatValue:e.toNumber(),formattedValue:e.toString(),value:e.toString()})}),[$t,ce,Y]),tn=(0,De.KO)(L.dS),nn=(0,i.Z)(tn,1)[0].TARGET_MINT,rn=(0,b.qo)({control:Q,name:"selectedRoute"}),an=(0,ze.QX)({disabled:!_}).claimTimes,on=g.useMemo((function(){var e=null===rn||void 0===rn?void 0:rn.quoteResponse.contextSlot;return!(e||!se.has(ce)&&!se.has(me))||(me===nn&&e&&an?e<(null===an||void 0===an?void 0:an.enableSlot):void 0)}),[nn,null===rn||void 0===rn?void 0:rn.quoteResponse.contextSlot,me,an,ce,se]),sn=g.useRef(null),ln=function(e){var t=e.fromTokenInfo,n=e.toTokenInfo,r=e.quoteResponse,a=e.isLaunchPage,i=(0,p.Bn)().newTokenListMap,o=(0,p.y6)().tokenPriceMap,s=(0,$e.j)([t,n].filter(Boolean)),l=s.data,u=(s.isLoading,(0,Xe.A)(["JupSOL"]).data),c=(0,G.tX)();return(0,g.useMemo)((function(){var e={fromToken:[],toToken:[],additional:[]};if(t&&((0,J.tr)(t)&&e.fromToken.push((0,M.jsx)(ct,{tokenInfo:t},"unknown"+t.address)),i.has(t.address)&&e.fromToken.push((0,M.jsx)(ot,{tokenInfo:t},"new"+t.address)),u&&u.apys[t.symbol]&&e.fromToken.push((0,M.jsx)(it,{apyInPercent:u.apys[t.symbol]},"lst"+t.symbol))),n&&((0,J.tr)(n)&&e.toToken.push((0,M.jsx)(ct,{tokenInfo:n},"unknown"+n.address)),i.has(n.address)&&e.toToken.push((0,M.jsx)(ot,{tokenInfo:n},"new"+n.address)),u&&u.apys[n.symbol]&&e.fromToken.push((0,M.jsx)(it,{apyInPercent:u.apys[n.symbol]},"lst"+n.symbol))),l&&t&&n){var s=l[0]?(0,lt.y)(l[0]):void 0,d=l[1]?(0,lt.y)(l[1]):void 0,p=[],m=[];(null===s||void 0===s?void 0:s.freezeAuthority)&&!mt.includes(t.address)&&p.push(t),(null===s||void 0===s?void 0:s.permanentDelegate)&&m.push(t),(null===d||void 0===d?void 0:d.freezeAuthority)&&!mt.includes(n.address)&&p.push(n),(null===d||void 0===d?void 0:d.permanentDelegate)&&m.push(n),(p.length>0||m.length>0)&&e.additional.push((0,M.jsx)(pt,{freeze:p,permanent:m},"additional-suggestions")),(null===s||void 0===s?void 0:s.transferFee)&&e.additional.push((0,M.jsx)(ut,{tokenInfo:t,dasAsset:l[0],transferFee:s.transferFee},"2022"+t.address)),(null===d||void 0===d?void 0:d.transferFee)&&e.additional.push((0,M.jsx)(ut,{tokenInfo:n,dasAsset:l[1],transferFee:d.transferFee},"transfer-tax-"+n.address))}var x=a?0:100*Number((null===r||void 0===r?void 0:r.priceImpactPct)||0),h=Number(x||0)>5;if(r&&null!==t&&void 0!==t&&t.decimals&&null!==n&&void 0!==n&&n.decimals){var v=r.inAmount,g=r.outAmount;(h||c.isWarning||c.isDanger)&&e.additional.push((0,M.jsx)(st,{inputAmount:v.toString(),inputTokenInfo:t,outputAmount:g.toString(),outputTokenInfo:n,priceImpact:x,birdeyeRate:c.rate||0,isWarning:c.isWarning,isDanger:c.isDanger},"warning-"+t.address))}return r&&t&&n&&function(){var e,n=(null===(e=o[(null===t||void 0===t?void 0:t.address)||""])||void 0===e?void 0:e.usd)||0;return new f.Z(r.inAmount.toString()).div(Math.pow(10,t.decimals)).mul(n).gte(1e3)&&(x||0)>y.WJ}()&&e.additional.push((0,M.jsx)(rt,{inAmountDecimal:new f.Z(r.inAmount.toString()).div(Math.pow(10,t.decimals)).toString(),fromTokenInfo:t,toTokenInfo:n},"dca-"+(null===t||void 0===t?void 0:t.address)+(null===n||void 0===n?void 0:n.address))),e}),[c.isDanger,c.isWarning,c.rate,l,t,a,u,i,r,n,o])}({fromTokenInfo:Me,toTokenInfo:Ie,quoteResponse:null===rn||void 0===rn?void 0:rn.quoteResponse,isLaunchPage:_});return g.useEffect((function(){_||"minimum-output"===he.mode&&ve(p.NH)}),[_,ve,he.mode]),g.useMemo((function(){var e;return _?(0,M.jsx)(Mt,{onSubmit:function(e){return K((function(t){return Jt(qt(qt({},t),e))}))()},refresh:tt,loading:et,onClickMax:en,control:Q,setValue:Y,type:o,getValues:re,fromTokenInfo:Me,toTokenInfo:Ie,isSubmitting:$,notTradableYet:on,error:jt,simulationButtonText:Et}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{className:"flex justify-end mb-2",children:(0,M.jsx)(Ut,{refresh:tt,loading:et})}),(0,M.jsx)(Wt,{}),(0,M.jsx)("div",{className:"bg-v2-background rounded-2xl p-4 shadow-swap2-dark",children:(0,M.jsxs)("form",{onSubmit:K(Jt),children:[(0,M.jsxs)("div",{className:"flex-col relative",children:[(0,M.jsxs)("div",{className:"flex justify-between my-2",children:[(0,M.jsx)("label",{htmlFor:"fromValue",className:"text-xs sm:text-sm font-medium text-black/90 dark:text-white whitespace-nowrap",children:(0,M.jsx)(u.cC,{id:"You're paying"})}),(0,M.jsxs)("div",{className:"flex space-x-2",children:[(0,M.jsx)(Pe,{control:Q,name:"fromTokenAddress",useWSol:P}),(0,M.jsx)(I,{onActionClicked:function(){Re.current=!1},setValue:Y,control:Q,name:"fromTokenAddress"})]})]}),(0,M.jsx)("div",{className:(0,T.cn)("p-4 h-[72px] border border-transparent relative rounded-xl flex flex-col space-y-3 group","focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark",!1===Re.current?"bg-v2-background-dark":"!bg-[rgba(14,19,32,0.3)]"),children:(0,M.jsxs)("div",{ref:sn,className:"flex",children:[(0,M.jsx)(q,{getValues:re,control:Q,modalId:Gt,name:"fromTokenAddress"}),(0,M.jsx)("span",{className:"flex-1 text-right",children:(0,M.jsx)(D,{control:Q,name:"fromValue",loading:!!Re.current&&et,onKeyDown:function(e){Re.current=!1},placeholder:te?Be===Oe.jr.ExactIn?"0.00":"":"0.00"})})]})}),Me&&(0,M.jsx)(zt,{tokenInfo:Me}),(0,M.jsxs)("div",{className:"relative flex justify-center my-2",children:[(0,M.jsx)("hr",{className:"absolute w-full border-jupiter-input-light dark:border-[rgba(25,35,45,0.35)] top-[calc(50%-1px)] -z-0"}),(0,M.jsx)("div",{className:"inline-block z-10",children:(0,M.jsx)("button",{type:"button",className:(0,T.cn)("group/flip bg-[#EBEFF1] dark:bg-v2-background w-8 h-8 rounded-full cursor-pointer flex flex-col justify-center border-[3px] dark:border-[rgba(25,35,45,0.75)] dark:text-white-25","dark:hover:border-v2-primary dark:hover:shadow-swap-input-dark"),onClick:Xt,children:(0,M.jsx)("span",{className:"w-full text-white/50 fill-current flex justify-center transition-none group-hover/flip:text-v2-primary/50 dark:group-hover/flip:text-v2-primary",children:(0,M.jsx)(Ze.Z,{})})})})]}),(0,M.jsxs)("div",{className:"flex justify-between my-2",children:[(0,M.jsx)("label",{className:"text-xs sm:text-sm font-medium text-black/90 dark:text-white",children:(0,M.jsx)(u.cC,{id:"To receive"})}),(0,M.jsx)("div",{className:"flex",children:(0,M.jsx)(Pe,{control:Q,name:"toTokenAddress",useWSol:P})})]}),(0,M.jsx)("div",{className:(0,T.cn)("relative","p-4 h-[72px] border border-transparent relative rounded-xl flex flex-col space-y-3 group","focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark","hover:bg-v2-background-dark",!0===Re.current?"bg-v2-background-dark":"bg-[rgba(14,19,32,0.3)]"),children:(0,M.jsxs)("div",{className:"flex",children:[(0,M.jsx)(q,{getValues:re,control:Q,modalId:Gt,name:"toTokenAddress"}),(0,M.jsx)("span",{className:"flex-1 text-right h-10",children:(0,M.jsx)(D,{control:Q,name:"toValue",loading:!Re.current&&et,onKeyDown:function(e){e.metaKey||e.ctrlKey||"Meta"===e.key||"Control"===e.key||"Alt"===e.key||"Shift"===e.key||(Re.current=!0)},placeholder:te?Be===Oe.jr.ExactOut?"0.00":"":"0.00"})})]})}),Ie&&(0,M.jsx)(zt,{tokenInfo:Ie})]}),(0,M.jsx)("div",{className:"mt-2 flex gap-x-1",children:(0,M.jsx)(Ce.ZP,{loading:et,control:Q})}),Re.current&&(0,M.jsx)(ht,{}),(0,M.jsx)(Qe,{loading:et,listOfSuggestions:ln}),(0,M.jsx)(yt,{isLaunchPage:_,simulationButtonText:Et,loading:et,control:Q,error:jt,moreErrors:{notTradableYet:on}}),gt.size>0&&(0,M.jsx)("p",{className:"text-xs mt-2 text-v2-lily/50",children:(0,M.jsx)(u.cC,{id:"Disabled Amms: {0}",values:{0:Array.from(gt).map((function(e){return vt.get(e)})).join(", ")}})})]})}),(0,M.jsx)(Ae,{loading:et,control:Q,intervalRefresher:(0,M.jsx)(R.Z,{value:null===(e=re().fromValue)||void 0===e?void 0:e.floatValue,isSubmitting:$,lastRefreshTimestamp:dt,refresh:tt})})]})}),[_,tt,et,K,Jt,Q,P,Y,re,te,Be,Me,Xt,Ie,ln,Et,jt,on,gt,$,dt,en,o,vt])}},96065:function(e,t,n){n(93981);var r=n(29541);t.Z=function(e){var t=e.className;return(0,r.jsx)("svg",{className:t,width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M4.10201 1.28172L8.80544 5.75191C8.94178 5.88275 8.94178 6.1008 8.80544 6.23164L4.10201 10.7018C3.96568 10.8327 3.73846 10.8327 3.60213 10.7018L3.10225 10.2221C2.96592 10.0913 2.96592 9.87321 3.10225 9.74237L6.80592 6.23164C6.94225 6.1008 6.94225 5.88275 6.80592 5.75191L3.12497 2.24118C2.98864 2.11034 2.98864 1.89229 3.12497 1.76145L3.62485 1.28172C3.76118 1.17269 3.96568 1.17269 4.10201 1.28172Z",fill:"currentColor"})})}},24684:function(e,t,n){n.d(t,{tX:function(){return A},Gl:function(){return k},on:function(){return S},gJ:function(){return T}});var r=n(63956),a=n(93981),i=n(13838),o=n(9364),s=n(3011),l=n(13845),u=n(27195),c=n(8857),d=n.n(c),p=n(17769),m=n(41144),x=n(59295);var f=n(84985),h=n(76613),v=n(44495);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=(0,o.cn)({inputTokenInfo:void 0,outputTokenInfo:void 0}),w=(0,o.cn)(null),y=(0,o.cn)({isCheaper:!1,isMoreExp:!1,isWithinTwoPercent:!1,isWithinFivePercent:!1,isDanger:!1,isWarning:!1,percent:0,formattedPercent:"",rate:null,rateDiff:null,apiURL:""}),k=function(e,t,n){var r=(0,f.Bn)().getTokenInfo,o=(0,f.jB)().useWSol,l=(0,s.b9)(j),c=(0,s.b9)(w),g=(0,s.b9)(y),k=(0,f.gZ)().addressToTokenAccountMap,S=(0,a.useMemo)((function(){var e=new Map;return k.forEach((function(t,n){e.set(t.info.mint.toBase58(),t.pubkey.toBase58())})),e}),[k]),T=(0,a.useMemo)((function(){return[t?r(t):void 0,n?r(n):void 0]}),[r,t,n]),A=T[0],C=T[1];(0,v.Z)((function(){l({inputTokenInfo:A,outputTokenInfo:C})}),[A,C,l]),(0,v.Z)((function(){c(e?N(e,S,!o):null)}),[e,c,S,o]);var M=function(e){var t=e.inputAmount,n=e.inputTokenInfo,r=e.outputAmount,o=e.outputTokenInfo,s=(null===n||void 0===n?void 0:n.address)||"",l=(null===o||void 0===o?void 0:o.address)||"",c=(0,a.useMemo)((function(){return"https://birdeye-proxy.jup.ag/defi/multi_price?list_address=".concat(s,",").concat(l)}),[s,l]),f=(0,p.aM)([c],(0,u.Z)(d().mark((function e(){var t,n,r,a,o,u,p;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s&&l){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,m.ZP.get(c,{headers:{"X-API-KEY":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE2NzI5MDEwNzZ9.c66gFnI20ymHoPWapB0JgISzqDIK6Q_Zg0oAVp8Ssyc"}}).json();case 5:return o=e.sent,u=o.data,p=null!==(t=u[s])&&void 0!==t&&t.value&&null!==(n=u[l])&&void 0!==n&&n.value?new i.Z(null===(r=u[s])||void 0===r?void 0:r.value).div(new i.Z(null===(a=u[l])||void 0===a?void 0:a.value)):null,e.abrupt("return",p);case 11:throw e.prev=11,e.t0=e.catch(2),e.t0;case 14:case"end":return e.stop()}}),e,null,[[2,11]])}))),{refetchInterval:3e4,staleTime:3e4,keepPreviousData:!0}),h=(0,a.useMemo)((function(){return f.data?f.data.toNumber():null}),[f.data]),v=(0,a.useMemo)((function(){if(h&&n&&o&&t&&r){var e=(0,x.c)({inAmount:t,inputDecimal:n.decimals,outAmount:r,outputDecimal:o.decimals},!0);if(e&&h)return new i.Z(e).div(h).toDecimalPlaces(3).toNumber()}return null}),[h,t,r,n,o]);return(0,a.useMemo)((function(){return{rate:h,rateDiff:v,apiURL:c}}),[h,v,c])}({inputTokenInfo:A,outputTokenInfo:C,inputAmount:null===e||void 0===e?void 0:e.inAmount,outputAmount:null===e||void 0===e?void 0:e.outAmount}),I=(0,a.useMemo)((function(){var e=null===M||void 0===M?void 0:M.rateDiff;if("number"!==typeof e)return y.init;var t=e>=1,n=e<1,r=n?1-e<=.02:e-1<=.02,a=n?1-e<=.05:e-1<=.05,o=!t&&!r&&a,s=!t&&!a,l=n?new i.Z(1).minus(e).mul(100).toDecimalPlaces(3).toNumber():new i.Z(e).minus(1).mul(100).toDecimalPlaces(3).toNumber();return b({isCheaper:t,isMoreExp:n,isWithinTwoPercent:r,isWithinFivePercent:a,isWarning:o,isDanger:s,percent:l,formattedPercent:h.uf.format(l)},M)}),[M]);(0,v.Z)((function(){g(I)}),[g,I])},N=function(e,t,n){var r=new i.Z(e.priceImpactPct||0).mul(100).toNumber();return b({isHighImpact:r>5,isMediumImpact:r>=2&&r<=5,priceImpact:r},(0,l.rR)(e,t,new Map,n,!0))},S=function(){return(0,s.Dv)(j)},T=function(){return(0,s.Dv)(w)},A=function(){return(0,s.Dv)(y)}},16941:function(e,t,n){var r=n(93981),a=n(24201),i=n(29541);t.Z=function(e){var t=e.idx,n=e.itemsCount,o=e.className,s=void 0===o?"":o,l=e.onClick,u=e.highlighted,c=e.roundBorder,d=e.children,p="left"===c?"rounded-l-xl":"right"===c?"rounded-r-xl":void 0,m=(0,r.useMemo)((function(){if(t>0&&t<n)return"border-l border-black/10 dark:border-white/5"}),[t,n]);return(0,i.jsx)("button",{type:"button",className:(0,a.cn)("".concat("relative flex-1 py-4 px-1 text-white-50 bg-[#1B1B1E]"," ").concat(s," ").concat(m," relative"),u&&"border !border-v2-primary ".concat(p," bg-v2-primary/10 text-white")),onClick:l,children:(0,i.jsx)("div",{className:"h-full w-full leading-none flex justify-center items-center ".concat(u&&"text-v2-primary"),children:d})})}},35186:function(e,t,n){n.d(t,{yi:function(){return I},x9:function(){return M},ZP:function(){return V},zY:function(){return R}});var r=n(27195),a=n(63956),i=n(8857),o=n.n(i),s=n(73360),l=n(7761),u=n(93981),c=n(71048),d=n(87821),p=n(24201),m=n(84985),x=n(17769),f=n(6691),h=n(12866),v=n(25546),g=n(70006),b=n(71130),j=n(99438),w=n(11003),y=n(16941),k=n(29541),N=function(e){var t=e.newSlippage,n=e.onClickAccept,r=e.onClickReject;return(0,k.jsx)("div",{className:"max-w-[480px]",children:(0,k.jsxs)("div",{className:"p-6 pb-5 bg-jupiter-red",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsx)("h2",{className:"text-lg font-bold text-white",children:(0,k.jsx)(s.cC,{id:"Warning: High slippage!"})}),(0,k.jsx)("button",{className:"text-white/50",onClick:r,children:(0,k.jsx)(h.Z,{width:12,height:12})})]}),(0,k.jsxs)("div",{className:"text-white/75 mt-4 text-sm space-x-1",children:[(0,k.jsx)("span",{children:(0,k.jsx)(s.cC,{id:"Your transaction may be frontrun and result in an unfavourable trade."})}),(0,k.jsx)("span",{children:(0,k.jsx)(s.cC,{id:"The recommended slippage is between {MINIMUM_SUGGESTED_SLIPPAGE}% to {MAXIMUM_SUGGESTED_SLIPPAGE}%",values:{MINIMUM_SUGGESTED_SLIPPAGE:M,MAXIMUM_SUGGESTED_SLIPPAGE:I}})})]}),(0,k.jsx)("p",{className:"text-white/75 mt-6 text-sm",children:(0,k.jsx)(s.cC,{id:"Are you sure you want to set it to {newSlippage}%?",values:{newSlippage:t}})}),(0,k.jsx)("button",{type:"button",className:"mt-6 font-semibold w-full rounded-lg flex justify-center items-center p-4 border  dark:border-white/50 text-base bg-transparent hover:bg-black/40",onClick:n,children:(0,k.jsx)(s.cC,{id:"I know what I\u2019m doing. Let\u2019s go!"})}),(0,k.jsx)("button",{type:"button",className:"mt-3 font-semibold text-white w-full rounded-lg flex justify-center items-center p-4 bg-black/80 hover:bg-black text-base",onClick:r,children:(0,k.jsx)(s.cC,{id:"Cancel"})})]})})},S=n(76613),T=n(91799);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=.5,I=5,P=function(){return(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)("div",{className:"text-xs text-v2-lily/50 mt-4 self-start font-normal flex flex-col gap-y-2",children:[(0,k.jsx)("p",{children:l.ag._("Minimum output mode ignores slippage and attempt to swap at user desired rates instead.")}),(0,k.jsx)("p",{children:l.ag._("Min Out offers no sandwich protection, and should only be used for volatile, or newly launched tokens.")})]})})},Z=function(e){var t=e.control,n=e.setValue,r=e.inputAutoSlippageRef,a=e.isMaxAutoSlippageEnabled;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,k.jsx)("div",{children:"Max Slippage:"}),(0,k.jsx)("div",{className:"flex items-center rounded-lg bg-[#1B1B1E] p-1",children:(0,k.jsx)("div",{onClick:function(){var e;null===(e=r.current)||void 0===e||e.focus(),n("isMaxAutoSlippageEnabled",!1)},className:(0,p.cn)("flex items-center justify-between gap-2 cursor-text w-[120px] h-9 text-white-50 bg-[#1B1B1E] px-2 relative bg-transparent",!a&&"border !border-v2-primary rounded-lg bg-v2-primary/10"),children:(0,k.jsx)(c.Qr,{control:t,name:"maxAutoSlippage",render:function(e){var t=e.field,n=t.onChange,a=t.value;return(0,k.jsx)(d.Z,{inputMode:"decimal",value:"undefined"===typeof a?"":a,decimalScale:2,isAllowed:function(e){return(e.floatValue||0)<=100&&(e.floatValue||0)>=0},allowedDecimalSeparators:[".",","],getInputRef:function(e){return r.current=e},allowNegative:!1,onValueChange:function(e){var t=e.value;n(t)},allowLeadingZeros:!1,isNumericString:!0,suffix:"%",className:"rounded-xl outline-none h-full  w-full bg-transparent !text-xs md:!text-sm placeholder:text-white/25 text-v2-primary text-right pointer-events-all",decimalSeparator:v.A5,placeholder:","===v.A5?"0,0%":"0.0%"})}})})})]}),(0,k.jsx)("div",{className:"text-xs text-v2-lily/50 mt-2 self-start font-normal h-8",children:(0,k.jsx)("p",{children:l.ag._("Dynamic mode attempts to optimise slippage between success rate, and sandwich protection through a series of simulations.")})})]})},O=function(e){var t=e.control,n=e.setValue,r=e.inputAutoSlippageRef,a=e.isMaxAutoSlippageEnabled;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,k.jsx)("div",{children:"Max Slippage:"}),(0,k.jsxs)("div",{className:"flex items-center rounded-lg bg-[#1B1B1E] p-1",children:[(0,k.jsx)(c.Qr,{control:t,name:"isMaxAutoSlippageEnabled",render:function(e){var t=e.field,r=t.onChange,a=t.value;return(0,k.jsx)("button",{type:"button",onClick:function(){r(!0),n("maxAutoSlippage",void 0)},className:(0,p.cn)("bg-[#1B1B1E] w-[120px] h-9 p-0.5","flex flex-row items-center justify-center font-semibold space-x-2 text-white/50 fill-current bg-transparent border-transparent",a?"border !border-v2-primary rounded-l-lg !bg-v2-primary/10":""),children:(0,k.jsx)("span",{className:(0,p.cn)("!text-xs font-semibold whitespace-nowrap",a?"text-v2-primary":""),children:l.ag._("Auto")})})}}),(0,k.jsxs)("div",{onClick:function(){var e;null===(e=r.current)||void 0===e||e.focus(),n("isMaxAutoSlippageEnabled",!1)},className:(0,p.cn)("flex items-center justify-between gap-2 cursor-text w-[120px] h-9 text-white-50 bg-[#1B1B1E] px-2 relative bg-transparent",!a&&"border !border-v2-primary rounded-r-lg bg-v2-primary/10"),children:[(0,k.jsx)("span",{className:(0,p.cn)("!text-xs font-normal",!a&&"text-v2-primary/70"),children:(0,k.jsx)(s.cC,{id:"Custom"})}),(0,k.jsx)(c.Qr,{control:t,name:"maxAutoSlippage",render:function(e){var t=e.field,n=t.onChange,a=t.value;return(0,k.jsx)(d.Z,{inputMode:"decimal",value:"undefined"===typeof a?"":a,decimalScale:2,isAllowed:function(e){return(e.floatValue||0)<=100&&(e.floatValue||0)>=0},allowedDecimalSeparators:[".",","],getInputRef:function(e){return r.current=e},allowNegative:!1,onValueChange:function(e){var t=e.value;n(t)},allowLeadingZeros:!1,isNumericString:!0,suffix:"%",className:"rounded-xl outline-none h-full  w-full bg-transparent !text-xs md:!text-sm placeholder:text-white/25 text-v2-primary text-right pointer-events-all",decimalSeparator:v.A5,placeholder:","===v.A5?"0,0%":"0.0%"})}})]})]})]}),(0,k.jsx)("div",{className:"text-xs text-v2-lily/50 mt-2 self-start font-normal h-8",children:a?l.ag._("Jupiter intelligently decides the best slippage for your quote."):l.ag._("Jupiter intelligently decides the best slippage for your quote, while capping it at the max slippage you set.")})]})},D=function(e){var t=e.control,n=e.SLIPPAGE_PRESET,r=e.setInputCustomFocused,a=e.setValue,i=e.inputCustomFocused,o=e.inputFixedSlippageRef,l=e.slippageInput;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:"text-xs font-semibold mb-2",children:"Slippage:"}),(0,k.jsxs)("div",{className:"flex items-center rounded-xl ring-1 ring-black/10 dark:ring-white/5 overflow-hidden text-sm h-10",children:[(0,k.jsx)(c.Qr,{name:"slippagePreset",control:t,render:function(e){var t=e.field,o=t.onChange,s=t.value;return(0,k.jsx)(k.Fragment,{children:n.map((function(e,t){var l=function(){var t=Number(e);return Number.isNaN(t)?e:S.uf.format(Number(e))+"%"}();return(0,k.jsx)(y.Z,{idx:t,itemsCount:n.length,className:"h-full",roundBorder:0===t?"left":void 0,highlighted:!i&&s===e,onClick:function(){r(!1),a("slippageInput",void 0),setTimeout((function(){o(e)}),0)},children:l},t)}))})}}),(0,k.jsxs)("div",{onClick:function(){var e;null===(e=o.current)||void 0===e||e.focus(),r(!0)},className:"flex items-center justify-between cursor-text w-[130px] h-full text-white-50 bg-[#1B1B1E] px-2 text-sm relative border-l border-white/5 ".concat(i||l?"border !border-v2-primary bg-v2-primary/10 rounded-xl":""),children:[(0,k.jsx)("span",{className:"text-xs ".concat((i||l)&&"text-v2-primary/70"),children:(0,k.jsx)(s.cC,{id:"Custom"})}),(0,k.jsx)(c.Qr,{name:"slippageInput",control:t,render:function(e){var t=e.field,n=t.onChange,r=t.value;return(0,k.jsx)(d.Z,{inputMode:"decimal",value:"undefined"===typeof r?"":r,decimalScale:2,isAllowed:function(e){return(e.floatValue||0)<=100&&(e.floatValue||0)>=0},allowedDecimalSeparators:[".",","],getInputRef:function(e){return o.current=e},allowNegative:!1,onValueChange:function(e){var t=e.value;n(t),"undefined"!==typeof t&&a("slippagePreset",void 0)},allowLeadingZeros:!1,isNumericString:!0,suffix:"%",className:"outline-none h-full w-full bg-transparent py-4 px-2 text-sm rounded-lg placeholder:text-white/25 text-v2-primary text-right pointer-events-all",decimalSeparator:v.A5,placeholder:","===v.A5?"0,00%":"0.00%"})}})]})]})]})},R=function(e){var t=e.mode,n=e.slippageInput,r=e.maxAutoSlippage,a="dynamic"===t||"auto"===t,i=(0,u.useMemo)((function(){return a&&Number(r)?Number(r)<=M:a?void 0:Number(n)<=M}),[n,r,a]),o=(0,u.useMemo)((function(){return a?Number(r)>I:Number(n)>I}),[a,n,r]),l=(0,u.useMemo)((function(){if(!a)return Number(n)>5}),[a,n]),c=(0,u.useMemo)((function(){return"minimum-output"===t?null:a&&r&&Number(r)<M?(0,k.jsx)(s.cC,{id:"Minimum slippage to set is 0.5%"}):i?(0,k.jsx)(s.cC,{id:"Your transaction may fail"}):o?"dynamic"===t?(0,k.jsx)(s.cC,{id:"Dynamic Slippage is in Beta. Be careful when setting high caps"}):(0,k.jsx)(s.cC,{id:"Your transaction may be frontrun and result in an unfavourable trade."}):""}),[a,r,i,o,t]);return{isTooLow:i,isTooHigh:o,shouldShowWarning:l,slippageSuggestionText:c}},E=function(e){var t=e.onClick,n=e.isActive,r=e.label;return(0,k.jsx)("button",{type:"button",onClick:t,className:(0,p.cn)("bg-[#1B1B1E] w-[75px] h-7 lg:h-full lg:w-20","w-full flex flex-1 justify-center items-center font-semibold space-x-2 text-white/50 fill-current border border-transparent bg-transparent rounded-lg","px-0.5 py-0.5",n?"!border-v2-primary !bg-v2-primary/10":""),children:(0,k.jsx)("span",{className:(0,p.cn)("!text-xxs md:!text-xs font-semibold whitespace-nowrap",n?"text-v2-primary":""),children:r})})},V=function e(t){var n=t.isLaunchPage,a=(0,m.MG)().constants.DEFAULT_SLIPPAGE,i=(0,g.JT)(),d=i.openModal,v=i.closeModal,y=(0,f.Fg)().mode,S=(0,m.mQ)(),A=S.slippage,I=S.setSlippage,V=S.slippageSettings,B=S.setSlippageSettings,F=(0,u.useMemo)((function(){return["0.3",String(a),"1"]}),[a]),L=(0,u.useMemo)((function(){return F.find((function(e){return e===String(A)}))}),[F,A]),_=(0,c.cI)({defaultValues:C({},"undefined"!==typeof A?{slippageMode:V.mode,slippagePreset:L?String(L):void 0,slippageInput:L?void 0:String(A),isMaxAutoSlippageEnabled:"auto"===V.mode&&"undefined"===typeof V.maxAutoSlippagePct,maxAutoSlippage:"auto"===V.mode?V.maxAutoSlippagePct?String(V.maxAutoSlippagePct):void 0:"dynamic"===V.mode&&V.maxDynamicSlippagePct?String(V.maxDynamicSlippagePct):void 0}:{})}),q=_.setValue,W=_.watch,z=_.control,U=_.handleSubmit,G=(0,x.lm)().toast,K=(0,u.useState)(!L),J=K[0],Y=K[1],H=W("slippageMode"),Q=W("slippageInput"),X=W("slippagePreset"),$=W("isMaxAutoSlippageEnabled"),ee=W("maxAutoSlippage"),te=(0,u.useMemo)((function(){return"auto"===H||"dynamic"===H?!!$||Number(ee)>=M:!Number(Q)||Number(Q)>=0&&Number(Q)<=50}),[H,Q,$,ee]),ne=R({mode:H,slippageInput:Q||X,maxAutoSlippage:ee}),re=ne.slippageSuggestionText,ae=ne.shouldShowWarning,ie=(0,u.useRef)(),oe=(0,u.useRef)(),se=J?Number(Q)<0||Number.isNaN(Number(Q))||""===Q:"auto"!==H&&!Q&&!X||"auto"===H&&!$&&!ee||"dynamic"===H&&!ee||!te,le=(0,u.useCallback)(function(){var t=(0,r.Z)(o().mark((function t(r){var a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!se){t.next=2;break}return t.abrupt("return");case 2:if(a=Number(Q||X),"minimum-output"!==r.slippageMode){t.next=9;break}return B({mode:"minimum-output"}),v(),t.abrupt("return");case 9:if("dynamic"!==r.slippageMode){t.next=15;break}return B({mode:"dynamic",maxDynamicSlippagePct:Number(r.maxAutoSlippage)}),v(),t.abrupt("return");case 15:if("auto"!==r.slippageMode){t.next=21;break}return B({mode:"auto",maxAutoSlippagePct:r.maxAutoSlippage?Number(r.maxAutoSlippage):void 0}),v(),t.abrupt("return");case 21:"fixed"===r.slippageMode&&B({mode:"fixed",value:a});case 22:if(!ae){t.next=30;break}return t.next=25,new Promise((function(t){setTimeout((function(){d((0,k.jsx)(N,{newSlippage:a,onClickAccept:function(){I(a),v(),t(!0)},onClickReject:function(){setTimeout((function(){d((0,k.jsx)(e,{isLaunchPage:n}))}),0),t(!1)}}),{canDismiss:!1,containerStyle:{background:"none"}})}),0)}));case 25:if(t.sent){t.next=28;break}return t.abrupt("return");case 28:t.next=31;break;case 30:I(a);case 31:G({render:function(e){return(0,k.jsx)(w.ZJ,C(C({},e),{},{variant:w.Lb.SUCCESS,title:l.ag._("Settings saved"),description:l.ag._("Slippage updated.")}))}}),v();case 33:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[se,Q,X,ae,G,v,B,d,I,n]);return(0,k.jsx)("div",{className:(0,p.cn)("max-w-md w-screen bg-[#1B2229] text-white"),children:(0,k.jsxs)("form",{onSubmit:U(le),className:"w-full",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center p-5 pt-7 ",children:[(0,k.jsx)("div",{className:"text-2xl font-semibold flex",children:(0,k.jsx)(s.cC,{id:"Slippage Settings"})}),(0,k.jsx)("div",{className:"text-black dark:text-white fill-current cursor-pointer",onClick:function(){return v()},children:(0,k.jsx)(h.Z,{width:16,height:16})})]}),(0,k.jsxs)("div",{className:(0,p.cn)("flex flex-col justify-between","max-h-[70vh] overflow-y-auto min-h-[280px]","webkit-scrollbar ".concat(y===f.hY.DARK?"webkit-scrollbar-dark":"")),children:[(0,k.jsxs)("div",{className:"mt-4 px-5",children:[(0,k.jsxs)("div",{className:"flex flex-col",children:[(0,k.jsx)("div",{className:"text-xs font-semibold",children:"Mode"}),(0,k.jsx)(c.Qr,{control:z,name:"slippageMode",render:function(e){var t=e.field,r=t.onChange,a=t.value;return(0,k.jsxs)("div",{className:"flex justify-between rounded-lg bg-[#1B1B1E] h-10 p-1 mt-1 gap-x-2",children:[n&&(0,k.jsx)(E,{onClick:function(){r("minimum-output"),J&&Y(!1)},isActive:"minimum-output"===a,label:l.ag._("Min Out")}),(0,k.jsx)(E,{onClick:function(){r("dynamic"),J&&Y(!1)},isActive:"dynamic"===a,label:l.ag._("Dynamic")}),(0,k.jsx)(E,{onClick:function(){r("auto"),J&&Y(!1)},isActive:"auto"===a,label:l.ag._("Auto")}),(0,k.jsx)(E,{onClick:function(){r("fixed"),J&&Y(!1)},isActive:"fixed"===a,label:l.ag._("Fixed")})]})}})]}),(0,k.jsx)(T.Z,{className:"my-2"}),(0,k.jsx)("div",{children:(0,k.jsxs)("div",{className:"text-sm mb-2",children:[(0,k.jsx)("div",{className:(0,p.cn)("auto"===H?"flex":"hidden","flex-col")}),"minimum-output"===H&&(0,k.jsx)(P,{}),"dynamic"===H&&(0,k.jsx)(Z,{control:z,setValue:q,inputAutoSlippageRef:ie,isMaxAutoSlippageEnabled:$}),"auto"===H&&(0,k.jsx)(O,{control:z,setValue:q,inputAutoSlippageRef:ie,isMaxAutoSlippageEnabled:$}),"fixed"===H&&(0,k.jsx)(D,{control:z,SLIPPAGE_PRESET:F,setInputCustomFocused:Y,setValue:q,inputCustomFocused:J,inputFixedSlippageRef:oe,slippageInput:Q}),(0,k.jsx)("div",{className:(0,p.cn)("fixed"===H?"block":"hidden")})]})}),J&&!te&&(0,k.jsx)(b.Z,{iconSize:14,className:"!text-jupiter-primary !px-0 !mt-2",message:l.ag._("Please set a slippage value that is within {MINIMUM_SLIPPAGE}% to {MAXIMUM_SLIPPAGE}%",{MINIMUM_SLIPPAGE:0,MAXIMUM_SLIPPAGE:50})}),re&&(0,k.jsx)(b.Z,{iconSize:14,className:"!text-jupiter-primary !px-0 !mt-2",message:re})]}),(0,k.jsx)("div",{className:"px-5 pb-5",children:(0,k.jsx)(j.Z,{type:"submit",className:"w-full border border-[#C7F284]/20",disabled:se,size:"md",children:(0,k.jsx)(s.cC,{id:"Save Settings"})})})]})]})})}},55948:function(e,t,n){var r=n(29541);t.Z=function(e){var t=e.className,n=void 0===t?"":t;return(0,r.jsx)("svg",{className:n,width:"10",height:"6",viewBox:"0 0 10 6",fill:"inherit",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.292893 0.292893C0.683416 -0.097631 1.31658 -0.097631 1.7071 0.292893L4.99999 3.58579L8.29288 0.292893C8.6834 -0.0976311 9.31657 -0.0976311 9.70709 0.292893C10.0976 0.683417 10.0976 1.31658 9.70709 1.70711L5.7071 5.70711C5.31657 6.09763 4.68341 6.09763 4.29289 5.70711L0.292893 1.70711C-0.0976309 1.31658 -0.0976309 0.683417 0.292893 0.292893Z",fill:"currentColor"})})}},51503:function(e,t,n){n.d(t,{L:function(){return r}});var r={quotedSlippage:(0,n(9364).cn)(void 0)}}}]);
//# sourceMappingURL=2428-0292207b1c8f3f03.js.map