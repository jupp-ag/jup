(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5285],{84914:function(e,r,t){"use strict";var n=t(93981),i=t(42754),a=t(27196),s=t(91511),o=t(96343),l=t(29541);t(11805);r.ZP=function(e){var r=e.children,t=(0,o.NL)(),c=(0,n.useState)((function(){return s.d.createClient({transformer:i.ZP,links:[(0,a.N8)({url:"".concat("","/api/trpc")})]})}))[0];return(0,l.jsx)(s.d.Provider,{client:c,queryClient:t,children:r})}},55948:function(e,r,t){"use strict";var n=t(29541);r.Z=function(e){var r=e.className,t=void 0===r?"":r;return(0,n.jsx)("svg",{className:t,width:"10",height:"6",viewBox:"0 0 10 6",fill:"inherit",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.292893 0.292893C0.683416 -0.097631 1.31658 -0.097631 1.7071 0.292893L4.99999 3.58579L8.29288 0.292893C8.6834 -0.0976311 9.31657 -0.0976311 9.70709 0.292893C10.0976 0.683417 10.0976 1.31658 9.70709 1.70711L5.7071 5.70711C5.31657 6.09763 4.68341 6.09763 4.29289 5.70711L0.292893 1.70711C-0.0976309 1.31658 -0.0976309 0.683417 0.292893 0.292893Z",fill:"currentColor"})})}},29151:function(e,r,t){"use strict";t.r(r),t.d(r,{__N_SSG:function(){return Ee},default:function(){return He}});var n=t(93981),i=t(16143),a=t(63956),s=t(70107),o=t(97620),l=t(27195),c=t(8857),d=t.n(c),u=t(73360),m=t(7761),f=t(50613),x=t(43231),h=t(65558),p=t.n(h),v=t(91551),b=t.n(v),g=t(13838),j=t(59603),w=t.n(j),k=t(64508),y=t.n(k),P=t(71048),N=t(65838),C=t(96343),I=t(13170),O=t(63277),Z=t(42082),M=t(79877),S=t(29541),F={decimals:6,address:"",chainId:101,name:"",symbol:""},B=(0,n.createContext)(null),T=function(){var e=(0,n.useContext)(B);if(!e)throw new Error("useLimitOrderUi must be used within LimitOrderProvider");return e},V=function(e){var r,t,i=e.fromPairTokenInfo,a=e.toPairTokenInfo,s=e.children,l=(0,Z.T)(),c=(0,M.V)(),d=(0,o.Z)(c,2),u=d[0],m=d[1],f=(0,N.gZ)().fetchTokenAccounts;(0,n.useEffect)((function(){u&&m&&f([u.address,m.address])}),[u,m,f]);var x=(0,n.useCallback)((function(e,r){l(e,r)}),[l]);return(0,S.jsx)(B.Provider,{value:{onPairChange:x,fromPairTokenInfo:null!==(r=null!==i&&void 0!==i?i:u)&&void 0!==r?r:F,toPairTokenInfo:null!==(t=null!==a&&void 0!==a?a:m)&&void 0!==t?t:F},children:s})},A=t(6691),_=t(66956),D=t(25546),K=t(3011),L=t(39268),E=t.n(L),H=t(33130),q=t(49839),z=t(11003),W=t(85394),R=t(59394),U=t(78013),J=t(74518),G=t(88381),Q=t(45009),Y=t(89388),X=t(33986),$=E()((function(){return Promise.all([t.e(2351),t.e(5288),t.e(807)]).then(t.bind(t,50807))}),{ssr:!1,loadableGenerated:{webpack:function(){return[50807]}}}),ee=E()((function(){return t.e(8137).then(t.bind(t,38662))}),{ssr:!1,loadableGenerated:{webpack:function(){return[38662]}}}),re=function(e){var r,t=e.fromPairTokenInfo,i=e.toPairTokenInfo,a=n.useState(!1),s=(0,o.Z)(a,2),c=s[0],u=s[1],f=(0,n.useMemo)((function(){return c?[i,t]:[t,i]}),[t,i,c]),x=f[0],h=f[1],p=(0,Q.a)(["limit-order-chart-and-headers-price",null===x||void 0===x?void 0:x.address,null===h||void 0===h?void 0:h.address,c],(0,l.Z)(d().mark((function e(){var r,t,n,i,a,s,o,l,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Date.now(),t=Math.floor(r/1e3-86400).toString(),n=Math.floor(r/1e3).toString(),i=new URLSearchParams({base_address:x.address,quote_address:h.address,type:"1H",time_from:t,time_to:n}),e.next=6,fetch("https://public-api.birdeye.so/defi/ohlcv/base_quote?".concat(i.toString()),{headers:{"X-API-KEY":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE2NzI5MDEwNzZ9.c66gFnI20ymHoPWapB0JgISzqDIK6Q_Zg0oAVp8Ssyc"}});case 6:return a=e.sent,e.next=9,a.json();case 9:return s=e.sent,o=s.data.items[s.data.items.length-1].c,l=s.data.items[0].c,c=new g.Z(o).minus(l).div(l).mul(100).toDP(2).toNumber(),e.abrupt("return",{currentPrice:o,initialPrice:l,priceChange:c});case 14:case"end":return e.stop()}}),e)}))),{refetchInterval:1e4,refetchIntervalInBackground:!0}).data,v=(0,n.useMemo)((function(){return"".concat(null===x||void 0===x?void 0:x.symbol,"/").concat(null===h||void 0===h?void 0:h.symbol)}),[null===x||void 0===x?void 0:x.symbol,null===h||void 0===h?void 0:h.symbol]),b=(0,n.useMemo)((function(){var e,r=(0,G.p_)(null!==(e=null===p||void 0===p?void 0:p.currentPrice)&&void 0!==e?e:0),t=(0,o.Z)(r,3);t[0],t[1];return t[2].length}),[null===p||void 0===p?void 0:p.currentPrice]);return(0,S.jsxs)(S.Fragment,{children:[null!==p&&void 0!==p&&p.currentPrice?(0,S.jsx)(ee,{tickerName:v,price:null===p||void 0===p?void 0:p.currentPrice,precision:b}):null,(0,S.jsxs)("div",{className:"flex max-h-[100%] rounded-2xl overflow-hidden w-full flex-col justify-between transition-height duration-500 ease-in-out",children:[(0,S.jsxs)("div",{className:"flex items-center px-4 pt-2 pb-0",children:[(0,S.jsxs)("div",{className:"hidden md:flex -space-x-2",children:[(0,S.jsx)(J.Z,{info:x,width:32}),(0,S.jsx)(J.Z,{info:h,width:32})]}),(0,S.jsxs)("div",{className:"flex md:hidden -space-x-2",children:[(0,S.jsx)(J.Z,{info:x,width:24}),(0,S.jsx)(J.Z,{info:h,width:24})]}),(0,S.jsxs)("div",{className:"flex items-center group cursor-pointer",onClick:function(){return u(!c)},children:[(0,S.jsx)("span",{className:"ml-1.5 md:ml-4 font-semibold max-md:text-xs",children:v}),(0,S.jsx)("div",{className:"ml-2 text-v2-lily/[.75] group-hover:text-v2-primary fill-current",children:(0,S.jsx)(X.Z,{})})]}),p?(0,S.jsxs)("div",{className:"text-xs lg:text-base flex items-center ml-auto font-semibold space-x-1",children:[(0,S.jsx)(G.ZP,{value:p.currentPrice,maxSuffix:5}),(0,S.jsxs)("span",{className:(0,Y.cn)("!ml-3 leading-none text-xs flex items-center",(null!==(r=null===p||void 0===p?void 0:p.priceChange)&&void 0!==r?r:0)>=0?"text-light-active-state dark:text-v2-primary":"text-orange-600"),children:[(null===p||void 0===p?void 0:p.priceChange)>0?(0,S.jsxs)("span",{className:"flex whitespace-nowrap items-center",children:[(0,S.jsx)("span",{className:"text-xxs",children:"+"}),(0,S.jsx)("span",{className:"text-xs",children:null===p||void 0===p?void 0:p.priceChange})]}):"".concat(null===p||void 0===p?void 0:p.priceChange),"%"]})]}):null]}),(0,S.jsx)($,{datafeedObject:{baseTokenInfo:x,quoteTokenInfo:h},desktopOverlayExplanation:m.ag._("The graph data is an overview of all on-chain activity. In particular, very sharp wicks might not be filled completely due to insufficient liquidity."),shadesClassName:"!bg-[#131B24]",opt:{showVolume:!0,enableVolumeStudy:!0}})]}),(0,S.jsx)("span",{className:"block lg:hidden text-xs text-white/75 px-4 py-2",children:m.ag._("The graph data is an overview of all on-chain activity. In particular, very sharp wicks might not be filled completely due to insufficient liquidity.")})]})},te=t(12197),ne=t(55948),ie=t(94223),ae=t(41118),se=t(1622),oe=t(16330),le=t(30610),ce=t(99438),de=t(46267),ue=t(56100),me=t(12939),fe=function(e){return Object.entries(e).reduce((function(e,r){var t=(0,o.Z)(r,2),n=t[0],i=t[1];return"hour"===n?e+=60*i*60:"minute"===n&&(e+=60*i),e}),0)},xe=function(e){var r=e.onSet,t=e.value,i="number"===typeof t?(0,D.K3)(Number(t)):{day:0,hour:0,minute:0},a=i.day,s=i.hour,o=i.minute,l=(0,P.cI)({defaultValues:{hour:(24*a+s).toString(),minute:o.toString()}}),c=l.control,d=l.handleSubmit,m=(0,l.watch)(),f=(0,n.useMemo)((function(){return!m.hour&&!m.minute||0===Number(m.hour)&&0===Number(m.minute)||fe(m)>31536e4}),[m.hour,m.minute]),x=(0,n.useCallback)((function(e){var t=fe(e);r(String(t))}),[r]),h=(0,n.useRef)(),p=(0,n.useRef)(),v=(0,n.useCallback)((function(){var e;return null===h||void 0===h||null===(e=h.current)||void 0===e?void 0:e.focus()}),[]),b=(0,n.useCallback)((function(){var e;return null===p||void 0===p||null===(e=p.current)||void 0===e?void 0:e.focus()}),[]);return(0,S.jsx)("div",{className:"w-full flex justify-center",children:(0,S.jsxs)("form",{className:"p-3 bg-white dark:bg-tuna flex flex-col space-y-3 rounded-xl w-[320px] shadow-lg",onSubmit:d(x),children:[(0,S.jsx)("div",{className:"text-base leading-8 font-semibold",children:(0,S.jsx)(u.cC,{id:"Custom Expiry Period"})}),(0,S.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,S.jsxs)("div",{onClick:v,className:"flex w-full items-center justify-between bg-jupiter-input-light dark:bg-jupiter-input-dark p-4 rounded-xl ",children:[(0,S.jsx)(P.Qr,{control:c,name:"hour",render:function(e){var r=e.field,t=r.onChange,n=r.value,i=r.name;return(0,S.jsx)(oe.Z,{name:i,className:"!text-left text-sm placeholder:text-black/20 dark:placeholder:text-white/20",placeholder:"0",decimals:0,onChange:t,value:"0"===n?"":n,ref:h})}}),(0,S.jsx)("div",{className:"text-sm text-black/20 dark:text-white/20",children:(0,S.jsx)(u.cC,{id:"Hours"})})]}),(0,S.jsxs)("div",{onClick:b,className:"flex w-full items-center justify-between bg-jupiter-input-light dark:bg-jupiter-input-dark p-4 rounded-xl",children:[(0,S.jsx)(P.Qr,{control:c,name:"minute",render:function(e){var r=e.field,t=r.onChange,n=r.value,i=r.name;return(0,S.jsx)(oe.Z,{name:i,className:"!text-left text-sm placeholder:text-black/20 dark:placeholder:text-white/20",placeholder:"0",decimals:0,onChange:t,value:"0"===n?"":n,ref:p})}}),(0,S.jsx)("div",{className:"text-sm text-black/20 dark:text-white/20",children:(0,S.jsx)(u.cC,{id:"Minutes"})})]})]}),(0,S.jsx)("button",{type:"submit",disabled:f,className:"font-semibold w-full mt-2 bg-jupiter-navy dark:bg-jupiter-gradient text-white rounded-lg items-center p-px disabled:cursor-not-allowed disabled:opacity-50",children:(0,S.jsx)("div",{className:"flex items-center justify-center px-8 py-4 rounded-lg dark:bg-black",children:(0,S.jsx)("span",{className:"text-center",children:(0,S.jsx)(me.Z,{animate:!1,children:(0,S.jsx)(u.cC,{id:"Set Period"})})})})})]})})},he=t(95523),pe=t(77798),ve=t(71130),be=t(94107),ge=t(23632),je=t(69921),we=t(59243),ke=t(73413),ye=t(62812),Pe=t(68718),Ne=t(3561),Ce=function(e){var r=e.fromPairTokenInfo,t=e.toPairTokenInfo,i=e.baseTokenInfo,a=e.quoteTokenInfo,s=e.baseTokenPrice,o=e.quoteTokenPrice,l=e.rateDecimals,c=e.control,d=e.isDisabled,f=e.onSubmit,x=e.setValue,h=e.watchAllFields,p=(e.priceFetched,e.formState),v=e.feeStructure,b=(0,ye.JT)(),j=b.openContextualModal,w=b.ModalContextConsumer,k=b.closeModal,O=(0,N.Os)().wallet,Z=T().onPairChange,M=(0,n.createRef)(),F=(0,N.Bn)(),B=F.tokenMap,V=F.newTokenListMap,A=(0,n.useState)({day:0,hour:0,minute:0}),_=A[0],K=A[1],L=(0,n.useState)(!1),E=L[0],H=L[1],q=(0,n.useState)(!1),z=q[0],R=q[1],U=(0,n.useMemo)((function(){return"".concat(_.day?"".concat(_.day,"d"):""," ").concat(_.hour?"".concat(_.hour,"h"):""," ").concat(_.minute?"".concat(_.minute,"m"):"")}),[_]),J=(0,n.useMemo)((function(){var e=new Array(B.size);return B.forEach((function(r){(0,te.kL)(r)||e.push(r.address)})),e}),[B]),G=(0,n.useMemo)((function(){if(!ae.d.find((function(e){return e===(null===r||void 0===r?void 0:r.address)||e===(null===t||void 0===t?void 0:t.address)})))return null;var e=h.fromPair===(null===i||void 0===i?void 0:i.address);return{isFromBase:Boolean(e)}}),[null===i||void 0===i?void 0:i.address,null===r||void 0===r?void 0:r.address,null===t||void 0===t?void 0:t.address,h.fromPair]),Q=n.useCallback((function(e){var n=e,i=t;t.address===e.address&&(n=t,i=r),R(!1),i&&Z(n,i)}),[Z,r,t]),X=n.useCallback((function(e){var n=r,i=e;r.address===e.address&&(n=t,i=r),R(!1),n&&Z(n,i)}),[Z,r,t]),$=n.useCallback((function(){Z(t,r),x("fromPairValue","1"),R(!1)}),[t,r,Z,x]),ee=(0,n.useMemo)((function(){return(0,te.Hd)(h.targetPrice)?Number(h.targetPrice):0}),[h.targetPrice]),re=n.useCallback((function(e){(0,te.Hd)(e)&&x("toPairValue",e)}),[x]),fe=(0,pe.E)(),Ce=(0,ge.s)({quoteTokenInfo:a,baseTokenInfo:i,quoteTokenPrice:o,baseTokenPrice:s,isBaseQuoteMode:G,rateDecimals:l,isSubmitting:p.isSubmitting}),Ie=Ce.swapMarketPrice,Oe=Ce.lastMarketPrice,Ze=Ce.isFetching,Me=Ce.isFetched,Se=Boolean(s&&o&&!Ze&&Ie),Fe=(0,n.useCallback)((function(e){Ie&&Se&&(x("targetPrice",Ie.toFixed()),re(null!==G&&void 0!==G&&G.isFromBase?new g.Z(Ie.toFixed()).mul(e||0).toDP(l).toFixed():new g.Z(e||0).div(Ie).toDP(l).toFixed()))}),[Ie,Se,x,re,G,l]),Be=(0,n.useMemo)((function(){return V.has(a.address)||V.has(i.address)}),[V,a,i]);(0,n.useEffect)((function(){z||(x("targetPrice",""),x("toPairValue",""),Be||Fe(h.fromPairValue))}),[z,Fe,Be]);var Te=(0,n.useMemo)((function(){var e=new g.Z(0);if(!Se||!h.targetPrice||!Oe)return e;var r=new g.Z(ee).sub(Oe).div(Oe);return(e=new g.Z(100).mul(r).toDP(2)).isFinite()?e:new g.Z(0)}),[h.targetPrice,Oe,ee,Se]),Ve=(0,n.useMemo)((function(){return Te.gt(1e4)?">10000":"".concat(Te.toNumber()>0?"+":"").concat(Te.toDP(2).toString())}),[Te]),Ae=(0,n.useMemo)((function(){return null!==G&&void 0!==G&&G.isFromBase?Te.toNumber()<0:Te.toNumber()>0}),[null===G||void 0===G?void 0:G.isFromBase,Te]),_e=(0,n.useMemo)((function(){return null!==G&&void 0!==G&&G.isFromBase?Te.toNumber()>0:Te.toNumber()<0}),[null===G||void 0===G?void 0:G.isFromBase,Te]),De=(0,n.useMemo)((function(){return Ae||_e}),[Ae,_e]),Ke=(0,n.useMemo)((function(){return null!==G&&void 0!==G&&G.isFromBase?Te.toNumber()>-5:Te.toNumber()<5}),[null===G||void 0===G?void 0:G.isFromBase,Te]),Le=(0,N.y6)().tokenPriceMap,Ee=(0,n.useMemo)((function(){var e=[];return function(){var t,n=null===(t=Le[r.address||""])||void 0===t?void 0:t.usd,i=new g.Z(h.fromPairValue||0).mul(n||0);i&&i.mul(1.001).lt(ae.u)&&e.push(m.ag._("Order must meet a minimum of {MINIMUM_LIMIT_ORDER} USD",{MINIMUM_LIMIT_ORDER:ae.u}))}(),e}),[r.address,Le,h.fromPairValue]),He=(0,n.useMemo)((function(){if(fe){if(Be)return(0,S.jsx)(u.cC,{id:"Due to the new token's high volatility during its price discovery phase, exercise caution when trading. We recommend setting a specific price before placing an order."});if(!Se&&Me&&!Ze)return(0,S.jsx)(u.cC,{id:"Could not retrieve market price for this pair. Trade with caution"});var e=(0,S.jsx)(y(),{shallow:!0,href:"/swap/".concat(r.symbol,"-").concat(t.symbol,"?inAmount=").concat(h.fromPairValue),className:"underline font-bold",target:"_blank",children:(0,S.jsx)(u.cC,{id:"Jupiter Swap"})}),n=(0,S.jsx)(u.cC,{id:"Limit price is {0}% {1} than market, you are {2} at a much {3} rate. We recommend that you use {swapLink} instead",values:{0:Te.absoluteValue(),1:null!==G&&void 0!==G&&G.isFromBase?"lower":"higher",2:null!==G&&void 0!==G&&G.isFromBase?"selling":"buying",3:null!==G&&void 0!==G&&G.isFromBase?"lower":"higher",swapLink:e}});if(null!==G&&void 0!==G&&G.isFromBase){if(Te.toNumber()<=-.5)return n}else if(Te.toNumber()>=.5)return n}}),[Ze,fe,Be,h.fromPairValue,Se,r.symbol,t.symbol,Te,null===G||void 0===G?void 0:G.isFromBase,Me]),qe=(0,C.FB)(h.fromPair).balance,ze=n.useCallback((function(e){var r;e.preventDefault(),r=h.fromPair===I.W4.toBase58()?String(qe>I.WO?qe-I.WO:0):String(qe),x("fromPairValue",r);var t=null!==G&&void 0!==G&&G.isFromBase?ee:ee?1/ee:0;x("toPairValue",new g.Z(r).mul(t).toFixed())}),[h.fromPair,x,null===G||void 0===G?void 0:G.isFromBase,ee,qe]),We=n.useCallback((function(e){e.preventDefault();var r=new g.Z(qe).div(2).toString();x("fromPairValue",r);var t=null!==G&&void 0!==G&&G.isFromBase?ee:ee?1/ee:0;x("toPairValue",new g.Z(r).mul(t).toFixed())}),[null===G||void 0===G?void 0:G.isFromBase,qe,x,ee]),Re=(0,n.useMemo)((function(){if(null===O||void 0===O||!O.adapter.connected)return!1;if((null===r||void 0===r?void 0:r.address)!==I.W4.toBase58())return!1;if(!(0,te.Hd)(h.fromPairValue))return!1;var e=qe-I.WO;return new g.Z(h.fromPairValue||0).gt(e)}),[null===r||void 0===r?void 0:r.address,qe,null===O||void 0===O?void 0:O.adapter.connected,h.fromPairValue]),Ue=(0,n.useMemo)((function(){return new g.Z(h.fromPairValue||0).lte(qe)}),[qe,h.fromPairValue]),Je=(0,ke.useIsAccountFrozen)(r),Ge=(0,ke.useIsAccountFrozen)(t),Qe=(0,n.useMemo)((function(){return d||!Ue||Re||!Ke||Je||Ge||Ee.length>0}),[Ee.length,Ue,d,Je,Ge,Re,Ke]),Ye=(0,n.useCallback)((function(){w&&j(we.YN,void 0,(0,S.jsx)(w,{children:function(){var e,r;return(0,S.jsx)(xe,{onSet:function(e){x("expiry",e),K((0,D.K3)(Number(e))),k()},value:null!==(e=null===(r=we.yn[h.expiry])||void 0===r?void 0:r.name)&&void 0!==e?e:Number(h.expiry)})}}),{position:"center",containerStyle:{background:"none",boxShadow:"none"}})}),[w,h.expiry,j,x,k]),Xe=(0,n.useMemo)((function(){var e=we.CO.includes(r.address)&&we.CO.includes(t.address),n=we.Jx.includes(r.address)&&we.Jx.includes(t.address);return v.data?e||n?new g.Z(v.data.makerStableFee.toString()).div(100).toFixed(1)+"%":new g.Z(v.data.makerFee.toString()).div(100).toFixed(1)+"%":null}),[r.address,t.address,v.data]),$e=(0,Pe.Z)({tokens:[]});return(0,S.jsxs)("form",{className:"flex flex-col justify-center w-full lg:max-w-[460px] h-auto p-4 dark:bg-v2-background border border-white/5 rounded-t-none md:rounded-t-2xl rounded-2xl shadow-l shadow-xl -mr-[1px]",onSubmit:f,children:[(0,S.jsxs)("div",{children:[(0,S.jsxs)("div",{className:"flex justify-between items-end",children:[(0,S.jsx)("div",{className:"text-black/50 dark:text-white/50 text-sm",children:(0,S.jsx)(u.cC,{id:"You're Selling"})}),(0,S.jsxs)("div",{className:"text-black-25 dark:text-white-25 text-xs flex items-center",children:[(0,S.jsx)("div",{children:(0,S.jsx)(ie.Z,{width:12,height:12})}),t.address?(0,S.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,S.jsxs)("div",{className:"flex item-center ml-1 cursor-pointer dark:hover:text-white-50 hover:text-black-50",onClick:ze,children:[(0,S.jsx)(se.Z,{mintAddress:r.address}),(0,S.jsx)("span",{className:"ml-1",children:r.symbol})]}),(0,S.jsx)(je.Z,{tokenAddress:r.address,onClickHalf:We,onClickMax:ze})]}):(0,S.jsx)("span",{children:"0.00"})]})]}),(0,S.jsx)("div",{className:"mt-3 border-b border-transparent",children:(0,S.jsx)("div",{className:(0,Y.cn)("p-4 border border-transparent rounded-lg bg-jupiter-input-light dark:bg-v2-background-dark group","focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:(0,S.jsx)(de.Z,{testId:"fromPair",pair:r,pairName:"fromPairValue",disabled:!1,control:c,onSubmit:Q,mintsList:J,modalId:we.r$,watchAllFields:h,onChangeCalculate:function(e){var r=(0,te.Hd)(e)?e:0,n=null!==G&&void 0!==G&&G.isFromBase?ee:ee?1/ee:0;x("fromPairValue",r||""),x("toPairValue",new g.Z(r).mul(n).toDP(t.decimals).toFixed())}})})}),(0,S.jsx)(ke.default,{tokenInfo:r,className:"mt-2"}),Re?(0,S.jsx)(ve.Z,{className:"text-v2-lily/60 text-xs !px-2",message:m.ag._("We recommend having at least {MINIMUM_SOL_BALANCE} SOL for any transaction",{MINIMUM_SOL_BALANCE:I.WO})}):null,(0,S.jsxs)("div",{className:"mt-3 sm:space-x-3 space-y-2 sm:space-y-0 flex-col-reverse sm:flex sm:flex-row mb-2",children:[(0,S.jsxs)("div",{className:(0,Y.cn)("w-full sm:w-[65%] bg-jupiter-input-light dark:bg-v2-background-dark space-y-1 p-4 rounded-lg flex flex-col justify-center","border border-transparent focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:[(0,S.jsxs)("div",{className:"flex justify-between",children:[(0,S.jsxs)("div",{className:"flex items-center",children:[i?(0,S.jsxs)("div",{className:"text-black-35 dark:text-white-35 text-xs flex items-center",children:[null!==G&&void 0!==G&&G.isFromBase?(0,S.jsx)(u.cC,{id:"Sell"}):(0,S.jsx)(u.cC,{id:"Buy"})," ",(0,S.jsx)(u.cC,{id:"{0} at rate",values:{0:null===i||void 0===i?void 0:i.symbol}}),Ze?(0,S.jsx)(W.Z,{className:"ml-1",width:8,height:8}):null]}):(0,S.jsx)(ue.O,{className:"h-4 w-2"}),De?(0,S.jsx)("div",{className:(0,Y.cn)("flex items-center text-xs ml-1 font-medium",{"text-jupiter-yellow":Ae,"text-v2-primary":_e}),children:"(".concat(Ve,"%)")}):null]}),Se?(0,S.jsx)("button",{type:"button",className:"dark:text-white-35 dark:hover:text-white-75 text-black-35 hover:text-black text-xxs cursor-pointer underline rounded",onClick:function(){return Fe(h.fromPairValue)},children:(0,S.jsx)(u.cC,{id:"Use Market"})}):null]}),(0,S.jsx)(P.Qr,{name:"targetPrice",control:c,render:function(e){var r=e.field,t=r.onChange,n=r.value;return(0,S.jsxs)("div",{className:"flex items-end",children:[(0,S.jsx)(oe.Z,{testId:"targetPrice",decimals:l,onChangeWithoutEffect:function(e){(0,te.Hd)(e)&&re(null!==G&&void 0!==G&&G.isFromBase?new g.Z(e).mul(h.fromPairValue||0).toDP(l).toFixed():new g.Z(h.fromPairValue||0).div(e).toDP(l).toFixed()),t(e)},onFocus:function(){return R(!0)},value:n,disabled:!1,ref:M,className:"!text-left !text-sm flex-1"}),a?(0,S.jsx)("div",{className:"flex items-center",children:(0,S.jsx)("span",{className:"font-semibold text-sm",children:null===a||void 0===a?void 0:a.symbol})}):(0,S.jsx)(ue.O,{className:"w-11 h-6"})]})}})]}),(0,S.jsxs)("div",{className:(0,Y.cn)("w-full sm:w-[35%] bg-jupiter-input-light dark:bg-v2-background-dark space-y-1 p-4 rounded-lg flex flex-col justify-between","border border-transparent focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:[(0,S.jsx)("p",{className:"text-black-35 dark:text-white-35 text-xs",children:(0,S.jsx)(u.cC,{id:"Expiry"})}),(0,S.jsx)(P.Qr,{name:"expiry",control:c,render:function(e){var r,t,n=e.field,i=n.onChange,a=n.value;return(0,S.jsx)(le.Z,{isOpen:E,onClose:function(){return H(!1)},id:"settings-button",placement:"bottom-end",matchWidth:!0,buttonContent:(0,S.jsxs)("button",{type:"button",onClick:function(){return H((function(e){return!e}))},className:"flex justify-between items-center space-x-2 rounded-lg text-left whitespace-nowrap w-full",children:[(0,S.jsx)("span",{className:"leading-[1.5] font-medium text-clip text-sm overflow-hidden flex-1",children:null!==(r=null===(t=we.yn[a])||void 0===t?void 0:t.name)&&void 0!==r?r:U}),(0,S.jsx)("span",{className:"w-3 h-3",children:(0,S.jsx)(ne.Z,{})})]}),popoverContent:(0,S.jsxs)("div",{className:"mt-1 bg-jupiter-light rounded-lg dark:bg-white/10 overflow-hidden text-left whitespace-nowrap",children:[(0,S.jsx)("div",{className:"max-h-52 overflow-y-auto",children:Object.keys(we.yn).map((function(e,r){return(0,S.jsx)("button",{type:"button",onClick:function(){i(e),H(!1)},className:"first:pt-3 last:pb-3 w-full flex items-center py-2 pl-4 pr-3 space-x-2 hover:bg-porcelain dark:hover:bg-shark",children:(0,S.jsx)("span",{className:"text-xs leading-[1.5] font-medium",children:we.yn[e].name})},e)}))}),(0,S.jsx)("button",{className:"mt-1 py-2 pl-4 pr-3 text-left border-t border-t-white-10 text-xs leading-[1.5] font-medium cursor-pointer hover:bg-porcelain dark:hover:bg-shark w-full",onClick:function(e){e.preventDefault(),H(!1),Ye()},children:"Custom"})]}),contentClassName:"!bg-transparent !shadow-none z-50 !w-full"})}})]})]}),(0,S.jsx)("div",{className:(0,Y.cn)("bg-transparent transition-all duration-700 align-bottom",{"opacity-0 h-0":!Boolean(He),"opacity-100":Boolean(He)}),children:He&&(0,S.jsx)("div",{className:(0,Y.cn)("border-yellow-500 bg-yellow-300/25 rounded-lg px-3 border text-yellow-500 transition-all duration-500 text-xs font-medium align-middle py-2"),children:He})})]}),(0,S.jsxs)("div",{className:"flex flex-col",children:[(0,S.jsxs)("div",{className:(0,Y.cn)("relative flex justify-center",He?"mt-1":"my-4"),children:[(0,S.jsx)("hr",{className:"absolute w-full border-jupiter-input-light dark:border-[rgba(25,35,45,0.35)] top-[calc(50%-1px)] -z-0"}),(0,S.jsx)("div",{className:"inline-block z-10",children:(0,S.jsx)("button",{type:"button",className:(0,Y.cn)("group/flip bg-[#EBEFF1] dark:bg-v2-background w-8 h-8 rounded-full cursor-pointer flex flex-col justify-center border-[3px] dark:border-[rgba(25,35,45,0.75)] dark:text-white-25","dark:hover:border-v2-primary dark:hover:shadow-swap-input-dark"),onClick:$,children:(0,S.jsx)("span",{className:"w-full text-white/50 fill-current flex justify-center transition-none group-hover/flip:text-v2-primary/50 dark:group-hover/flip:text-v2-primary",children:(0,S.jsx)(he.Z,{})})})})]}),(0,S.jsxs)("div",{className:"border-b border-transparent",children:[(0,S.jsxs)("div",{className:"flex justify-between items-end",children:[(0,S.jsx)("div",{className:"text-black/50 dark:text-white/50 text-sm",children:(0,S.jsx)(u.cC,{id:"You're Buying"})}),(0,S.jsxs)("div",{className:"text-black-25 dark:text-white-25 text-xs flex",children:[(0,S.jsx)("div",{className:"mt-[1px]",children:(0,S.jsx)(ie.Z,{width:12,height:12})}),t.address?(0,S.jsxs)("div",{className:"ml-1",children:[(0,S.jsx)(se.Z,{mintAddress:t.address}),(0,S.jsx)("span",{className:"ml-1",children:t.symbol})]}):(0,S.jsx)("span",{children:"0.00"})]})]}),(0,S.jsx)("div",{className:"mt-3 border-b border-transparent",children:(0,S.jsx)("div",{className:(0,Y.cn)("p-4 border border-transparent rounded-lg bg-jupiter-input-light dark:bg-v2-background-dark group","focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:(0,S.jsx)(de.Z,{testId:"toPair",pair:t,pairName:"toPairValue",control:c,onSubmit:X,mintsList:J,modalId:we.re,watchAllFields:h,onChangeCalculate:function(e){var r=(0,te.Hd)(e)?e:0,t=null!==G&&void 0!==G&&G.isFromBase?ee:ee?1/ee:0;x("toPairValue",0===r?"":r),x("fromPairValue",0===r?"0":new g.Z(r).div(t).toFixed())}})})})]}),(0,S.jsx)(ke.default,{tokenInfo:t,className:"mt-2 !-mb-2"}),(0,S.jsx)("div",{className:"flex justify-between mt-3",children:(0,S.jsx)(u.cC,{id:"<0>Platform fee:{0}</0>",values:{0:v.isLoading?(0,S.jsx)(ue.O,{className:"w-20 h-4"}):(0,S.jsx)("span",{className:"ml-1 text-v2-primary",children:Xe})},components:{0:(0,S.jsx)("span",{className:"text-black-50 dark:text-white-50 text-[11px] font-medium inline"})}})}),(0,S.jsxs)("div",{className:"py-3 px-4 text-xs bg-black/15 dark:bg-white/5 text-black/75 dark:text-white/75 border border-black/[.15] dark:border-white/[.15] rounded-lg mt-3",children:[(0,S.jsx)(u.cC,{id:"You will receive exactly what you have specified, minus platform fees."}),(0,S.jsx)("a",{className:"ml-1 underline cursor-pointer",href:"https://station.jup.ag/guides/limit-order/how-lo-work",target:"_blank",children:m.ag._("Learn more")})]}),Ee.length>0?(0,S.jsxs)("div",{className:"mt-2 py-3 px-4 rounded-lg text-xs flex items-start text-white space-x-2 w-full bg-[#F04A44]",children:[(0,S.jsx)("div",{className:"h-3 w-3 mt-0.5 fill-current",children:(0,S.jsx)(Ne.Z,{fill:"inherit"})}),(0,S.jsx)("div",{className:"flex flex-col space-y-1",children:Ee.map((function(e,r){return(0,S.jsx)("div",{children:e},r)}))})]}):null,null!==O&&void 0!==O&&O.adapter.publicKey?$e?(0,S.jsx)(Pe.y,{}):(0,S.jsx)("button",{type:"submit",className:(0,Y.cn)("w-full mt-3 bg-[#121D28] border border-transparent dark:hover:border dark:hover:border-v2-primary rounded-lg",{"opacity-50 cursor-not-allowed":Qe}),disabled:Qe,children:(0,S.jsx)("div",{className:"flex items-center justify-center px-8 py-4 rounded-lg dark:bg-[rgba(18,29,40,1)]",children:(0,S.jsx)("span",{className:"text-center",children:Re||!Ue?(0,S.jsx)(u.cC,{id:"Insufficient {0}",values:{0:null===r||void 0===r?void 0:r.symbol}}):Je||Ge?(0,S.jsx)(u.cC,{id:"Token account frozen"}):(0,S.jsx)(me.Z,{children:(0,S.jsx)(u.cC,{id:"Place Limit Order"})})})})}):(0,S.jsx)(be.uS,{buttonClassName:"!bg-transparent",overrideContent:(0,S.jsx)(ce.Z,{className:"w-full mt-2",size:"md",children:(0,S.jsx)("span",{children:(0,S.jsx)(u.cC,{id:"Connect Wallet"})})})})]})]})},Ie=t(74376),Oe=t(86883),Ze=t(84914),Me=t(91511),Se=t(49006),Fe=t(90342);function Be(e,r){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"===typeof e)return Te(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Te(e,r)}(e))||r&&e&&"number"===typeof e.length){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==t.return||t.return()}finally{if(o)throw a}}}}function Te(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Ve(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Ae(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Ve(Object(t),!0).forEach((function(r){(0,a.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ve(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}E()((function(){return Promise.resolve().then(t.bind(t,73413))}),{ssr:!1,loadableGenerated:{webpack:function(){return[73413]}}});var _e={decimals:6,address:"",chainId:101,name:"",symbol:""},De=function(){var e=(0,A.Fg)().mode,r=(0,N.Os)(),t=r.wallet,i=r.signTransaction,a=r.signAllTransactions,c=r.publicKey,h=(0,N.MG)().constants.CLUSTER,v=((0,N.Bn)().getTokenInfo,(0,N.Bn)().connection),j=(0,C.lm)(),k=j.toast,Z=j.close,M=(0,n.useMemo)((function(){return new f.vN(v)}),[v]),F=T(),B=F.fromPairTokenInfo,V=F.toPairTokenInfo,L=(0,n.useState)("Open Orders"),E=L[0],J=L[1],G=(0,n.useState)(0),Q=G[0],Y=G[1];(0,n.useEffect)((function(){Y(0)}),[E]);var X=(0,C.aM)([(null===c||void 0===c?void 0:c.toString())||""],(0,l.Z)(d().mark((function e(){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,M.getOrders([(0,f.Gt)(c)]);case 4:return r=e.sent,e.abrupt("return",r||[]);case 6:case"end":return e.stop()}}),e)}))),{enabled:Boolean(c)&&"Open Orders"===E,refetchInterval:!1}),$=X.data,ee=X.isFetching,te=X.refetch,ne=Me.d.openOrderWithItemsCount.useQuery({wallet:c?null===c||void 0===c?void 0:c.toString():""},{enabled:Boolean(c)&&"Open Orders"===E,refetchInterval:!1}),ie=ne.data,ae=ne.isFetching,se=ne.refetch,oe=(0,n.useMemo)((function(){return null!==$&&void 0!==$&&$.length?Math.ceil($.length/I.eN):0}),[$]),le=(0,n.useMemo)((function(){return $&&ie?$.sort((function(e,r){return ie.orders.findIndex((function(r){return r.orderKey===e.publicKey.toBase58()}))-ie.orders.findIndex((function(e){return e.orderKey===r.publicKey.toBase58()}))})):[]}),[$,ie]),ce=(0,n.useMemo)((function(){return(null===le||void 0===le?void 0:le.slice(Q*I.eN,Q*I.eN+10))||[]}),[Q,le]),de=Me.d.orderWithTradeHistoryWithItemsCount.useQuery({wallet:c?null===c||void 0===c?void 0:c.toString():"",pageIndex:Q},{enabled:Boolean(c)&&"Order History"===E,refetchInterval:!1,refetchOnWindowFocus:!1,keepPreviousData:!0}),ue=de.data,me=de.isFetching,fe=de.refetch,xe=(0,n.useMemo)((function(){return null!==ue&&void 0!==ue&&ue.itemsCount?Math.ceil((null===ue||void 0===ue?void 0:ue.itemsCount)/I.eN):0}),[ue]),he=(0,O.Z0)(h),pe=(0,P.cI)({defaultValues:{fromPair:he.initialFrom,toPair:he.initialTo,fromPairValue:"1",targetPrice:"",toPairValue:"",expiry:"Never"}}),ve=pe.control,be=pe.handleSubmit,ge=pe.watch,je=pe.setValue,ke=pe.formState,ye=(0,_.b)(B,V),Pe=ye.quoteTokenInfo,Ne=ye.baseTokenInfo,Ze=ye.quoteTokenPrice,Te=ye.baseTokenPrice,Ve=ye.rateDecimals,De=ye.priceFetched;(0,n.useEffect)((function(){je("fromPair",B.address),je("toPair",V.address),je("targetPrice",""),je("toPairValue","")}),[B,V,je]);var Ke=ge(),Le=(0,n.useMemo)((function(){var e=Ke.fromPair,r=Ke.toPair,t=Ke.fromPairValue,n=Ke.targetPrice,i=Ke.toPairValue,a=Ke.expiry;return!e||!r||Number(t)<=0||Number(i)<=0||Number(n)<=0||!a||ke.isSubmitting}),[Ke,ke.isSubmitting]),Ee=(0,n.useState)([]),He=Ee[0],qe=Ee[1],ze=(0,H.R3)(),We=(0,K.KO)(q.yz),Re=(0,o.Z)(We,1)[0],Ue=(0,Fe.gs)().priorityLevel,Je=(0,n.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(r){var n,o,l,c,h,b,j,w,k,y,P,N,C,I,O,Z,F;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("limit-order-toast",!Le&&t&&t.adapter.publicKey&&i&&a){e.next=3;break}return e.abrupt("return");case 3:return l=new(p())(new g.Z(r.fromPairValue).mul(Math.pow(10,B.decimals)).round().toString()),c=new(p())(new g.Z(r.toPairValue).mul(Math.pow(10,V.decimals)).round().toString()),h=null!==(n=null===(o=we.yn[r.expiry])||void 0===o?void 0:o.value)&&void 0!==n?n:Number(r.expiry),b="Never"===r.expiry?null:new(p())((new Date).valueOf()/1e3+h),j=x.PublicKey.default,e.prev=8,e.next=11,(0,Se.a)(t.adapter);case 11:return w=e.sent,e.next=14,M.createOrder({owner:t.adapter.publicKey,inAmount:l,outAmount:c,inputMint:new x.PublicKey(r.fromPair),outputMint:new x.PublicKey(r.toPair),expiredAt:b,base:w.publicKey});case 14:return k=e.sent,y=k.tx,P=k.orderPubKey,j=P,qe((function(e){return[].concat((0,s.Z)(e),[{publicKey:j,account:{oriMakingAmount:l,makingAmount:l,takingAmount:c,oriTakingAmount:c,inputMint:new x.PublicKey(r.fromPair),outputMint:new x.PublicKey(r.toPair),expiredAt:b}}])})),e.next=21,v.getLatestBlockhash("confirmed");case 21:return N=e.sent,C=N.blockhash,I=N.lastValidBlockHeight,O=new x.Transaction({feePayer:t.adapter.publicKey,blockhash:C,lastValidBlockHeight:I}).add(y),e.next=27,ze(O,{extraSigners:"secretKey"in w?[w]:[],blockhash:C,lastValidBlockHeight:I,idl:f.xO,idlProgramId:f.zy["mainnet-beta"],skipPreflight:!0},{successMessage:(0,S.jsx)(u.cC,{id:"Limit order placed for {0} {1} @ {2} {3}",values:{0:new g.Z(r.fromPairValue).toDP(2).toString(),1:B.symbol,2:new g.Z(r.toPairValue).toDP(V.decimals).toString(),3:V.symbol}}),submittingMessage:(0,S.jsx)(u.cC,{id:"Placing limit order"}),errorMessage:m.ag._("Failed to create order"),referenceFee:Re.isOutdated?null:"MEDIUM"===Ue?Re.loAndDCA:"HIGH"===Ue&&Re.loAndDCA?1.5*Re.loAndDCA:"VERY_HIGH"===Ue&&Re.loAndDCA?3*Re.loAndDCA:void 0,minimumFee:q.uo,requestComputeBudgetLimit:3e5});case 27:if(Z=e.sent,Z.success){e.next=31;break}throw new Error("Failed to create order");case 31:e.next=36;break;case 33:e.prev=33,e.t0=e.catch(8),qe((function(e){return e.filter((function(e){return e.publicKey.toBase58()!==j.toBase58()}))}));case 36:return e.prev=36,null===ie||void 0===ie||null===(F=ie.orders)||void 0===F||F.unshift({orderKey:j.toBase58()}),setTimeout((function(){te()}),1e3),e.finish(36);case 40:case"end":return e.stop()}}),e,null,[[8,33,36,40]])})));return function(r){return e.apply(this,arguments)}}(),[Le,t,i,a,B.decimals,B.symbol,V.decimals,V.symbol,M,v,ze,Re.isOutdated,Re.loAndDCA,Ue,null===ie||void 0===ie?void 0:ie.orders,te]);(0,n.useEffect)((function(){qe((function(e){return e.filter((function(e){return!Boolean(null===$||void 0===$?void 0:$.find((function(r){return r.publicKey&&e.publicKey.equals(r.publicKey)})))}))}))}),[$,qe]);var Ge=(0,n.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(r){var n,s,o,c,h,p,g,j,w,y,P,N,C,I,O,F,B,T,V;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="cancel-limit-order-toast",s=(0,S.jsx)(S.Fragment,{}),o=[],t&&t.adapter.publicKey&&i&&a&&$&&0!==r.length){e.next=5;break}return e.abrupt("return");case 5:if(!(c=1===r.length?$.find((function(e){return e.publicKey.equals(r[0])})):null)||!c.publicKey){e.next=31;break}return e.prev=7,e.next=10,M.cancelOrder({owner:t.adapter.publicKey,orderPubKey:new x.PublicKey(c.publicKey)});case 10:return h=e.sent,e.next=13,v.getLatestBlockhash("confirmed");case 13:return p=e.sent,g=p.blockhash,j=p.lastValidBlockHeight,h.feePayer=t.adapter.publicKey,h.recentBlockhash=g,h.lastValidBlockHeight=j,e.next=21,ze(h,{blockhash:g,lastValidBlockHeight:j,idl:f.xO,idlProgramId:f.zy["mainnet-beta"],skipPreflight:!0},{successMessage:(0,S.jsx)(u.cC,{id:"Limit order closed"}),submittingMessage:(0,S.jsx)(u.cC,{id:"Closing limit order"}),errorMessage:(0,S.jsx)(u.cC,{id:"Failed to close order"})});case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(7),console.log(e.t0);case 26:return e.prev=26,te(),e.finish(26);case 29:e.next=67;break;case 31:if(!(r.length>1)){e.next=67;break}return s=(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{children:(0,S.jsx)(u.cC,{id:"Cancelling {0} orders...",values:{0:r.length}})}),r.length>we.TC?(0,S.jsx)("p",{children:(0,S.jsx)(u.cC,{id:"Due to transaction size, you may need to approve multiple transactions."})}):null]}),w=(0,D.OZ)(r,we.TC),e.next=36,Promise.all(w.map(function(){var e=(0,l.Z)(d().mark((function e(r){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.batchCancelOrder({owner:t.adapter.publicKey,ordersPubKey:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()));case 36:if(y=e.sent){e.next=39;break}throw new Error("Failed to get cancel order instructions");case 39:return e.prev=39,k({duration:12e4,id:n,render:function(e){return(0,S.jsx)(z.ZJ,Ae(Ae({},e),{},{title:m.ag._("Submitting transaction"),description:(0,S.jsx)("div",{children:(0,S.jsxs)("div",{className:"flex space-x-2 items-center",children:[(0,S.jsx)(W.Z,{width:20,height:20}),(0,S.jsx)("div",{children:s})]})})}))},closeOnClick:!1}),P=[],e.next=44,v.getLatestBlockhash("confirmed");case 44:N=e.sent,C=N.blockhash,I=N.lastValidBlockHeight,O=Be(y);try{for(O.s();!(F=O.n()).done;)B=F.value,P.push(new x.Transaction({feePayer:t.adapter.publicKey,blockhash:C,lastValidBlockHeight:I}).add(B))}catch(A){O.e(A)}finally{O.f()}return e.next=51,a(P);case 51:return T=e.sent,e.next=54,Promise.all(T.map(function(){var e=(0,l.Z)(d().mark((function e(r){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.signature&&o.push(b().encode(r.signature)),e.next=3,(0,x.sendAndConfirmRawTransaction)(v,r.serialize(),{commitment:"confirmed"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()));case 54:Z(n),k({duration:5e3,title:m.ag._("Transaction submitted successfully"),description:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("p",{children:(0,S.jsx)(u.cC,{id:"Limit order cancelled"})}),o.map((function(e,r){return(0,S.jsx)("p",{children:(0,S.jsx)(R.Z,{txid:e})},r)}))]}),closeOnClick:!1,variant:z.Lb.SUCCESS}),e.next=64;break;case 58:e.prev=58,e.t1=e.catch(39),Z(n),V=r.length>1?m.ag._("Failed to cancel some orders"):m.ag._("Failed to cancel order"),k({duration:5e3,title:V,description:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("p",{children:e.t1.message}),o.map((function(e,r){return(0,S.jsx)("p",{children:(0,S.jsx)(R.Z,{txid:e})},r)}))]}),closeOnClick:!1,variant:z.Lb.INFO}),console.error({err:e.t1});case 64:return e.prev=64,te(),e.finish(64);case 67:case"end":return e.stop()}}),e,null,[[7,23,26,29],[39,58,64,67]])})));return function(r){return e.apply(this,arguments)}}(),[$,Z,v,M,te,a,i,k,t,ze]),Qe=(0,n.useMemo)((function(){return!$||0===$.length||"Order History"===E}),[E,$]),Ye=(0,n.useCallback)((function(){if($&&!Qe){var e=$.map((function(e){return e.publicKey})).filter(Boolean);Ge(e)}}),[Qe,$,Ge]),Xe=(0,n.useCallback)((function(){te(),se(),fe()}),[te,se,fe]),$e=(0,C.aM)(["limit-order-fee-structure"],(0,l.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.getFee();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{}),er=$e.data,rr=$e.isLoading;return(0,S.jsx)("div",{className:"w-full flex-1 flex flex-col mt-10 md:mt-20",children:(0,S.jsxs)("div",{className:"flex-1 flex flex-col relative h-full",children:[(0,S.jsx)("div",{className:"w-full relative flex justify-center lg:px-4 mb-4",children:(0,S.jsxs)("div",{className:"flex flex-col md:max-w-[90vw] xl:max-w-7xl w-full",children:[(0,S.jsxs)("div",{className:"rounded-2xl shadow-xl bg-[#131B24] border-white/5 flex flex-col lg:flex-row justify-center w-full",children:[null!==Ne&&void 0!==Ne&&Ne.address&&null!==Pe&&void 0!==Pe&&Pe.address?(0,S.jsx)(re,{fromPairTokenInfo:Ne,toPairTokenInfo:Pe}):(0,S.jsx)("div",{className:"max-h-[100%] w-full flex-col justify-between overflow-hidden"}),(0,S.jsx)(Ce,{fromPairTokenInfo:B,toPairTokenInfo:V,baseTokenInfo:null!==Ne&&void 0!==Ne?Ne:_e,quoteTokenInfo:null!==Pe&&void 0!==Pe?Pe:_e,baseTokenPrice:Te,quoteTokenPrice:Ze,rateDecimals:Ve,control:ve,isDisabled:Le,onSubmit:be(Je),watchAllFields:Ke,setValue:je,priceFetched:De,formState:ke,feeStructure:{data:er,isLoading:rr}})]}),(0,S.jsxs)("div",{className:"lg:flex hidden items-center mt-2",children:[(0,S.jsx)("p",{className:"text-black/50 dark:text-white/50 text-xxs",children:"Powered by"}),(0,S.jsx)(y(),{href:"https://birdeye.so/",target:"_blank",rel:"noopener noreferrer",children:e===A.hY.DARK?(0,S.jsx)(w(),{src:"/images/birdeye-dark.png",width:60,height:22,alt:"birdeye"}):(0,S.jsx)(w(),{src:"/images/birdeye-light.png",width:60,height:22,alt:"birdeye"})})]})]})}),(0,S.jsxs)(U.Z,{tabs:["Open Orders","Order History"],activeTab:E,setActiveTab:J,isLoading:ee||me||ae,cancelAllOrderDisabled:Qe,cancelAllOrder:Ye,refetch:Xe,children:["Open Orders"===E?(0,S.jsx)(Ie.Z,{orders:ce,cancelOrder:Ge,ongoingSubmission:He,loading:ee||ae,pageIndex:Q,setPageIndex:Y,pageCount:oe}):null,"Order History"===E?(0,S.jsx)(Oe.Z,{orders:(null===ue||void 0===ue?void 0:ue.orders)||[],loading:me,pageIndex:Q,setPageIndex:Y,pageCount:xe}):null]})]})})},Ke=function(){return(0,S.jsx)(Ze.ZP,{children:(0,S.jsx)(De,{})})},Le=t(68586),Ee=!0,He=function(){return(0,S.jsxs)(V,{children:[(0,S.jsx)(Le.PB,{title:"Limit Order"}),(0,S.jsx)(i.Z,{children:(0,S.jsx)(Ke,{})})]})}},60569:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/limit/[inOut]",function(){return t(29151)}])}},function(e){e.O(0,[4508,2420,3215,7821,4518,1172,5516,5010,1672,9550,3703,9774,2888,179],(function(){return r=60569,e(e.s=r);var r}));var r=e.O();_N_E=r}]);
//# sourceMappingURL=[inOut]-0d481aff0a5eac1a.js.map