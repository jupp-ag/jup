"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4454],{84537:function(e,t,i){i.r(t),i.d(t,{i:function(){return o}});var n,s=i(1869),l={exports:{}};n=l.exports,s.c,function(e){let t,i,n;var l,o,r,a,c=Object.defineProperty,d=Object.defineProperties,u=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,b=(e,t,i)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Z=(e,t)=>{for(var i in t||(t={}))h.call(t,i)&&b(e,i,t[i]);if(p)for(var i of p(t))m.call(t,i)&&b(e,i,t[i]);return e},y=(e,t)=>d(e,u(t)),g=(e,t)=>{var i={};for(var n in e)h.call(e,n)&&0>t.indexOf(n)&&(i[n]=e[n]);if(null!=e&&p)for(var n of p(e))0>t.indexOf(n)&&m.call(e,n)&&(i[n]=e[n]);return i},I=(e,t,i)=>(b(e,"symbol"!=typeof t?t+"":t,i),i),S=(e,t,i)=>new Promise((n,s)=>{var l=e=>{try{r(i.next(e))}catch(e){s(e)}},o=e=>{try{r(i.throw(e))}catch(e){s(e)}},r=e=>e.done?n(e.value):Promise.resolve(e.value).then(l,o);r((i=i.apply(e,t)).next())});function V(e,t,i,n){return new(i||(i=Promise))(function(s,l){function o(e){try{a(n.next(e))}catch(e){l(e)}}function r(e){try{a(n.throw(e))}catch(e){l(e)}}function a(e){var t;e.done?s(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(o,r)}a((n=n.apply(e,t||[])).next())})}function X(e){let t=null==e?void 0:e.host;return(null==t?void 0:t.shadowRoot)===e}function G(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function W(e){var t;try{let i=e.rules||e.cssRules;return i?((t=Array.from(i,f).join("")).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),t):null}catch(e){return null}}function f(e){let t;if("styleSheet"in e)try{t=W(e.styleSheet)||function(e){let{cssText:t}=e;if(t.split('"').length<3)return t;let i=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?i.push("layer"):e.layerName&&i.push(`layer(${e.layerName})`),e.supportsText&&i.push(`supports(${e.supportsText})`),e.media.length&&i.push(e.media.mediaText),i.join(" ")+";"}(e)}catch(e){}else if("selectorText"in e&&e.selectorText.includes(":"))return e.cssText.replace(/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,"$1\\$2");return t||e.cssText}(a=r||(r={}))[a.Document=0]="Document",a[a.DocumentType=1]="DocumentType",a[a.Element=2]="Element",a[a.Text=3]="Text",a[a.CDATA=4]="CDATA",a[a.Comment=5]="Comment";class C{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){var t;if(!e)return -1;let i=null===(t=this.getMeta(e))||void 0===t?void 0:t.id;return null!=i?i:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){let t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(e=>this.removeNodeFromMap(e))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){let i=t.id;this.idNodeMap.set(i,e),this.nodeMetaMap.set(e,t)}replace(e,t){let i=this.getNode(e);if(i){let e=this.nodeMetaMap.get(i);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function R(e){return e.toLowerCase()}let v="__rrweb_original__";function k(e){let t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?R(t):null}function T(e,t){var i;let n;try{n=new URL(e,null!=t?t:window.location.href)}catch(e){return null}let s=n.pathname.match(/\.([0-9a-z]+)(?:$)/i);return null!==(i=null==s?void 0:s[1])&&void 0!==i?i:null}function N(e){return e=(null==(e=e.replace(/[^ -~]+/g,""))?void 0:e.split(" ").map(e=>Math.random().toString(20).substr(2,e.length)).join(" "))||""}function w(e){return"img"===e||"video"===e||"audio"===e||"source"===e}let L=[RegExp("[a-zA-Z0-9.!#$%&'*+=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:.[a-zA-Z0-9-]+)*"),RegExp("[0-9]{9,16}"),RegExp("[0-9]{3}-?[0-9]{2}-?[0-9]{4}"),RegExp("[+]?[(]?[0-9]{3}[)]?[-s.]?[0-9]{3}[-s.]?[0-9]{4,6}"),RegExp("[0-9]{4}-?[0-9]{4}-?[0-9]{4}-?[0-9]{4}"),RegExp("[0-9]{1,5}.?[0-9]{0,3}s[a-zA-Z]{2,30}s[a-zA-Z]{2,15}"),RegExp("(?:[0-9]{1,3}.){3}[0-9]{1,3}")];function x(e){return!!e&&L.some(t=>t.test(e))}let J=({maskInputOptions:e,tagName:t,type:i,overwriteRecord:n})=>{let s=i&&i.toLowerCase();return!("true"===n||!e[t.toLowerCase()]&&(!s||!e[s]))};function K({element:e,maskInputOptions:t,tagName:i,type:n,value:s,overwriteRecord:l,maskInputFn:o}){let r=s||"";return J({maskInputOptions:t,tagName:i,type:n,overwriteRecord:l})&&(r=o?o(r,e):"*".repeat(r.length)),r}let Y=1,U=RegExp("[^a-z0-9-_:]");function F(){return Y++}let H=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,E=/^(?:[a-z+]+:)?\/\//i,M=/^www\..*/i,z=/^(data:)([^,]*),(.*)/i;function O(e,t){return(e||"").replace(H,(e,i,n,s,l,o)=>{let r=n||l||o,a=i||s||"";if(!r)return e;if(E.test(r)||M.test(r)||z.test(r))return`url(${a}${r}${a})`;if("/"===r[0])return`url(${a}${(t.indexOf("//")>-1?t.split("/").slice(0,3).join("/"):t.split("/")[0]).split("?")[0]+r}${a})`;let c=t.split("/"),d=r.split("/");for(let e of(c.pop(),d))"."!==e&&(".."===e?c.pop():c.push(e));return`url(${a}${c.join("/")}${a})`})}let P=/^[^ \t\n\r\u000c]+/,B=/^[, \t\n\r\u000c]+/;function A(e,t){if(!t||""===t.trim())return t;let i=e.createElement("a");return i.href=t,i.href}function D(){let e=document.createElement("a");return e.href="",e.href}function Q(e,t,i,n){return n&&("src"===i||"href"===i&&("use"!==t||"#"!==n[0])||"xlink:href"===i&&"#"!==n[0]?A(e,n):"background"!==i||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===i?function(e,t){if(""===t.trim())return t;let i=0;function n(e){let n;let s=e.exec(t.substring(i));return s?(n=s[0],i+=n.length,n):""}let s=[];for(;n(B),!(i>=t.length);){let l=n(P);if(","===l.slice(-1))l=A(e,l.substring(0,l.length-1)),s.push(l);else{let n="";l=A(e,l);let o=!1;for(;;){let e=t.charAt(i);if(""===e){s.push((l+n).trim());break}if(o)")"===e&&(o=!1);else{if(","===e){i+=1,s.push((l+n).trim());break}"("===e&&(o=!0)}n+=e,i+=1}}}return s.join(", ")}(e,n):"style"===i?O(n,D()):"object"===t&&"data"===i?A(e,n):n:A(e,n))}function j(e,t,i){return("video"===e||"audio"===e)&&"autoplay"===t}function _(e,t,i){try{if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let i=e.classList.length;i--;){let n=e.classList[i];if(t.test(n))return!0}if(i)return e.matches(i)}catch(e){}return!1}function q(e,t,i){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return!!i&&q(e.parentNode,t,i);for(let i=e.classList.length;i--;){let n=e.classList[i];if(t.test(n))return!0}return!!i&&q(e.parentNode,t,i)}function $(e,t,i,n){try{let s=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===s)return!1;if("string"==typeof t){if(n){if(s.closest(`.${t}`))return!0}else if(s.classList.contains(t))return!0}else if(q(s,t,n))return!0;if(i){if(n){if(s.closest(i))return!0}else if(s.matches(i))return!0}}catch(e){}return!1}function ee(e){return null==e?"":e.toLowerCase()}function et(e,n){let s;let{doc:l,mirror:o,blockClass:a,blockSelector:c,maskTextClass:d,maskTextSelector:u,skipChild:p=!1,inlineStylesheet:h=!0,maskInputOptions:m={},maskTextFn:b,maskInputFn:Z,slimDOMOptions:y,dataURLOptions:g={},inlineImages:I=!1,recordCanvas:S=!1,onSerialize:V,onIframeLoad:f,iframeLoadTimeout:C=5e3,onStylesheetLoad:L,stylesheetLoadTimeout:J=5e3,keepIframeSrcFn:Y=()=>!1,newlyAddedElement:H=!1,privacySetting:E}=n,{needsMask:M}=n,{preserveWhiteSpace:z=!0}=n;!M&&e.childNodes&&(M=$(e,d,u,void 0===M));let P=function(e,n){let{doc:s,mirror:l,blockClass:o,blockSelector:a,needsMask:c,inlineStylesheet:d,maskInputOptions:u={},maskTextClass:p,maskTextFn:h,maskInputFn:m,dataURLOptions:b={},inlineImages:Z,recordCanvas:y,keepIframeSrcFn:g,newlyAddedElement:I=!1,privacySetting:S}=n,V=function(e,t){if(!t.hasNode(e))return;let i=t.getId(e);return 1===i?void 0:i}(s,l);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:r.Document,childNodes:[],compatMode:e.compatMode}:{type:r.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:r.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:V};case e.ELEMENT_NODE:return function(e,n){let s;let{doc:l,blockClass:o,blockSelector:a,inlineStylesheet:c,maskInputOptions:d={},maskInputFn:u,maskTextClass:p,dataURLOptions:h={},inlineImages:m,recordCanvas:b,keepIframeSrcFn:Z,newlyAddedElement:y=!1,privacySetting:g,rootId:I}=n,S=_(e,o,a),V=_(e,p,null),X="strict"===g,G=function(e){if(e instanceof HTMLFormElement)return"form";let t=R(e.tagName);return U.test(t)?"div":t}(e),f={},C=e.attributes.length;for(let t=0;t<C;t++){let i=e.attributes[t];j(G,i.name)||(f[i.name]=Q(l,G,R(i.name),i.value))}if("link"===G&&c){let t=Array.from(l.styleSheets).find(t=>t.href===e.href),i=null;t&&(i=W(t)),i&&(delete f.rel,delete f.href,f._cssText=O(i,t.href))}if("style"===G&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){let t=W(e.sheet);t&&(f._cssText=O(t,D()))}if("input"===G||"textarea"===G||"select"===G){let t=e.value,i=e.checked;"radio"!==f.type&&"checkbox"!==f.type&&"submit"!==f.type&&"button"!==f.type&&t?f.value=K({element:e,type:k(e),tagName:G,value:t,overwriteRecord:e.getAttribute("data-hl-record"),maskInputOptions:d,maskInputFn:u}):i&&(f.checked=i)}if("option"===G&&(e.selected&&!d.select?f.selected=!0:delete f.selected),"canvas"===G&&b){if("2d"===e.__context)(function(e){let t=e.getContext("2d");if(!t)return!0;for(let i=0;i<e.width;i+=50)for(let n=0;n<e.height;n+=50){let s=t.getImageData,l=v in s?s[v]:s;if(new Uint32Array(l.call(t,i,n,Math.min(50,e.width-i),Math.min(50,e.height-n)).data.buffer).some(e=>0!==e))return!1}return!0})(e)||(f.rr_dataURL=e.toDataURL(h.type,h.quality));else if(!("__context"in e)){let t=e.toDataURL(h.type,h.quality),i=document.createElement("canvas");i.width=e.width,i.height=e.height,t!==i.toDataURL(h.type,h.quality)&&(f.rr_dataURL=t)}}if("img"===G&&m&&!S&&!V&&!X){t||(i=(t=l.createElement("canvas")).getContext("2d"));let n=e.crossOrigin;e.crossOrigin="anonymous";let s=()=>{e.removeEventListener("load",s);try{t.width=e.naturalWidth,t.height=e.naturalHeight,i.drawImage(e,0,0),f.rr_dataURL=t.toDataURL(h.type,h.quality)}catch(t){console.warn(`Cannot inline img src=${e.currentSrc}! Error: ${t}`)}n?f.crossOrigin=n:e.removeAttribute("crossorigin")};e.complete&&0!==e.naturalWidth?s():e.addEventListener("load",s)}if("audio"!==G&&"video"!==G||(f.rr_mediaState=e.paused?"paused":"played",f.rr_mediaCurrentTime=e.currentTime),y||(e.scrollLeft&&(f.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(f.rr_scrollTop=e.scrollTop)),S||V||X&&w(G)){let{width:t,height:i}=e.getBoundingClientRect();f={class:f.class,rr_width:`${t}px`,rr_height:`${i}px`}}X&&w(G)&&(S=!0),"iframe"!==G||Z(f.src)||(e.contentDocument||(f.rr_src=f.src),delete f.src);try{customElements.get(G)&&(s=!0)}catch(e){}if(m&&"video"===G&&(""===e.src||-1!==e.src.indexOf("blob:"))){let{width:t,height:i}=e.getBoundingClientRect();f={rr_width:`${t}px`,rr_height:`${i}px`,rr_inlined_video:!0},G="canvas"}return{type:r.Element,tagName:G,attributes:f,childNodes:[],isSVG:!!("svg"===e.tagName||e.ownerSVGElement)||void 0,needBlock:S,needMask:V,rootId:I,isCustom:s}}(e,{doc:s,blockClass:o,blockSelector:a,inlineStylesheet:d,maskInputOptions:u,maskInputFn:m,maskTextClass:p,dataURLOptions:b,inlineImages:Z,recordCanvas:y,keepIframeSrcFn:g,newlyAddedElement:I,privacySetting:S,rootId:V});case e.TEXT_NODE:return function(e,t){var i,n;let{needsMask:s,maskTextFn:l,privacySetting:o,rootId:a}=t,c=e.parentNode&&e.parentNode.tagName,d=e.textContent,u="STYLE"===c||void 0,p="SCRIPT"===c||void 0,h=!1;if(u&&d){try{e.nextSibling||e.previousSibling||!(null===(i=e.parentNode.sheet)||void 0===i)&&i.cssRules&&(d=W(e.parentNode.sheet))}catch(t){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${t}`,e)}d=O(d,D()),h=!0}p?(d="SCRIPT_PLACEHOLDER",h=!0):"NOSCRIPT"===c&&(d="",h=!0),!u&&!p&&d&&s&&(d=l?l(d,e.parentElement):d.replace(/[\S]/g,"*"));let m=null===(n=e.parentElement)||void 0===n?void 0:n.getAttribute("data-hl-record"),b="default"===o&&x(d);return("strict"===o||b)&&!m&&!h&&c&&!new Set(["HEAD","TITLE","STYLE","SCRIPT","HTML","BODY","NOSCRIPT"]).has(c)&&d&&(d=N(d)),{type:r.Text,textContent:d||"",isStyle:u,rootId:a}}(e,{needsMask:c,maskTextFn:h,privacySetting:S,rootId:V});case e.CDATA_SECTION_NODE:return{type:r.CDATA,textContent:"",rootId:V};case e.COMMENT_NODE:return{type:r.Comment,textContent:e.textContent||"",rootId:V};default:return!1}}(e,{doc:l,mirror:o,blockClass:a,blockSelector:c,needsMask:M,inlineStylesheet:h,maskInputOptions:m,maskTextClass:d,maskTextFn:b,maskInputFn:Z,dataURLOptions:g,inlineImages:I,recordCanvas:S,keepIframeSrcFn:Y,newlyAddedElement:H,privacySetting:E});if(!P)return console.warn(e,"not serialized"),null;s=o.hasNode(e)?o.getId(e):!(y.comment&&P.type===r.Comment||P.type===r.Element&&(y.script&&("script"===P.tagName||"link"===P.tagName&&("preload"===P.attributes.rel||"modulepreload"===P.attributes.rel)&&"script"===P.attributes.as||"link"===P.tagName&&"prefetch"===P.attributes.rel&&"string"==typeof P.attributes.href&&"js"===T(P.attributes.href))||y.headFavicon&&("link"===P.tagName&&"shortcut icon"===P.attributes.rel||"meta"===P.tagName&&(ee(P.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===ee(P.attributes.name)||"icon"===ee(P.attributes.rel)||"apple-touch-icon"===ee(P.attributes.rel)||"shortcut icon"===ee(P.attributes.rel)))||"meta"===P.tagName&&(y.headMetaDescKeywords&&ee(P.attributes.name).match(/^description|keywords$/)||y.headMetaSocial&&(ee(P.attributes.property).match(/^(og|twitter|fb):/)||ee(P.attributes.name).match(/^(og|twitter):/)||"pinterest"===ee(P.attributes.name))||y.headMetaRobots&&("robots"===ee(P.attributes.name)||"googlebot"===ee(P.attributes.name)||"bingbot"===ee(P.attributes.name))||y.headMetaHttpEquiv&&void 0!==P.attributes["http-equiv"]||y.headMetaAuthorship&&("author"===ee(P.attributes.name)||"generator"===ee(P.attributes.name)||"framework"===ee(P.attributes.name)||"publisher"===ee(P.attributes.name)||"progid"===ee(P.attributes.name)||ee(P.attributes.property).match(/^article:/)||ee(P.attributes.property).match(/^product:/))||y.headMetaVerification&&("google-site-verification"===ee(P.attributes.name)||"yandex-verification"===ee(P.attributes.name)||"csrf-token"===ee(P.attributes.name)||"p:domain_verify"===ee(P.attributes.name)||"verify-v1"===ee(P.attributes.name)||"verification"===ee(P.attributes.name)||"shopify-checkout-api-token"===ee(P.attributes.name)))))&&(z||P.type!==r.Text||P.isStyle||P.textContent.replace(/^\s+|\s+$/gm,"").length)?F():-2;let B=Object.assign(P,{id:s});if(o.add(e,B),-2===s)return null;V&&V(e);let A=!p,q=E,ei="strict"===E;if(B.type===r.Element){if(A=A&&!B.needBlock,ei||(ei=!!B.needBlock||!!B.needMask),q=ei?"strict":q,ei&&w(B.tagName)){let t=e.cloneNode();t.src="",o.add(t,B)}delete B.needBlock,delete B.needMask;let t=e.shadowRoot;t&&G(t)&&(B.isShadowHost=!0)}if((B.type===r.Document||B.type===r.Element)&&A){y.headWhitespace&&B.type===r.Element&&"head"===B.tagName&&(z=!1);let t={doc:l,mirror:o,blockClass:a,blockSelector:c,needsMask:M,maskTextClass:d,maskTextSelector:u,skipChild:p,inlineStylesheet:h,maskInputOptions:m,maskTextFn:b,maskInputFn:Z,slimDOMOptions:y,dataURLOptions:g,inlineImages:I,recordCanvas:S,preserveWhiteSpace:z,onSerialize:V,onIframeLoad:f,iframeLoadTimeout:C,onStylesheetLoad:L,stylesheetLoadTimeout:J,keepIframeSrcFn:Y,privacySetting:q};if(!(B.type===r.Element&&"textarea"===B.tagName&&void 0!==B.attributes.value))for(let i of Array.from(e.childNodes)){let e=et(i,t);e&&B.childNodes.push(e)}if(e.nodeType===e.ELEMENT_NODE&&e.shadowRoot)for(let i of Array.from(e.shadowRoot.childNodes)){let n=et(i,t);n&&(G(e.shadowRoot)&&(n.isShadow=!0),B.childNodes.push(n))}}return e.parentNode&&X(e.parentNode)&&G(e.parentNode)&&(B.isShadow=!0),B.type===r.Element&&"iframe"===B.tagName&&function(e,t,i){let n=e.contentWindow;if(!n)return;let s,l=!1;try{s=n.document.readyState}catch(e){return}if("complete"!==s){let n=setTimeout(()=>{l||(t(),l=!0)},i);return void e.addEventListener("load",()=>{clearTimeout(n),l=!0,t()})}let o="about:blank";if(n.location.href!==o||e.src===o||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,()=>{let t=e.contentDocument;if(t&&f){let i=et(t,{doc:t,mirror:o,blockClass:a,blockSelector:c,needsMask:M,maskTextClass:d,maskTextSelector:u,skipChild:!1,inlineStylesheet:h,maskInputOptions:m,maskTextFn:b,maskInputFn:Z,slimDOMOptions:y,dataURLOptions:g,inlineImages:I,recordCanvas:S,preserveWhiteSpace:z,onSerialize:V,onIframeLoad:f,iframeLoadTimeout:C,onStylesheetLoad:L,stylesheetLoadTimeout:J,keepIframeSrcFn:Y,privacySetting:E});i&&f(e,i)}},C),B.type===r.Element&&"link"===B.tagName&&"string"==typeof B.attributes.rel&&("stylesheet"===B.attributes.rel||"preload"===B.attributes.rel&&"string"==typeof B.attributes.href&&"css"===T(B.attributes.href))&&function(e,t,i){let n,s=!1;try{n=e.sheet}catch(e){return}if(n)return;let l=setTimeout(()=>{s||(t(),s=!0)},i);e.addEventListener("load",()=>{clearTimeout(l),s=!0,t()})}(e,()=>{if(L){let t=et(e,{doc:l,mirror:o,blockClass:a,blockSelector:c,needsMask:M,maskTextClass:d,maskTextSelector:u,skipChild:!1,inlineStylesheet:h,maskInputOptions:m,maskTextFn:b,maskInputFn:Z,slimDOMOptions:y,dataURLOptions:g,inlineImages:I,recordCanvas:S,preserveWhiteSpace:z,onSerialize:V,onIframeLoad:f,iframeLoadTimeout:C,onStylesheetLoad:L,stylesheetLoadTimeout:J,keepIframeSrcFn:Y,privacySetting:E});t&&L(e,t)}},J),B}function ei(e,t,i=document){let n={capture:!0};return i.addEventListener(e,t,n),()=>i.removeEventListener(e,t,n)}let en=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,es={map:{},getId:()=>(console.error(en),-1),getNode:()=>(console.error(en),null),removeNodeFromMap(){console.error(en)},has:()=>(console.error(en),!1),reset(){console.error(en)}};function el(e,t,i={}){let n=null,s=0;return function(...l){let o=Date.now();s||!1!==i.leading||(s=o);let r=t-(o-s),a=this;r<=0||r>t?(n&&(clearTimeout(n),n=null),s=o,e.apply(a,l)):n||!1===i.trailing||(n=setTimeout(()=>{s=!1===i.leading?0:Date.now(),n=null,e.apply(a,l)},r))}}function eo(e,t,i,n,s=window){let l=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,n?i:{set(e){setTimeout(()=>{i.set.call(this,e)},0),l&&l.set&&l.set.call(this,e)}}),()=>eo(e,t,l||{},!0)}function er(e,t,i){try{if(!(t in e))return()=>{};let n=e[t],s=i(n);return"function"==typeof s&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:n}})),e[t]=s,()=>{e[t]=n}}catch(e){return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(es=new Proxy(es,{get:(e,t,i)=>("map"===t&&console.error(en),Reflect.get(e,t,i))}));let ea=Date.now;function ec(e){var t,i,n,s,l,o;let r=e.document;return{left:r.scrollingElement?r.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:(null==r?void 0:r.documentElement.scrollLeft)||(null===(i=null===(t=null==r?void 0:r.body)||void 0===t?void 0:t.parentElement)||void 0===i?void 0:i.scrollLeft)||(null===(n=null==r?void 0:r.body)||void 0===n?void 0:n.scrollLeft)||0,top:r.scrollingElement?r.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:(null==r?void 0:r.documentElement.scrollTop)||(null===(l=null===(s=null==r?void 0:r.body)||void 0===s?void 0:s.parentElement)||void 0===l?void 0:l.scrollTop)||(null===(o=null==r?void 0:r.body)||void 0===o?void 0:o.scrollTop)||0}}function ed(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function eu(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function ep(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}/[1-9][0-9]{12}/.test(Date.now().toString())||(ea=()=>new Date().getTime());let eh=e=>{try{if(e instanceof HTMLElement)return"CANVAS"===e.tagName}catch(e){}return!1};function em(e,t,i,n){if(!e)return!1;let s=ep(e);if(!s)return!1;try{if("string"==typeof t){if(s.classList.contains(t)||n&&null!==s.closest("."+t))return!0}else if(q(s,t,n))return!0}catch(e){}return!!(i&&(s.matches(i)||n&&null!==s.closest(i)))}function eb(e,t){return -2===t.getId(e)}function eZ(e){return!!e.changedTouches}function ey(e,t){return!!("IFRAME"===e.nodeName&&t.getMeta(e))}function eg(e,t){return!!("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function eI(e){return!!(null!=e&&e.shadowRoot)}class eS{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){var t;return null!==(t=this.styleIDMap.get(e))&&void 0!==t?t:-1}has(e){return this.styleIDMap.has(e)}add(e,t){let i;return this.has(e)?this.getId(e):(i=void 0===t?this.id++:t,this.styleIDMap.set(e,i),this.idStyleMap.set(i,e),i)}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function eV(e){var t,i;let n=null;return(null===(i=null===(t=e.getRootNode)||void 0===t?void 0:t.call(e))||void 0===i?void 0:i.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(n=e.getRootNode().host),n}function eX(e){let t=e.ownerDocument;return!!t&&(t.contains(e)||function(e){let t=e.ownerDocument;if(!t)return!1;let i=function(e){let t,i=e;for(;t=eV(i);)i=t;return i}(e);return t.contains(i)}(e))}var eG=((e3=eG||{})[e3.DomContentLoaded=0]="DomContentLoaded",e3[e3.Load=1]="Load",e3[e3.FullSnapshot=2]="FullSnapshot",e3[e3.IncrementalSnapshot=3]="IncrementalSnapshot",e3[e3.Meta=4]="Meta",e3[e3.Custom=5]="Custom",e3[e3.Plugin=6]="Plugin",e3),eW=((e4=eW||{})[e4.Mutation=0]="Mutation",e4[e4.MouseMove=1]="MouseMove",e4[e4.MouseInteraction=2]="MouseInteraction",e4[e4.Scroll=3]="Scroll",e4[e4.ViewportResize=4]="ViewportResize",e4[e4.Input=5]="Input",e4[e4.TouchMove=6]="TouchMove",e4[e4.MediaInteraction=7]="MediaInteraction",e4[e4.StyleSheetRule=8]="StyleSheetRule",e4[e4.CanvasMutation=9]="CanvasMutation",e4[e4.Font=10]="Font",e4[e4.Log=11]="Log",e4[e4.Drag=12]="Drag",e4[e4.StyleDeclaration=13]="StyleDeclaration",e4[e4.Selection=14]="Selection",e4[e4.AdoptedStyleSheet=15]="AdoptedStyleSheet",e4[e4.CustomElement=16]="CustomElement",e4),ef=((e7=ef||{})[e7.MouseUp=0]="MouseUp",e7[e7.MouseDown=1]="MouseDown",e7[e7.Click=2]="Click",e7[e7.ContextMenu=3]="ContextMenu",e7[e7.DblClick=4]="DblClick",e7[e7.Focus=5]="Focus",e7[e7.Blur=6]="Blur",e7[e7.TouchStart=7]="TouchStart",e7[e7.TouchMove_Departed=8]="TouchMove_Departed",e7[e7.TouchEnd=9]="TouchEnd",e7[e7.TouchCancel=10]="TouchCancel",e7),eC=((e6=eC||{})[e6.Mouse=0]="Mouse",e6[e6.Pen=1]="Pen",e6[e6.Touch=2]="Touch",e6),eR=((e8=eR||{})[e8["2D"]=0]="2D",e8[e8.WebGL=1]="WebGL",e8[e8.WebGL2=2]="WebGL2",e8);class ev{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw Error("Position outside of list range");let t=this.head;for(let i=0;i<e;i++)t=(null==t?void 0:t.next)||null;return t}addNode(e){let t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&"__ln"in e.previousSibling){let i=e.previousSibling.__ln.next;t.next=i,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,i&&(i.previous=t)}else if(e.nextSibling&&"__ln"in e.nextSibling&&e.nextSibling.__ln.previous){let i=e.nextSibling.__ln.previous;t.previous=i,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,i&&(i.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){let t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}let ek=(e,t)=>`${e}@${t}`;class eT{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;let e=[],t=new Set,i=new ev,n=e=>{let t=e,i=-2;for(;-2===i;)i=(t=t&&t.nextSibling)&&this.mirror.getId(t);return i},s=s=>{if(!s.parentNode||!eX(s)||"TEXTAREA"===s.parentNode.tagName)return;let l=X(s.parentNode)?this.mirror.getId(eV(s)):this.mirror.getId(s.parentNode),o=n(s);if(-1===l||-1===o)return i.addNode(s);let r=et(s,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,privacySetting:this.privacySetting,onSerialize:e=>{ey(e,this.mirror)&&this.iframeManager.addIframe(e),eg(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),eI(s)&&this.shadowDomManager.addShadowRoot(s.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});r&&(e.push({parentId:l,nextId:o,node:r}),t.add(r.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(let e of this.movedSet)ew(this.removes,e,this.mirror)&&!this.movedSet.has(e.parentNode)||s(e);for(let e of this.addedSet)eL(this.droppedSet,e)||ew(this.removes,e,this.mirror)?eL(this.movedSet,e)?s(e):this.droppedSet.add(e):s(e);let l=null;for(;i.length;){let e=null;if(l){let t=this.mirror.getId(l.value.parentNode),i=n(l.value);-1!==t&&-1!==i&&(e=l)}if(!e){let t=i.tail;for(;t;){let i=t;if(t=t.previous,i){let t=this.mirror.getId(i.value.parentNode);if(-1===n(i.value))continue;if(-1!==t){e=i;break}{let t=i.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){let n=t.parentNode.host;if(-1!==this.mirror.getId(n)){e=i;break}}}}}}if(!e){for(;i.head;)i.removeNode(i.head.value);break}l=e.previous,i.removeNode(e.value),s(e.value)}let o={texts:this.texts.map(e=>{var t,i;let n=e.node;n.parentNode&&"TEXTAREA"===n.parentNode.tagName&&this.genTextAreaValueMutation(n.parentNode);let s=e.value,l="strict"===this.privacySetting,o="default"===this.privacySetting&&x(s),r=null===(i=null===(t=e.node)||void 0===t?void 0:t.parentElement)||void 0===i?void 0:i.getAttribute("data-hl-record");return(l||o)&&!r&&s&&(s=N(s)),{id:this.mirror.getId(n),value:s}}).filter(e=>!t.has(e.id)).filter(e=>this.mirror.has(e.id)),attributes:this.attributes.map(e=>{let{attributes:t}=e;if("string"==typeof t.style){let i=JSON.stringify(e.styleDiff),n=JSON.stringify(e._unchangedStyles);i.length<t.style.length&&(i+n).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}}).filter(e=>!t.has(e.id)).filter(e=>this.mirror.has(e.id)),removes:this.removes,adds:e};(o.texts.length||o.attributes.length||o.removes.length||o.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(o))},this.genTextAreaValueMutation=e=>{let t=this.attributeMap.get(e);t||(t={node:e,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(t),this.attributeMap.set(e,t)),t.attributes.value=Array.from(e.childNodes,e=>e.textContent||"").join("")},this.processMutation=e=>{if(!eb(e.target,this.mirror))switch(e.type){case"characterData":{let t=e.target.textContent;em(e.target,this.blockClass,this.blockSelector,!1)||t===e.oldValue||this.texts.push({value:$(e.target,this.maskTextClass,this.maskTextSelector,!0)&&t?this.maskTextFn?this.maskTextFn(t,ep(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{let t=e.target,i=e.attributeName,n=e.target.getAttribute(i);if("value"===i){let e=k(t);n=K({element:t,maskInputOptions:this.maskInputOptions,tagName:t.tagName,type:e,value:n,overwriteRecord:t.getAttribute("data-hl-record"),maskInputFn:this.maskInputFn})}if(em(e.target,this.blockClass,this.blockSelector,!1)||n===e.oldValue)return;let s=this.attributeMap.get(e.target);if("IFRAME"===t.tagName&&"src"===i&&!this.keepIframeSrcFn(n)){if(t.contentDocument)return;i="rr_src"}if(s||(s={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(s),this.attributeMap.set(e.target,s)),"type"===i&&"INPUT"===t.tagName&&"password"===(e.oldValue||"").toLowerCase()&&t.setAttribute("data-rr-is-password","true"),!j(t.tagName,i)){if("INPUT"===e.target.tagName){let t=e.target;if("password"===t.type){s.attributes.value="*".repeat(t.value.length);break}}if(s.attributes[i]=Q(this.doc,R(t.tagName),R(i),n),"style"===i){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(e){this.unattachedDoc=this.doc}let i=this.unattachedDoc.createElement("span");for(let n of(e.oldValue&&i.setAttribute("style",e.oldValue),Array.from(t.style))){let e=t.style.getPropertyValue(n),l=t.style.getPropertyPriority(n);e!==i.style.getPropertyValue(n)||l!==i.style.getPropertyPriority(n)?s.styleDiff[n]=""===l?e:[e,l]:s._unchangedStyles[n]=[e,l]}for(let e of Array.from(i.style))""===t.style.getPropertyValue(e)&&(s.styleDiff[e]=!1)}}break}case"childList":if(em(e.target,this.blockClass,this.blockSelector,!0))return;if("TEXTAREA"===e.target.tagName)return void this.genTextAreaValueMutation(e.target);e.addedNodes.forEach(t=>this.genAdds(t,e.target)),e.removedNodes.forEach(t=>{let i=this.mirror.getId(t),n=X(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);em(e.target,this.blockClass,this.blockSelector,!1)||eb(t,this.mirror)||-1===this.mirror.getId(t)||(this.addedSet.has(t)?(eN(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===i||function e(t,i){if(X(t))return!1;let n=i.getId(t);return!i.has(n)||(!t.parentNode||t.parentNode.nodeType!==t.DOCUMENT_NODE)&&(!t.parentNode||e(t.parentNode,i))}(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[ek(i,n)]?eN(this.movedSet,t):this.removes.push({parentId:n,id:i,isShadow:!(!X(e.target)||!G(e.target))||void 0})),this.mapRemoves.push(t))})}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(eb(e,this.mirror))return;this.movedSet.add(e);let i=null;t&&this.mirror.hasNode(t)&&(i=this.mirror.getId(t)),i&&-1!==i&&(this.movedMap[ek(this.mirror.getId(e),i)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);em(e,this.blockClass,this.blockSelector,!1)||(e.childNodes.forEach(e=>this.genAdds(e)),eI(e)&&e.shadowRoot.childNodes.forEach(t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)}))}}}init(e){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","privacySetting","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(t=>{this[t]=e[t]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function eN(e,t){e.delete(t),t.childNodes.forEach(t=>eN(e,t))}function ew(e,t,i){return 0!==e.length&&function e(t,i,n){let{parentNode:s}=i;if(!s)return!1;let l=n.getId(s);return!!t.some(e=>e.id===l)||e(t,s,n)}(e,t,i)}function eL(e,t){return 0!==e.size&&function e(t,i){let{parentNode:n}=i;return!!n&&(!!t.has(n)||e(t,n))}(e,t)}let ex=e=>n?(...t)=>{try{return e(...t)}catch(e){if(n&&!0===n(e))return;throw e}}:e,eJ=[];function eK(e){try{if("composedPath"in e){let t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function eY(e,t){var i,n;let s=new eT;eJ.push(s),s.init(e);let l=window.MutationObserver||window.__rrMutationObserver,o=null===(n=null===(i=null==window?void 0:window.Zone)||void 0===i?void 0:i.__symbol__)||void 0===n?void 0:n.call(i,"MutationObserver");o&&window[o]&&(l=window[o]);let r=new l(ex(s.processMutations.bind(s)));return r.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),r}function eU({scrollCb:e,doc:t,mirror:i,blockClass:n,blockSelector:s,sampling:l}){return ei("scroll",ex(el(ex(l=>{let o=eK(l);if(!o||em(o,n,s,!0))return;let r=i.getId(o);if(o===t&&t.defaultView){let i=ec(t.defaultView);e({id:r,x:i.left,y:i.top})}else e({id:r,x:o.scrollLeft,y:o.scrollTop})}),l.scroll||100)),t)}let eF=["INPUT","TEXTAREA","SELECT"],eH=new WeakMap;function eE(e){var t;return t=[],eP("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||eP("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||eP("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||eP("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule?t.unshift(Array.from(e.parentRule.cssRules).indexOf(e)):e.parentStyleSheet&&t.unshift(Array.from(e.parentStyleSheet.cssRules).indexOf(e)),t}function eM(e,t,i){let n,s;return e?(e.ownerNode?n=t.getId(e.ownerNode):s=i.getId(e),{styleId:s,id:n}):{}}function ez({mirror:e,stylesheetManager:t},i){var n,s,l;let o=null;o="#document"===i.nodeName?e.getId(i):e.getId(i.host);let r="#document"===i.nodeName?null===(n=i.defaultView)||void 0===n?void 0:n.Document:null===(l=null===(s=i.ownerDocument)||void 0===s?void 0:s.defaultView)||void 0===l?void 0:l.ShadowRoot,a=null!=r&&r.prototype?Object.getOwnPropertyDescriptor(null==r?void 0:r.prototype,"adoptedStyleSheets"):void 0;return null!==o&&-1!==o&&r&&a?(Object.defineProperty(i,"adoptedStyleSheets",{configurable:a.configurable,enumerable:a.enumerable,get(){var e;return null===(e=a.get)||void 0===e?void 0:e.call(this)},set(e){var i;let n=null===(i=a.set)||void 0===i?void 0:i.call(this,e);if(null!==o&&-1!==o)try{t.adoptStyleSheets(e,o)}catch(e){}return n}}),ex(()=>{Object.defineProperty(i,"adoptedStyleSheets",{configurable:a.configurable,enumerable:a.enumerable,get:a.get,set:a.set})})):()=>{}}function eO(e,t={}){let i;let n=e.doc.defaultView;if(!n)return()=>{};(function(e,t){let{mutationCb:i,mousemoveCb:n,mouseInteractionCb:s,scrollCb:l,viewportResizeCb:o,inputCb:r,mediaInteractionCb:a,styleSheetRuleCb:c,styleDeclarationCb:d,canvasMutationCb:u,fontCb:p,selectionCb:h,customElementCb:m}=e;e.mutationCb=(...e)=>{t.mutation&&t.mutation(...e),i(...e)},e.mousemoveCb=(...e)=>{t.mousemove&&t.mousemove(...e),n(...e)},e.mouseInteractionCb=(...e)=>{t.mouseInteraction&&t.mouseInteraction(...e),s(...e)},e.scrollCb=(...e)=>{t.scroll&&t.scroll(...e),l(...e)},e.viewportResizeCb=(...e)=>{t.viewportResize&&t.viewportResize(...e),o(...e)},e.inputCb=(...e)=>{t.input&&t.input(...e),r(...e)},e.mediaInteractionCb=(...e)=>{t.mediaInteaction&&t.mediaInteaction(...e),a(...e)},e.styleSheetRuleCb=(...e)=>{t.styleSheetRule&&t.styleSheetRule(...e),c(...e)},e.styleDeclarationCb=(...e)=>{t.styleDeclaration&&t.styleDeclaration(...e),d(...e)},e.canvasMutationCb=(...e)=>{t.canvasMutation&&t.canvasMutation(...e),u(...e)},e.fontCb=(...e)=>{t.font&&t.font(...e),p(...e)},e.selectionCb=(...e)=>{t.selection&&t.selection(...e),h(...e)},e.customElementCb=(...e)=>{t.customElement&&t.customElement(...e),m(...e)}})(e,t),e.recordDOM&&(i=eY(e,e.doc));let s=function({mousemoveCb:e,sampling:t,doc:i,mirror:n}){if(!1===t.mousemove)return()=>{};let s="number"==typeof t.mousemove?t.mousemove:50,l="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500,o,r=[],a=el(ex(t=>{let i=Date.now()-o;e(r.map(e=>(e.timeOffset-=i,e)),t),r=[],o=null}),l),c=ex(el(ex(e=>{let t=eK(e),{clientX:i,clientY:s}=eZ(e)?e.changedTouches[0]:e;o||(o=ea()),r.push({x:i,y:s,id:n.getId(t),timeOffset:ea()-o}),a("undefined"!=typeof DragEvent&&e instanceof DragEvent?eW.Drag:e instanceof MouseEvent?eW.MouseMove:eW.TouchMove)}),s,{trailing:!1})),d=[ei("mousemove",c,i),ei("touchmove",c,i),ei("drag",c,i)];return ex(()=>{d.forEach(e=>e())})}(e),l=function({mouseInteractionCb:e,doc:t,mirror:i,blockClass:n,blockSelector:s,sampling:l}){if(!1===l.mouseInteraction)return()=>{};let o=!0===l.mouseInteraction||void 0===l.mouseInteraction?{}:l.mouseInteraction,r=[],a=null;return Object.keys(ef).filter(e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==o[e]).forEach(l=>{let o=R(l);if(window.PointerEvent)switch(ef[l]){case ef.MouseDown:case ef.MouseUp:o=o.replace("mouse","pointer");break;case ef.TouchStart:case ef.TouchEnd:return}r.push(ei(o,t=>{let o=eK(t);if(em(o,n,s,!0)||eh(o))return;let r=null,c=l;if("pointerType"in t){switch(t.pointerType){case"mouse":r=eC.Mouse;break;case"touch":r=eC.Touch;break;case"pen":r=eC.Pen}r===eC.Touch&&(ef[l]===ef.MouseDown?c="TouchStart":ef[l]===ef.MouseUp&&(c="TouchEnd"))}else eZ(t)&&(r=eC.Touch);null!==r?(a=r,(c.startsWith("Touch")&&r===eC.Touch||c.startsWith("Mouse")&&r===eC.Mouse)&&(r=null)):ef[l]===ef.Click&&(r=a,a=null);let d=eZ(t)?t.changedTouches[0]:t;if(!d)return;let u=i.getId(o),{clientX:p,clientY:h}=d;ex(e)(Object.assign({type:ef[c],id:u,x:p,y:h},null!==r&&{pointerType:r}))},t))}),ex(()=>{r.forEach(e=>e())})}(e),o=eU(e),r=function({viewportResizeCb:e},{win:t}){let i=-1,n=-1;return ei("resize",ex(el(ex(()=>{let t=ed(),s=eu();i===t&&n===s||(e({width:Number(s),height:Number(t)}),i=t,n=s)}),200)),t)}(e,{win:n}),a=function({inputCb:e,doc:t,mirror:i,blockClass:n,blockSelector:s,ignoreClass:l,ignoreSelector:o,maskInputOptions:r,maskInputFn:a,sampling:c,userTriggeredOnInput:d}){function u(e){let i=eK(e),c=e.isTrusted,u=i&&i.tagName;if(i&&"OPTION"===u&&(i=i.parentElement),!i||!u||0>eF.indexOf(u)||em(i,n,s,!0)||i.classList.contains(l)||o&&i.matches(o))return;let h=i.value,m=!1,b=k(i)||"",Z=i.getAttribute("data-hl-record");"radio"===b||"checkbox"===b?m=i.checked:J({maskInputOptions:r,type:b,tagName:u,overwriteRecord:Z})&&(h=K({element:i,maskInputOptions:r,tagName:u,type:b,value:h,overwriteRecord:Z,maskInputFn:a})),p(i,d?{text:h,isChecked:m,userTriggered:c}:{text:h,isChecked:m});let y=i.name;"radio"===b&&y&&m&&t.querySelectorAll(`input[type="radio"][name="${y}"]`).forEach(e=>{if(e!==i){let t=e.value;p(e,d?{text:t,isChecked:!m,userTriggered:!1}:{text:t,isChecked:!m})}})}function p(t,n){let s=eH.get(t);if(!s||s.text!==n.text||s.isChecked!==n.isChecked){eH.set(t,n);let s=i.getId(t);ex(e)(Object.assign(Object.assign({},n),{id:s}))}}let h=("last"===c.input?["change"]:["input","change"]).map(e=>ei(e,ex(u),t)),m=t.defaultView;if(!m)return()=>{h.forEach(e=>e())};let b=m.Object.getOwnPropertyDescriptor(m.HTMLInputElement.prototype,"value"),Z=[[m.HTMLInputElement.prototype,"value"],[m.HTMLInputElement.prototype,"checked"],[m.HTMLSelectElement.prototype,"value"],[m.HTMLTextAreaElement.prototype,"value"],[m.HTMLSelectElement.prototype,"selectedIndex"],[m.HTMLOptionElement.prototype,"selected"]];return b&&b.set&&h.push(...Z.map(e=>eo(e[0],e[1],{set(){ex(u)({target:this,isTrusted:!1})}},!1,m))),ex(()=>{h.forEach(e=>e())})}(e),c=function({mediaInteractionCb:e,blockClass:t,blockSelector:i,mirror:n,sampling:s,doc:l}){let o=ex(l=>el(ex(s=>{let o=eK(s);if(!o||em(o,t,i,!0))return;let{currentTime:r,volume:a,muted:c,playbackRate:d}=o;e({type:l,id:n.getId(o),currentTime:r,volume:a,muted:c,playbackRate:d})}),s.media||500)),r=[ei("play",o(0),l),ei("pause",o(1),l),ei("seeked",o(2),l),ei("volumechange",o(3),l),ei("ratechange",o(4),l)];return ex(()=>{r.forEach(e=>e())})}(e),d=()=>{},u=()=>{},p=()=>{},h=()=>{};e.recordDOM&&(d=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:i},{win:n}){let s,l;if(!n.CSSStyleSheet||!n.CSSStyleSheet.prototype)return()=>{};let o=n.CSSStyleSheet.prototype.insertRule;n.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:ex((n,s,l)=>{let[o,r]=l,{id:a,styleId:c}=eM(s,t,i.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,adds:[{rule:o,index:r}]}),n.apply(s,l)})});let r=n.CSSStyleSheet.prototype.deleteRule;n.CSSStyleSheet.prototype.deleteRule=new Proxy(r,{apply:ex((n,s,l)=>{let[o]=l,{id:r,styleId:a}=eM(s,t,i.styleMirror);return(r&&-1!==r||a&&-1!==a)&&e({id:r,styleId:a,removes:[{index:o}]}),n.apply(s,l)})}),n.CSSStyleSheet.prototype.replace&&(s=n.CSSStyleSheet.prototype.replace,n.CSSStyleSheet.prototype.replace=new Proxy(s,{apply:ex((n,s,l)=>{let[o]=l,{id:r,styleId:a}=eM(s,t,i.styleMirror);return(r&&-1!==r||a&&-1!==a)&&e({id:r,styleId:a,replace:o}),n.apply(s,l)})})),n.CSSStyleSheet.prototype.replaceSync&&(l=n.CSSStyleSheet.prototype.replaceSync,n.CSSStyleSheet.prototype.replaceSync=new Proxy(l,{apply:ex((n,s,l)=>{let[o]=l,{id:r,styleId:a}=eM(s,t,i.styleMirror);return(r&&-1!==r||a&&-1!==a)&&e({id:r,styleId:a,replaceSync:o}),n.apply(s,l)})}));let a={};eB("CSSGroupingRule")?a.CSSGroupingRule=n.CSSGroupingRule:(eB("CSSMediaRule")&&(a.CSSMediaRule=n.CSSMediaRule),eB("CSSConditionRule")&&(a.CSSConditionRule=n.CSSConditionRule),eB("CSSSupportsRule")&&(a.CSSSupportsRule=n.CSSSupportsRule));let c={};return Object.entries(a).forEach(([n,s])=>{c[n]={insertRule:s.prototype.insertRule,deleteRule:s.prototype.deleteRule},s.prototype.insertRule=new Proxy(c[n].insertRule,{apply:ex((n,s,l)=>{let[o,r]=l,{id:a,styleId:c}=eM(s.parentStyleSheet,t,i.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,adds:[{rule:o,index:[...eE(s),r||0]}]}),n.apply(s,l)})}),s.prototype.deleteRule=new Proxy(c[n].deleteRule,{apply:ex((n,s,l)=>{let[o]=l,{id:r,styleId:a}=eM(s.parentStyleSheet,t,i.styleMirror);return(r&&-1!==r||a&&-1!==a)&&e({id:r,styleId:a,removes:[{index:[...eE(s),o]}]}),n.apply(s,l)})})}),ex(()=>{n.CSSStyleSheet.prototype.insertRule=o,n.CSSStyleSheet.prototype.deleteRule=r,s&&(n.CSSStyleSheet.prototype.replace=s),l&&(n.CSSStyleSheet.prototype.replaceSync=l),Object.entries(a).forEach(([e,t])=>{t.prototype.insertRule=c[e].insertRule,t.prototype.deleteRule=c[e].deleteRule})})}(e,{win:n}),u=ez(e,e.doc),p=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:i,stylesheetManager:n},{win:s}){let l=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(l,{apply:ex((s,o,r)=>{var a;let[c,d,u]=r;if(i.has(c))return l.apply(o,[c,d,u]);let{id:p,styleId:h}=eM(null===(a=o.parentRule)||void 0===a?void 0:a.parentStyleSheet,t,n.styleMirror);return(p&&-1!==p||h&&-1!==h)&&e({id:p,styleId:h,set:{property:c,value:d,priority:u},index:eE(o.parentRule)}),s.apply(o,r)})});let o=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:ex((s,l,r)=>{var a;let[c]=r;if(i.has(c))return o.apply(l,[c]);let{id:d,styleId:u}=eM(null===(a=l.parentRule)||void 0===a?void 0:a.parentStyleSheet,t,n.styleMirror);return(d&&-1!==d||u&&-1!==u)&&e({id:d,styleId:u,remove:{property:c},index:eE(l.parentRule)}),s.apply(l,r)})}),ex(()=>{s.CSSStyleDeclaration.prototype.setProperty=l,s.CSSStyleDeclaration.prototype.removeProperty=o})}(e,{win:n}),e.collectFonts&&(h=function({fontCb:e,doc:t}){let i=t.defaultView;if(!i)return()=>{};let n=[],s=new WeakMap,l=i.FontFace;i.FontFace=function(e,t,i){let n=new l(e,t,i);return s.set(n,{family:e,buffer:"string"!=typeof t,descriptors:i,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),n};let o=er(t.fonts,"add",function(t){return function(i){return setTimeout(ex(()=>{let t=s.get(i);t&&(e(t),s.delete(i))}),0),t.apply(this,[i])}});return n.push(()=>{i.FontFace=l}),n.push(o),ex(()=>{n.forEach(e=>e())})}(e)));let m=function(e){let{doc:t,mirror:i,blockClass:n,blockSelector:s,selectionCb:l}=e,o=!0,r=ex(()=>{let e=t.getSelection();if(!e||o&&null!=e&&e.isCollapsed)return;o=e.isCollapsed||!1;let r=[],a=e.rangeCount||0;for(let t=0;t<a;t++){let{startContainer:l,startOffset:o,endContainer:a,endOffset:c}=e.getRangeAt(t);em(l,n,s,!0)||em(a,n,s,!0)||r.push({start:i.getId(l),startOffset:o,end:i.getId(a),endOffset:c})}l({ranges:r})});return r(),ei("selectionchange",r)}(e),b=function({doc:e,customElementCb:t}){let i=e.defaultView;return i&&i.customElements?er(i.customElements,"define",function(e){return function(i,n,s){try{t({define:{name:i}})}catch(e){console.warn(`Custom element callback failed for ${i}`)}return e.apply(this,[i,n,s])}}):()=>{}}(e),Z=[];for(let t of e.plugins)Z.push(t.observer(t.callback,n,t.options));return ex(()=>{eJ.forEach(e=>e.reset()),null==i||i.disconnect(),s(),l(),o(),r(),a(),c(),d(),u(),p(),h(),m(),b(),Z.forEach(e=>e())})}function eP(e){return void 0!==window[e]}function eB(e){return!!(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class eA{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,i,n){let s=i||this.getIdToRemoteIdMap(e),l=n||this.getRemoteIdToIdMap(e),o=s.get(t);return o||(o=this.generateIdFn(),s.set(t,o),l.set(o,t)),o}getIds(e,t){let i=this.getIdToRemoteIdMap(e),n=this.getRemoteIdToIdMap(e);return t.map(t=>this.getId(e,t,i,n))}getRemoteId(e,t,i){let n=i||this.getRemoteIdToIdMap(e);return"number"!=typeof t?t:n.get(t)||-1}getRemoteIds(e,t){let i=this.getRemoteIdToIdMap(e);return t.map(t=>this.getRemoteId(e,t,i))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}class eD{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new eA(F),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new eA(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){var i;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),null===(i=this.loadListener)||void 0===i||i.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){if("rrweb"!==e.data.type||e.origin!==e.data.origin)return;let t=e.source;if(!t)return;let i=this.crossOriginIframeMap.get(t);if(!i)return;let n=this.transformCrossOriginEvent(i,e.data.event);n&&this.wrappedEmit(n,e.data.isCheckout)}transformCrossOriginEvent(e,t){var i;switch(t.type){case eG.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);let i=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,i),this.patchRootIdOnNode(t.data.node,i),{timestamp:t.timestamp,type:eG.IncrementalSnapshot,data:{source:eW.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case eG.Meta:case eG.Load:case eG.DomContentLoaded:break;case eG.Plugin:return t;case eG.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case eG.IncrementalSnapshot:switch(t.data.source){case eW.Mutation:return t.data.adds.forEach(t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);let i=this.crossOriginIframeRootIdMap.get(e);i&&this.patchRootIdOnNode(t.node,i)}),t.data.removes.forEach(t=>{this.replaceIds(t,e,["parentId","id"])}),t.data.attributes.forEach(t=>{this.replaceIds(t,e,["id"])}),t.data.texts.forEach(t=>{this.replaceIds(t,e,["id"])}),t;case eW.Drag:case eW.TouchMove:case eW.MouseMove:return t.data.positions.forEach(t=>{this.replaceIds(t,e,["id"])}),t;case eW.ViewportResize:return!1;case eW.MediaInteraction:case eW.MouseInteraction:case eW.Scroll:case eW.CanvasMutation:case eW.Input:return this.replaceIds(t.data,e,["id"]),t;case eW.StyleSheetRule:case eW.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case eW.Font:return t;case eW.Selection:return t.data.ranges.forEach(t=>{this.replaceIds(t,e,["start","end"])}),t;case eW.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),null===(i=t.data.styles)||void 0===i||i.forEach(t=>{this.replaceStyleIds(t,e,["styleId"])}),t}}return!1}replace(e,t,i,n){for(let s of n)(Array.isArray(t[s])||"number"==typeof t[s])&&(Array.isArray(t[s])?t[s]=e.getIds(i,t[s]):t[s]=e.getId(i,t[s]));return t}replaceIds(e,t,i){return this.replace(this.crossOriginIframeMirror,e,t,i)}replaceStyleIds(e,t,i){return this.replace(this.crossOriginIframeStyleMirror,e,t,i)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(e=>{this.replaceIdOnNode(e,t)})}patchRootIdOnNode(e,t){e.type===r.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach(e=>{this.patchRootIdOnNode(e,t)})}}class eQ{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!G(e)||this.shadowDoms.has(e))return;this.shadowDoms.add(e);let i=eY(Object.assign(Object.assign({},this.bypassOptions),{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);this.restoreHandlers.push(()=>i.disconnect()),this.restoreHandlers.push(eU(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))),setTimeout(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(ez({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){let i=this;this.restoreHandlers.push(er(e.prototype,"attachShadow",function(e){return function(n){let s=e.call(this,n);return this.shadowRoot&&eX(this)&&i.addShadowRoot(this.shadowRoot,t),s}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch(e){}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}for(var ej="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e_="undefined"==typeof Uint8Array?[]:new Uint8Array(256),eq=0;eq<64;eq++)e_[ej.charCodeAt(eq)]=eq;let e$=new Map,e0=(e,t,i)=>{var n;let s;if(!e||!e9(e,t)&&"object"!=typeof e)return;let l=(n=e.constructor.name,(s=e$.get(i))||(s=new Map,e$.set(i,s)),s.has(n)||s.set(n,[]),s.get(n)),o=l.indexOf(e);return -1===o&&(o=l.length,l.push(e)),o},e2=(e,t,i)=>e.map(e=>(function e(t,i,n){if(t instanceof Array)return t.map(t=>e(t,i,n));if(null===t)return t;if(t instanceof Float32Array||t instanceof Float64Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Int16Array||t instanceof Int8Array||t instanceof Uint8ClampedArray)return{rr_type:t.constructor.name,args:[Object.values(t)]};if(t instanceof ArrayBuffer)return{rr_type:t.constructor.name,base64:function(e){var t,i=new Uint8Array(e),n=i.length,s="";for(t=0;t<n;t+=3)s+=ej[i[t]>>2]+ej[(3&i[t])<<4|i[t+1]>>4]+ej[(15&i[t+1])<<2|i[t+2]>>6]+ej[63&i[t+2]];return n%3==2?s=s.substring(0,s.length-1)+"=":n%3==1&&(s=s.substring(0,s.length-2)+"=="),s}(t)};if(t instanceof DataView)return{rr_type:t.constructor.name,args:[e(t.buffer,i,n),t.byteOffset,t.byteLength]};if(t instanceof HTMLImageElement){let e=t.constructor.name,{src:i}=t;return{rr_type:e,src:i}}return t instanceof HTMLCanvasElement?{rr_type:"HTMLImageElement",src:t.toDataURL()}:t instanceof ImageData?{rr_type:t.constructor.name,args:[e(t.data,i,n),t.width,t.height]}:e9(t,i)||"object"==typeof t?{rr_type:t.constructor.name,index:e0(t,i,n)}:t})(e,t,i)),e9=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(e=>"function"==typeof t[e]).find(i=>e instanceof t[i]);function e1(e,t,i,n){let s=[];try{let l=er(e.HTMLCanvasElement.prototype,"getContext",function(e){return function(s,...l){if(!em(this,t,i,!0)){let e="experimental-webgl"===s?"webgl":s;if("__context"in this||(this.__context=e),n&&["webgl","webgl2"].includes(e)){if(l[0]&&"object"==typeof l[0]){let e=l[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else l.splice(0,1,{preserveDrawingBuffer:!0})}}return e.apply(this,[s,...l])}});s.push(l)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{s.forEach(e=>e())}}function e5(e,t,i,n,s,l,o){let r=[];for(let l of Object.getOwnPropertyNames(e))if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(l))try{if("function"!=typeof e[l])continue;let a=er(e,l,function(e){return function(...r){let a=e.apply(this,r);if(e0(a,o,this),"tagName"in this.canvas&&!em(this.canvas,n,s,!0)){let e=e2(r,o,this),n={type:t,property:l,args:e};i(this.canvas,n)}return a}});r.push(a)}catch(s){let n=eo(e,l,{set(e){i(this.canvas,{type:t,property:l,args:[e],setter:!0})}});r.push(n)}return r}var e3,e4,e7,e6,e8,te,tt=function(e){var t,i,n,s;return te=te||(i=(t=function(e,t){var i=atob(e);if(t){for(var n=new Uint8Array(i.length),s=0,l=i.length;s<l;++s)n[s]=i.charCodeAt(s);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return i}("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCiAgICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4NCg0KICAgIFBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueQ0KICAgIHB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC4NCg0KICAgIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIDQogICAgUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZDQogICAgQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULA0KICAgIElORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTQ0KICAgIExPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SDQogICAgT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUg0KICAgIFBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuDQogICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi8NCg0KICAgIGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHsNCiAgICAgICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9DQogICAgICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgew0KICAgICAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfQ0KICAgICAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbInRocm93Il0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfQ0KICAgICAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH0NCiAgICAgICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTsNCiAgICAgICAgfSk7DQogICAgfQoKICAgIC8qCiAgICAgKiBiYXNlNjQtYXJyYXlidWZmZXIgMS4wLjEgPGh0dHBzOi8vZ2l0aHViLmNvbS9uaWtsYXN2aC9iYXNlNjQtYXJyYXlidWZmZXI+CiAgICAgKiBDb3B5cmlnaHQgKGMpIDIwMjEgTmlrbGFzIHZvbiBIZXJ0emVuIDxodHRwczovL2hlcnR6ZW4uY29tPgogICAgICogUmVsZWFzZWQgdW5kZXIgTUlUIExpY2Vuc2UKICAgICAqLwogICAgdmFyIGNoYXJzID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nOwogICAgLy8gVXNlIGEgbG9va3VwIHRhYmxlIHRvIGZpbmQgdGhlIGluZGV4LgogICAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAndW5kZWZpbmVkJyA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogICAgfQogICAgdmFyIGVuY29kZSA9IGZ1bmN0aW9uIChhcnJheWJ1ZmZlcikgewogICAgICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaSwgbGVuID0gYnl0ZXMubGVuZ3RoLCBiYXNlNjQgPSAnJzsKICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpICs9IDMpIHsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2ldID4+IDJdOwogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbKChieXRlc1tpXSAmIDMpIDw8IDQpIHwgKGJ5dGVzW2kgKyAxXSA+PiA0KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2kgKyAxXSAmIDE1KSA8PCAyKSB8IChieXRlc1tpICsgMl0gPj4gNildOwogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaSArIDJdICYgNjNdOwogICAgICAgIH0KICAgICAgICBpZiAobGVuICUgMyA9PT0gMikgewogICAgICAgICAgICBiYXNlNjQgPSBiYXNlNjQuc3Vic3RyaW5nKDAsIGJhc2U2NC5sZW5ndGggLSAxKSArICc9JzsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAobGVuICUgMyA9PT0gMSkgewogICAgICAgICAgICBiYXNlNjQgPSBiYXNlNjQuc3Vic3RyaW5nKDAsIGJhc2U2NC5sZW5ndGggLSAyKSArICc9PSc7CiAgICAgICAgfQogICAgICAgIHJldHVybiBiYXNlNjQ7CiAgICB9OwoKICAgIGNvbnN0IGxhc3RCbG9iTWFwID0gbmV3IE1hcCgpOw0KICAgIGNvbnN0IHRyYW5zcGFyZW50QmxvYk1hcCA9IG5ldyBNYXAoKTsNCiAgICBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsNCiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICAgICAgICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7DQogICAgICAgICAgICBpZiAoJ09mZnNjcmVlbkNhbnZhcycgaW4gZ2xvYmFsVGhpcykgew0KICAgICAgICAgICAgICAgIGlmICh0cmFuc3BhcmVudEJsb2JNYXAuaGFzKGlkKSkNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zcGFyZW50QmxvYk1hcC5nZXQoaWQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IG9mZnNjcmVlbiA9IG5ldyBPZmZzY3JlZW5DYW52YXMod2lkdGgsIGhlaWdodCk7DQogICAgICAgICAgICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoJzJkJyk7DQogICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IHlpZWxkIG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCBhcnJheUJ1ZmZlciA9IHlpZWxkIGJsb2IuYXJyYXlCdWZmZXIoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOw0KICAgICAgICAgICAgICAgIHRyYW5zcGFyZW50QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7DQogICAgICAgICAgICAgICAgcmV0dXJuIGJhc2U2NDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHJldHVybiAnJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfQ0KICAgIGNvbnN0IHdvcmtlciA9IHNlbGY7DQogICAgbGV0IGxvZ0RlYnVnID0gZmFsc2U7DQogICAgY29uc3QgZGVidWcgPSAoLi4uYXJncykgPT4gew0KICAgICAgICBpZiAobG9nRGVidWcpIHsNCiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoLi4uYXJncyk7DQogICAgICAgIH0NCiAgICB9Ow0KICAgIHdvcmtlci5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZSkgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgbG9nRGVidWcgPSAhIWUuZGF0YS5sb2dEZWJ1ZzsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkeCwgZHksIGR3LCBkaCwgZGF0YVVSTE9wdGlvbnMgfSA9IGUuZGF0YTsNCiAgICAgICAgICAgICAgICBjb25zdCB0cmFuc3BhcmVudEJhc2U2NCA9IGdldFRyYW5zcGFyZW50QmxvYkZvcih3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgnMmQnKTsNCiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGJpdG1hcCwgMCwgMCwgd2lkdGgsIGhlaWdodCk7DQogICAgICAgICAgICAgICAgYml0bWFwLmNsb3NlKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IHlpZWxkIG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCB0eXBlID0gYmxvYi50eXBlOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQgYmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7DQogICAgICAgICAgICAgICAgaWYgKCFsYXN0QmxvYk1hcC5oYXMoaWQpICYmICh5aWVsZCB0cmFuc3BhcmVudEJhc2U2NCkgPT09IGJhc2U2NCkgew0KICAgICAgICAgICAgICAgICAgICBkZWJ1ZygnW2hpZ2hsaWdodC13b3JrZXJdIGNhbnZhcyBiaXRtYXAgaXMgdHJhbnNwYXJlbnQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZCwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U2NCwNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkLCBzdGF0dXM6ICd0cmFuc3BhcmVudCcgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChsYXN0QmxvYk1hcC5nZXQoaWQpID09PSBiYXNlNjQpIHsNCiAgICAgICAgICAgICAgICAgICAgZGVidWcoJ1toaWdobGlnaHQtd29ya2VyXSBjYW52YXMgYml0bWFwIGlzIHVuY2hhbmdlZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlkLA0KICAgICAgICAgICAgICAgICAgICAgICAgYmFzZTY0LA0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkLCBzdGF0dXM6ICd1bmNoYW5nZWQnIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBkZWJ1ZygnW2hpZ2hsaWdodC13b3JrZXJdIGNhbnZhcyBiaXRtYXAgcHJvY2Vzc2VkJywgew0KICAgICAgICAgICAgICAgICAgICBpZCwNCiAgICAgICAgICAgICAgICAgICAgYmFzZTY0LA0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7DQogICAgICAgICAgICAgICAgICAgIGlkLA0KICAgICAgICAgICAgICAgICAgICB0eXBlLA0KICAgICAgICAgICAgICAgICAgICBiYXNlNjQsDQogICAgICAgICAgICAgICAgICAgIHdpZHRoLA0KICAgICAgICAgICAgICAgICAgICBoZWlnaHQsDQogICAgICAgICAgICAgICAgICAgIGR4LA0KICAgICAgICAgICAgICAgICAgICBkeSwNCiAgICAgICAgICAgICAgICAgICAgZHcsDQogICAgICAgICAgICAgICAgICAgIGRoLA0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIGRlYnVnKCdbaGlnaGxpZ2h0LXdvcmtlcl0gbm8gb2Zmc2NyZWVuY2FudmFzIHN1cHBvcnQnLCB7DQogICAgICAgICAgICAgICAgICAgIGlkOiBlLmRhdGEuaWQsDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkOiBlLmRhdGEuaWQsIHN0YXR1czogJ3Vuc3VwcG9ydGVkJyB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsKCn0pKCk7Cgo=",!1)).indexOf(`
`,10)+1,n=t.substring(i)+"",s=new Blob([n],{type:"application/javascript"}),URL.createObjectURL(s)),new Worker(te,e)};class ti{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.snapshotInProgressMap=new Map,this.lastSnapshotTime=new Map,this.frozen=!1,this.locked=!1,this.processMutation=(e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)};let{sampling:t,win:i,blockClass:n,blockSelector:s,recordCanvas:l,recordVideos:o,initialSnapshotDelay:r,dataURLOptions:a}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,this.logger=e.logger,this.worker=new tt,this.worker.onmessage=e=>{let{id:t}=e.data;if(this.snapshotInProgressMap.set(t,!1),!("base64"in e.data))return void this.debug(null,"canvas worker received empty message",{data:e.data,status:e.data.status});let{base64:i,type:n,dx:s,dy:l,dw:o,dh:r}=e.data;this.mutationCb({id:t,type:eR["2D"],commands:[{property:"clearRect",args:[s,l,o,r]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:i}],type:n}]},s,l,o,r]}]})},this.options=e,l&&"all"===t?(this.debug(null,"initializing canvas mutation observer",{sampling:t}),this.initCanvasMutationObserver(i,n,s)):l&&"number"==typeof t&&(this.debug(null,"initializing canvas fps observer",{sampling:t}),this.initCanvasFPSObserver(o,t,i,n,s,{initialSnapshotDelay:r,dataURLOptions:a},e.resizeFactor,e.maxSnapshotDimension))}debug(e,...t){if(!this.logger)return;let i=this.mirror.getId(e),n="[highlight-canvas-manager]";e&&(n=`[highlight-canvas] [id:${i}]`,"canvas"===e.tagName.toLowerCase()&&(n+=` [ctx:${e.__context}]`)),this.logger.debug(n,e,...t)}snapshot(e){var t;return V(this,void 0,void 0,function*(){this.debug(e,"starting snapshotting");let i=this.mirror.getId(e);if(this.snapshotInProgressMap.get(i))this.debug(e,"snapshotting already in progress for",i);else if(0!==e.width&&0!==e.height){this.snapshotInProgressMap.set(i,!0);try{if(!1!==this.options.clearWebGLBuffer&&["webgl","webgl2"].includes(e.__context)){let i=e.getContext(e.__context);(null===(t=null==i?void 0:i.getContextAttributes())||void 0===t?void 0:t.preserveDrawingBuffer)===!1&&(i.clear(i.COLOR_BUFFER_BIT),this.debug(e,"cleared webgl canvas to load it into memory",{attributes:null==i?void 0:i.getContextAttributes()}))}if(0===e.width||0===e.height)return void this.debug(e,"not yet ready",{width:e.width,height:e.height});let n=this.options.resizeFactor||1;if(this.options.maxSnapshotDimension){let t=Math.max(e.width,e.height);n=Math.min(n,this.options.maxSnapshotDimension/t)}let s=e.width*n,l=e.height*n,o=yield createImageBitmap(e,{resizeWidth:s,resizeHeight:l});this.debug(e,"created image bitmap",{width:o.width,height:o.height}),this.worker.postMessage({id:i,bitmap:o,width:s,height:l,dx:0,dy:0,dw:e.width,dh:e.height,dataURLOptions:this.options.dataURLOptions,logDebug:!!this.logger},[o]),this.debug(e,"sent message")}catch(t){this.debug(e,"failed to snapshot",t)}finally{this.snapshotInProgressMap.set(i,!1)}}else this.debug(e,"not yet ready",{width:e.width,height:e.height})})}initCanvasFPSObserver(e,t,i,n,s,l,o,r){let a=e1(i,n,s,!0),c=1e3/t,d,u=0,p=new Map,h=e=>{let t=[];return i.document.querySelectorAll("canvas").forEach(i=>{if(!em(i,n,s,!0)){this.debug(i,"discovered canvas"),t.push(i);let n=this.mirror.getId(i);p.has(n)||p.set(n,e)}}),t},m=t=>{let l=[];return e&&i.document.querySelectorAll("video").forEach(e=>{if((""===e.src||-1!==e.src.indexOf("blob:"))&&!em(e,n,s,!0)){l.push(e);let i=this.mirror.getId(e);p.has(i)||p.set(i,t)}}),l},b=e=>V(this,void 0,void 0,function*(){if(u&&e-u<c)return void(d=requestAnimationFrame(b));u=e;let t=t=>{let i=this.mirror.getId(t),n=p.get(i),s=!l.initialSnapshotDelay||e-n>l.initialSnapshotDelay;return this.debug(t,{delay:l.initialSnapshotDelay,delta:e-n,hadLoadingTime:s}),s},i=[];i.push(...h(e).filter(t).map(e=>this.snapshot(e))),i.push(...m(e).filter(t).map(e=>V(this,void 0,void 0,function*(){this.debug(e,"starting video snapshotting");let t=this.mirror.getId(e);if(this.snapshotInProgressMap.get(t))this.debug(e,"video snapshotting already in progress for",t);else{this.snapshotInProgressMap.set(t,!0);try{let{width:i,height:n}=e.getBoundingClientRect(),{actualWidth:s,actualHeight:a}={actualWidth:e.videoWidth,actualHeight:e.videoHeight},c=Math.max(s,a),d=o||1;r&&(d=Math.min(d,r/c));let u=s*d,p=a*d,h=yield createImageBitmap(e,{resizeWidth:u,resizeHeight:p}),m=Math.max(i,n)/c,b=s*m,Z=a*m,y=(i-b)/2,g=(n-Z)/2;this.debug(e,"created image bitmap",{actualWidth:s,actualHeight:a,boxWidth:i,boxHeight:n,outputWidth:b,outputHeight:Z,resizeWidth:u,resizeHeight:p,scale:d,outputScale:m,offsetX:y,offsetY:g}),this.worker.postMessage({id:t,bitmap:h,width:u,height:p,dx:y,dy:g,dw:b,dh:Z,dataURLOptions:l.dataURLOptions,logDebug:!!this.logger},[h]),this.debug(e,"send message")}catch(t){this.debug(e,"failed to snapshot",t)}finally{this.snapshotInProgressMap.set(t,!1)}}}))),yield Promise.all(i).catch(console.error),d=requestAnimationFrame(b)});d=requestAnimationFrame(b),this.resetObservers=()=>{a(),d&&cancelAnimationFrame(d)}}initCanvasMutationObserver(e,t,i){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();let n=e1(e,t,i,!1),s=function(e,t,i,n){let s=[];for(let l of Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype))try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[l])continue;let o=er(t.CanvasRenderingContext2D.prototype,l,function(s){return function(...o){return em(this.canvas,i,n,!0)||setTimeout(()=>{let i=e2(o,t,this);e(this.canvas,{type:eR["2D"],property:l,args:i})},0),s.apply(this,o)}});s.push(o)}catch(n){let i=eo(t.CanvasRenderingContext2D.prototype,l,{set(t){e(this.canvas,{type:eR["2D"],property:l,args:[t],setter:!0})}});s.push(i)}return()=>{s.forEach(e=>e())}}(this.processMutation.bind(this),e,t,i),l=function(e,t,i,n,s){let l=[];return l.push(...e5(t.WebGLRenderingContext.prototype,eR.WebGL,e,i,n,0,t)),void 0!==t.WebGL2RenderingContext&&l.push(...e5(t.WebGL2RenderingContext.prototype,eR.WebGL2,e,i,n,0,t)),()=>{l.forEach(e=>e())}}(this.processMutation.bind(this),e,t,i);this.resetObservers=()=>{n(),s(),l()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){let e=t=>{this.rafStamps.latestId=t,requestAnimationFrame(e)};requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((e,t)=>{let i=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,i)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;let i=this.pendingCanvasMutations.get(e);if(!i||-1===t)return;let n=i.map(e=>(function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)0>t.indexOf(n[s])&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(i[n[s]]=e[n[s]])}return i})(e,["type"])),{type:s}=i[0];this.mutationCb({id:t,type:s,commands:n}),this.pendingCanvasMutations.delete(e)}}class tn{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new eS,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;let i={id:t,styleIds:[]},n=[];for(let t of e){let e;this.styleMirror.has(t)?e=this.styleMirror.getId(t):(e=this.styleMirror.add(t),n.push({styleId:e,rules:Array.from(t.rules||CSSRule,(e,t)=>({rule:f(e),index:t}))})),i.styleIds.push(e)}n.length>0&&(i.styles=n),this.adoptedStyleSheetCb(i)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class ts{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){requestAnimationFrame(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(e,t){let i=this.nodeMap.get(e);return i&&Array.from(i).some(e=>e!==t)}add(e,t){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}function tl(e){return Object.assign(Object.assign({},e),{timestamp:ea()})}let to,tr,ta,tc=!1,td=new C;function tu(e={}){var t,i,s,l,o,r,a,c;let d;let{emit:u,checkoutEveryNms:p,checkoutEveryNth:h,blockClass:m="highlight-block",blockSelector:b=null,ignoreClass:Z="highlight-ignore",ignoreSelector:y=null,maskTextClass:g="highlight-mask",maskTextSelector:I=null,inlineStylesheet:S=!0,maskAllInputs:V,maskInputOptions:X,slimDOMOptions:G,maskInputFn:W,maskTextFn:f=N,hooks:R,packFn:v,sampling:k={},mousemoveWait:T,recordDOM:w=!0,recordCanvas:L=!1,recordCrossOriginIframes:x=!1,recordAfter:J="DOMContentLoaded"===e.recordAfter?e.recordAfter:"load",userTriggeredOnInput:K=!1,collectFonts:Y=!1,inlineImages:U=!1,plugins:F,keepIframeSrcFn:H=()=>!1,privacySetting:E="default",ignoreCSSAttributes:M=new Set([]),errorHandler:z,logger:O}=e,P=Object.assign(Object.assign({},e.dataURLOptions),null===(i=null===(t=e.sampling)||void 0===t?void 0:t.canvas)||void 0===i?void 0:i.dataURLOptions);n=z;let B=!x||window.parent===window,A=!1;if(!B)try{window.parent.document&&(A=!1)}catch(e){A=!0}if(B&&!u)throw Error("emit function is required");void 0!==T&&void 0===k.mousemove&&(k.mousemove=T),td.reset();let D=!0===V?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==X?X:{password:!0},Q=!0===G||"all"===G?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===G,headMetaDescKeywords:"all"===G}:G||{};!function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw TypeError("1 argument is required");do if(this===t)return!0;while(t=t&&t.parentNode);return!1})}();let j=0,_=e=>{for(let t of F||[])t.eventProcessor&&(e=t.eventProcessor(e));return v&&!A&&(e=v(e)),e};to=(e,t)=>{var i;if(!(null===(i=eJ[0])||void 0===i)&&i.isFrozen()&&e.type!==eG.FullSnapshot&&(e.type!==eG.IncrementalSnapshot||e.data.source!==eW.Mutation)&&eJ.forEach(e=>e.unfreeze()),B)null==u||u(_(e),t);else if(A){let i={type:"rrweb",event:_(e),origin:window.location.origin,isCheckout:t};window.parent.postMessage(i,"*")}if(e.type===eG.FullSnapshot)d=e,j=0;else if(e.type===eG.IncrementalSnapshot){if(e.data.source===eW.Mutation&&e.data.isAttachIframe)return;j++;let t=h&&j>=h,i=p&&e.timestamp-d.timestamp>p;(t||i)&&tr(!0)}};let q=e=>{to(tl({type:eG.IncrementalSnapshot,data:Object.assign({source:eW.Mutation},e)}))},$=e=>to(tl({type:eG.IncrementalSnapshot,data:Object.assign({source:eW.Scroll},e)})),ee=e=>to(tl({type:eG.IncrementalSnapshot,data:Object.assign({source:eW.CanvasMutation},e)})),en=new tn({mutationCb:q,adoptedStyleSheetCb:e=>to(tl({type:eG.IncrementalSnapshot,data:Object.assign({source:eW.AdoptedStyleSheet},e)}))}),es=new eD({mirror:td,mutationCb:q,stylesheetManager:en,recordCrossOriginIframes:x,wrappedEmit:to});for(let e of F||[])e.getMirror&&e.getMirror({nodeMirror:td,crossOriginIframeMirror:es.crossOriginIframeMirror,crossOriginIframeStyleMirror:es.crossOriginIframeStyleMirror});let el=new ts;ta=new ti({recordCanvas:L,recordVideos:U,mutationCb:ee,win:window,blockClass:m,blockSelector:b,mirror:td,sampling:null===(s=null==k?void 0:k.canvas)||void 0===s?void 0:s.fps,samplingManual:null===(l=null==k?void 0:k.canvas)||void 0===l?void 0:l.fpsManual,clearWebGLBuffer:null===(o=null==k?void 0:k.canvas)||void 0===o?void 0:o.clearWebGLBuffer,initialSnapshotDelay:null===(r=null==k?void 0:k.canvas)||void 0===r?void 0:r.initialSnapshotDelay,dataURLOptions:P,resizeFactor:null===(a=null==k?void 0:k.canvas)||void 0===a?void 0:a.resizeFactor,maxSnapshotDimension:null===(c=null==k?void 0:k.canvas)||void 0===c?void 0:c.maxSnapshotDimension,logger:O});let eo=new eQ({mutationCb:q,scrollCb:$,bypassOptions:{blockClass:m,blockSelector:b,maskTextClass:g,maskTextSelector:I,inlineStylesheet:S,maskInputOptions:D,dataURLOptions:P,maskTextFn:f,maskInputFn:W,recordCanvas:L,inlineImages:U,privacySetting:E,sampling:k,slimDOMOptions:Q,iframeManager:es,stylesheetManager:en,canvasManager:ta,keepIframeSrcFn:H,processedNodeManager:el},mirror:td});tr=(e=!1)=>{if(!w)return;to(tl({type:eG.Meta,data:{href:window.location.href,width:eu(),height:ed()}}),e),en.reset(),eo.init(),eJ.forEach(e=>e.lock());let t=function(e,t){let{mirror:i=new C,blockClass:n="highlight-block",blockSelector:s=null,maskTextClass:l="highlight-mask",maskTextSelector:o=null,inlineStylesheet:r=!0,inlineImages:a=!1,recordCanvas:c=!1,maskAllInputs:d=!1,maskTextFn:u,maskInputFn:p,slimDOM:h=!1,dataURLOptions:m,preserveWhiteSpace:b,onSerialize:Z,onIframeLoad:y,iframeLoadTimeout:g,onStylesheetLoad:I,stylesheetLoadTimeout:S,keepIframeSrcFn:V=()=>!1,privacySetting:X="default"}=t||{};return et(e,{doc:e,mirror:i,blockClass:n,blockSelector:s,maskTextClass:l,maskTextSelector:o,skipChild:!1,inlineStylesheet:r,maskInputOptions:!0===d?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===d?{password:!0}:d,maskTextFn:u,maskInputFn:p,slimDOMOptions:h||"all"===h?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===h,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:h||{},dataURLOptions:m,inlineImages:a,recordCanvas:c,preserveWhiteSpace:b,onSerialize:Z,onIframeLoad:y,iframeLoadTimeout:g,onStylesheetLoad:I,stylesheetLoadTimeout:S,keepIframeSrcFn:V,newlyAddedElement:!1,privacySetting:X})}(document,{mirror:td,blockClass:m,blockSelector:b,maskTextClass:g,maskTextSelector:I,inlineStylesheet:S,maskAllInputs:D,maskTextFn:f,slimDOM:Q,dataURLOptions:P,recordCanvas:L,inlineImages:U,privacySetting:E,onSerialize:e=>{ey(e,td)&&es.addIframe(e),eg(e,td)&&en.trackLinkElement(e),eI(e)&&eo.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{es.attachIframe(e,t),eo.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{en.attachLinkElement(e,t)},keepIframeSrcFn:H});if(!t)return console.warn("Failed to snapshot the document");to(tl({type:eG.FullSnapshot,data:{node:t,initialOffset:ec(window)}}),e),eJ.forEach(e=>e.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&en.adoptStyleSheets(document.adoptedStyleSheets,td.getId(document))};try{let e=[],t=e=>{var t;return ex(eO)({mutationCb:q,mousemoveCb:(e,t)=>to(tl({type:eG.IncrementalSnapshot,data:{source:t,positions:e}})),mouseInteractionCb:e=>to(tl({type:eG.IncrementalSnapshot,data:Object.assign({source:eW.MouseInteraction},e)})),scrollCb:$,viewportResizeCb:e=>to(tl({type:eG.IncrementalSnapshot,data:Object.assign({source:eW.ViewportResize},e)})),inputCb:e=>to(tl({type:eG.IncrementalSnapshot,data:Object.assign({source:eW.Input},e)})),mediaInteractionCb:e=>to(tl({type:eG.IncrementalSnapshot,data:Object.assign({source:eW.MediaInteraction},e)})),styleSheetRuleCb:e=>to(tl({type:eG.IncrementalSnapshot,data:Object.assign({source:eW.StyleSheetRule},e)})),styleDeclarationCb:e=>to(tl({type:eG.IncrementalSnapshot,data:Object.assign({source:eW.StyleDeclaration},e)})),canvasMutationCb:ee,fontCb:e=>to(tl({type:eG.IncrementalSnapshot,data:Object.assign({source:eW.Font},e)})),selectionCb:e=>{to(tl({type:eG.IncrementalSnapshot,data:Object.assign({source:eW.Selection},e)}))},customElementCb:e=>{to(tl({type:eG.IncrementalSnapshot,data:Object.assign({source:eW.CustomElement},e)}))},blockClass:m,ignoreClass:Z,ignoreSelector:y,maskTextClass:g,maskTextSelector:I,maskInputOptions:D,inlineStylesheet:S,sampling:k,recordDOM:w,recordCanvas:L,inlineImages:U,userTriggeredOnInput:K,collectFonts:Y,doc:e,maskInputFn:W,maskTextFn:f,keepIframeSrcFn:H,blockSelector:b,slimDOMOptions:Q,dataURLOptions:P,mirror:td,iframeManager:es,stylesheetManager:en,shadowDomManager:eo,processedNodeManager:el,canvasManager:ta,ignoreCSSAttributes:M,privacySetting:E,plugins:(null===(t=null==F?void 0:F.filter(e=>e.observer))||void 0===t?void 0:t.map(e=>({observer:e.observer,options:e.options,callback:t=>to(tl({type:eG.Plugin,data:{plugin:e.name,payload:t}}))})))||[]},R)};es.addLoadListener(i=>{try{e.push(t(i.contentDocument))}catch(e){console.warn(e)}});let i=()=>{tr(),e.push(t(document)),tc=!0};return"interactive"===document.readyState||"complete"===document.readyState?i():(e.push(ei("DOMContentLoaded",()=>{to(tl({type:eG.DomContentLoaded,data:{}})),"DOMContentLoaded"===J&&i()})),e.push(ei("load",()=>{to(tl({type:eG.Load,data:{}})),"load"===J&&i()},window))),()=>{e.forEach(e=>e()),el.destroy(),tc=!1,n=void 0}}catch(e){console.warn(e)}}tu.addCustomEvent=(e,t)=>{tc&&to(tl({type:eG.Custom,data:{tag:e,payload:t}}))},tu.freezePage=()=>{eJ.forEach(e=>e.freeze())},tu.takeFullSnapshot=e=>{if(!tc)throw Error("please take full snapshot after start recording");tr(e)},tu.snapshotCanvas=e=>V(void 0,void 0,void 0,function*(){if(!ta)throw Error("canvas manager is not initialized");yield ta.snapshot(e)}),tu.mirror=td;let{addCustomEvent:tp}=tu,th={key:"_sid"},tm=e=>{let t=e?Object.assign({},th,e):th,i=0;return{name:"rrweb/sequential-id@1",eventProcessor:e=>(Object.assign(e,{[t.key]:++i}),e),options:t}};function tb(e){return"[object Object]"===Object.prototype.toString.call(e)}function tZ(e,t){let i={numOfKeysLimit:50,depthOfLimit:4};Object.assign(i,t);let n=[],s=[];return JSON.stringify(e,function(e,t){var l;if(n.length>0){let i=n.indexOf(this);~i?n.splice(i+1):n.push(this),~i?s.splice(i,1/0,e):s.push(e),~n.indexOf(t)&&(t=n[0]===t?"[Circular ~]":"[Circular ~."+s.slice(0,n.indexOf(t)).join(".")+"]")}else n.push(t);if(null==t)return t;if(tb(l=t)&&Object.keys(l).length>i.numOfKeysLimit||"function"==typeof l||(l instanceof Event&&!1===l.isTrusted?1===Object.keys(l).length:!!(tb(l)&&function e(t,i){if(0===i)return!0;for(let n of Object.keys(t))if(tb(t[n])&&e(t[n],i-1))return!0;return!1}(l,i.depthOfLimit)))){let e;return e=t.toString(),i.stringLengthLimit&&e.length>i.stringLengthLimit&&(e=`${e.slice(0,i.stringLengthLimit)}...`),e}if(t instanceof Event){let e={};for(let i in t){let n=t[i];Array.isArray(n)?e[i]=function(e){if(!e||!e.outerHTML)return"";let t="";for(;e.parentElement;){let i=e.localName;if(!i)break;i=i.toLowerCase();let n=e.parentElement,s=[];if(n.children&&n.children.length>0)for(let e=0;e<n.children.length;e++){let t=n.children[e];t.localName&&t.localName.toLowerCase&&t.localName.toLowerCase()===i&&s.push(t)}s.length>1&&(i+=":eq("+s.indexOf(e)+")"),t=i+(t?">"+t:""),e=n}return t}(n.length?n[0]:null):e[i]=n}return e}return t instanceof Node?t instanceof HTMLElement?t?t.outerHTML:"":t.nodeName:t instanceof Error?t.name+": "+t.message:t})}var ty="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==s.c?s.c:"undefined"!=typeof self?self:{};function tg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var tI,tS,tV,tX,tG,tW={exports:{}},tf={exports:{}};tW.exports=(tI||(tI=1,tf.exports=function(){function e(e){return e.charAt(0).toUpperCase()+e.substring(1)}function t(e){return function(){return this[e]}}var i=["isConstructor","isEval","isNative","isToplevel"],n=["columnNumber","lineNumber"],s=["fileName","functionName","source"],l=i.concat(n,s,["args"],["evalOrigin"]);function o(t){if(t)for(var i=0;i<l.length;i++)void 0!==t[l[i]]&&this["set"+e(l[i])](t[l[i]])}o.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof o)this.evalOrigin=e;else{if(!(e instanceof Object))throw TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new o(e)}},toString:function(){var e=this.getFileName()||"",t=this.getLineNumber()||"",i=this.getColumnNumber()||"",n=this.getFunctionName()||"";return this.getIsEval()?e?"[eval] ("+e+":"+t+":"+i+")":"[eval]:"+t+":"+i:n?n+" ("+e+":"+t+":"+i+")":e+":"+t+":"+i}},o.fromString=function(e){var t=e.indexOf("("),i=e.lastIndexOf(")"),n=e.substring(0,t),s=e.substring(t+1,i).split(","),l=e.substring(i+1);if(0===l.indexOf("@"))var r=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(l,""),a=r[1],c=r[2],d=r[3];return new o({functionName:n,args:s||void 0,fileName:a,lineNumber:c||void 0,columnNumber:d||void 0})};for(var r=0;r<i.length;r++)o.prototype["get"+e(i[r])]=t(i[r]),o.prototype["set"+e(i[r])]=function(e){return function(t){this[e]=!!t}}(i[r]);for(var a=0;a<n.length;a++)o.prototype["get"+e(n[a])]=t(n[a]),o.prototype["set"+e(n[a])]=function(e){return function(t){if(!(!isNaN(parseFloat(t))&&isFinite(t)))throw TypeError(e+" must be a Number");this[e]=Number(t)}}(n[a]);for(var c=0;c<s.length;c++)o.prototype["get"+e(s[c])]=t(s[c]),o.prototype["set"+e(s[c])]=function(e){return function(t){this[e]=String(t)}}(s[c]);return o}()),tS=tf.exports,tV=/(^|@)\S+:\d+/,tX=/^\s*at .*(\S+:\d+|\(native\))/m,tG=/^(eval@)?(\[native code])?$/,{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(tX))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(e){return e.stack.split(`
`).filter(function(e){return!!e.match(tX)},this).map(function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var t=e.replace(/^\s+/,"").replace(/\(eval code/g,"("),i=t.match(/ (\((.+):(\d+):(\d+)\)$)/),n=(t=i?t.replace(i[0],""):t).split(/\s+/).slice(1),s=this.extractLocation(i?i[1]:n.pop());return new tS({functionName:n.join(" ")||void 0,fileName:["eval","<anonymous>"].indexOf(s[0])>-1?void 0:s[0],lineNumber:s[1],columnNumber:s[2],source:e})},this)},parseFFOrSafari:function(e){return e.stack.split(`
`).filter(function(e){return!e.match(tG)},this).map(function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return new tS({functionName:e});var t=/((.*".+"[^@]*)?[^@]*)(?:@)/,i=e.match(t),n=i&&i[1]?i[1]:void 0,s=this.extractLocation(e.replace(t,""));return new tS({functionName:n,fileName:s[0],lineNumber:s[1],columnNumber:s[2],source:e})},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf(`
`)>-1&&e.message.split(`
`).length>e.stacktrace.split(`
`).length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)/i,i=e.message.split(`
`),n=[],s=2,l=i.length;s<l;s+=2){var o=t.exec(i[s]);o&&n.push(new tS({fileName:o[2],lineNumber:o[1],source:i[s]}))}return n},parseOpera10:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,i=e.stacktrace.split(`
`),n=[],s=0,l=i.length;s<l;s+=2){var o=t.exec(i[s]);o&&n.push(new tS({functionName:o[3]||void 0,fileName:o[2],lineNumber:o[1],source:i[s]}))}return n},parseOpera11:function(e){return e.stack.split(`
`).filter(function(e){return!!e.match(tV)&&!e.match(/^Error created at/)},this).map(function(e){var t,i=e.split("@"),n=this.extractLocation(i.pop()),s=i.shift()||"",l=s.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return s.match(/\(([^)]*)\)/)&&(t=s.replace(/^[^(]+\(([^)]*)\)$/,"$1")),new tS({functionName:l,args:void 0===t||"[arguments not available]"===t?void 0:t.split(","),fileName:n[0],lineNumber:n[1],columnNumber:n[2],source:e})},this)}});let tC=tg(tW.exports);var tR={exports:{}};!function(e,t){function i(e,t){var i=[],n=[];return null==t&&(t=function(e,t){return i[0]===t?"[Circular ~]":"[Circular ~."+n.slice(0,i.indexOf(t)).join(".")+"]"}),function(s,l){if(i.length>0){var o=i.indexOf(this);~o?i.splice(o+1):i.push(this),~o?n.splice(o,1/0,s):n.push(s),~i.indexOf(l)&&(l=t.call(this,s,l))}else i.push(l);return null==e?l:e.call(this,s,l)}}(e.exports=function(e,t,n,s){return JSON.stringify(e,i(t,s),n)}).getSerialize=i}(tR);let tv=tg(tR.exports);function tk(e,t,i,n){var s,l,o,r;let a=[];try{a=tC.parse(null!=n?n:t)}catch(e){a=tC.parse(Error())}let c={};t instanceof Error&&(t=t.message).cause&&(c={"exception.cause":t.cause});let d=tN(a);e({event:tv(t),type:"window.onerror",url:window.location.href,source:null!=i?i:"",lineNumber:null!=(s=d[0])&&s.lineNumber?null==(l=d[0])?void 0:l.lineNumber:0,columnNumber:null!=(o=d[0])&&o.columnNumber?null==(r=d[0])?void 0:r.columnNumber:0,stackTrace:d,timestamp:new Date().toISOString(),payload:c?tv(c):void 0})}let tT=(e,{enablePromisePatch:t})=>{if("undefined"==typeof window)return()=>{};let i=window.onerror=(t,i,n,s,l)=>{tk(e,t,i,l)},n=window.onunhandledrejection=t=>{if(t.reason){let i=t.promise;i.getStack?tk(e,t.reason,t.type,i.getStack()):tk(e,t.reason,t.type)}},s=window.Promise,l=class extends s{constructor(e){super(e),I(this,"promiseCreationError"),this.promiseCreationError=Error()}getStack(){return this.promiseCreationError}static shouldPatch(){let e=void 0===window.Zone;return t&&e}};return l.shouldPatch()&&(window.Promise=l),()=>{window.Promise=s,window.onunhandledrejection=n,window.onerror=i}},tN=e=>{var t,i;if(0===e.length)return e;let n=e[0];return null!=(t=n.fileName)&&t.includes("highlight.run")||null!=(i=n.fileName)&&i.includes("highlight.io")||"new highlightPromise"===n.functionName?e.slice(1):e},tw=["assert","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"];var tL=((ny=tL||{}).DeviceMemory="DeviceMemory",ny.ViewportHeight="ViewportHeight",ny.ViewportWidth="ViewportWidth",ny.ViewportArea="ViewportArea",ny),tx=((ng=tx||{}).Device="Device",ng.WebVital="WebVital",ng.Performance="Performance",ng.Frontend="Frontend",ng.Backend="Backend",ng);let tJ=['["\\"Script error.\\""]','"Script error."','["\\"Load failed.\\""]','"Load failed."','["\\"Network request failed.\\""]','"Network request failed."','["\\"Document is not focused.\\""]','"Document is not focused."','["\\"Failed to fetch\\""]','"Failed to fetch"','[{"isTrusted":true}]','{"isTrusted":true}','["{}"]','"{}"','[""]','""','["\\"\\""]','""'],tK=["websocket error",'\\"ResizeObserver loop'],tY=(e,t,i)=>{let n=tU(t,e.headers,i);return y(Z({},e),{headers:n})},tU=(e,t,i)=>{var n,s;let l=Z({},t);return i?null==(n=Object.keys(l))||n.forEach(e=>{[...i].includes(null==e?void 0:e.toLowerCase())||(l[e]="[REDACTED]")}):null==(s=Object.keys(l))||s.forEach(t=>{[...tF,...e].includes(null==t?void 0:t.toLowerCase())&&(l[t]="[REDACTED]")}),l},tF=["authorization","cookie","proxy-authorization","token"],tH=["https://www.googleapis.com/identitytoolkit","https://securetoken.googleapis.com"];var tE=((nI=tE||{}).RECORDING_START_TIME="highlightRecordingStartTime",nI.SEGMENT_LAST_SENT_HASH_KEY="HIGHLIGHT_SEGMENT_LAST_SENT_HASH_KEY",nI.SESSION_DATA="sessionData",nI.SESSION_SECURE_ID="sessionSecureID",nI.USER_IDENTIFIER="highlightIdentifier",nI.USER_OBJECT="highlightUserObject",nI.PAYLOAD_ID="payloadId",nI);let tM="localStorage",tz=new class{constructor(){I(this,"storage",{})}getItem(e){var t;return null!=(t=this.storage[e])?t:""}setItem(e,t){this.storage[e]=t}removeItem(e){delete this.storage[e]}},tO=()=>{try{switch(tM){case"localStorage":return window.localStorage;case"sessionStorage":return window.sessionStorage}}catch(e){return tz}},tP=e=>tO().getItem(e),tB=(e,t)=>tO().setItem(e,t),tA=e=>tO().removeItem(e),tD=e=>{if("sessionStorage"===tM)return void console.warn("highlight.io cannot use local storage; segment integration will not work");let t=window.localStorage.setItem;window.localStorage.setItem=function(){let[i,n]=arguments;e({keyName:i,keyValue:n}),t.apply(this,[i,n])}},tQ={normal:{bytes:1e7,time:24e4},canvas:{bytes:16e6,time:5e3}},tj=()=>{let e=JSON.parse(tP(tE.SESSION_DATA)||"{}");if(e&&e.lastPushTime&&Date.now()-e.lastPushTime<9e5)return e},t_=function(e){null!==e?(tB(tE.SESSION_DATA,JSON.stringify(e)),tq(e.sessionSecureID)):tA(tE.SESSION_DATA)},tq=function(e){return tB(tE.SESSION_SECURE_ID,e)};var t$={};let t0="X-Highlight-Request",t2=e=>{let t=e;return e.startsWith("https://")||e.startsWith("http://")||(t=`${window.location.origin}${t}`),t.replace(/\/+$/,"")},t9=(e,t,i,n)=>{e.sort((e,t)=>e.responseEnd-t.responseEnd);let s=e.reduce((e,t)=>{let n=t2(t.name);return t.initiatorType===i?e[i][n]=[...e[i][n]||[],t]:e.others[n]=[...e.others[n]||[],t],e},{xmlhttprequest:{},others:{},fetch:{}}),l={};for(let e in l=t.reduce((e,t)=>{let i=t2(t.request.url);return e[i]=[...e[i]||[],t],e},l),s[i]){let t=s[i][e],n=l[e];if(!n)continue;let o=Math.max(t.length-n.length,0);for(let e=o;e<t.length;e++)t[e]&&(t[e].requestResponsePair=n[e-o])}let o=[];for(let e in s)for(let t in s[e])o=o.concat(s[e][t]);return o.sort((e,t)=>e.fetchStart-t.fetchStart).reduce((e,t)=>{let i=t.requestResponsePair;return(!i||(i=((e,{headersToRedact:t,headersToRecord:i,requestResponseSanitizer:n})=>{var s,l;let o=e;if(n){let e=!0;try{o.request.body=JSON.parse(o.request.body)}catch(t){e=!1}let t=!0;try{o.response.body=JSON.parse(o.response.body)}catch(e){t=!1}try{o=n(o)}catch(e){}finally{e=e&&!!(null!=(s=null==o?void 0:o.request)&&s.body),t=t&&!!(null!=(l=null==o?void 0:o.response)&&l.body),e&&(o.request.body=JSON.stringify(o.request.body)),t&&(o.response.body=JSON.stringify(o.response.body))}if(!o)return null}let r=o,{request:a,response:c}=r,d=g(r,["request","response"]);return Z({request:tY(a,t,i),response:tY(c,t,i)},d)})(t.requestResponsePair,n)))&&(t.toJSON=function(){let e=window.performance.timeOrigin;return{initiatorType:this.initiatorType,startTimeAbs:e+this.startTime,connectStartAbs:e+this.connectStart,connectEndAbs:e+this.connectEnd,domainLookupStartAbs:e+this.domainLookupStart,domainLookupEndAbs:e+this.domainLookupEnd,fetchStartAbs:e+this.fetchStart,redirectStartAbs:e+this.redirectStart,redirectEndAbs:e+this.redirectEnd,requestStartAbs:e+this.requestStart,responseStartAbs:e+this.responseStart,responseEndAbs:e+this.responseEnd,secureConnectionStartAbs:e+this.secureConnectionStart,workerStartAbs:e+this.workerStart,name:this.name,transferSize:this.transferSize,encodedBodySize:this.encodedBodySize,decodedBodySize:this.decodedBodySize,nextHopProtocol:this.nextHopProtocol,requestResponsePairs:i}},e.push(t)),e},[])},t1=(e,t,i)=>{var n;return!(e.toLocaleLowerCase().includes(null!=(n=t$.REACT_APP_PUBLIC_GRAPH_URI)?n:"highlight.io")||e.toLocaleLowerCase().includes("highlight.io")||e.toLocaleLowerCase().includes(t))||t5(e,i)},t5=(e,t)=>{var i;let n=[];!0===t?(n=["localhost",/^\//],null!=(i=null==window?void 0:window.location)&&i.host&&n.push(window.location.host)):t instanceof Array&&(n=t);let s=!1;return n.forEach(t=>{e.match(t)&&(s=!0)}),s},t3=()=>{var e;return[null!=(e=tP(tE.SESSION_SECURE_ID))?e:"",function(e){for(var t="",i=0;i<10;i++)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return t}(0)]},t4=(e,t)=>e+"/"+t,t7=(e,t,i,n,s,l)=>{let o=XMLHttpRequest.prototype,r=o.open,a=o.send,c=o.setRequestHeader;return o.open=function(e,t){return this._url="string"==typeof t?t:t.toString(),this._method=e,this._requestHeaders={},this._shouldRecordHeaderAndBody=!n.some(e=>this._url.toLowerCase().includes(e)),r.apply(this,arguments)},o.setRequestHeader=function(e,t){return this._requestHeaders[e]=t,c.apply(this,arguments)},o.send=function(n){if(!t1(this._url,t,i))return a.apply(this,arguments);let[o,r]=t3();t5(this._url,i)&&this.setRequestHeader(t0,t4(o,r));let c=this._shouldRecordHeaderAndBody,d={sessionSecureID:o,id:r,url:this._url,verb:this._method,headers:c?this._requestHeaders:{},body:void 0};if(c&&n){let e=t6(n,d.url);e&&(d.body=ie(e,s,l,d.headers))}return this.addEventListener("load",function(){return S(this,null,function*(){let t={status:this.status,headers:{},body:void 0};if(c){let e=this.getAllResponseHeaders().trim().split(/[\r\n]+/),i={};if(e.forEach(function(e){let t=e.split(": ");i[t.shift()]=t.join(": ")}),t.headers=i,n){let e=t6(n,d.url);e&&(d.body=ie(e,s,l,t.headers))}if(""===this.responseType||"text"===this.responseType)t.body=ie(this.responseText,s,l,t.headers),t.size=8*this.responseText.length;else if("blob"===this.responseType){if(this.response instanceof Blob)try{let e=yield this.response.text();t.body=ie(e,s,l,t.headers),t.size=this.response.size}catch(e){}}else try{t.body=ie(this.response,s,l,t.headers)}catch(e){}}e({request:d,response:t,urlBlocked:!c})})}),this.addEventListener("error",function(){return S(this,null,function*(){e({request:d,response:{status:this.status,headers:void 0,body:void 0},urlBlocked:!1})})}),a.apply(this,arguments)},()=>{o.open=r,o.send=a,o.setRequestHeader=c}},t6=(e,t)=>{if("string"==typeof e){if(!(null!=t&&t.includes("localhost"))&&!(null!=t&&t.includes("highlight.run"))||!e.includes("pushPayload"))return e}else if("object"==typeof e||"number"==typeof e||"boolean"==typeof e)return tv(e);return null},t8={"application/json":67108864,"text/plain":67108864},ie=(e,t,i,n)=>{var s,l,o;let r=65536;if(n){let e="";e="function"==typeof n.get?null!=(s=n.get("content-type"))?s:"":null!=(l=n["content-type"])?l:"";try{e=e.split(";")[0]}catch(e){}r=null!=(o=t8[e])?o:65536}if(e){if(t)try{let i=JSON.parse(e);Array.isArray(i)?i.forEach(e=>{Object.keys(e).forEach(i=>{t.includes(i.toLocaleLowerCase())&&(e[i]="[REDACTED]")})}):Object.keys(i).forEach(e=>{t.includes(e.toLocaleLowerCase())&&(i[e]="[REDACTED]")}),e=JSON.stringify(i)}catch(e){}if(i)try{let t=JSON.parse(e);Object.keys(t).forEach(e=>{i.includes(e.toLocaleLowerCase())||(t[e]="[REDACTED]")}),e=JSON.stringify(t)}catch(e){}}try{e=e.slice(0,r)}catch(e){}return e},it=(e,t,i,n,s,l)=>{let o=window._fetchProxy;return window._fetchProxy=function(r,a){let{method:c,url:d}=ii(r,a);if(!t1(d,t,i))return o.call(this,r,a);let[u,p]=t3();if(t5(d,i)){a=a||{};let e=new Headers(a.headers);r instanceof Request&&[...r.headers].forEach(([t,i])=>e.set(t,i)),e.set(t0,t4(u,p)),a.headers=Object.fromEntries(e.entries())}let h={sessionSecureID:u,id:p,headers:{},body:void 0,url:d,verb:c},m=!n.some(e=>d.toLowerCase().includes(e));m&&(h.headers=Object.fromEntries(new Headers(null==a?void 0:a.headers).entries()),h.body=ie(null==a?void 0:a.body,s,l,null==a?void 0:a.headers));let b=o.call(this,r,a);return is(b,h,e,m,s,l),b},()=>{window._fetchProxy=o}},ii=(e,t)=>({method:t&&t.method||"object"==typeof e&&"method"in e&&e.method||"GET",url:"object"==typeof e?"url"in e&&e.url?e.url:e.toString():e}),is=(e,t,i,n,s,l)=>{e.then(e=>S(this,null,function*(){let o={body:void 0,headers:void 0,status:0,size:0},r=!1,a=!n;if("stack"in e||e instanceof Error)o=y(Z({},o),{body:e.message,status:0,size:void 0}),r=!0;else if("status"in e){if(o=y(Z({},o),{status:e.status}),n){let t;try{let i=e.clone().body;if(i){let n,o=i.getReader(),r=new TextDecoder,a="";for(;!(n=yield o.read()).done;){let e=n.value;a+=r.decode(e)}t=a,t=ie(t,s,l,e.headers)}else t=""}catch(e){t=`Unable to clone response: ${e}`}o.body=t,o.headers=Object.fromEntries(e.headers.entries()),o.size=8*t.length}"opaque"!==e.type&&"opaqueredirect"!==e.type||(a=!0,o=y(Z({},o),{body:"CORS blocked request"})),r=!0}r&&i({request:t,response:o,urlBlocked:a})})).catch(()=>{})},il=({xhrCallback:e,fetchCallback:t,webSocketRequestCallback:i,webSocketEventCallback:n,disableWebSocketRecording:s,bodyKeysToRedact:l,backendUrl:o,tracingOrigins:r,urlBlocklist:a,sessionSecureID:c,bodyKeysToRecord:d})=>{let u=t7(e,o,r,a,l,d),p=it(t,o,r,a,l,d),h=s?()=>{}:((e,t,i)=>{let n=window._highlightWebSocketRequestCallback;window._highlightWebSocketRequestCallback=e;let s=window._highlightWebSocketEventCallback;return window._highlightWebSocketEventCallback=e=>{let n=g(e,["message","size"]);t(i.some(t=>e.name.toLowerCase().includes(t))?n:e)},()=>{window._highlightWebSocketRequestCallback=n,window._highlightWebSocketEventCallback=s}})(i,n,a);return()=>{u(),p(),h()}};var io={};class ir{constructor(e){var t,i;I(this,"disableConsoleRecording"),I(this,"reportConsoleErrors"),I(this,"enablePromisePatch"),I(this,"consoleMethodsToRecord"),I(this,"listeners"),I(this,"errors"),I(this,"messages"),I(this,"options"),I(this,"hasNetworkRecording",!0),I(this,"_backendUrl"),I(this,"disableNetworkRecording"),I(this,"enableRecordingNetworkContents"),I(this,"xhrNetworkContents"),I(this,"fetchNetworkContents"),I(this,"disableRecordingWebSocketContents"),I(this,"webSocketNetworkContents"),I(this,"webSocketEventContents"),I(this,"tracingOrigins"),I(this,"networkHeadersToRedact"),I(this,"networkBodyKeysToRedact"),I(this,"networkBodyKeysToRecord"),I(this,"networkHeaderKeysToRecord"),I(this,"lastNetworkRequestTimestamp"),I(this,"urlBlocklist"),I(this,"requestResponseSanitizer"),this.options=e,this.disableConsoleRecording=!!e.disableConsoleRecording,this.reportConsoleErrors=null!=(t=e.reportConsoleErrors)&&t,this.enablePromisePatch=null==(i=e.enablePromisePatch)||i,this.consoleMethodsToRecord=e.consoleMethodsToRecord||[...tw],this.listeners=[],this.errors=[],this.messages=[],this.lastNetworkRequestTimestamp=0}isListening(){return this.listeners.length>0}startListening(){if(this.isListening())return;let e=this;this.disableConsoleRecording||this.listeners.push(function(e,t){let i;let n=t.logger;if(!n)return()=>{};i="string"==typeof n?window[n]:n;let s=[];if(t.level.includes("error")&&window){let i=i=>{let{message:n,error:s}=i,l=[];s&&(l=tC.parse(s));let o=[tZ(n,t.stringifyOptions)];e({type:"Error",trace:l,time:Date.now(),value:o})};window.addEventListener("error",i),s.push(()=>{window&&window.removeEventListener("error",i)})}for(let n of t.level)s.push(function(i,n){return i[n]?function(e,t,i){try{if(!(t in e))return()=>{};let n=e[t],s=i(n);return"function"==typeof s&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:n}})),e[t]=s,()=>{e[t]=n}}catch(e){return()=>{}}}(i,n,i=>(...s)=>{i.apply(this,s);try{let i=tC.parse(Error()),l=t.serializeConsoleAttributes?s.map(e=>"object"==typeof e?tZ(e,t.stringifyOptions):e):s.filter(e=>"object"!=typeof e).map(e=>`${e}`);e({type:n,trace:i.slice(1),value:l,attributes:tZ(s.filter(e=>"object"==typeof e).reduce((e,t)=>Z(Z({},e),t),{}),t.stringifyOptions),time:Date.now()})}catch(e){i("highlight logger error:",e,...s)}}):()=>{}}(i,n));return()=>{s.forEach(e=>e())}}(t=>{var i,n,s;if(this.reportConsoleErrors&&("Error"===t.type||"error"===t.type)&&t.value&&t.trace){let l=tv(t.value);if(tJ.includes(l)||tK.some(e=>l.includes(e)))return;e.errors.push({event:l,type:"console.error",url:window.location.href,source:null!=(i=t.trace[0])&&i.fileName?t.trace[0].fileName:"",lineNumber:null!=(n=t.trace[0])&&n.lineNumber?t.trace[0].lineNumber:0,columnNumber:null!=(s=t.trace[0])&&s.columnNumber?t.trace[0].columnNumber:0,stackTrace:t.trace,timestamp:new Date().toISOString()})}e.messages.push(t)},{level:this.consoleMethodsToRecord,logger:"console",stringifyOptions:{depthOfLimit:10,numOfKeysLimit:100,stringLengthLimit:1e3}})),this.listeners.push(tT(t=>{tJ.includes(t.event)||tK.some(e=>t.event.includes(e))||e.errors.push(t)},{enablePromisePatch:this.enablePromisePatch})),ir.setupNetworkListener(this,this.options)}stopListening(){this.listeners.forEach(e=>e()),this.listeners=[]}static setupNetworkListener(e,t){var i,n,s,l,o,r,a,c,d,u,p,h;e._backendUrl=(null==t?void 0:t.backendUrl)||io.REACT_APP_PUBLIC_GRAPH_URI||"https://pub.highlight.run",e.xhrNetworkContents=[],e.fetchNetworkContents=[],e.webSocketNetworkContents=[],e.webSocketEventContents=[],e.networkHeadersToRedact=[],e.urlBlocklist=[],e.tracingOrigins=t.tracingOrigins||[],(null==t?void 0:t.disableNetworkRecording)!==void 0?(e.disableNetworkRecording=null==t?void 0:t.disableNetworkRecording,e.enableRecordingNetworkContents=!1,e.disableRecordingWebSocketContents=!0,e.networkHeadersToRedact=[],e.networkBodyKeysToRedact=[],e.urlBlocklist=[],e.networkBodyKeysToRecord=[],e.networkBodyKeysToRecord=[]):"boolean"==typeof(null==t?void 0:t.networkRecording)?(e.disableNetworkRecording=!t.networkRecording,e.enableRecordingNetworkContents=!1,e.disableRecordingWebSocketContents=!0,e.networkHeadersToRedact=[],e.networkBodyKeysToRedact=[],e.urlBlocklist=[]):((null==(i=t.networkRecording)?void 0:i.enabled)!==void 0?e.disableNetworkRecording=!t.networkRecording.enabled:e.disableNetworkRecording=!1,e.enableRecordingNetworkContents=(null==(n=t.networkRecording)?void 0:n.recordHeadersAndBody)||!1,e.disableRecordingWebSocketContents=(null==(s=t.networkRecording)?void 0:s.disableWebSocketEventRecordings)||!1,e.networkHeadersToRedact=(null==(o=null==(l=t.networkRecording)?void 0:l.networkHeadersToRedact)?void 0:o.map(e=>e.toLowerCase()))||[],e.networkBodyKeysToRedact=(null==(a=null==(r=t.networkRecording)?void 0:r.networkBodyKeysToRedact)?void 0:a.map(e=>e.toLowerCase()))||[],e.urlBlocklist=(null==(d=null==(c=t.networkRecording)?void 0:c.urlBlocklist)?void 0:d.map(e=>e.toLowerCase()))||[],e.urlBlocklist=[...e.urlBlocklist,...tH],e.requestResponseSanitizer=null==(u=t.networkRecording)?void 0:u.requestResponseSanitizer,e.networkHeaderKeysToRecord=null==(p=t.networkRecording)?void 0:p.headerKeysToRecord,e.networkHeaderKeysToRecord&&(e.networkHeadersToRedact=[],e.networkHeaderKeysToRecord=e.networkHeaderKeysToRecord.map(e=>e.toLocaleLowerCase())),e.networkBodyKeysToRecord=null==(h=t.networkRecording)?void 0:h.bodyKeysToRecord,e.networkBodyKeysToRecord&&(e.networkBodyKeysToRedact=[],e.networkBodyKeysToRecord=e.networkBodyKeysToRecord.map(e=>e.toLocaleLowerCase()))),!e.disableNetworkRecording&&e.enableRecordingNetworkContents&&e.listeners.push(il({xhrCallback:t=>{e.xhrNetworkContents.push(t)},fetchCallback:t=>{e.fetchNetworkContents.push(t)},webSocketRequestCallback:t=>{e.webSocketNetworkContents&&e.webSocketNetworkContents.push(t)},webSocketEventCallback:t=>{e.webSocketEventContents.push(t)},disableWebSocketRecording:e.disableRecordingWebSocketContents,bodyKeysToRedact:e.networkBodyKeysToRedact,backendUrl:e._backendUrl,tracingOrigins:e.tracingOrigins,urlBlocklist:e.urlBlocklist,sessionSecureID:t.sessionSecureID,bodyKeysToRecord:e.networkBodyKeysToRecord}))}static getRecordedNetworkResources(e,t){var i,n;let s=[],l=[];if(!e.disableNetworkRecording){let l=(null==(i=null==window?void 0:window.performance)?void 0:i.timeOrigin)||0;s=performance.getEntriesByType("resource");let o=2*(t-l);if(s=s.filter(t=>!(t.responseEnd<e.lastNetworkRequestTimestamp)&&t1(t.name,e._backendUrl,e.tracingOrigins)).map(e=>y(Z({},e.toJSON()),{offsetStartTime:e.startTime-o,offsetResponseEnd:e.responseEnd-o,offsetFetchStart:e.fetchStart-o})),e.lastNetworkRequestTimestamp=(null==(n=s.at(-1))?void 0:n.responseEnd)||e.lastNetworkRequestTimestamp,e.enableRecordingNetworkContents){let t={headersToRedact:e.networkHeadersToRedact,headersToRecord:e.networkHeaderKeysToRecord,requestResponseSanitizer:e.requestResponseSanitizer};s=t9(s,e.xhrNetworkContents,"xmlhttprequest",t),s=t9(s,e.fetchNetworkContents,"fetch",t)}}return e.disableRecordingWebSocketContents||(l=e.webSocketNetworkContents||[]),[...s,...l]}static getRecordedWebSocketEvents(e){let t=[];return e.disableNetworkRecording||e.disableRecordingWebSocketContents||(t=e.webSocketEventContents),t}static clearRecordedNetworkResources(e){e.disableNetworkRecording||(e.xhrNetworkContents=[],e.fetchNetworkContents=[],e.webSocketNetworkContents=[],e.webSocketEventContents=[],performance.clearResourceTimings())}}let ia=e=>{var t,i;e(window.location.href);let n=history.pushState;history.pushState=(t=history.pushState,function(){var e=t.apply(this,arguments);return window.dispatchEvent(new Event("pushstate")),window.dispatchEvent(new Event("locationchange")),e});let s=history.replaceState;history.replaceState=(i=history.replaceState,function(){var e=i.apply(this,arguments);return window.dispatchEvent(new Event("replacestate")),window.dispatchEvent(new Event("locationchange")),e});let l=()=>{window.dispatchEvent(new Event("locationchange"))};window.addEventListener("popstate",l);let o=function(){e(window.location.href)};return window.addEventListener("locationchange",o),()=>{window.removeEventListener("popstate",l),window.removeEventListener("locationchange",o),history.pushState=n,history.replaceState=s}},ic=JSON;function id(e,t){if(!e)throw Error(t)}let iu=/\r\n|[\n\r]/g;function ip(e,t){let i=0,n=1;for(let s of e.body.matchAll(iu)){if("number"==typeof s.index||function(e,t){if(!e)throw Error(null!=t?t:"Unexpected invariant triggered.")}(!1),s.index>=t)break;i=s.index+s[0].length,n+=1}return{line:n,column:t+1-i}}function ih(e,t){let i=e.locationOffset.column-1,n="".padStart(i)+e.body,s=t.line-1,l=e.locationOffset.line-1,o=t.line+l,r=1===t.line?i:0,a=t.column+r,c=`${e.name}:${o}:${a}
`,d=n.split(/\r\n|[\n\r]/g),u=d[s];if(u.length>120){let e=Math.floor(a/80),t=[];for(let e=0;e<u.length;e+=80)t.push(u.slice(e,e+80));return c+im([[`${o} |`,t[0]],...t.slice(1,e+1).map(e=>["|",e]),["|","^".padStart(a%80)],["|",t[e+1]]])}return c+im([[o-1+" |",d[s-1]],[`${o} |`,u],["|","^".padStart(a)],[`${o+1} |`,d[s+1]]])}function im(e){let t=e.filter(([e,t])=>void 0!==t),i=Math.max(...t.map(([e])=>e.length));return t.map(([e,t])=>e.padStart(i)+(t?" "+t:"")).join(`
`)}class ib extends Error{constructor(e,...t){var i,n,s,l;let{nodes:o,source:r,positions:a,path:c,originalError:d,extensions:u}=function(e){let t=e[0];return null==t||"kind"in t||"length"in t?{nodes:t,source:e[1],positions:e[2],path:e[3],originalError:e[4],extensions:e[5]}:t}(t);super(e),this.name="GraphQLError",this.path=null!=c?c:void 0,this.originalError=null!=d?d:void 0,this.nodes=iZ(Array.isArray(o)?o:o?[o]:void 0);let p=iZ(null===(i=this.nodes)||void 0===i?void 0:i.map(e=>e.loc).filter(e=>null!=e));this.source=null!=r?r:null==p||null===(n=p[0])||void 0===n?void 0:n.source,this.positions=null!=a?a:null==p?void 0:p.map(e=>e.start),this.locations=a&&r?a.map(e=>ip(r,e)):null==p?void 0:p.map(e=>ip(e.source,e.start));let h="object"==typeof(l=null==d?void 0:d.extensions)&&null!==l?null==d?void 0:d.extensions:void 0;this.extensions=null!==(s=null!=u?u:h)&&void 0!==s?s:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),null!=d&&d.stack?Object.defineProperty(this,"stack",{value:d.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,ib):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){var e;let t=this.message;if(this.nodes)for(let i of this.nodes)i.loc&&(t+=`

`+ih((e=i.loc).source,ip(e.source,e.start)));else if(this.source&&this.locations)for(let e of this.locations)t+=`

`+ih(this.source,e);return t}toJSON(){let e={message:this.message};return null!=this.locations&&(e.locations=this.locations),null!=this.path&&(e.path=this.path),null!=this.extensions&&Object.keys(this.extensions).length>0&&(e.extensions=this.extensions),e}}function iZ(e){return void 0===e||0===e.length?void 0:e}function iy(e,t,i){return new ib(`Syntax Error: ${i}`,{source:e,positions:[t]})}class ig{constructor(e,t,i){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=i}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class iI{constructor(e,t,i,n,s,l){this.kind=e,this.start=t,this.end=i,this.line=n,this.column=s,this.value=l,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}let iS={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},iV=new Set(Object.keys(iS));function iX(e){let t=null==e?void 0:e.kind;return"string"==typeof t&&iV.has(t)}function iG(e){return 9===e||32===e}function iW(e){return e>=48&&e<=57}function iC(e){return e>=97&&e<=122||e>=65&&e<=90}function iR(e){return iC(e)||95===e}(nV=nS||(nS={})).QUERY="query",nV.MUTATION="mutation",nV.SUBSCRIPTION="subscription",(nG=nX||(nX={})).QUERY="QUERY",nG.MUTATION="MUTATION",nG.SUBSCRIPTION="SUBSCRIPTION",nG.FIELD="FIELD",nG.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",nG.FRAGMENT_SPREAD="FRAGMENT_SPREAD",nG.INLINE_FRAGMENT="INLINE_FRAGMENT",nG.VARIABLE_DEFINITION="VARIABLE_DEFINITION",nG.SCHEMA="SCHEMA",nG.SCALAR="SCALAR",nG.OBJECT="OBJECT",nG.FIELD_DEFINITION="FIELD_DEFINITION",nG.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",nG.INTERFACE="INTERFACE",nG.UNION="UNION",nG.ENUM="ENUM",nG.ENUM_VALUE="ENUM_VALUE",nG.INPUT_OBJECT="INPUT_OBJECT",nG.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION",(nf=nW||(nW={})).NAME="Name",nf.DOCUMENT="Document",nf.OPERATION_DEFINITION="OperationDefinition",nf.VARIABLE_DEFINITION="VariableDefinition",nf.SELECTION_SET="SelectionSet",nf.FIELD="Field",nf.ARGUMENT="Argument",nf.FRAGMENT_SPREAD="FragmentSpread",nf.INLINE_FRAGMENT="InlineFragment",nf.FRAGMENT_DEFINITION="FragmentDefinition",nf.VARIABLE="Variable",nf.INT="IntValue",nf.FLOAT="FloatValue",nf.STRING="StringValue",nf.BOOLEAN="BooleanValue",nf.NULL="NullValue",nf.ENUM="EnumValue",nf.LIST="ListValue",nf.OBJECT="ObjectValue",nf.OBJECT_FIELD="ObjectField",nf.DIRECTIVE="Directive",nf.NAMED_TYPE="NamedType",nf.LIST_TYPE="ListType",nf.NON_NULL_TYPE="NonNullType",nf.SCHEMA_DEFINITION="SchemaDefinition",nf.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",nf.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",nf.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",nf.FIELD_DEFINITION="FieldDefinition",nf.INPUT_VALUE_DEFINITION="InputValueDefinition",nf.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",nf.UNION_TYPE_DEFINITION="UnionTypeDefinition",nf.ENUM_TYPE_DEFINITION="EnumTypeDefinition",nf.ENUM_VALUE_DEFINITION="EnumValueDefinition",nf.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",nf.DIRECTIVE_DEFINITION="DirectiveDefinition",nf.SCHEMA_EXTENSION="SchemaExtension",nf.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",nf.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",nf.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",nf.UNION_TYPE_EXTENSION="UnionTypeExtension",nf.ENUM_TYPE_EXTENSION="EnumTypeExtension",nf.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension",(nR=nC||(nC={})).SOF="<SOF>",nR.EOF="<EOF>",nR.BANG="!",nR.DOLLAR="$",nR.AMP="&",nR.PAREN_L="(",nR.PAREN_R=")",nR.SPREAD="...",nR.COLON=":",nR.EQUALS="=",nR.AT="@",nR.BRACKET_L="[",nR.BRACKET_R="]",nR.BRACE_L="{",nR.PIPE="|",nR.BRACE_R="}",nR.NAME="Name",nR.INT="Int",nR.FLOAT="Float",nR.STRING="String",nR.BLOCK_STRING="BlockString",nR.COMMENT="Comment";class iv{constructor(e){let t=new iI(nC.SOF,0,0,0,0);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let e=this.token;if(e.kind!==nC.EOF)do if(e.next)e=e.next;else{let t=function(e,t){let i=e.source.body,n=i.length,s=t;for(;s<n;){let t=i.charCodeAt(s);switch(t){case 65279:case 9:case 32:case 44:++s;continue;case 10:++s,++e.line,e.lineStart=s;continue;case 13:10===i.charCodeAt(s+1)?s+=2:++s,++e.line,e.lineStart=s;continue;case 35:return function(e,t){let i=e.source.body,n=i.length,s=t+1;for(;s<n;){let e=i.charCodeAt(s);if(10===e||13===e)break;if(ik(e))++s;else{if(!iT(i,s))break;s+=2}}return ix(e,nC.COMMENT,t,s,i.slice(t+1,s))}(e,s);case 33:return ix(e,nC.BANG,s,s+1);case 36:return ix(e,nC.DOLLAR,s,s+1);case 38:return ix(e,nC.AMP,s,s+1);case 40:return ix(e,nC.PAREN_L,s,s+1);case 41:return ix(e,nC.PAREN_R,s,s+1);case 46:if(46===i.charCodeAt(s+1)&&46===i.charCodeAt(s+2))return ix(e,nC.SPREAD,s,s+3);break;case 58:return ix(e,nC.COLON,s,s+1);case 61:return ix(e,nC.EQUALS,s,s+1);case 64:return ix(e,nC.AT,s,s+1);case 91:return ix(e,nC.BRACKET_L,s,s+1);case 93:return ix(e,nC.BRACKET_R,s,s+1);case 123:return ix(e,nC.BRACE_L,s,s+1);case 124:return ix(e,nC.PIPE,s,s+1);case 125:return ix(e,nC.BRACE_R,s,s+1);case 34:return 34===i.charCodeAt(s+1)&&34===i.charCodeAt(s+2)?function(e,t){let i=e.source.body,n=i.length,s=e.lineStart,l=t+3,o=l,r="",a=[];for(;l<n;){let n=i.charCodeAt(l);if(34===n&&34===i.charCodeAt(l+1)&&34===i.charCodeAt(l+2)){r+=i.slice(o,l),a.push(r);let n=ix(e,nC.BLOCK_STRING,t,l+3,(function(e){var t,i;let n=Number.MAX_SAFE_INTEGER,s=null,l=-1;for(let t=0;t<e.length;++t){let o=e[t],r=function(e){let t=0;for(;t<e.length&&iG(e.charCodeAt(t));)++t;return t}(o);r!==o.length&&(s=null!==(i=s)&&void 0!==i?i:t,l=t,0!==t&&r<n&&(n=r))}return e.map((e,t)=>0===t?e:e.slice(n)).slice(null!==(t=s)&&void 0!==t?t:0,l+1)})(a).join(`
`));return e.line+=a.length-1,e.lineStart=s,n}if(92!==n||34!==i.charCodeAt(l+1)||34!==i.charCodeAt(l+2)||34!==i.charCodeAt(l+3)){if(10!==n&&13!==n){if(ik(n))++l;else{if(!iT(i,l))throw iy(e.source,l,`Invalid character within String: ${iL(e,l)}.`);l+=2}}else r+=i.slice(o,l),a.push(r),13===n&&10===i.charCodeAt(l+1)?l+=2:++l,r="",o=l,s=l}else r+=i.slice(o,l),o=l+1,l+=4}throw iy(e.source,l,"Unterminated string.")}(e,s):function(e,t){let i=e.source.body,n=i.length,s=t+1,l=s,o="";for(;s<n;){let n=i.charCodeAt(s);if(34===n)return o+=i.slice(l,s),ix(e,nC.STRING,t,s+1,o);if(92!==n){if(10===n||13===n)break;if(ik(n))++s;else{if(!iT(i,s))throw iy(e.source,s,`Invalid character within String: ${iL(e,s)}.`);s+=2}}else{o+=i.slice(l,s);let t=117===i.charCodeAt(s+1)?123===i.charCodeAt(s+2)?function(e,t){let i=e.source.body,n=0,s=3;for(;s<12;){let e=i.charCodeAt(t+s++);if(125===e){if(s<5||!ik(n))break;return{value:String.fromCodePoint(n),size:s}}if((n=n<<4|iY(e))<0)break}throw iy(e.source,t,`Invalid Unicode escape sequence: "${i.slice(t,t+s)}".`)}(e,s):function(e,t){let i=e.source.body,n=iK(i,t+2);if(ik(n))return{value:String.fromCodePoint(n),size:6};if(iN(n)&&92===i.charCodeAt(t+6)&&117===i.charCodeAt(t+7)){let e=iK(i,t+8);if(iw(e))return{value:String.fromCodePoint(n,e),size:12}}throw iy(e.source,t,`Invalid Unicode escape sequence: "${i.slice(t,t+6)}".`)}(e,s):function(e,t){let i=e.source.body;switch(i.charCodeAt(t+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw iy(e.source,t,`Invalid character escape sequence: "${i.slice(t,t+2)}".`)}(e,s);o+=t.value,s+=t.size,l=s}}throw iy(e.source,s,"Unterminated string.")}(e,s)}if(iW(t)||45===t)return function(e,t,i){let n=e.source.body,s=t,l=i,o=!1;if(45===l&&(l=n.charCodeAt(++s)),48===l){if(iW(l=n.charCodeAt(++s)))throw iy(e.source,s,`Invalid number, unexpected digit after 0: ${iL(e,s)}.`)}else s=iJ(e,s,l),l=n.charCodeAt(s);if(46===l&&(o=!0,l=n.charCodeAt(++s),s=iJ(e,s,l),l=n.charCodeAt(s)),69!==l&&101!==l||(o=!0,43!==(l=n.charCodeAt(++s))&&45!==l||(l=n.charCodeAt(++s)),s=iJ(e,s,l),l=n.charCodeAt(s)),46===l||iR(l))throw iy(e.source,s,`Invalid number, expected digit but got: ${iL(e,s)}.`);return ix(e,o?nC.FLOAT:nC.INT,t,s,n.slice(t,s))}(e,s,t);if(iR(t))return function(e,t){var i;let n=e.source.body,s=n.length,l=t+1;for(;l<s&&(iC(i=n.charCodeAt(l))||iW(i)||95===i);)++l;return ix(e,nC.NAME,t,l,n.slice(t,l))}(e,s);throw iy(e.source,s,39===t?"Unexpected single quote character ('), did you mean to use a double quote (\")?":ik(t)||iT(i,s)?`Unexpected character: ${iL(e,s)}.`:`Invalid character: ${iL(e,s)}.`)}return ix(e,nC.EOF,n,n)}(this,e.end);e.next=t,t.prev=e,e=t}while(e.kind===nC.COMMENT);return e}}function ik(e){return e>=0&&e<=55295||e>=57344&&e<=1114111}function iT(e,t){return iN(e.charCodeAt(t))&&iw(e.charCodeAt(t+1))}function iN(e){return e>=55296&&e<=56319}function iw(e){return e>=56320&&e<=57343}function iL(e,t){let i=e.source.body.codePointAt(t);if(void 0===i)return nC.EOF;if(i>=32&&i<=126){let e=String.fromCodePoint(i);return'"'===e?"'\"'":`"${e}"`}return"U+"+i.toString(16).toUpperCase().padStart(4,"0")}function ix(e,t,i,n,s){let l=e.line,o=1+i-e.lineStart;return new iI(t,i,n,l,o,s)}function iJ(e,t,i){if(!iW(i))throw iy(e.source,t,`Invalid number, expected digit but got: ${iL(e,t)}.`);let n=e.source.body,s=t+1;for(;iW(n.charCodeAt(s));)++s;return s}function iK(e,t){return iY(e.charCodeAt(t))<<12|iY(e.charCodeAt(t+1))<<8|iY(e.charCodeAt(t+2))<<4|iY(e.charCodeAt(t+3))}function iY(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function iU(e,t){switch(typeof e){case"string":return JSON.stringify(e);case"function":return e.name?`[function ${e.name}]`:"[function]";case"object":return function(e,t){if(null===e)return"null";if(t.includes(e))return"[Circular]";let i=[...t,e];if("function"==typeof e.toJSON){let t=e.toJSON();if(t!==e)return"string"==typeof t?t:iU(t,i)}else if(Array.isArray(e))return function(e,t){if(0===e.length)return"[]";if(t.length>2)return"[Array]";let i=Math.min(10,e.length),n=e.length-i,s=[];for(let n=0;n<i;++n)s.push(iU(e[n],t));return 1===n?s.push("... 1 more item"):n>1&&s.push(`... ${n} more items`),"["+s.join(", ")+"]"}(e,i);return function(e,t){let i=Object.entries(e);return 0===i.length?"{}":t.length>2?"["+function(e){let t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){let t=e.constructor.name;if("string"==typeof t&&""!==t)return t}return t}(e)+"]":"{ "+i.map(([e,i])=>e+": "+iU(i,t)).join(", ")+" }"}(e,i)}(e,t);default:return String(e)}}let iF=globalThis.process&&"production"===globalThis.process.env.NODE_ENV?function(e,t){return e instanceof t}:function(e,t){if(e instanceof t)return!0;if("object"==typeof e&&null!==e){var i;let n=t.prototype[Symbol.toStringTag];if(n===(Symbol.toStringTag in e?e[Symbol.toStringTag]:null===(i=e.constructor)||void 0===i?void 0:i.name)){let t=iU(e,[]);throw Error(`Cannot use ${n} "${t}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};class iH{constructor(e,t="GraphQL request",i={line:1,column:1}){"string"==typeof e||id(!1,`Body must be a string. Received: ${iU(e,[])}.`),this.body=e,this.name=t,this.locationOffset=i,this.locationOffset.line>0||id(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||id(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function iE(e,t){return new iM(e,t).parseDocument()}class iM{constructor(e,t={}){let i=iF(e,iH)?e:new iH(e);this._lexer=new iv(i),this._options=t,this._tokenCounter=0}parseName(){let e=this.expectToken(nC.NAME);return this.node(e,{kind:nW.NAME,value:e.value})}parseDocument(){return this.node(this._lexer.token,{kind:nW.DOCUMENT,definitions:this.many(nC.SOF,this.parseDefinition,nC.EOF)})}parseDefinition(){if(this.peek(nC.BRACE_L))return this.parseOperationDefinition();let e=this.peekDescription(),t=e?this._lexer.lookahead():this._lexer.token;if(t.kind===nC.NAME){switch(t.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(e)throw iy(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(t.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(t)}parseOperationDefinition(){let e;let t=this._lexer.token;if(this.peek(nC.BRACE_L))return this.node(t,{kind:nW.OPERATION_DEFINITION,operation:nS.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});let i=this.parseOperationType();return this.peek(nC.NAME)&&(e=this.parseName()),this.node(t,{kind:nW.OPERATION_DEFINITION,operation:i,name:e,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){let e=this.expectToken(nC.NAME);switch(e.value){case"query":return nS.QUERY;case"mutation":return nS.MUTATION;case"subscription":return nS.SUBSCRIPTION}throw this.unexpected(e)}parseVariableDefinitions(){return this.optionalMany(nC.PAREN_L,this.parseVariableDefinition,nC.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:nW.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(nC.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(nC.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){let e=this._lexer.token;return this.expectToken(nC.DOLLAR),this.node(e,{kind:nW.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:nW.SELECTION_SET,selections:this.many(nC.BRACE_L,this.parseSelection,nC.BRACE_R)})}parseSelection(){return this.peek(nC.SPREAD)?this.parseFragment():this.parseField()}parseField(){let e,t;let i=this._lexer.token,n=this.parseName();return this.expectOptionalToken(nC.COLON)?(e=n,t=this.parseName()):t=n,this.node(i,{kind:nW.FIELD,alias:e,name:t,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(nC.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(e){let t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(nC.PAREN_L,t,nC.PAREN_R)}parseArgument(e=!1){let t=this._lexer.token,i=this.parseName();return this.expectToken(nC.COLON),this.node(t,{kind:nW.ARGUMENT,name:i,value:this.parseValueLiteral(e)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){let e=this._lexer.token;this.expectToken(nC.SPREAD);let t=this.expectOptionalKeyword("on");return!t&&this.peek(nC.NAME)?this.node(e,{kind:nW.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(e,{kind:nW.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){let e=this._lexer.token;return this.expectKeyword("fragment"),!0===this._options.allowLegacyFragmentVariables?this.node(e,{kind:nW.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(e,{kind:nW.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()}parseValueLiteral(e){let t=this._lexer.token;switch(t.kind){case nC.BRACKET_L:return this.parseList(e);case nC.BRACE_L:return this.parseObject(e);case nC.INT:return this.advanceLexer(),this.node(t,{kind:nW.INT,value:t.value});case nC.FLOAT:return this.advanceLexer(),this.node(t,{kind:nW.FLOAT,value:t.value});case nC.STRING:case nC.BLOCK_STRING:return this.parseStringLiteral();case nC.NAME:switch(this.advanceLexer(),t.value){case"true":return this.node(t,{kind:nW.BOOLEAN,value:!0});case"false":return this.node(t,{kind:nW.BOOLEAN,value:!1});case"null":return this.node(t,{kind:nW.NULL});default:return this.node(t,{kind:nW.ENUM,value:t.value})}case nC.DOLLAR:if(e){if(this.expectToken(nC.DOLLAR),this._lexer.token.kind===nC.NAME){let e=this._lexer.token.value;throw iy(this._lexer.source,t.start,`Unexpected variable "$${e}" in constant value.`)}throw this.unexpected(t)}return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){let e=this._lexer.token;return this.advanceLexer(),this.node(e,{kind:nW.STRING,value:e.value,block:e.kind===nC.BLOCK_STRING})}parseList(e){return this.node(this._lexer.token,{kind:nW.LIST,values:this.any(nC.BRACKET_L,()=>this.parseValueLiteral(e),nC.BRACKET_R)})}parseObject(e){return this.node(this._lexer.token,{kind:nW.OBJECT,fields:this.any(nC.BRACE_L,()=>this.parseObjectField(e),nC.BRACE_R)})}parseObjectField(e){let t=this._lexer.token,i=this.parseName();return this.expectToken(nC.COLON),this.node(t,{kind:nW.OBJECT_FIELD,name:i,value:this.parseValueLiteral(e)})}parseDirectives(e){let t=[];for(;this.peek(nC.AT);)t.push(this.parseDirective(e));return t}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(e){let t=this._lexer.token;return this.expectToken(nC.AT),this.node(t,{kind:nW.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e)})}parseTypeReference(){let e;let t=this._lexer.token;if(this.expectOptionalToken(nC.BRACKET_L)){let i=this.parseTypeReference();this.expectToken(nC.BRACKET_R),e=this.node(t,{kind:nW.LIST_TYPE,type:i})}else e=this.parseNamedType();return this.expectOptionalToken(nC.BANG)?this.node(t,{kind:nW.NON_NULL_TYPE,type:e}):e}parseNamedType(){return this.node(this._lexer.token,{kind:nW.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(nC.STRING)||this.peek(nC.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");let i=this.parseConstDirectives(),n=this.many(nC.BRACE_L,this.parseOperationTypeDefinition,nC.BRACE_R);return this.node(e,{kind:nW.SCHEMA_DEFINITION,description:t,directives:i,operationTypes:n})}parseOperationTypeDefinition(){let e=this._lexer.token,t=this.parseOperationType();this.expectToken(nC.COLON);let i=this.parseNamedType();return this.node(e,{kind:nW.OPERATION_TYPE_DEFINITION,operation:t,type:i})}parseScalarTypeDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");let i=this.parseName(),n=this.parseConstDirectives();return this.node(e,{kind:nW.SCALAR_TYPE_DEFINITION,description:t,name:i,directives:n})}parseObjectTypeDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");let i=this.parseName(),n=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),l=this.parseFieldsDefinition();return this.node(e,{kind:nW.OBJECT_TYPE_DEFINITION,description:t,name:i,interfaces:n,directives:s,fields:l})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(nC.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(nC.BRACE_L,this.parseFieldDefinition,nC.BRACE_R)}parseFieldDefinition(){let e=this._lexer.token,t=this.parseDescription(),i=this.parseName(),n=this.parseArgumentDefs();this.expectToken(nC.COLON);let s=this.parseTypeReference(),l=this.parseConstDirectives();return this.node(e,{kind:nW.FIELD_DEFINITION,description:t,name:i,arguments:n,type:s,directives:l})}parseArgumentDefs(){return this.optionalMany(nC.PAREN_L,this.parseInputValueDef,nC.PAREN_R)}parseInputValueDef(){let e;let t=this._lexer.token,i=this.parseDescription(),n=this.parseName();this.expectToken(nC.COLON);let s=this.parseTypeReference();this.expectOptionalToken(nC.EQUALS)&&(e=this.parseConstValueLiteral());let l=this.parseConstDirectives();return this.node(t,{kind:nW.INPUT_VALUE_DEFINITION,description:i,name:n,type:s,defaultValue:e,directives:l})}parseInterfaceTypeDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");let i=this.parseName(),n=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),l=this.parseFieldsDefinition();return this.node(e,{kind:nW.INTERFACE_TYPE_DEFINITION,description:t,name:i,interfaces:n,directives:s,fields:l})}parseUnionTypeDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");let i=this.parseName(),n=this.parseConstDirectives(),s=this.parseUnionMemberTypes();return this.node(e,{kind:nW.UNION_TYPE_DEFINITION,description:t,name:i,directives:n,types:s})}parseUnionMemberTypes(){return this.expectOptionalToken(nC.EQUALS)?this.delimitedMany(nC.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");let i=this.parseName(),n=this.parseConstDirectives(),s=this.parseEnumValuesDefinition();return this.node(e,{kind:nW.ENUM_TYPE_DEFINITION,description:t,name:i,directives:n,values:s})}parseEnumValuesDefinition(){return this.optionalMany(nC.BRACE_L,this.parseEnumValueDefinition,nC.BRACE_R)}parseEnumValueDefinition(){let e=this._lexer.token,t=this.parseDescription(),i=this.parseEnumValueName(),n=this.parseConstDirectives();return this.node(e,{kind:nW.ENUM_VALUE_DEFINITION,description:t,name:i,directives:n})}parseEnumValueName(){if("true"===this._lexer.token.value||"false"===this._lexer.token.value||"null"===this._lexer.token.value)throw iy(this._lexer.source,this._lexer.token.start,`${iz(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");let i=this.parseName(),n=this.parseConstDirectives(),s=this.parseInputFieldsDefinition();return this.node(e,{kind:nW.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:i,directives:n,fields:s})}parseInputFieldsDefinition(){return this.optionalMany(nC.BRACE_L,this.parseInputValueDef,nC.BRACE_R)}parseTypeSystemExtension(){let e=this._lexer.lookahead();if(e.kind===nC.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)}parseSchemaExtension(){let e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");let t=this.parseConstDirectives(),i=this.optionalMany(nC.BRACE_L,this.parseOperationTypeDefinition,nC.BRACE_R);if(0===t.length&&0===i.length)throw this.unexpected();return this.node(e,{kind:nW.SCHEMA_EXTENSION,directives:t,operationTypes:i})}parseScalarTypeExtension(){let e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");let t=this.parseName(),i=this.parseConstDirectives();if(0===i.length)throw this.unexpected();return this.node(e,{kind:nW.SCALAR_TYPE_EXTENSION,name:t,directives:i})}parseObjectTypeExtension(){let e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");let t=this.parseName(),i=this.parseImplementsInterfaces(),n=this.parseConstDirectives(),s=this.parseFieldsDefinition();if(0===i.length&&0===n.length&&0===s.length)throw this.unexpected();return this.node(e,{kind:nW.OBJECT_TYPE_EXTENSION,name:t,interfaces:i,directives:n,fields:s})}parseInterfaceTypeExtension(){let e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");let t=this.parseName(),i=this.parseImplementsInterfaces(),n=this.parseConstDirectives(),s=this.parseFieldsDefinition();if(0===i.length&&0===n.length&&0===s.length)throw this.unexpected();return this.node(e,{kind:nW.INTERFACE_TYPE_EXTENSION,name:t,interfaces:i,directives:n,fields:s})}parseUnionTypeExtension(){let e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");let t=this.parseName(),i=this.parseConstDirectives(),n=this.parseUnionMemberTypes();if(0===i.length&&0===n.length)throw this.unexpected();return this.node(e,{kind:nW.UNION_TYPE_EXTENSION,name:t,directives:i,types:n})}parseEnumTypeExtension(){let e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");let t=this.parseName(),i=this.parseConstDirectives(),n=this.parseEnumValuesDefinition();if(0===i.length&&0===n.length)throw this.unexpected();return this.node(e,{kind:nW.ENUM_TYPE_EXTENSION,name:t,directives:i,values:n})}parseInputObjectTypeExtension(){let e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");let t=this.parseName(),i=this.parseConstDirectives(),n=this.parseInputFieldsDefinition();if(0===i.length&&0===n.length)throw this.unexpected();return this.node(e,{kind:nW.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:i,fields:n})}parseDirectiveDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(nC.AT);let i=this.parseName(),n=this.parseArgumentDefs(),s=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");let l=this.parseDirectiveLocations();return this.node(e,{kind:nW.DIRECTIVE_DEFINITION,description:t,name:i,arguments:n,repeatable:s,locations:l})}parseDirectiveLocations(){return this.delimitedMany(nC.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){let e=this._lexer.token,t=this.parseName();if(Object.prototype.hasOwnProperty.call(nX,t.value))return t;throw this.unexpected(e)}node(e,t){return!0!==this._options.noLocation&&(t.loc=new ig(e,this._lexer.lastToken,this._lexer.source)),t}peek(e){return this._lexer.token.kind===e}expectToken(e){let t=this._lexer.token;if(t.kind===e)return this.advanceLexer(),t;throw iy(this._lexer.source,t.start,`Expected ${iO(e)}, found ${iz(t)}.`)}expectOptionalToken(e){return this._lexer.token.kind===e&&(this.advanceLexer(),!0)}expectKeyword(e){let t=this._lexer.token;if(t.kind!==nC.NAME||t.value!==e)throw iy(this._lexer.source,t.start,`Expected "${e}", found ${iz(t)}.`);this.advanceLexer()}expectOptionalKeyword(e){let t=this._lexer.token;return t.kind===nC.NAME&&t.value===e&&(this.advanceLexer(),!0)}unexpected(e){let t=null!=e?e:this._lexer.token;return iy(this._lexer.source,t.start,`Unexpected ${iz(t)}.`)}any(e,t,i){this.expectToken(e);let n=[];for(;!this.expectOptionalToken(i);)n.push(t.call(this));return n}optionalMany(e,t,i){if(this.expectOptionalToken(e)){let e=[];do e.push(t.call(this));while(!this.expectOptionalToken(i));return e}return[]}many(e,t,i){this.expectToken(e);let n=[];do n.push(t.call(this));while(!this.expectOptionalToken(i));return n}delimitedMany(e,t){this.expectOptionalToken(e);let i=[];do i.push(t.call(this));while(this.expectOptionalToken(e));return i}advanceLexer(){let{maxTokens:e}=this._options,t=this._lexer.advance();if(void 0!==e&&t.kind!==nC.EOF&&(++this._tokenCounter,this._tokenCounter>e))throw iy(this._lexer.source,t.start,`Document contains more that ${e} tokens. Parsing aborted.`)}}function iz(e){let t=e.value;return iO(e.kind)+(null!=t?` "${t}"`:"")}function iO(e){return e===nC.BANG||e===nC.DOLLAR||e===nC.AMP||e===nC.PAREN_L||e===nC.PAREN_R||e===nC.SPREAD||e===nC.COLON||e===nC.EQUALS||e===nC.AT||e===nC.BRACKET_L||e===nC.BRACKET_R||e===nC.BRACE_L||e===nC.PIPE||e===nC.BRACE_R?`"${e}"`:e}let iP=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function iB(e){return iA[e.charCodeAt(0)]}let iA=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],iD=Object.freeze({});function iQ(e){return function(e,t,i=iS){let n=new Map;for(let e of Object.values(nW))n.set(e,function(e,t){let i=e[t];return"object"==typeof i?i:"function"==typeof i?{enter:i,leave:void 0}:{enter:e.enter,leave:e.leave}}(t,e));let s,l,o,r=Array.isArray(e),a=[e],c=-1,d=[],u=e,p=[],h=[];do{var m,b,Z;let e;let y=++c===a.length,g=y&&0!==d.length;if(y){if(l=0===h.length?void 0:p[p.length-1],u=o,o=h.pop(),g){if(r){u=u.slice();let e=0;for(let[t,i]of d){let n=t-e;null===i?(u.splice(n,1),e++):u[n]=i}}else for(let[e,t]of(u=Object.defineProperties({},Object.getOwnPropertyDescriptors(u)),d))u[e]=t}c=s.index,a=s.keys,d=s.edits,r=s.inArray,s=s.prev}else if(o){if(null==(u=o[l=r?c:a[c]]))continue;p.push(l)}if(!Array.isArray(u)){iX(u)||id(!1,`Invalid AST Node: ${iU(u,[])}.`);let i=y?null===(m=n.get(u.kind))||void 0===m?void 0:m.leave:null===(b=n.get(u.kind))||void 0===b?void 0:b.enter;if((e=null==i?void 0:i.call(t,u,l,o,p,h))===iD)break;if(!1===e){if(!y){p.pop();continue}}else if(void 0!==e&&(d.push([l,e]),!y)){if(!iX(e)){p.pop();continue}u=e}}void 0===e&&g&&d.push([l,u]),y?p.pop():(s={inArray:r,index:c,keys:a,edits:d,prev:s},a=(r=Array.isArray(u))?u:null!==(Z=i[u.kind])&&void 0!==Z?Z:[],c=-1,d=[],o&&h.push(o),o=u)}while(void 0!==s);return 0!==d.length?d[d.length-1][1]:e}(e,ij)}let ij={Name:{leave:e=>e.value},Variable:{leave:e=>"$"+e.name},Document:{leave:e=>i_(e.definitions,`

`)},OperationDefinition:{leave(e){let t=i$("(",i_(e.variableDefinitions,", "),")"),i=i_([e.operation,i_([e.name,t]),i_(e.directives," ")]," ");return("query"===i?"":i+" ")+e.selectionSet}},VariableDefinition:{leave:({variable:e,type:t,defaultValue:i,directives:n})=>e+": "+t+i$(" = ",i)+i$(" ",i_(n," "))},SelectionSet:{leave:({selections:e})=>iq(e)},Field:{leave({alias:e,name:t,arguments:i,directives:n,selectionSet:s}){let l=i$("",e,": ")+t,o=l+i$("(",i_(i,", "),")");return o.length>80&&(o=l+i$(`(
`,i0(i_(i,`
`)),`
)`)),i_([o,i_(n," "),s]," ")}},Argument:{leave:({name:e,value:t})=>e+": "+t},FragmentSpread:{leave:({name:e,directives:t})=>"..."+e+i$(" ",i_(t," "))},InlineFragment:{leave:({typeCondition:e,directives:t,selectionSet:i})=>i_(["...",i$("on ",e),i_(t," "),i]," ")},FragmentDefinition:{leave:({name:e,typeCondition:t,variableDefinitions:i,directives:n,selectionSet:s})=>`fragment ${e}${i$("(",i_(i,", "),")")} on ${t} ${i$("",i_(n," ")," ")}`+s},IntValue:{leave:({value:e})=>e},FloatValue:{leave:({value:e})=>e},StringValue:{leave:({value:e,block:t})=>t?function(e,t){let i=e.replace(/"""/g,'\\"""'),n=i.split(/\r\n|[\n\r]/g),s=1===n.length,l=n.length>1&&n.slice(1).every(e=>0===e.length||iG(e.charCodeAt(0))),o=i.endsWith('\\"""'),r=e.endsWith('"')&&!o,a=e.endsWith("\\"),c=r||a,d=!(null!=t&&t.minimize)&&(!s||e.length>70||c||l||o),u="",p=s&&iG(e.charCodeAt(0));return(d&&!p||l)&&(u+=`
`),u+=i,(d||c)&&(u+=`
`),'"""'+u+'"""'}(e):`"${e.replace(iP,iB)}"`},BooleanValue:{leave:({value:e})=>e?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:e})=>e},ListValue:{leave:({values:e})=>"["+i_(e,", ")+"]"},ObjectValue:{leave:({fields:e})=>"{"+i_(e,", ")+"}"},ObjectField:{leave:({name:e,value:t})=>e+": "+t},Directive:{leave:({name:e,arguments:t})=>"@"+e+i$("(",i_(t,", "),")")},NamedType:{leave:({name:e})=>e},ListType:{leave:({type:e})=>"["+e+"]"},NonNullType:{leave:({type:e})=>e+"!"},SchemaDefinition:{leave:({description:e,directives:t,operationTypes:i})=>i$("",e,`
`)+i_(["schema",i_(t," "),iq(i)]," ")},OperationTypeDefinition:{leave:({operation:e,type:t})=>e+": "+t},ScalarTypeDefinition:{leave:({description:e,name:t,directives:i})=>i$("",e,`
`)+i_(["scalar",t,i_(i," ")]," ")},ObjectTypeDefinition:{leave:({description:e,name:t,interfaces:i,directives:n,fields:s})=>i$("",e,`
`)+i_(["type",t,i$("implements ",i_(i," & ")),i_(n," "),iq(s)]," ")},FieldDefinition:{leave:({description:e,name:t,arguments:i,type:n,directives:s})=>i$("",e,`
`)+t+(i2(i)?i$(`(
`,i0(i_(i,`
`)),`
)`):i$("(",i_(i,", "),")"))+": "+n+i$(" ",i_(s," "))},InputValueDefinition:{leave:({description:e,name:t,type:i,defaultValue:n,directives:s})=>i$("",e,`
`)+i_([t+": "+i,i$("= ",n),i_(s," ")]," ")},InterfaceTypeDefinition:{leave:({description:e,name:t,interfaces:i,directives:n,fields:s})=>i$("",e,`
`)+i_(["interface",t,i$("implements ",i_(i," & ")),i_(n," "),iq(s)]," ")},UnionTypeDefinition:{leave:({description:e,name:t,directives:i,types:n})=>i$("",e,`
`)+i_(["union",t,i_(i," "),i$("= ",i_(n," | "))]," ")},EnumTypeDefinition:{leave:({description:e,name:t,directives:i,values:n})=>i$("",e,`
`)+i_(["enum",t,i_(i," "),iq(n)]," ")},EnumValueDefinition:{leave:({description:e,name:t,directives:i})=>i$("",e,`
`)+i_([t,i_(i," ")]," ")},InputObjectTypeDefinition:{leave:({description:e,name:t,directives:i,fields:n})=>i$("",e,`
`)+i_(["input",t,i_(i," "),iq(n)]," ")},DirectiveDefinition:{leave:({description:e,name:t,arguments:i,repeatable:n,locations:s})=>i$("",e,`
`)+"directive @"+t+(i2(i)?i$(`(
`,i0(i_(i,`
`)),`
)`):i$("(",i_(i,", "),")"))+(n?" repeatable":"")+" on "+i_(s," | ")},SchemaExtension:{leave:({directives:e,operationTypes:t})=>i_(["extend schema",i_(e," "),iq(t)]," ")},ScalarTypeExtension:{leave:({name:e,directives:t})=>i_(["extend scalar",e,i_(t," ")]," ")},ObjectTypeExtension:{leave:({name:e,interfaces:t,directives:i,fields:n})=>i_(["extend type",e,i$("implements ",i_(t," & ")),i_(i," "),iq(n)]," ")},InterfaceTypeExtension:{leave:({name:e,interfaces:t,directives:i,fields:n})=>i_(["extend interface",e,i$("implements ",i_(t," & ")),i_(i," "),iq(n)]," ")},UnionTypeExtension:{leave:({name:e,directives:t,types:i})=>i_(["extend union",e,i_(t," "),i$("= ",i_(i," | "))]," ")},EnumTypeExtension:{leave:({name:e,directives:t,values:i})=>i_(["extend enum",e,i_(t," "),iq(i)]," ")},InputObjectTypeExtension:{leave:({name:e,directives:t,fields:i})=>i_(["extend input",e,i_(t," "),iq(i)]," ")}};function i_(e,t=""){var i;return null!==(i=null==e?void 0:e.filter(e=>e).join(t))&&void 0!==i?i:""}function iq(e){return i$(`{
`,i0(i_(e,`
`)),`
}`)}function i$(e,t,i=""){return null!=t&&""!==t?e+t+i:""}function i0(e){return i$("  ",e.replace(/\n/g,`
  `))}function i2(e){var t;return null!==(t=null==e?void 0:e.some(e=>e.includes(`
`)))&&void 0!==t&&t}let i9=e=>{var t,i;let n;let s=e.definitions.filter(e=>"OperationDefinition"===e.kind);return 1===s.length&&(n=null==(i=null==(t=s[0])?void 0:t.name)?void 0:i.value),n},i1=e=>{if("string"==typeof e){let t;try{let i=iE(e);t=i9(i)}catch(e){}return{query:e,operationName:t}}let t=i9(e);return{query:iQ(e),operationName:t}};class i5 extends Error{constructor(e,t){super(`${i5.extractMessage(e)}: ${JSON.stringify({response:e,request:t})}`),Object.setPrototypeOf(this,i5.prototype),this.response=e,this.request=t,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,i5)}static extractMessage(e){var t,i,n;return null!=(n=null==(i=null==(t=e.errors)?void 0:t[0])?void 0:i.message)?n:`GraphQL Error (Code: ${e.status})`}}var i3={exports:{}};nm=i3.exports,nb="undefined"!=typeof self?self:ty,nZ=function(){function e(){this.fetch=!1,this.DOMException=nb.DOMException}return e.prototype=nb,new e}(),function(e){var t="URLSearchParams"in nZ,i="Symbol"in nZ&&"iterator"in Symbol,n="FileReader"in nZ&&"Blob"in nZ&&function(){try{return new Blob,!0}catch(e){return!1}}(),s="FormData"in nZ,l="ArrayBuffer"in nZ;if(l)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=ArrayBuffer.isView||function(e){return e&&o.indexOf(Object.prototype.toString.call(e))>-1};function a(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw TypeError("Invalid character in header field name");return e.toLowerCase()}function c(e){return"string"!=typeof e&&(e=String(e)),e}function d(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i&&(t[Symbol.iterator]=function(){return t}),t}function u(e){this.map={},e instanceof u?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function p(e){if(e.bodyUsed)return Promise.reject(TypeError("Already read"));e.bodyUsed=!0}function h(e){return new Promise(function(t,i){e.onload=function(){t(e.result)},e.onerror=function(){i(e.error)}})}function m(e){var t=new FileReader,i=h(t);return t.readAsArrayBuffer(e),i}function b(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function Z(){return this.bodyUsed=!1,this._initBody=function(e){var i;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:n&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:t&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():l&&n&&(i=e)&&DataView.prototype.isPrototypeOf(i)?(this._bodyArrayBuffer=b(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l&&(ArrayBuffer.prototype.isPrototypeOf(e)||r(e))?this._bodyArrayBuffer=b(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var e,t,i,n=p(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,i=h(t=new FileReader),t.readAsText(e),i;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),i=Array(t.length),n=0;n<t.length;n++)i[n]=String.fromCharCode(t[n]);return i.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(I)}),this.json=function(){return this.text().then(JSON.parse)},this}u.prototype.append=function(e,t){e=a(e),t=c(t);var i=this.map[e];this.map[e]=i?i+", "+t:t},u.prototype.delete=function(e){delete this.map[a(e)]},u.prototype.get=function(e){return e=a(e),this.has(e)?this.map[e]:null},u.prototype.has=function(e){return this.map.hasOwnProperty(a(e))},u.prototype.set=function(e,t){this.map[a(e)]=c(t)},u.prototype.forEach=function(e,t){for(var i in this.map)this.map.hasOwnProperty(i)&&e.call(t,this.map[i],i,this)},u.prototype.keys=function(){var e=[];return this.forEach(function(t,i){e.push(i)}),d(e)},u.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),d(e)},u.prototype.entries=function(){var e=[];return this.forEach(function(t,i){e.push([i,t])}),d(e)},i&&(u.prototype[Symbol.iterator]=u.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function g(e,t){var i,n,s=(t=t||{}).body;if(e instanceof g){if(e.bodyUsed)throw TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new u(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,s||null==e._bodyInit||(s=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new u(t.headers)),this.method=(n=(i=t.method||this.method||"GET").toUpperCase(),y.indexOf(n)>-1?n:i),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&s)throw TypeError("Body not allowed for GET or HEAD requests");this._initBody(s)}function I(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var i=e.split("="),n=i.shift().replace(/\+/g," "),s=i.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(s))}}),t}function S(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new u(t.headers),this.url=t.url||"",this._initBody(e)}g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},Z.call(g.prototype),Z.call(S.prototype),S.prototype.clone=function(){return new S(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},S.error=function(){var e=new S(null,{status:0,statusText:""});return e.type="error",e};var V=[301,302,303,307,308];S.redirect=function(e,t){if(-1===V.indexOf(t))throw RangeError("Invalid status code");return new S(null,{status:t,headers:{location:e}})},e.DOMException=nZ.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(e,t){this.message=e,this.name=t;var i=Error(e);this.stack=i.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function X(t,i){return new Promise(function(s,l){var o=new g(t,i);if(o.signal&&o.signal.aborted)return l(new e.DOMException("Aborted","AbortError"));var r=new XMLHttpRequest;function a(){r.abort()}r.onload=function(){var e,t,i={status:r.status,statusText:r.statusText,headers:(e=r.getAllResponseHeaders()||"",t=new u,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var i=e.split(":"),n=i.shift().trim();if(n){var s=i.join(":").trim();t.append(n,s)}}),t)};i.url="responseURL"in r?r.responseURL:i.headers.get("X-Request-URL"),s(new S("response"in r?r.response:r.responseText,i))},r.onerror=function(){l(TypeError("Network request failed"))},r.ontimeout=function(){l(TypeError("Network request failed"))},r.onabort=function(){l(new e.DOMException("Aborted","AbortError"))},r.open(o.method,o.url,!0),"include"===o.credentials?r.withCredentials=!0:"omit"===o.credentials&&(r.withCredentials=!1),"responseType"in r&&n&&(r.responseType="blob"),o.headers.forEach(function(e,t){r.setRequestHeader(t,e)}),o.signal&&(o.signal.addEventListener("abort",a),r.onreadystatechange=function(){4===r.readyState&&o.signal.removeEventListener("abort",a)}),r.send(void 0===o._bodyInit?null:o._bodyInit)})}X.polyfill=!0,nZ.fetch||(nZ.fetch=X,nZ.Headers=u,nZ.Request=g,nZ.Response=S),e.Headers=u,e.Request=g,e.Response=S,e.fetch=X,Object.defineProperty(e,"__esModule",{value:!0})}({}),nZ.fetch.ponyfill=!0,delete nZ.fetch.polyfill,(nm=nZ.fetch).default=nZ.fetch,nm.fetch=nZ.fetch,nm.Headers=nZ.Headers,nm.Request=nZ.Request,nm.Response=nZ.Response,i3.exports=nm;var i4=i3.exports;let i7=tg(i4),i6=function(e,t){for(var i=0;i<t.length;i++){let n=t[i];if("string"!=typeof n&&!Array.isArray(n)){for(let t in n)if("default"!==t&&!(t in e)){let i=Object.getOwnPropertyDescriptor(n,t);i&&Object.defineProperty(e,t,i.get?i:{enumerable:!0,get:()=>n[t]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}({__proto__:null,default:i7},[i4]),i8=e=>{let t={};return e&&("undefined"!=typeof Headers&&e instanceof Headers||i6&&i4.Headers&&e instanceof i4.Headers?t=(e=>{let t={};return e.forEach((e,i)=>{t[i]=e}),t})(e):Array.isArray(e)?e.forEach(([e,i])=>{e&&void 0!==i&&(t[e]=i)}):t=e),t},ne=e=>e.replace(/([\s,]|#[^\n\r]+)+/g," ").trim(),nt=e=>t=>S(this,null,function*(){var i;let{url:n,query:s,variables:l,operationName:o,fetch:r,fetchOptions:a,middleware:c}=t,d=Z({},t.headers),u,p="";"POST"===e?"string"==typeof(u=ns(s,l,o,a.jsonSerializer))&&(d["Content-Type"]="application/json"):p=(e=>{if(!Array.isArray(e.query)){let t=[`query=${encodeURIComponent(ne(e.query))}`];return e.variables&&t.push(`variables=${encodeURIComponent(e.jsonSerializer.stringify(e.variables))}`),e.operationName&&t.push(`operationName=${encodeURIComponent(e.operationName)}`),t.join("&")}if(void 0!==e.variables&&!Array.isArray(e.variables))throw Error("Cannot create query with given variable type, array expected");let t=e.query.reduce((t,i,n)=>(t.push({query:ne(i),variables:e.variables?e.jsonSerializer.stringify(e.variables[n]):void 0}),t),[]);return`query=${encodeURIComponent(e.jsonSerializer.stringify(t))}`})({query:s,variables:l,operationName:o,jsonSerializer:null!=(i=a.jsonSerializer)?i:ic});let h=Z({method:e,headers:d,body:u},a),m=n,b=h;if(c){let e=yield Promise.resolve(c(y(Z({},h),{url:n,operationName:o,variables:l}))),{url:t}=e;m=t,b=g(e,["url"])}return p&&(m=`${m}?${p}`),yield r(m,b)});class ni{constructor(e,t={}){this.url=e,this.requestConfig=t,this.rawRequest=(...e)=>S(this,null,function*(){let[t,i,n]=e,s=t.query?t:{query:t,variables:i,requestHeaders:n,signal:void 0},l=this.requestConfig,{headers:o,fetch:r=i7,method:a="POST",requestMiddleware:c,responseMiddleware:d}=l,u=g(l,["headers","fetch","method","requestMiddleware","responseMiddleware"]),{url:p}=this;void 0!==s.signal&&(u.signal=s.signal);let{operationName:h}=i1(s.query);return nn({url:p,query:s.query,variables:s.variables,headers:Z(Z({},i8(no(o))),i8(s.requestHeaders)),operationName:h,fetch:r,method:a,fetchOptions:u,middleware:c}).then(e=>(d&&d(e),e)).catch(e=>{throw d&&d(e),e})})}request(e,...t){return S(this,null,function*(){let[i,n]=t,s=e.document?e:{document:e,variables:i,requestHeaders:n,signal:void 0},l=this.requestConfig,{headers:o,fetch:r=i7,method:a="POST",requestMiddleware:c,responseMiddleware:d}=l,u=g(l,["headers","fetch","method","requestMiddleware","responseMiddleware"]),{url:p}=this;void 0!==s.signal&&(u.signal=s.signal);let{query:h,operationName:m}=i1(s.document);return nn({url:p,query:h,variables:s.variables,headers:Z(Z({},i8(no(o))),i8(s.requestHeaders)),operationName:m,fetch:r,method:a,fetchOptions:u,middleware:c}).then(e=>(d&&d(e),e.data)).catch(e=>{throw d&&d(e),e})})}batchRequests(e,t){var i;let n=e.documents?e:{documents:e,requestHeaders:t,signal:void 0},s=this.requestConfig,{headers:l}=s,o=g(s,["headers"]);void 0!==n.signal&&(o.signal=n.signal);let r=n.documents.map(({document:e})=>i1(e).query),a=n.documents.map(({variables:e})=>e);return nn({url:this.url,query:r,variables:a,headers:Z(Z({},i8(no(l))),i8(n.requestHeaders)),operationName:void 0,fetch:null!=(i=this.requestConfig.fetch)?i:i7,method:this.requestConfig.method||"POST",fetchOptions:o,middleware:this.requestConfig.requestMiddleware}).then(e=>(this.requestConfig.responseMiddleware&&this.requestConfig.responseMiddleware(e),e.data)).catch(e=>{throw this.requestConfig.responseMiddleware&&this.requestConfig.responseMiddleware(e),e})}setHeaders(e){return this.requestConfig.headers=e,this}setHeader(e,t){let{headers:i}=this.requestConfig;return i?i[e]=t:this.requestConfig.headers={[e]:t},this}setEndpoint(e){return this.url=e,this}}let nn=e=>S(this,null,function*(){var t,i;let{query:n,variables:s,fetchOptions:l}=e,o=nt((null!=(t=e.method)?t:"post").toUpperCase()),r=Array.isArray(e.query),a=yield o(e),c=yield nl(a,null!=(i=l.jsonSerializer)?i:ic),d=Array.isArray(c)?!c.some(({data:e})=>!e):!!c.data,u=Array.isArray(c)||!c.errors||Array.isArray(c.errors)&&!c.errors.length||"all"===l.errorPolicy||"ignore"===l.errorPolicy;if(a.ok&&u&&d){let e=g(c,["errors"]),t="ignore"===l.errorPolicy?e:c;return y(Z({},r?{data:t}:t),{headers:a.headers,status:a.status})}throw new i5(y(Z({},"string"==typeof c?{error:c}:c),{status:a.status,headers:a.headers}),{query:n,variables:s})}),ns=(e,t,i,n)=>{let s=null!=n?n:ic;if(!Array.isArray(e))return s.stringify({query:e,variables:t,operationName:i});if(void 0!==t&&!Array.isArray(t))throw Error("Cannot create request body with given variable type, array expected");let l=e.reduce((e,i,n)=>(e.push({query:i,variables:t?t[n]:void 0}),e),[]);return s.stringify(l)},nl=(e,t)=>S(this,null,function*(){let i;return e.headers.forEach((e,t)=>{"content-type"===t.toLowerCase()&&(i=e)}),i&&(i.toLowerCase().startsWith("application/json")||i.toLowerCase().startsWith("application/graphql+json")||i.toLowerCase().startsWith("application/graphql-response+json"))?t.parse((yield e.text())):e.text()}),no=e=>"function"==typeof e?e():e;var nr=function(){return(nr=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},na=new Map,nc=new Map,nd=!0,nu=!1;function np(e){return e.replace(/[\s,]+/g," ").trim()}function nh(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];"string"==typeof e&&(e=[e]);var n=e[0];return t.forEach(function(t,i){t&&"Document"===t.kind?n+=t.loc.source.body:n+=t,n+=e[i+1]}),function(e){var t=np(e);if(!na.has(t)){var i,n,s,l,o,r=iE(e,{experimentalFragmentVariables:nu,allowLegacyFragmentVariables:nu});if(!r||"Document"!==r.kind)throw Error("Not a valid GraphQL document.");na.set(t,(i=new Set,n=[],r.definitions.forEach(function(e){if("FragmentDefinition"===e.kind){var t,s=e.name.value,l=np((t=e.loc).source.body.substring(t.start,t.end)),o=nc.get(s);o&&!o.has(l)?nd&&console.warn("Warning: fragment with name "+s+` already exists.
graphql-tag enforces all fragment names across your application to be unique; read more about
this in the docs: http://dev.apollodata.com/core/fragments.html#unique-names`):o||nc.set(s,o=new Set),o.add(l),i.has(l)||(i.add(l),n.push(e))}else n.push(e)}),s=nr(nr({},r),{definitions:n}),(l=new Set(s.definitions)).forEach(function(e){e.loc&&delete e.loc,Object.keys(e).forEach(function(t){var i=e[t];i&&"object"==typeof i&&l.add(i)})}),(o=s.loc)&&(delete o.startToken,delete o.endToken),s))}return na.get(t)}(n)}var nm,nb,nZ,ny,ng,nI,nS,nV,nX,nG,nW,nf,nC,nR,nv,nk=nh;(nv=nh||(nh={})).gql=nk,nv.resetCaches=function(){na.clear(),nc.clear()},nv.disableFragmentWarnings=function(){nd=!1},nv.enableExperimentalFragmentVariables=function(){nu=!0},nv.disableExperimentalFragmentVariables=function(){nu=!1},nh.default=nh;let nT=nh`
	mutation PushPayload(
		$session_secure_id: String!
		$payload_id: ID!
		$events: ReplayEventsInput!
		$messages: String!
		$resources: String!
		$web_socket_events: String!
		$errors: [ErrorObjectInput]!
		$is_beacon: Boolean
		$has_session_unloaded: Boolean
		$highlight_logs: String
	) {
		pushPayload(
			session_secure_id: $session_secure_id
			payload_id: $payload_id
			events: $events
			messages: $messages
			resources: $resources
			web_socket_events: $web_socket_events
			errors: $errors
			is_beacon: $is_beacon
			has_session_unloaded: $has_session_unloaded
			highlight_logs: $highlight_logs
		)
	}
`,nN=nh`
	mutation PushPayloadCompressed(
		$session_secure_id: String!
		$payload_id: ID!
		$data: String!
	) {
		pushPayloadCompressed(
			session_secure_id: $session_secure_id
			payload_id: $payload_id
			data: $data
		)
	}
`,nw=nh`
	mutation identifySession(
		$session_secure_id: String!
		$user_identifier: String!
		$user_object: Any
	) {
		identifySession(
			session_secure_id: $session_secure_id
			user_identifier: $user_identifier
			user_object: $user_object
		)
	}
`,nL=nh`
	mutation addSessionProperties(
		$session_secure_id: String!
		$properties_object: Any
	) {
		addSessionProperties(
			session_secure_id: $session_secure_id
			properties_object: $properties_object
		)
	}
`,nx=nh`
	mutation pushMetrics($metrics: [MetricInput]!) {
		pushMetrics(metrics: $metrics)
	}
`,nJ=nh`
	mutation addSessionFeedback(
		$session_secure_id: String!
		$user_name: String
		$user_email: String
		$verbatim: String!
		$timestamp: Timestamp!
	) {
		addSessionFeedback(
			session_secure_id: $session_secure_id
			user_name: $user_name
			user_email: $user_email
			verbatim: $verbatim
			timestamp: $timestamp
		)
	}
`,nK=nh`
	mutation initializeSession(
		$session_secure_id: String!
		$organization_verbose_id: String!
		$enable_strict_privacy: Boolean!
		$privacy_setting: String!
		$enable_recording_network_contents: Boolean!
		$clientVersion: String!
		$firstloadVersion: String!
		$clientConfig: String!
		$environment: String!
		$id: String!
		$appVersion: String
		$serviceName: String!
		$client_id: String!
		$network_recording_domains: [String!]
		$disable_session_recording: Boolean
	) {
		initializeSession(
			session_secure_id: $session_secure_id
			organization_verbose_id: $organization_verbose_id
			enable_strict_privacy: $enable_strict_privacy
			enable_recording_network_contents: $enable_recording_network_contents
			clientVersion: $clientVersion
			firstloadVersion: $firstloadVersion
			clientConfig: $clientConfig
			environment: $environment
			appVersion: $appVersion
			serviceName: $serviceName
			fingerprint: $id
			client_id: $client_id
			network_recording_domains: $network_recording_domains
			disable_session_recording: $disable_session_recording
			privacy_setting: $privacy_setting
		) {
			secure_id
			project_id
		}
	}
`,nY=nh`
	query Ignore($id: ID!) {
		ignore(id: $id)
	}
`,nU=(e,t,i,n)=>e(),nF=e=>{e(window.location.href);var t=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(i){setTimeout(()=>{var t,n;try{n=JSON.parse(null!=(t=null==i?void 0:i.toString())?t:"")}catch(e){return}"track"!==n.type&&"identify"!==n.type||nE(n)&&e(n)},100),t.call(this,i)};let i=t=>{if("ajs_user_id"===t.key||"ajs_anonymous_id"===t.key||"ajs_user_traits"===t.key){let{userId:t,userTraits:i}=nH();if(t){let n={};i&&(n=JSON.parse(i));let s={type:"identify",userId:t.toString(),traits:n};nE(s)&&e(s)}}},{userId:n,userTraits:s}=nH();if(n){let t={};s&&(t=JSON.parse(s));let i={type:"identify",userId:n.toString(),traits:t};nE(i)&&e(i)}return window.addEventListener("storage",i),tD(({keyName:e})=>{i({key:e})}),()=>{window.removeEventListener("storage",i),XMLHttpRequest.prototype.send=t}},nH=()=>({userId:tP("ajs_user_id"),userTraits:tP("ajs_user_traits"),anonymousId:tP("ajs_anonymous_id")}),nE=e=>{if(!e)return!1;let t="";try{t=JSON.stringify(e)}catch(e){return!1}let i=nM(t),n=tP(tE.SEGMENT_LAST_SENT_HASH_KEY);return(void 0===n||i!==n)&&(tB(tE.SEGMENT_LAST_SENT_HASH_KEY,i),!0)},nM=e=>{var t=0,i=e.length,n=0;if(i>0)for(;n<i;)t=(t<<5)-t+e.charCodeAt(n++)|0;return t.toString()};function nz(e){if(e.id.length)return`#${e.id}`;if(e.classList.length){let t=[];for(let i of e.classList)t.push(`.${i}`);return`${e.nodeName.toLowerCase()}${t.join(",")}`}return e.nodeName.toLowerCase()}let nO=e=>{let t="",i=e.getAttribute("class"),n=e.getAttribute("id");return n&&(t=t.concat(nP(n,"#"))),i&&(t=t.concat(nP(i,"."))),""===t&&(t=t.concat(e.tagName.toLowerCase())),t},nP=(e,t)=>`${t}${e.trim().split(" ").join(t)}`,nB=(e,t)=>{var i,n,s;let l=function(e){"string"!=typeof e&&(e="");let t=(e=e.replace(/\s/g,"")).split(","),i=t.lastIndexOf("");for(;i>=0;)t[i-1]+=",",t.splice(i,1),i=t.lastIndexOf("");return t}(e),o=[];for(let e=0;e<l.length;e++){let i=l[e].split("+");o=[],i.length>1&&(o=function(e,t){let i=t.slice(0,t.length-1);for(let t=0;t<i.length;t++)i[t]=e[i[t].toLowerCase()];return i}(n$,i)),(i="*"===(i=i[i.length-1])?"*":n0(i))in nD||(nD[i]=[]),nD[i].push({mods:o,shortcut:l[e],key:l[e],method:t,keyup:!1,keydown:!0,scope:"all",splitKey:"+"})}i=document,n="keydown",s=e=>{(function(e){let t=nD["*"],i=e.keyCode||e.which||e.charCode;if(93!==i&&224!==i||(i=91),-1===nA.indexOf(i)&&229!==i&&nA.push(i),["ctrlKey","altKey","shiftKey","metaKey"].forEach(t=>{let i=n_[t];e[t]&&-1===nA.indexOf(i)?nA.push(i):!e[t]&&nA.indexOf(i)>-1?nA.splice(nA.indexOf(i),1):"metaKey"===t&&e[t]&&3===nA.length&&(e.ctrlKey||e.shiftKey||e.altKey||(nA=nA.slice(nA.indexOf(i))))}),!(i in nq)||(nq[i]=!0,t)){for(let t in nq)Object.prototype.hasOwnProperty.call(nq,t)&&(nq[t]=e[n_[t]]);if(e.getModifierState&&(!e.altKey||e.ctrlKey)&&e.getModifierState("AltGraph")&&(-1===nA.indexOf(17)&&nA.push(17),-1===nA.indexOf(18)&&nA.push(18),nq[17]=!0,nq[18]=!0),i in nD)for(let t=0;t<nD[i].length;t++)("keydown"===e.type&&nD[i][t].keydown||"keyup"===e.type&&nD[i][t].keyup)&&nD[i][t].key&&function(e,t,i){let n;if("all"===t.scope||"all"===t.scope){for(let e in n=t.mods.length>0,nq)Object.prototype.hasOwnProperty.call(nq,e)&&(!nq[e]&&t.mods.indexOf(+e)>-1||nq[e]&&-1===t.mods.indexOf(+e))&&(n=!1);(0!==t.mods.length||nq[16]||nq[18]||nq[17]||nq[91])&&!n&&"*"!==t.shortcut||!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}(e,nD[i][t],0)}})(e)},i.addEventListener?i.addEventListener(n,s,!1):i.attachEvent&&i.attachEvent(`on${n}`,()=>{s(window.event)})},nA=[],nD={},nQ="undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0,nj={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":nQ?173:189,"=":nQ?61:187,";":nQ?59:186,"'":222,"[":219,"]":221,"\\":220},n_={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},nq={16:!1,18:!1,17:!1,91:!1},n$={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},n0=e=>nj[e.toLowerCase()]||n$[e.toLowerCase()]||e.toUpperCase().charCodeAt(0);var n2,n9,n1,n5,n3,n4=-1,n7=function(e){addEventListener("pageshow",function(t){t.persisted&&(n4=t.timeStamp,e(t))},!0)},n6=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},n8=function(){var e=n6();return e&&e.activationStart||0},se=function(e,t){var i=n6(),n="navigate";return n4>=0?n="back-forward-cache":i&&(document.prerendering||n8()>0?n="prerender":document.wasDiscarded?n="restore":i.type&&(n=i.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:n}},st=function(e,t,i){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var n=new PerformanceObserver(function(e){Promise.resolve().then(function(){t(e.getEntries())})});return n.observe(Object.assign({type:e,buffered:!0},i||{})),n}}catch(e){}},si=function(e,t,i,n){var s,l;return function(o){var r;t.value>=0&&(o||n)&&((l=t.value-(s||0))||void 0===s)&&(s=t.value,t.delta=l,t.rating=(r=t.value)>i[1]?"poor":r>i[0]?"needs-improvement":"good",e(t))}},sn=function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})},ss=function(e){var t=function(t){"pagehide"!==t.type&&"hidden"!==document.visibilityState||e(t)};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},sl=function(e){var t=!1;return function(i){t||(e(i),t=!0)}},so=-1,sr=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},sa=function(e){"hidden"===document.visibilityState&&so>-1&&(so="visibilitychange"===e.type?e.timeStamp:0,sd())},sc=function(){addEventListener("visibilitychange",sa,!0),addEventListener("prerenderingchange",sa,!0)},sd=function(){removeEventListener("visibilitychange",sa,!0),removeEventListener("prerenderingchange",sa,!0)},su=function(){return so<0&&(so=sr(),sc(),n7(function(){setTimeout(function(){so=sr(),sc()},0)})),{get firstHiddenTime(){return so}}},sp=function(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()},sh=[1800,3e3],sm=function(e,t){t=t||{},sp(function(){var i,n=su(),s=se("FCP"),l=st("paint",function(e){e.forEach(function(e){"first-contentful-paint"===e.name&&(l.disconnect(),e.startTime<n.firstHiddenTime&&(s.value=Math.max(e.startTime-n8(),0),s.entries.push(e),i(!0)))})});l&&(i=si(e,s,sh,t.reportAllChanges),n7(function(n){i=si(e,s=se("FCP"),sh,t.reportAllChanges),sn(function(){s.value=performance.now()-n.timeStamp,i(!0)})}))})},sb=[.1,.25],sZ={passive:!0,capture:!0},sy=new Date,sg=function(e,t){n2||(n2=t,n9=e,n1=new Date,sV(removeEventListener),sI())},sI=function(){if(n9>=0&&n9<n1-sy){var e={entryType:"first-input",name:n2.type,target:n2.target,cancelable:n2.cancelable,startTime:n2.timeStamp,processingStart:n2.timeStamp+n9};n5.forEach(function(t){t(e)}),n5=[]}},sS=function(e){if(e.cancelable){var t,i,n,s=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?(t=function(){sg(s,e),n()},i=function(){n()},n=function(){removeEventListener("pointerup",t,sZ),removeEventListener("pointercancel",i,sZ)},addEventListener("pointerup",t,sZ),addEventListener("pointercancel",i,sZ)):sg(s,e)}},sV=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach(function(t){return e(t,sS,sZ)})},sX=[100,300],sG=0,sW=1/0,sf=0,sC=function(e){e.forEach(function(e){e.interactionId&&(sW=Math.min(sW,e.interactionId),sG=(sf=Math.max(sf,e.interactionId))?(sf-sW)/7+1:0)})},sR=function(){return n3?sG:performance.interactionCount||0},sv=[200,500],sk=0,sT=function(){return sR()-sk},sN=[],sw={},sL=function(e){var t=sN[sN.length-1],i=sw[e.interactionId];if(i||sN.length<10||e.duration>t.latency){if(i)i.entries.push(e),i.latency=Math.max(i.latency,e.duration);else{var n={id:e.interactionId,latency:e.duration,entries:[e]};sw[n.id]=n,sN.push(n)}sN.sort(function(e,t){return t.latency-e.latency}),sN.splice(10).forEach(function(e){delete sw[e.id]})}},sx=function(e,t){t=t||{},sp(function(){"interactionCount"in performance||n3||(n3=st("event",sC,{type:"event",buffered:!0,durationThreshold:0}));var i,n,s=se("INP"),l=function(e){e.forEach(function(e){e.interactionId&&sL(e),"first-input"!==e.entryType||sN.some(function(t){return t.entries.some(function(t){return e.duration===t.duration&&e.startTime===t.startTime})})||sL(e)});var t,i=(t=Math.min(sN.length-1,Math.floor(sT()/50)),sN[t]);i&&i.latency!==s.value&&(s.value=i.latency,s.entries=i.entries,n())},o=st("event",l,{durationThreshold:null!==(i=t.durationThreshold)&&void 0!==i?i:40});n=si(e,s,sv,t.reportAllChanges),o&&("interactionId"in PerformanceEventTiming.prototype&&o.observe({type:"first-input",buffered:!0}),ss(function(){l(o.takeRecords()),s.value<0&&sT()>0&&(s.value=0,s.entries=[]),n(!0)}),n7(function(){sN=[],sk=sR(),n=si(e,s=se("INP"),sv,t.reportAllChanges)}))})},sJ=[2500,4e3],sK={},sY=[800,1800],sU=function e(t){document.prerendering?sp(function(){return e(t)}):"complete"!==document.readyState?addEventListener("load",function(){return e(t)},!0):setTimeout(t,0)},sF=function(e,t){t=t||{};var i=se("TTFB"),n=si(e,i,sY,t.reportAllChanges);sU(function(){var s=n6();if(s){var l=s.responseStart;if(l<=0||l>performance.now())return;i.value=Math.max(l-n8(),0),i.entries=[s],n(!0),n7(function(){(n=si(e,i=se("TTFB",0),sY,t.reportAllChanges))(!0)})}})};let sH=e=>{var t,i,n;return t=t||{},sm(sl(function(){var i,n=se("CLS",0),s=0,l=[],o=function(e){e.forEach(function(e){if(!e.hadRecentInput){var t=l[0],i=l[l.length-1];s&&e.startTime-i.startTime<1e3&&e.startTime-t.startTime<5e3?(s+=e.value,l.push(e)):(s=e.value,l=[e])}}),s>n.value&&(n.value=s,n.entries=l,i())},r=st("layout-shift",o);r&&(i=si(e,n,sb,t.reportAllChanges),ss(function(){o(r.takeRecords()),i(!0)}),n7(function(){s=0,i=si(e,n=se("CLS",0),sb,t.reportAllChanges),sn(function(){return i()})}),setTimeout(i,0))})),sm(e),i=i||{},sp(function(){var t,n=su(),s=se("FID"),l=function(e){e.startTime<n.firstHiddenTime&&(s.value=e.processingStart-e.startTime,s.entries.push(e),t(!0))},o=function(e){e.forEach(l)},r=st("first-input",o);t=si(e,s,sX,i.reportAllChanges),r&&ss(sl(function(){o(r.takeRecords()),r.disconnect()})),r&&n7(function(){t=si(e,s=se("FID"),sX,i.reportAllChanges),n5=[],n9=-1,n2=null,sV(addEventListener),n5.push(l),sI()})}),n=n||{},sp(function(){var t,i=su(),s=se("LCP"),l=function(e){var n=e[e.length-1];n&&n.startTime<i.firstHiddenTime&&(s.value=Math.max(n.startTime-n8(),0),s.entries=[n],t())},o=st("largest-contentful-paint",l);if(o){t=si(e,s,sJ,n.reportAllChanges);var r=sl(function(){sK[s.id]||(l(o.takeRecords()),o.disconnect(),sK[s.id]=!0,t(!0))});["keydown","click"].forEach(function(e){addEventListener(e,function(){return setTimeout(r,0)},!0)}),ss(r),n7(function(i){t=si(e,s=se("LCP"),sJ,n.reportAllChanges),sn(function(){s.value=performance.now()-i.timeStamp,sK[s.id]=!0,t(!0)})})}}),sF(e),sx(e),()=>{}},sE=e=>e/1e6,sM=e=>1024*e,sz="undefined"!=typeof window&&"performance"in window&&"memory"in performance?performance:{memory:{}},sO="highlightLogs",sP=e=>{var t;let i;if(!e)return;let n=tP(sO)||"";n&&(n.startsWith(e)?tB(sO,n=n.slice(e.length)):(t="Unable to clear logs "+e.replace(`
`," ")+" from "+n.replace(`
`," "),i=tP(sO)||"",tB(sO,i=i+"["+new Date().getTime()+"] "+t+`
`)))},sB=()=>{var e,t="";let i="undefined"!=typeof window&&(null==(e=window.crypto)?void 0:e.getRandomValues),n=new Uint32Array(28);i&&window.crypto.getRandomValues(n);for(let e=0;e<28;e++)t+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(i?n[e]%62:Math.floor(62*Math.random()));return t},sA="dmFyIF9fZGVmUHJvcD1PYmplY3QuZGVmaW5lUHJvcGVydHksX19kZWZQcm9wcz1PYmplY3QuZGVmaW5lUHJvcGVydGllcyxfX2dldE93blByb3BEZXNjcz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyxfX2dldE93blByb3BTeW1ib2xzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsX19oYXNPd25Qcm9wPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksX19wcm9wSXNFbnVtPU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUsX19kZWZOb3JtYWxQcm9wPShlLHQsbik9PnQgaW4gZT9fX2RlZlByb3AoZSx0LHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpufSk6ZVt0XT1uLF9fc3ByZWFkVmFsdWVzPShlLHQpPT57Zm9yKHZhciBuIGluIHR8fCh0PXt9KSlfX2hhc093blByb3AuY2FsbCh0LG4pJiZfX2RlZk5vcm1hbFByb3AoZSxuLHRbbl0pO2lmKF9fZ2V0T3duUHJvcFN5bWJvbHMpZm9yKHZhciBuIG9mIF9fZ2V0T3duUHJvcFN5bWJvbHModCkpX19wcm9wSXNFbnVtLmNhbGwodCxuKSYmX19kZWZOb3JtYWxQcm9wKGUsbix0W25dKTtyZXR1cm4gZX0sX19zcHJlYWRQcm9wcz0oZSx0KT0+X19kZWZQcm9wcyhlLF9fZ2V0T3duUHJvcERlc2NzKHQpKSxfX29ialJlc3Q9KGUsdCk9Pnt2YXIgbj17fTtmb3IodmFyIHIgaW4gZSlfX2hhc093blByb3AuY2FsbChlLHIpJiZ0LmluZGV4T2Yocik8MCYmKG5bcl09ZVtyXSk7aWYobnVsbCE9ZSYmX19nZXRPd25Qcm9wU3ltYm9scylmb3IodmFyIHIgb2YgX19nZXRPd25Qcm9wU3ltYm9scyhlKSl0LmluZGV4T2Yocik8MCYmX19wcm9wSXNFbnVtLmNhbGwoZSxyKSYmKG5bcl09ZVtyXSk7cmV0dXJuIG59LF9fcHVibGljRmllbGQ9KGUsdCxuKT0+KF9fZGVmTm9ybWFsUHJvcChlLCJzeW1ib2wiIT10eXBlb2YgdD90KyIiOnQsbiksbiksX19hc3luYz0oZSx0LG4pPT5uZXcgUHJvbWlzZSgoKHIsaSk9Pnt2YXIgcz1lPT57dHJ5e2Eobi5uZXh0KGUpKX1jYXRjaCh0KXtpKHQpfX0sbz1lPT57dHJ5e2Eobi50aHJvdyhlKSl9Y2F0Y2godCl7aSh0KX19LGE9ZT0+ZS5kb25lP3IoZS52YWx1ZSk6UHJvbWlzZS5yZXNvbHZlKGUudmFsdWUpLnRoZW4ocyxvKTthKChuPW4uYXBwbHkoZSx0KSkubmV4dCgpKX0pKTshZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZShlLHQpe3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKHQpe3QmJiJzdHJpbmciIT10eXBlb2YgdCYmIUFycmF5LmlzQXJyYXkodCkmJk9iamVjdC5rZXlzKHQpLmZvckVhY2goKGZ1bmN0aW9uKG4pe2lmKCJkZWZhdWx0IiE9PW4mJiEobiBpbiBlKSl7dmFyIHI9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LG4pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG4sci5nZXQ/cjp7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdFtuXX19KX19KSl9KSksT2JqZWN0LmZyZWV6ZShlKX12YXIgdD0oZT0+KGVbZS5Jbml0aWFsaXplPTBdPSJJbml0aWFsaXplIixlW2UuQXN5bmNFdmVudHM9MV09IkFzeW5jRXZlbnRzIixlW2UuSWRlbnRpZnk9Ml09IklkZW50aWZ5IixlW2UuUHJvcGVydGllcz0zXT0iUHJvcGVydGllcyIsZVtlLk1ldHJpY3M9NF09Ik1ldHJpY3MiLGVbZS5GZWVkYmFjaz01XT0iRmVlZGJhY2siLGVbZS5DdXN0b21FdmVudD02XT0iQ3VzdG9tRXZlbnQiLGUpKSh0fHx7fSksbj0idW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbFRoaXM/Z2xvYmFsVGhpczoidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOnt9O2Z1bmN0aW9uIHIoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZSYmT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImRlZmF1bHQiKT9lLmRlZmF1bHQ6ZX12YXIgaT17ZXhwb3J0czp7fX07IWZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLHQpe3ZhciBuPVtdLHI9W107cmV0dXJuIG51bGw9PXQmJih0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5bMF09PT10PyJbQ2lyY3VsYXIgfl0iOiJbQ2lyY3VsYXIgfi4iK3Iuc2xpY2UoMCxuLmluZGV4T2YodCkpLmpvaW4oIi4iKSsiXSJ9KSxmdW5jdGlvbihpLHMpe2lmKG4ubGVuZ3RoPjApe3ZhciBvPW4uaW5kZXhPZih0aGlzKTt+bz9uLnNwbGljZShvKzEpOm4ucHVzaCh0aGlzKSx+bz9yLnNwbGljZShvLDEvMCxpKTpyLnB1c2goaSksfm4uaW5kZXhPZihzKSYmKHM9dC5jYWxsKHRoaXMsaSxzKSl9ZWxzZSBuLnB1c2gocyk7cmV0dXJuIG51bGw9PWU/czplLmNhbGwodGhpcyxpLHMpfX0oZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGkpe3JldHVybiBKU09OLnN0cmluZ2lmeShlLG4odCxpKSxyKX0pLmdldFNlcmlhbGl6ZT1ufShpKTt2YXIgcz1yKGkuZXhwb3J0cyksbz1mdW5jdGlvbigpe3JldHVybiBvPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPTEscj1hcmd1bWVudHMubGVuZ3RoO248cjtuKyspZm9yKHZhciBpIGluIHQ9YXJndW1lbnRzW25dKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGkpJiYoZVtpXT10W2ldKTtyZXR1cm4gZX0sby5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2Z1bmN0aW9uIGEoZSx0KXtpZighQm9vbGVhbihlKSl0aHJvdyBuZXcgRXJyb3IodCl9ZnVuY3Rpb24gYyhlLHQpe2lmKCFCb29sZWFuKGUpKXRocm93IG5ldyBFcnJvcihudWxsIT10P3Q6IlVuZXhwZWN0ZWQgaW52YXJpYW50IHRyaWdnZXJlZC4iKX1jb25zdCBsPS9cclxufFtcblxyXS9nO2Z1bmN0aW9uIHUoZSx0KXtsZXQgbj0wLHI9MTtmb3IoY29uc3QgaSBvZiBlLmJvZHkubWF0Y2hBbGwobCkpe2lmKCJudW1iZXIiPT10eXBlb2YgaS5pbmRleHx8YyghMSksaS5pbmRleD49dClicmVhaztuPWkuaW5kZXgraVswXS5sZW5ndGgscis9MX1yZXR1cm57bGluZTpyLGNvbHVtbjp0KzEtbn19ZnVuY3Rpb24gZChlLHQpe2NvbnN0IG49ZS5sb2NhdGlvbk9mZnNldC5jb2x1bW4tMSxyPSIiLnBhZFN0YXJ0KG4pK2UuYm9keSxpPXQubGluZS0xLHM9ZS5sb2NhdGlvbk9mZnNldC5saW5lLTEsbz10LmxpbmUrcyxhPTE9PT10LmxpbmU/bjowLGM9dC5jb2x1bW4rYSxsPWAke2UubmFtZX06JHtvfToke2N9XG5gLHU9ci5zcGxpdCgvXHJcbnxbXG5ccl0vZyksZD11W2ldO2lmKGQubGVuZ3RoPjEyMCl7Y29uc3QgZT1NYXRoLmZsb29yKGMvODApLHQ9YyU4MCxuPVtdO2ZvcihsZXQgcj0wO3I8ZC5sZW5ndGg7cis9ODApbi5wdXNoKGQuc2xpY2UocixyKzgwKSk7cmV0dXJuIGwrcChbW2Ake299IHxgLG5bMF1dLC4uLm4uc2xpY2UoMSxlKzEpLm1hcCgoZT0+WyJ8IixlXSkpLFsifCIsIl4iLnBhZFN0YXJ0KHQpXSxbInwiLG5bZSsxXV1dKX1yZXR1cm4gbCtwKFtbby0xKyIgfCIsdVtpLTFdXSxbYCR7b30gfGAsZF0sWyJ8IiwiXiIucGFkU3RhcnQoYyldLFtgJHtvKzF9IHxgLHVbaSsxXV1dKX1mdW5jdGlvbiBwKGUpe2NvbnN0IHQ9ZS5maWx0ZXIoKChbZSx0XSk9PnZvaWQgMCE9PXQpKSxuPU1hdGgubWF4KC4uLnQubWFwKCgoW2VdKT0+ZS5sZW5ndGgpKSk7cmV0dXJuIHQubWFwKCgoW2UsdF0pPT5lLnBhZFN0YXJ0KG4pKyh0PyIgIit0OiIiKSkpLmpvaW4oIlxuIil9Y2xhc3MgaCBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKGUsLi4udCl7dmFyIG4scixpO2NvbnN0e25vZGVzOnMsc291cmNlOm8scG9zaXRpb25zOmEscGF0aDpjLG9yaWdpbmFsRXJyb3I6bCxleHRlbnNpb25zOmR9PWZ1bmN0aW9uKGUpe2NvbnN0IHQ9ZVswXTtyZXR1cm4gbnVsbD09dHx8ImtpbmQiaW4gdHx8Imxlbmd0aCJpbiB0P3tub2Rlczp0LHNvdXJjZTplWzFdLHBvc2l0aW9uczplWzJdLHBhdGg6ZVszXSxvcmlnaW5hbEVycm9yOmVbNF0sZXh0ZW5zaW9uczplWzVdfTp0fSh0KTtzdXBlcihlKSx0aGlzLm5hbWU9IkdyYXBoUUxFcnJvciIsdGhpcy5wYXRoPW51bGwhPWM/Yzp2b2lkIDAsdGhpcy5vcmlnaW5hbEVycm9yPW51bGwhPWw/bDp2b2lkIDAsdGhpcy5ub2Rlcz1mKEFycmF5LmlzQXJyYXkocyk/czpzP1tzXTp2b2lkIDApO2NvbnN0IHA9ZihudWxsPT09KG49dGhpcy5ub2Rlcyl8fHZvaWQgMD09PW4/dm9pZCAwOm4ubWFwKChlPT5lLmxvYykpLmZpbHRlcigoZT0+bnVsbCE9ZSkpKTt0aGlzLnNvdXJjZT1udWxsIT1vP286bnVsbD09cHx8bnVsbD09PShyPXBbMF0pfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLnNvdXJjZSx0aGlzLnBvc2l0aW9ucz1udWxsIT1hP2E6bnVsbD09cD92b2lkIDA6cC5tYXAoKGU9PmUuc3RhcnQpKSx0aGlzLmxvY2F0aW9ucz1hJiZvP2EubWFwKChlPT51KG8sZSkpKTpudWxsPT1wP3ZvaWQgMDpwLm1hcCgoZT0+dShlLnNvdXJjZSxlLnN0YXJ0KSkpO2NvbnN0IHk9Im9iamVjdCI9PXR5cGVvZihtPW51bGw9PWw/dm9pZCAwOmwuZXh0ZW5zaW9ucykmJm51bGwhPT1tP251bGw9PWw/dm9pZCAwOmwuZXh0ZW5zaW9uczp2b2lkIDA7dmFyIG07dGhpcy5leHRlbnNpb25zPW51bGwhPT0oaT1udWxsIT1kP2Q6eSkmJnZvaWQgMCE9PWk/aTpPYmplY3QuY3JlYXRlKG51bGwpLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse21lc3NhZ2U6e3dyaXRhYmxlOiEwLGVudW1lcmFibGU6ITB9LG5hbWU6e2VudW1lcmFibGU6ITF9LG5vZGVzOntlbnVtZXJhYmxlOiExfSxzb3VyY2U6e2VudW1lcmFibGU6ITF9LHBvc2l0aW9uczp7ZW51bWVyYWJsZTohMX0sb3JpZ2luYWxFcnJvcjp7ZW51bWVyYWJsZTohMX19KSxudWxsIT1sJiZsLnN0YWNrP09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJzdGFjayIse3ZhbHVlOmwuc3RhY2ssd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfSk6RXJyb3IuY2FwdHVyZVN0YWNrVHJhY2U/RXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcyxoKTpPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywic3RhY2siLHt2YWx1ZTpFcnJvcigpLnN0YWNrLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pfWdldFtTeW1ib2wudG9TdHJpbmdUYWddKCl7cmV0dXJuIkdyYXBoUUxFcnJvciJ9dG9TdHJpbmcoKXtsZXQgZT10aGlzLm1lc3NhZ2U7aWYodGhpcy5ub2Rlcylmb3IoY29uc3QgbiBvZiB0aGlzLm5vZGVzKW4ubG9jJiYoZSs9IlxuXG4iK2QoKHQ9bi5sb2MpLnNvdXJjZSx1KHQuc291cmNlLHQuc3RhcnQpKSk7ZWxzZSBpZih0aGlzLnNvdXJjZSYmdGhpcy5sb2NhdGlvbnMpZm9yKGNvbnN0IG4gb2YgdGhpcy5sb2NhdGlvbnMpZSs9IlxuXG4iK2QodGhpcy5zb3VyY2Usbik7dmFyIHQ7cmV0dXJuIGV9dG9KU09OKCl7Y29uc3QgZT17bWVzc2FnZTp0aGlzLm1lc3NhZ2V9O3JldHVybiBudWxsIT10aGlzLmxvY2F0aW9ucyYmKGUubG9jYXRpb25zPXRoaXMubG9jYXRpb25zKSxudWxsIT10aGlzLnBhdGgmJihlLnBhdGg9dGhpcy5wYXRoKSxudWxsIT10aGlzLmV4dGVuc2lvbnMmJk9iamVjdC5rZXlzKHRoaXMuZXh0ZW5zaW9ucykubGVuZ3RoPjAmJihlLmV4dGVuc2lvbnM9dGhpcy5leHRlbnNpb25zKSxlfX1mdW5jdGlvbiBmKGUpe3JldHVybiB2b2lkIDA9PT1lfHwwPT09ZS5sZW5ndGg/dm9pZCAwOmV9ZnVuY3Rpb24geShlLHQsbil7cmV0dXJuIG5ldyBoKGBTeW50YXggRXJyb3I6ICR7bn1gLHtzb3VyY2U6ZSxwb3NpdGlvbnM6W3RdfSl9Y2xhc3MgbXtjb25zdHJ1Y3RvcihlLHQsbil7dGhpcy5zdGFydD1lLnN0YXJ0LHRoaXMuZW5kPXQuZW5kLHRoaXMuc3RhcnRUb2tlbj1lLHRoaXMuZW5kVG9rZW49dCx0aGlzLnNvdXJjZT1ufWdldFtTeW1ib2wudG9TdHJpbmdUYWddKCl7cmV0dXJuIkxvY2F0aW9uIn10b0pTT04oKXtyZXR1cm57c3RhcnQ6dGhpcy5zdGFydCxlbmQ6dGhpcy5lbmR9fX1jbGFzcyB2e2NvbnN0cnVjdG9yKGUsdCxuLHIsaSxzKXt0aGlzLmtpbmQ9ZSx0aGlzLnN0YXJ0PXQsdGhpcy5lbmQ9bix0aGlzLmxpbmU9cix0aGlzLmNvbHVtbj1pLHRoaXMudmFsdWU9cyx0aGlzLnByZXY9bnVsbCx0aGlzLm5leHQ9bnVsbH1nZXRbU3ltYm9sLnRvU3RyaW5nVGFnXSgpe3JldHVybiJUb2tlbiJ9dG9KU09OKCl7cmV0dXJue2tpbmQ6dGhpcy5raW5kLHZhbHVlOnRoaXMudmFsdWUsbGluZTp0aGlzLmxpbmUsY29sdW1uOnRoaXMuY29sdW1ufX19Y29uc3QgXz17TmFtZTpbXSxEb2N1bWVudDpbImRlZmluaXRpb25zIl0sT3BlcmF0aW9uRGVmaW5pdGlvbjpbIm5hbWUiLCJ2YXJpYWJsZURlZmluaXRpb25zIiwiZGlyZWN0aXZlcyIsInNlbGVjdGlvblNldCJdLFZhcmlhYmxlRGVmaW5pdGlvbjpbInZhcmlhYmxlIiwidHlwZSIsImRlZmF1bHRWYWx1ZSIsImRpcmVjdGl2ZXMiXSxWYXJpYWJsZTpbIm5hbWUiXSxTZWxlY3Rpb25TZXQ6WyJzZWxlY3Rpb25zIl0sRmllbGQ6WyJhbGlhcyIsIm5hbWUiLCJhcmd1bWVudHMiLCJkaXJlY3RpdmVzIiwic2VsZWN0aW9uU2V0Il0sQXJndW1lbnQ6WyJuYW1lIiwidmFsdWUiXSxGcmFnbWVudFNwcmVhZDpbIm5hbWUiLCJkaXJlY3RpdmVzIl0sSW5saW5lRnJhZ21lbnQ6WyJ0eXBlQ29uZGl0aW9uIiwiZGlyZWN0aXZlcyIsInNlbGVjdGlvblNldCJdLEZyYWdtZW50RGVmaW5pdGlvbjpbIm5hbWUiLCJ2YXJpYWJsZURlZmluaXRpb25zIiwidHlwZUNvbmRpdGlvbiIsImRpcmVjdGl2ZXMiLCJzZWxlY3Rpb25TZXQiXSxJbnRWYWx1ZTpbXSxGbG9hdFZhbHVlOltdLFN0cmluZ1ZhbHVlOltdLEJvb2xlYW5WYWx1ZTpbXSxOdWxsVmFsdWU6W10sRW51bVZhbHVlOltdLExpc3RWYWx1ZTpbInZhbHVlcyJdLE9iamVjdFZhbHVlOlsiZmllbGRzIl0sT2JqZWN0RmllbGQ6WyJuYW1lIiwidmFsdWUiXSxEaXJlY3RpdmU6WyJuYW1lIiwiYXJndW1lbnRzIl0sTmFtZWRUeXBlOlsibmFtZSJdLExpc3RUeXBlOlsidHlwZSJdLE5vbk51bGxUeXBlOlsidHlwZSJdLFNjaGVtYURlZmluaXRpb246WyJkZXNjcmlwdGlvbiIsImRpcmVjdGl2ZXMiLCJvcGVyYXRpb25UeXBlcyJdLE9wZXJhdGlvblR5cGVEZWZpbml0aW9uOlsidHlwZSJdLFNjYWxhclR5cGVEZWZpbml0aW9uOlsiZGVzY3JpcHRpb24iLCJuYW1lIiwiZGlyZWN0aXZlcyJdLE9iamVjdFR5cGVEZWZpbml0aW9uOlsiZGVzY3JpcHRpb24iLCJuYW1lIiwiaW50ZXJmYWNlcyIsImRpcmVjdGl2ZXMiLCJmaWVsZHMiXSxGaWVsZERlZmluaXRpb246WyJkZXNjcmlwdGlvbiIsIm5hbWUiLCJhcmd1bWVudHMiLCJ0eXBlIiwiZGlyZWN0aXZlcyJdLElucHV0VmFsdWVEZWZpbml0aW9uOlsiZGVzY3JpcHRpb24iLCJuYW1lIiwidHlwZSIsImRlZmF1bHRWYWx1ZSIsImRpcmVjdGl2ZXMiXSxJbnRlcmZhY2VUeXBlRGVmaW5pdGlvbjpbImRlc2NyaXB0aW9uIiwibmFtZSIsImludGVyZmFjZXMiLCJkaXJlY3RpdmVzIiwiZmllbGRzIl0sVW5pb25UeXBlRGVmaW5pdGlvbjpbImRlc2NyaXB0aW9uIiwibmFtZSIsImRpcmVjdGl2ZXMiLCJ0eXBlcyJdLEVudW1UeXBlRGVmaW5pdGlvbjpbImRlc2NyaXB0aW9uIiwibmFtZSIsImRpcmVjdGl2ZXMiLCJ2YWx1ZXMiXSxFbnVtVmFsdWVEZWZpbml0aW9uOlsiZGVzY3JpcHRpb24iLCJuYW1lIiwiZGlyZWN0aXZlcyJdLElucHV0T2JqZWN0VHlwZURlZmluaXRpb246WyJkZXNjcmlwdGlvbiIsIm5hbWUiLCJkaXJlY3RpdmVzIiwiZmllbGRzIl0sRGlyZWN0aXZlRGVmaW5pdGlvbjpbImRlc2NyaXB0aW9uIiwibmFtZSIsImFyZ3VtZW50cyIsImxvY2F0aW9ucyJdLFNjaGVtYUV4dGVuc2lvbjpbImRpcmVjdGl2ZXMiLCJvcGVyYXRpb25UeXBlcyJdLFNjYWxhclR5cGVFeHRlbnNpb246WyJuYW1lIiwiZGlyZWN0aXZlcyJdLE9iamVjdFR5cGVFeHRlbnNpb246WyJuYW1lIiwiaW50ZXJmYWNlcyIsImRpcmVjdGl2ZXMiLCJmaWVsZHMiXSxJbnRlcmZhY2VUeXBlRXh0ZW5zaW9uOlsibmFtZSIsImludGVyZmFjZXMiLCJkaXJlY3RpdmVzIiwiZmllbGRzIl0sVW5pb25UeXBlRXh0ZW5zaW9uOlsibmFtZSIsImRpcmVjdGl2ZXMiLCJ0eXBlcyJdLEVudW1UeXBlRXh0ZW5zaW9uOlsibmFtZSIsImRpcmVjdGl2ZXMiLCJ2YWx1ZXMiXSxJbnB1dE9iamVjdFR5cGVFeHRlbnNpb246WyJuYW1lIiwiZGlyZWN0aXZlcyIsImZpZWxkcyJdfSxnPW5ldyBTZXQoT2JqZWN0LmtleXMoXykpO2Z1bmN0aW9uIEUoZSl7Y29uc3QgdD1udWxsPT1lP3ZvaWQgMDplLmtpbmQ7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0JiZnLmhhcyh0KX12YXIgVCxiLE4sSSxPLEEseCxTO2Z1bmN0aW9uIEQoZSl7cmV0dXJuIDk9PT1lfHwzMj09PWV9ZnVuY3Rpb24gdyhlKXtyZXR1cm4gZT49NDgmJmU8PTU3fWZ1bmN0aW9uIGsoZSl7cmV0dXJuIGU+PTk3JiZlPD0xMjJ8fGU+PTY1JiZlPD05MH1mdW5jdGlvbiBDKGUpe3JldHVybiBrKGUpfHw5NT09PWV9ZnVuY3Rpb24gUChlKXtyZXR1cm4gayhlKXx8dyhlKXx8OTU9PT1lfWZ1bmN0aW9uIFIoZSl7dmFyIHQ7bGV0IG49TnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIscj1udWxsLGk9LTE7Zm9yKGxldCBvPTA7bzxlLmxlbmd0aDsrK28pe3ZhciBzO2NvbnN0IHQ9ZVtvXSxhPUwodCk7YSE9PXQubGVuZ3RoJiYocj1udWxsIT09KHM9cikmJnZvaWQgMCE9PXM/czpvLGk9bywwIT09byYmYTxuJiYobj1hKSl9cmV0dXJuIGUubWFwKCgoZSx0KT0+MD09PXQ/ZTplLnNsaWNlKG4pKSkuc2xpY2UobnVsbCE9PSh0PXIpJiZ2b2lkIDAhPT10P3Q6MCxpKzEpfWZ1bmN0aW9uIEwoZSl7bGV0IHQ9MDtmb3IoO3Q8ZS5sZW5ndGgmJkQoZS5jaGFyQ29kZUF0KHQpKTspKyt0O3JldHVybiB0fShiPVR8fChUPXt9KSkuUVVFUlk9InF1ZXJ5IixiLk1VVEFUSU9OPSJtdXRhdGlvbiIsYi5TVUJTQ1JJUFRJT049InN1YnNjcmlwdGlvbiIsKEk9Tnx8KE49e30pKS5RVUVSWT0iUVVFUlkiLEkuTVVUQVRJT049Ik1VVEFUSU9OIixJLlNVQlNDUklQVElPTj0iU1VCU0NSSVBUSU9OIixJLkZJRUxEPSJGSUVMRCIsSS5GUkFHTUVOVF9ERUZJTklUSU9OPSJGUkFHTUVOVF9ERUZJTklUSU9OIixJLkZSQUdNRU5UX1NQUkVBRD0iRlJBR01FTlRfU1BSRUFEIixJLklOTElORV9GUkFHTUVOVD0iSU5MSU5FX0ZSQUdNRU5UIixJLlZBUklBQkxFX0RFRklOSVRJT049IlZBUklBQkxFX0RFRklOSVRJT04iLEkuU0NIRU1BPSJTQ0hFTUEiLEkuU0NBTEFSPSJTQ0FMQVIiLEkuT0JKRUNUPSJPQkpFQ1QiLEkuRklFTERfREVGSU5JVElPTj0iRklFTERfREVGSU5JVElPTiIsSS5BUkdVTUVOVF9ERUZJTklUSU9OPSJBUkdVTUVOVF9ERUZJTklUSU9OIixJLklOVEVSRkFDRT0iSU5URVJGQUNFIixJLlVOSU9OPSJVTklPTiIsSS5FTlVNPSJFTlVNIixJLkVOVU1fVkFMVUU9IkVOVU1fVkFMVUUiLEkuSU5QVVRfT0JKRUNUPSJJTlBVVF9PQkpFQ1QiLEkuSU5QVVRfRklFTERfREVGSU5JVElPTj0iSU5QVVRfRklFTERfREVGSU5JVElPTiIsKEE9T3x8KE89e30pKS5OQU1FPSJOYW1lIixBLkRPQ1VNRU5UPSJEb2N1bWVudCIsQS5PUEVSQVRJT05fREVGSU5JVElPTj0iT3BlcmF0aW9uRGVmaW5pdGlvbiIsQS5WQVJJQUJMRV9ERUZJTklUSU9OPSJWYXJpYWJsZURlZmluaXRpb24iLEEuU0VMRUNUSU9OX1NFVD0iU2VsZWN0aW9uU2V0IixBLkZJRUxEPSJGaWVsZCIsQS5BUkdVTUVOVD0iQXJndW1lbnQiLEEuRlJBR01FTlRfU1BSRUFEPSJGcmFnbWVudFNwcmVhZCIsQS5JTkxJTkVfRlJBR01FTlQ9IklubGluZUZyYWdtZW50IixBLkZSQUdNRU5UX0RFRklOSVRJT049IkZyYWdtZW50RGVmaW5pdGlvbiIsQS5WQVJJQUJMRT0iVmFyaWFibGUiLEEuSU5UPSJJbnRWYWx1ZSIsQS5GTE9BVD0iRmxvYXRWYWx1ZSIsQS5TVFJJTkc9IlN0cmluZ1ZhbHVlIixBLkJPT0xFQU49IkJvb2xlYW5WYWx1ZSIsQS5OVUxMPSJOdWxsVmFsdWUiLEEuRU5VTT0iRW51bVZhbHVlIixBLkxJU1Q9Ikxpc3RWYWx1ZSIsQS5PQkpFQ1Q9Ik9iamVjdFZhbHVlIixBLk9CSkVDVF9GSUVMRD0iT2JqZWN0RmllbGQiLEEuRElSRUNUSVZFPSJEaXJlY3RpdmUiLEEuTkFNRURfVFlQRT0iTmFtZWRUeXBlIixBLkxJU1RfVFlQRT0iTGlzdFR5cGUiLEEuTk9OX05VTExfVFlQRT0iTm9uTnVsbFR5cGUiLEEuU0NIRU1BX0RFRklOSVRJT049IlNjaGVtYURlZmluaXRpb24iLEEuT1BFUkFUSU9OX1RZUEVfREVGSU5JVElPTj0iT3BlcmF0aW9uVHlwZURlZmluaXRpb24iLEEuU0NBTEFSX1RZUEVfREVGSU5JVElPTj0iU2NhbGFyVHlwZURlZmluaXRpb24iLEEuT0JKRUNUX1RZUEVfREVGSU5JVElPTj0iT2JqZWN0VHlwZURlZmluaXRpb24iLEEuRklFTERfREVGSU5JVElPTj0iRmllbGREZWZpbml0aW9uIixBLklOUFVUX1ZBTFVFX0RFRklOSVRJT049IklucHV0VmFsdWVEZWZpbml0aW9uIixBLklOVEVSRkFDRV9UWVBFX0RFRklOSVRJT049IkludGVyZmFjZVR5cGVEZWZpbml0aW9uIixBLlVOSU9OX1RZUEVfREVGSU5JVElPTj0iVW5pb25UeXBlRGVmaW5pdGlvbiIsQS5FTlVNX1RZUEVfREVGSU5JVElPTj0iRW51bVR5cGVEZWZpbml0aW9uIixBLkVOVU1fVkFMVUVfREVGSU5JVElPTj0iRW51bVZhbHVlRGVmaW5pdGlvbiIsQS5JTlBVVF9PQkpFQ1RfVFlQRV9ERUZJTklUSU9OPSJJbnB1dE9iamVjdFR5cGVEZWZpbml0aW9uIixBLkRJUkVDVElWRV9ERUZJTklUSU9OPSJEaXJlY3RpdmVEZWZpbml0aW9uIixBLlNDSEVNQV9FWFRFTlNJT049IlNjaGVtYUV4dGVuc2lvbiIsQS5TQ0FMQVJfVFlQRV9FWFRFTlNJT049IlNjYWxhclR5cGVFeHRlbnNpb24iLEEuT0JKRUNUX1RZUEVfRVhURU5TSU9OPSJPYmplY3RUeXBlRXh0ZW5zaW9uIixBLklOVEVSRkFDRV9UWVBFX0VYVEVOU0lPTj0iSW50ZXJmYWNlVHlwZUV4dGVuc2lvbiIsQS5VTklPTl9UWVBFX0VYVEVOU0lPTj0iVW5pb25UeXBlRXh0ZW5zaW9uIixBLkVOVU1fVFlQRV9FWFRFTlNJT049IkVudW1UeXBlRXh0ZW5zaW9uIixBLklOUFVUX09CSkVDVF9UWVBFX0VYVEVOU0lPTj0iSW5wdXRPYmplY3RUeXBlRXh0ZW5zaW9uIiwoUz14fHwoeD17fSkpLlNPRj0iPFNPRj4iLFMuRU9GPSI8RU9GPiIsUy5CQU5HPSIhIixTLkRPTExBUj0iJCIsUy5BTVA9IiYiLFMuUEFSRU5fTD0iKCIsUy5QQVJFTl9SPSIpIixTLlNQUkVBRD0iLi4uIixTLkNPTE9OPSI6IixTLkVRVUFMUz0iPSIsUy5BVD0iQCIsUy5CUkFDS0VUX0w9IlsiLFMuQlJBQ0tFVF9SPSJdIixTLkJSQUNFX0w9InsiLFMuUElQRT0ifCIsUy5CUkFDRV9SPSJ9IixTLk5BTUU9Ik5hbWUiLFMuSU5UPSJJbnQiLFMuRkxPQVQ9IkZsb2F0IixTLlNUUklORz0iU3RyaW5nIixTLkJMT0NLX1NUUklORz0iQmxvY2tTdHJpbmciLFMuQ09NTUVOVD0iQ29tbWVudCI7Y2xhc3MgRntjb25zdHJ1Y3RvcihlKXtjb25zdCB0PW5ldyB2KHguU09GLDAsMCwwLDApO3RoaXMuc291cmNlPWUsdGhpcy5sYXN0VG9rZW49dCx0aGlzLnRva2VuPXQsdGhpcy5saW5lPTEsdGhpcy5saW5lU3RhcnQ9MH1nZXRbU3ltYm9sLnRvU3RyaW5nVGFnXSgpe3JldHVybiJMZXhlciJ9YWR2YW5jZSgpe3RoaXMubGFzdFRva2VuPXRoaXMudG9rZW47cmV0dXJuIHRoaXMudG9rZW49dGhpcy5sb29rYWhlYWQoKX1sb29rYWhlYWQoKXtsZXQgZT10aGlzLnRva2VuO2lmKGUua2luZCE9PXguRU9GKWRve2lmKGUubmV4dCllPWUubmV4dDtlbHNle2NvbnN0IHQ9cSh0aGlzLGUuZW5kKTtlLm5leHQ9dCx0LnByZXY9ZSxlPXR9fXdoaWxlKGUua2luZD09PXguQ09NTUVOVCk7cmV0dXJuIGV9fWZ1bmN0aW9uICQoZSl7cmV0dXJuIGU+PTAmJmU8PTU1Mjk1fHxlPj01NzM0NCYmZTw9MTExNDExMX1mdW5jdGlvbiBNKGUsdCl7cmV0dXJuIFYoZS5jaGFyQ29kZUF0KHQpKSYmQihlLmNoYXJDb2RlQXQodCsxKSl9ZnVuY3Rpb24gVihlKXtyZXR1cm4gZT49NTUyOTYmJmU8PTU2MzE5fWZ1bmN0aW9uIEIoZSl7cmV0dXJuIGU+PTU2MzIwJiZlPD01NzM0M31mdW5jdGlvbiBqKGUsdCl7Y29uc3Qgbj1lLnNvdXJjZS5ib2R5LmNvZGVQb2ludEF0KHQpO2lmKHZvaWQgMD09PW4pcmV0dXJuIHguRU9GO2lmKG4+PTMyJiZuPD0xMjYpe2NvbnN0IGU9U3RyaW5nLmZyb21Db2RlUG9pbnQobik7cmV0dXJuJyInPT09ZT8iJ1wiJyI6YCIke2V9ImB9cmV0dXJuIlUrIituLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpLnBhZFN0YXJ0KDQsIjAiKX1mdW5jdGlvbiBVKGUsdCxuLHIsaSl7Y29uc3Qgcz1lLmxpbmUsbz0xK24tZS5saW5lU3RhcnQ7cmV0dXJuIG5ldyB2KHQsbixyLHMsbyxpKX1mdW5jdGlvbiBxKGUsdCl7Y29uc3Qgbj1lLnNvdXJjZS5ib2R5LHI9bi5sZW5ndGg7bGV0IGk9dDtmb3IoO2k8cjspe2NvbnN0IHQ9bi5jaGFyQ29kZUF0KGkpO3N3aXRjaCh0KXtjYXNlIDY1Mjc5OmNhc2UgOTpjYXNlIDMyOmNhc2UgNDQ6KytpO2NvbnRpbnVlO2Nhc2UgMTA6KytpLCsrZS5saW5lLGUubGluZVN0YXJ0PWk7Y29udGludWU7Y2FzZSAxMzoxMD09PW4uY2hhckNvZGVBdChpKzEpP2krPTI6KytpLCsrZS5saW5lLGUubGluZVN0YXJ0PWk7Y29udGludWU7Y2FzZSAzNTpyZXR1cm4gSyhlLGkpO2Nhc2UgMzM6cmV0dXJuIFUoZSx4LkJBTkcsaSxpKzEpO2Nhc2UgMzY6cmV0dXJuIFUoZSx4LkRPTExBUixpLGkrMSk7Y2FzZSAzODpyZXR1cm4gVShlLHguQU1QLGksaSsxKTtjYXNlIDQwOnJldHVybiBVKGUseC5QQVJFTl9MLGksaSsxKTtjYXNlIDQxOnJldHVybiBVKGUseC5QQVJFTl9SLGksaSsxKTtjYXNlIDQ2OmlmKDQ2PT09bi5jaGFyQ29kZUF0KGkrMSkmJjQ2PT09bi5jaGFyQ29kZUF0KGkrMikpcmV0dXJuIFUoZSx4LlNQUkVBRCxpLGkrMyk7YnJlYWs7Y2FzZSA1ODpyZXR1cm4gVShlLHguQ09MT04saSxpKzEpO2Nhc2UgNjE6cmV0dXJuIFUoZSx4LkVRVUFMUyxpLGkrMSk7Y2FzZSA2NDpyZXR1cm4gVShlLHguQVQsaSxpKzEpO2Nhc2UgOTE6cmV0dXJuIFUoZSx4LkJSQUNLRVRfTCxpLGkrMSk7Y2FzZSA5MzpyZXR1cm4gVShlLHguQlJBQ0tFVF9SLGksaSsxKTtjYXNlIDEyMzpyZXR1cm4gVShlLHguQlJBQ0VfTCxpLGkrMSk7Y2FzZSAxMjQ6cmV0dXJuIFUoZSx4LlBJUEUsaSxpKzEpO2Nhc2UgMTI1OnJldHVybiBVKGUseC5CUkFDRV9SLGksaSsxKTtjYXNlIDM0OnJldHVybiAzND09PW4uY2hhckNvZGVBdChpKzEpJiYzND09PW4uY2hhckNvZGVBdChpKzIpP1ooZSxpKTpZKGUsaSl9aWYodyh0KXx8NDU9PT10KXJldHVybiBHKGUsaSx0KTtpZihDKHQpKXJldHVybiBlZShlLGkpO3Rocm93IHkoZS5zb3VyY2UsaSwzOT09PXQ/IlVuZXhwZWN0ZWQgc2luZ2xlIHF1b3RlIGNoYXJhY3RlciAoJyksIGRpZCB5b3UgbWVhbiB0byB1c2UgYSBkb3VibGUgcXVvdGUgKFwiKT8iOiQodCl8fE0obixpKT9gVW5leHBlY3RlZCBjaGFyYWN0ZXI6ICR7aihlLGkpfS5gOmBJbnZhbGlkIGNoYXJhY3RlcjogJHtqKGUsaSl9LmApfXJldHVybiBVKGUseC5FT0YscixyKX1mdW5jdGlvbiBLKGUsdCl7Y29uc3Qgbj1lLnNvdXJjZS5ib2R5LHI9bi5sZW5ndGg7bGV0IGk9dCsxO2Zvcig7aTxyOyl7Y29uc3QgZT1uLmNoYXJDb2RlQXQoaSk7aWYoMTA9PT1lfHwxMz09PWUpYnJlYWs7aWYoJChlKSkrK2k7ZWxzZXtpZighTShuLGkpKWJyZWFrO2krPTJ9fXJldHVybiBVKGUseC5DT01NRU5ULHQsaSxuLnNsaWNlKHQrMSxpKSl9ZnVuY3Rpb24gRyhlLHQsbil7Y29uc3Qgcj1lLnNvdXJjZS5ib2R5O2xldCBpPXQscz1uLG89ITE7aWYoNDU9PT1zJiYocz1yLmNoYXJDb2RlQXQoKytpKSksNDg9PT1zKXtpZihzPXIuY2hhckNvZGVBdCgrK2kpLHcocykpdGhyb3cgeShlLnNvdXJjZSxpLGBJbnZhbGlkIG51bWJlciwgdW5leHBlY3RlZCBkaWdpdCBhZnRlciAwOiAke2ooZSxpKX0uYCl9ZWxzZSBpPXooZSxpLHMpLHM9ci5jaGFyQ29kZUF0KGkpO2lmKDQ2PT09cyYmKG89ITAscz1yLmNoYXJDb2RlQXQoKytpKSxpPXooZSxpLHMpLHM9ci5jaGFyQ29kZUF0KGkpKSw2OSE9PXMmJjEwMSE9PXN8fChvPSEwLHM9ci5jaGFyQ29kZUF0KCsraSksNDMhPT1zJiY0NSE9PXN8fChzPXIuY2hhckNvZGVBdCgrK2kpKSxpPXooZSxpLHMpLHM9ci5jaGFyQ29kZUF0KGkpKSw0Nj09PXN8fEMocykpdGhyb3cgeShlLnNvdXJjZSxpLGBJbnZhbGlkIG51bWJlciwgZXhwZWN0ZWQgZGlnaXQgYnV0IGdvdDogJHtqKGUsaSl9LmApO3JldHVybiBVKGUsbz94LkZMT0FUOnguSU5ULHQsaSxyLnNsaWNlKHQsaSkpfWZ1bmN0aW9uIHooZSx0LG4pe2lmKCF3KG4pKXRocm93IHkoZS5zb3VyY2UsdCxgSW52YWxpZCBudW1iZXIsIGV4cGVjdGVkIGRpZ2l0IGJ1dCBnb3Q6ICR7aihlLHQpfS5gKTtjb25zdCByPWUuc291cmNlLmJvZHk7bGV0IGk9dCsxO2Zvcig7dyhyLmNoYXJDb2RlQXQoaSkpOykrK2k7cmV0dXJuIGl9ZnVuY3Rpb24gWShlLHQpe2NvbnN0IG49ZS5zb3VyY2UuYm9keSxyPW4ubGVuZ3RoO2xldCBpPXQrMSxzPWksbz0iIjtmb3IoO2k8cjspe2NvbnN0IHI9bi5jaGFyQ29kZUF0KGkpO2lmKDM0PT09cilyZXR1cm4gbys9bi5zbGljZShzLGkpLFUoZSx4LlNUUklORyx0LGkrMSxvKTtpZig5MiE9PXIpe2lmKDEwPT09cnx8MTM9PT1yKWJyZWFrO2lmKCQocikpKytpO2Vsc2V7aWYoIU0obixpKSl0aHJvdyB5KGUuc291cmNlLGksYEludmFsaWQgY2hhcmFjdGVyIHdpdGhpbiBTdHJpbmc6ICR7aihlLGkpfS5gKTtpKz0yfX1lbHNle28rPW4uc2xpY2UocyxpKTtjb25zdCB0PTExNz09PW4uY2hhckNvZGVBdChpKzEpPzEyMz09PW4uY2hhckNvZGVBdChpKzIpP0goZSxpKTpKKGUsaSk6VyhlLGkpO28rPXQudmFsdWUsaSs9dC5zaXplLHM9aX19dGhyb3cgeShlLnNvdXJjZSxpLCJVbnRlcm1pbmF0ZWQgc3RyaW5nLiIpfWZ1bmN0aW9uIEgoZSx0KXtjb25zdCBuPWUuc291cmNlLmJvZHk7bGV0IHI9MCxpPTM7Zm9yKDtpPDEyOyl7Y29uc3QgZT1uLmNoYXJDb2RlQXQodCtpKyspO2lmKDEyNT09PWUpe2lmKGk8NXx8ISQocikpYnJlYWs7cmV0dXJue3ZhbHVlOlN0cmluZy5mcm9tQ29kZVBvaW50KHIpLHNpemU6aX19aWYocj1yPDw0fFgoZSkscjwwKWJyZWFrfXRocm93IHkoZS5zb3VyY2UsdCxgSW52YWxpZCBVbmljb2RlIGVzY2FwZSBzZXF1ZW5jZTogIiR7bi5zbGljZSh0LHQraSl9Ii5gKX1mdW5jdGlvbiBKKGUsdCl7Y29uc3Qgbj1lLnNvdXJjZS5ib2R5LHI9UShuLHQrMik7aWYoJChyKSlyZXR1cm57dmFsdWU6U3RyaW5nLmZyb21Db2RlUG9pbnQociksc2l6ZTo2fTtpZihWKHIpJiY5Mj09PW4uY2hhckNvZGVBdCh0KzYpJiYxMTc9PT1uLmNoYXJDb2RlQXQodCs3KSl7Y29uc3QgZT1RKG4sdCs4KTtpZihCKGUpKXJldHVybnt2YWx1ZTpTdHJpbmcuZnJvbUNvZGVQb2ludChyLGUpLHNpemU6MTJ9fXRocm93IHkoZS5zb3VyY2UsdCxgSW52YWxpZCBVbmljb2RlIGVzY2FwZSBzZXF1ZW5jZTogIiR7bi5zbGljZSh0LHQrNil9Ii5gKX1mdW5jdGlvbiBRKGUsdCl7cmV0dXJuIFgoZS5jaGFyQ29kZUF0KHQpKTw8MTJ8WChlLmNoYXJDb2RlQXQodCsxKSk8PDh8WChlLmNoYXJDb2RlQXQodCsyKSk8PDR8WChlLmNoYXJDb2RlQXQodCszKSl9ZnVuY3Rpb24gWChlKXtyZXR1cm4gZT49NDgmJmU8PTU3P2UtNDg6ZT49NjUmJmU8PTcwP2UtNTU6ZT49OTcmJmU8PTEwMj9lLTg3Oi0xfWZ1bmN0aW9uIFcoZSx0KXtjb25zdCBuPWUuc291cmNlLmJvZHk7c3dpdGNoKG4uY2hhckNvZGVBdCh0KzEpKXtjYXNlIDM0OnJldHVybnt2YWx1ZTonIicsc2l6ZToyfTtjYXNlIDkyOnJldHVybnt2YWx1ZToiXFwiLHNpemU6Mn07Y2FzZSA0NzpyZXR1cm57dmFsdWU6Ii8iLHNpemU6Mn07Y2FzZSA5ODpyZXR1cm57dmFsdWU6IlxiIixzaXplOjJ9O2Nhc2UgMTAyOnJldHVybnt2YWx1ZToiXGYiLHNpemU6Mn07Y2FzZSAxMTA6cmV0dXJue3ZhbHVlOiJcbiIsc2l6ZToyfTtjYXNlIDExNDpyZXR1cm57dmFsdWU6IlxyIixzaXplOjJ9O2Nhc2UgMTE2OnJldHVybnt2YWx1ZToiXHQiLHNpemU6Mn19dGhyb3cgeShlLnNvdXJjZSx0LGBJbnZhbGlkIGNoYXJhY3RlciBlc2NhcGUgc2VxdWVuY2U6ICIke24uc2xpY2UodCx0KzIpfSIuYCl9ZnVuY3Rpb24gWihlLHQpe2NvbnN0IG49ZS5zb3VyY2UuYm9keSxyPW4ubGVuZ3RoO2xldCBpPWUubGluZVN0YXJ0LHM9dCszLG89cyxhPSIiO2NvbnN0IGM9W107Zm9yKDtzPHI7KXtjb25zdCByPW4uY2hhckNvZGVBdChzKTtpZigzND09PXImJjM0PT09bi5jaGFyQ29kZUF0KHMrMSkmJjM0PT09bi5jaGFyQ29kZUF0KHMrMikpe2ErPW4uc2xpY2UobyxzKSxjLnB1c2goYSk7Y29uc3Qgcj1VKGUseC5CTE9DS19TVFJJTkcsdCxzKzMsUihjKS5qb2luKCJcbiIpKTtyZXR1cm4gZS5saW5lKz1jLmxlbmd0aC0xLGUubGluZVN0YXJ0PWkscn1pZig5MiE9PXJ8fDM0IT09bi5jaGFyQ29kZUF0KHMrMSl8fDM0IT09bi5jaGFyQ29kZUF0KHMrMil8fDM0IT09bi5jaGFyQ29kZUF0KHMrMykpaWYoMTAhPT1yJiYxMyE9PXIpaWYoJChyKSkrK3M7ZWxzZXtpZighTShuLHMpKXRocm93IHkoZS5zb3VyY2UscyxgSW52YWxpZCBjaGFyYWN0ZXIgd2l0aGluIFN0cmluZzogJHtqKGUscyl9LmApO3MrPTJ9ZWxzZSBhKz1uLnNsaWNlKG8scyksYy5wdXNoKGEpLDEzPT09ciYmMTA9PT1uLmNoYXJDb2RlQXQocysxKT9zKz0yOisrcyxhPSIiLG89cyxpPXM7ZWxzZSBhKz1uLnNsaWNlKG8scyksbz1zKzEscys9NH10aHJvdyB5KGUuc291cmNlLHMsIlVudGVybWluYXRlZCBzdHJpbmcuIil9ZnVuY3Rpb24gZWUoZSx0KXtjb25zdCBuPWUuc291cmNlLmJvZHkscj1uLmxlbmd0aDtsZXQgaT10KzE7Zm9yKDtpPHI7KXtpZighUChuLmNoYXJDb2RlQXQoaSkpKWJyZWFrOysraX1yZXR1cm4gVShlLHguTkFNRSx0LGksbi5zbGljZSh0LGkpKX1jb25zdCB0ZT0xMCxuZT0yO2Z1bmN0aW9uIHJlKGUpe3JldHVybiBpZShlLFtdKX1mdW5jdGlvbiBpZShlLHQpe3N3aXRjaCh0eXBlb2YgZSl7Y2FzZSJzdHJpbmciOnJldHVybiBKU09OLnN0cmluZ2lmeShlKTtjYXNlImZ1bmN0aW9uIjpyZXR1cm4gZS5uYW1lP2BbZnVuY3Rpb24gJHtlLm5hbWV9XWA6IltmdW5jdGlvbl0iO2Nhc2Uib2JqZWN0IjpyZXR1cm4gZnVuY3Rpb24oZSx0KXtpZihudWxsPT09ZSlyZXR1cm4ibnVsbCI7aWYodC5pbmNsdWRlcyhlKSlyZXR1cm4iW0NpcmN1bGFyXSI7Y29uc3Qgbj1bLi4udCxlXTtpZihmdW5jdGlvbihlKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgZS50b0pTT059KGUpKXtjb25zdCB0PWUudG9KU09OKCk7aWYodCE9PWUpcmV0dXJuInN0cmluZyI9PXR5cGVvZiB0P3Q6aWUodCxuKX1lbHNlIGlmKEFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIGZ1bmN0aW9uKGUsdCl7aWYoMD09PWUubGVuZ3RoKXJldHVybiJbXSI7aWYodC5sZW5ndGg+bmUpcmV0dXJuIltBcnJheV0iO2NvbnN0IG49TWF0aC5taW4odGUsZS5sZW5ndGgpLHI9ZS5sZW5ndGgtbixpPVtdO2ZvcihsZXQgcz0wO3M8bjsrK3MpaS5wdXNoKGllKGVbc10sdCkpOzE9PT1yP2kucHVzaCgiLi4uIDEgbW9yZSBpdGVtIik6cj4xJiZpLnB1c2goYC4uLiAke3J9IG1vcmUgaXRlbXNgKTtyZXR1cm4iWyIraS5qb2luKCIsICIpKyJdIn0oZSxuKTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtjb25zdCBuPU9iamVjdC5lbnRyaWVzKGUpO2lmKDA9PT1uLmxlbmd0aClyZXR1cm4ie30iO2lmKHQubGVuZ3RoPm5lKXJldHVybiJbIitmdW5jdGlvbihlKXtjb25zdCB0PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKS5yZXBsYWNlKC9eXFtvYmplY3QgLywiIikucmVwbGFjZSgvXSQvLCIiKTtpZigiT2JqZWN0Ij09PXQmJiJmdW5jdGlvbiI9PXR5cGVvZiBlLmNvbnN0cnVjdG9yKXtjb25zdCB0PWUuY29uc3RydWN0b3IubmFtZTtpZigic3RyaW5nIj09dHlwZW9mIHQmJiIiIT09dClyZXR1cm4gdH1yZXR1cm4gdH0oZSkrIl0iO2NvbnN0IHI9bi5tYXAoKChbZSxuXSk9PmUrIjogIitpZShuLHQpKSk7cmV0dXJuInsgIityLmpvaW4oIiwgIikrIiB9In0oZSxuKX0oZSx0KTtkZWZhdWx0OnJldHVybiBTdHJpbmcoZSl9fWNvbnN0IHNlPWdsb2JhbFRoaXMucHJvY2VzcyYmInByb2R1Y3Rpb24iPT09Z2xvYmFsVGhpcy5wcm9jZXNzLmVudi5OT0RFX0VOVj9mdW5jdGlvbihlLHQpe3JldHVybiBlIGluc3RhbmNlb2YgdH06ZnVuY3Rpb24oZSx0KXtpZihlIGluc3RhbmNlb2YgdClyZXR1cm4hMDtpZigib2JqZWN0Ij09dHlwZW9mIGUmJm51bGwhPT1lKXt2YXIgbjtjb25zdCByPXQucHJvdG90eXBlW1N5bWJvbC50b1N0cmluZ1RhZ107aWYocj09PShTeW1ib2wudG9TdHJpbmdUYWcgaW4gZT9lW1N5bWJvbC50b1N0cmluZ1RhZ106bnVsbD09PShuPWUuY29uc3RydWN0b3IpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLm5hbWUpKXtjb25zdCB0PXJlKGUpO3Rocm93IG5ldyBFcnJvcihgQ2Fubm90IHVzZSAke3J9ICIke3R9IiBmcm9tIGFub3RoZXIgbW9kdWxlIG9yIHJlYWxtLlxuXG5FbnN1cmUgdGhhdCB0aGVyZSBpcyBvbmx5IG9uZSBpbnN0YW5jZSBvZiAiZ3JhcGhxbCIgaW4gdGhlIG5vZGVfbW9kdWxlc1xuZGlyZWN0b3J5LiBJZiBkaWZmZXJlbnQgdmVyc2lvbnMgb2YgImdyYXBocWwiIGFyZSB0aGUgZGVwZW5kZW5jaWVzIG9mIG90aGVyXG5yZWxpZWQgb24gbW9kdWxlcywgdXNlICJyZXNvbHV0aW9ucyIgdG8gZW5zdXJlIG9ubHkgb25lIHZlcnNpb24gaXMgaW5zdGFsbGVkLlxuXG5odHRwczovL3lhcm5wa2cuY29tL2VuL2RvY3Mvc2VsZWN0aXZlLXZlcnNpb24tcmVzb2x1dGlvbnNcblxuRHVwbGljYXRlICJncmFwaHFsIiBtb2R1bGVzIGNhbm5vdCBiZSB1c2VkIGF0IHRoZSBzYW1lIHRpbWUgc2luY2UgZGlmZmVyZW50XG52ZXJzaW9ucyBtYXkgaGF2ZSBkaWZmZXJlbnQgY2FwYWJpbGl0aWVzIGFuZCBiZWhhdmlvci4gVGhlIGRhdGEgZnJvbSBvbmVcbnZlcnNpb24gdXNlZCBpbiB0aGUgZnVuY3Rpb24gZnJvbSBhbm90aGVyIGNvdWxkIHByb2R1Y2UgY29uZnVzaW5nIGFuZFxuc3B1cmlvdXMgcmVzdWx0cy5gKX19cmV0dXJuITF9O2NsYXNzIG9le2NvbnN0cnVjdG9yKGUsdD0iR3JhcGhRTCByZXF1ZXN0IixuPXtsaW5lOjEsY29sdW1uOjF9KXsic3RyaW5nIj09dHlwZW9mIGV8fGEoITEsYEJvZHkgbXVzdCBiZSBhIHN0cmluZy4gUmVjZWl2ZWQ6ICR7cmUoZSl9LmApLHRoaXMuYm9keT1lLHRoaXMubmFtZT10LHRoaXMubG9jYXRpb25PZmZzZXQ9bix0aGlzLmxvY2F0aW9uT2Zmc2V0LmxpbmU+MHx8YSghMSwibGluZSBpbiBsb2NhdGlvbk9mZnNldCBpcyAxLWluZGV4ZWQgYW5kIG11c3QgYmUgcG9zaXRpdmUuIiksdGhpcy5sb2NhdGlvbk9mZnNldC5jb2x1bW4+MHx8YSghMSwiY29sdW1uIGluIGxvY2F0aW9uT2Zmc2V0IGlzIDEtaW5kZXhlZCBhbmQgbXVzdCBiZSBwb3NpdGl2ZS4iKX1nZXRbU3ltYm9sLnRvU3RyaW5nVGFnXSgpe3JldHVybiJTb3VyY2UifX1mdW5jdGlvbiBhZShlLHQpe3JldHVybiBuZXcgY2UoZSx0KS5wYXJzZURvY3VtZW50KCl9Y2xhc3MgY2V7Y29uc3RydWN0b3IoZSx0PXt9KXtjb25zdCBuPWZ1bmN0aW9uKGUpe3JldHVybiBzZShlLG9lKX0oZSk/ZTpuZXcgb2UoZSk7dGhpcy5fbGV4ZXI9bmV3IEYobiksdGhpcy5fb3B0aW9ucz10LHRoaXMuX3Rva2VuQ291bnRlcj0wfXBhcnNlTmFtZSgpe2NvbnN0IGU9dGhpcy5leHBlY3RUb2tlbih4Lk5BTUUpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLk5BTUUsdmFsdWU6ZS52YWx1ZX0pfXBhcnNlRG9jdW1lbnQoKXtyZXR1cm4gdGhpcy5ub2RlKHRoaXMuX2xleGVyLnRva2VuLHtraW5kOk8uRE9DVU1FTlQsZGVmaW5pdGlvbnM6dGhpcy5tYW55KHguU09GLHRoaXMucGFyc2VEZWZpbml0aW9uLHguRU9GKX0pfXBhcnNlRGVmaW5pdGlvbigpe2lmKHRoaXMucGVlayh4LkJSQUNFX0wpKXJldHVybiB0aGlzLnBhcnNlT3BlcmF0aW9uRGVmaW5pdGlvbigpO2NvbnN0IGU9dGhpcy5wZWVrRGVzY3JpcHRpb24oKSx0PWU/dGhpcy5fbGV4ZXIubG9va2FoZWFkKCk6dGhpcy5fbGV4ZXIudG9rZW47aWYodC5raW5kPT09eC5OQU1FKXtzd2l0Y2godC52YWx1ZSl7Y2FzZSJzY2hlbWEiOnJldHVybiB0aGlzLnBhcnNlU2NoZW1hRGVmaW5pdGlvbigpO2Nhc2Uic2NhbGFyIjpyZXR1cm4gdGhpcy5wYXJzZVNjYWxhclR5cGVEZWZpbml0aW9uKCk7Y2FzZSJ0eXBlIjpyZXR1cm4gdGhpcy5wYXJzZU9iamVjdFR5cGVEZWZpbml0aW9uKCk7Y2FzZSJpbnRlcmZhY2UiOnJldHVybiB0aGlzLnBhcnNlSW50ZXJmYWNlVHlwZURlZmluaXRpb24oKTtjYXNlInVuaW9uIjpyZXR1cm4gdGhpcy5wYXJzZVVuaW9uVHlwZURlZmluaXRpb24oKTtjYXNlImVudW0iOnJldHVybiB0aGlzLnBhcnNlRW51bVR5cGVEZWZpbml0aW9uKCk7Y2FzZSJpbnB1dCI6cmV0dXJuIHRoaXMucGFyc2VJbnB1dE9iamVjdFR5cGVEZWZpbml0aW9uKCk7Y2FzZSJkaXJlY3RpdmUiOnJldHVybiB0aGlzLnBhcnNlRGlyZWN0aXZlRGVmaW5pdGlvbigpfWlmKGUpdGhyb3cgeSh0aGlzLl9sZXhlci5zb3VyY2UsdGhpcy5fbGV4ZXIudG9rZW4uc3RhcnQsIlVuZXhwZWN0ZWQgZGVzY3JpcHRpb24sIGRlc2NyaXB0aW9ucyBhcmUgc3VwcG9ydGVkIG9ubHkgb24gdHlwZSBkZWZpbml0aW9ucy4iKTtzd2l0Y2godC52YWx1ZSl7Y2FzZSJxdWVyeSI6Y2FzZSJtdXRhdGlvbiI6Y2FzZSJzdWJzY3JpcHRpb24iOnJldHVybiB0aGlzLnBhcnNlT3BlcmF0aW9uRGVmaW5pdGlvbigpO2Nhc2UiZnJhZ21lbnQiOnJldHVybiB0aGlzLnBhcnNlRnJhZ21lbnREZWZpbml0aW9uKCk7Y2FzZSJleHRlbmQiOnJldHVybiB0aGlzLnBhcnNlVHlwZVN5c3RlbUV4dGVuc2lvbigpfX10aHJvdyB0aGlzLnVuZXhwZWN0ZWQodCl9cGFyc2VPcGVyYXRpb25EZWZpbml0aW9uKCl7Y29uc3QgZT10aGlzLl9sZXhlci50b2tlbjtpZih0aGlzLnBlZWsoeC5CUkFDRV9MKSlyZXR1cm4gdGhpcy5ub2RlKGUse2tpbmQ6Ty5PUEVSQVRJT05fREVGSU5JVElPTixvcGVyYXRpb246VC5RVUVSWSxuYW1lOnZvaWQgMCx2YXJpYWJsZURlZmluaXRpb25zOltdLGRpcmVjdGl2ZXM6W10sc2VsZWN0aW9uU2V0OnRoaXMucGFyc2VTZWxlY3Rpb25TZXQoKX0pO2NvbnN0IHQ9dGhpcy5wYXJzZU9wZXJhdGlvblR5cGUoKTtsZXQgbjtyZXR1cm4gdGhpcy5wZWVrKHguTkFNRSkmJihuPXRoaXMucGFyc2VOYW1lKCkpLHRoaXMubm9kZShlLHtraW5kOk8uT1BFUkFUSU9OX0RFRklOSVRJT04sb3BlcmF0aW9uOnQsbmFtZTpuLHZhcmlhYmxlRGVmaW5pdGlvbnM6dGhpcy5wYXJzZVZhcmlhYmxlRGVmaW5pdGlvbnMoKSxkaXJlY3RpdmVzOnRoaXMucGFyc2VEaXJlY3RpdmVzKCExKSxzZWxlY3Rpb25TZXQ6dGhpcy5wYXJzZVNlbGVjdGlvblNldCgpfSl9cGFyc2VPcGVyYXRpb25UeXBlKCl7Y29uc3QgZT10aGlzLmV4cGVjdFRva2VuKHguTkFNRSk7c3dpdGNoKGUudmFsdWUpe2Nhc2UicXVlcnkiOnJldHVybiBULlFVRVJZO2Nhc2UibXV0YXRpb24iOnJldHVybiBULk1VVEFUSU9OO2Nhc2Uic3Vic2NyaXB0aW9uIjpyZXR1cm4gVC5TVUJTQ1JJUFRJT059dGhyb3cgdGhpcy51bmV4cGVjdGVkKGUpfXBhcnNlVmFyaWFibGVEZWZpbml0aW9ucygpe3JldHVybiB0aGlzLm9wdGlvbmFsTWFueSh4LlBBUkVOX0wsdGhpcy5wYXJzZVZhcmlhYmxlRGVmaW5pdGlvbix4LlBBUkVOX1IpfXBhcnNlVmFyaWFibGVEZWZpbml0aW9uKCl7cmV0dXJuIHRoaXMubm9kZSh0aGlzLl9sZXhlci50b2tlbix7a2luZDpPLlZBUklBQkxFX0RFRklOSVRJT04sdmFyaWFibGU6dGhpcy5wYXJzZVZhcmlhYmxlKCksdHlwZToodGhpcy5leHBlY3RUb2tlbih4LkNPTE9OKSx0aGlzLnBhcnNlVHlwZVJlZmVyZW5jZSgpKSxkZWZhdWx0VmFsdWU6dGhpcy5leHBlY3RPcHRpb25hbFRva2VuKHguRVFVQUxTKT90aGlzLnBhcnNlQ29uc3RWYWx1ZUxpdGVyYWwoKTp2b2lkIDAsZGlyZWN0aXZlczp0aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCl9KX1wYXJzZVZhcmlhYmxlKCl7Y29uc3QgZT10aGlzLl9sZXhlci50b2tlbjtyZXR1cm4gdGhpcy5leHBlY3RUb2tlbih4LkRPTExBUiksdGhpcy5ub2RlKGUse2tpbmQ6Ty5WQVJJQUJMRSxuYW1lOnRoaXMucGFyc2VOYW1lKCl9KX1wYXJzZVNlbGVjdGlvblNldCgpe3JldHVybiB0aGlzLm5vZGUodGhpcy5fbGV4ZXIudG9rZW4se2tpbmQ6Ty5TRUxFQ1RJT05fU0VULHNlbGVjdGlvbnM6dGhpcy5tYW55KHguQlJBQ0VfTCx0aGlzLnBhcnNlU2VsZWN0aW9uLHguQlJBQ0VfUil9KX1wYXJzZVNlbGVjdGlvbigpe3JldHVybiB0aGlzLnBlZWsoeC5TUFJFQUQpP3RoaXMucGFyc2VGcmFnbWVudCgpOnRoaXMucGFyc2VGaWVsZCgpfXBhcnNlRmllbGQoKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZU5hbWUoKTtsZXQgbixyO3JldHVybiB0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oeC5DT0xPTik/KG49dCxyPXRoaXMucGFyc2VOYW1lKCkpOnI9dCx0aGlzLm5vZGUoZSx7a2luZDpPLkZJRUxELGFsaWFzOm4sbmFtZTpyLGFyZ3VtZW50czp0aGlzLnBhcnNlQXJndW1lbnRzKCExKSxkaXJlY3RpdmVzOnRoaXMucGFyc2VEaXJlY3RpdmVzKCExKSxzZWxlY3Rpb25TZXQ6dGhpcy5wZWVrKHguQlJBQ0VfTCk/dGhpcy5wYXJzZVNlbGVjdGlvblNldCgpOnZvaWQgMH0pfXBhcnNlQXJndW1lbnRzKGUpe2NvbnN0IHQ9ZT90aGlzLnBhcnNlQ29uc3RBcmd1bWVudDp0aGlzLnBhcnNlQXJndW1lbnQ7cmV0dXJuIHRoaXMub3B0aW9uYWxNYW55KHguUEFSRU5fTCx0LHguUEFSRU5fUil9cGFyc2VBcmd1bWVudChlPSExKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuLG49dGhpcy5wYXJzZU5hbWUoKTtyZXR1cm4gdGhpcy5leHBlY3RUb2tlbih4LkNPTE9OKSx0aGlzLm5vZGUodCx7a2luZDpPLkFSR1VNRU5ULG5hbWU6bix2YWx1ZTp0aGlzLnBhcnNlVmFsdWVMaXRlcmFsKGUpfSl9cGFyc2VDb25zdEFyZ3VtZW50KCl7cmV0dXJuIHRoaXMucGFyc2VBcmd1bWVudCghMCl9cGFyc2VGcmFnbWVudCgpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW47dGhpcy5leHBlY3RUb2tlbih4LlNQUkVBRCk7Y29uc3QgdD10aGlzLmV4cGVjdE9wdGlvbmFsS2V5d29yZCgib24iKTtyZXR1cm4hdCYmdGhpcy5wZWVrKHguTkFNRSk/dGhpcy5ub2RlKGUse2tpbmQ6Ty5GUkFHTUVOVF9TUFJFQUQsbmFtZTp0aGlzLnBhcnNlRnJhZ21lbnROYW1lKCksZGlyZWN0aXZlczp0aGlzLnBhcnNlRGlyZWN0aXZlcyghMSl9KTp0aGlzLm5vZGUoZSx7a2luZDpPLklOTElORV9GUkFHTUVOVCx0eXBlQ29uZGl0aW9uOnQ/dGhpcy5wYXJzZU5hbWVkVHlwZSgpOnZvaWQgMCxkaXJlY3RpdmVzOnRoaXMucGFyc2VEaXJlY3RpdmVzKCExKSxzZWxlY3Rpb25TZXQ6dGhpcy5wYXJzZVNlbGVjdGlvblNldCgpfSl9cGFyc2VGcmFnbWVudERlZmluaXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuO3JldHVybiB0aGlzLmV4cGVjdEtleXdvcmQoImZyYWdtZW50IiksITA9PT10aGlzLl9vcHRpb25zLmFsbG93TGVnYWN5RnJhZ21lbnRWYXJpYWJsZXM/dGhpcy5ub2RlKGUse2tpbmQ6Ty5GUkFHTUVOVF9ERUZJTklUSU9OLG5hbWU6dGhpcy5wYXJzZUZyYWdtZW50TmFtZSgpLHZhcmlhYmxlRGVmaW5pdGlvbnM6dGhpcy5wYXJzZVZhcmlhYmxlRGVmaW5pdGlvbnMoKSx0eXBlQ29uZGl0aW9uOih0aGlzLmV4cGVjdEtleXdvcmQoIm9uIiksdGhpcy5wYXJzZU5hbWVkVHlwZSgpKSxkaXJlY3RpdmVzOnRoaXMucGFyc2VEaXJlY3RpdmVzKCExKSxzZWxlY3Rpb25TZXQ6dGhpcy5wYXJzZVNlbGVjdGlvblNldCgpfSk6dGhpcy5ub2RlKGUse2tpbmQ6Ty5GUkFHTUVOVF9ERUZJTklUSU9OLG5hbWU6dGhpcy5wYXJzZUZyYWdtZW50TmFtZSgpLHR5cGVDb25kaXRpb246KHRoaXMuZXhwZWN0S2V5d29yZCgib24iKSx0aGlzLnBhcnNlTmFtZWRUeXBlKCkpLGRpcmVjdGl2ZXM6dGhpcy5wYXJzZURpcmVjdGl2ZXMoITEpLHNlbGVjdGlvblNldDp0aGlzLnBhcnNlU2VsZWN0aW9uU2V0KCl9KX1wYXJzZUZyYWdtZW50TmFtZSgpe2lmKCJvbiI9PT10aGlzLl9sZXhlci50b2tlbi52YWx1ZSl0aHJvdyB0aGlzLnVuZXhwZWN0ZWQoKTtyZXR1cm4gdGhpcy5wYXJzZU5hbWUoKX1wYXJzZVZhbHVlTGl0ZXJhbChlKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuO3N3aXRjaCh0LmtpbmQpe2Nhc2UgeC5CUkFDS0VUX0w6cmV0dXJuIHRoaXMucGFyc2VMaXN0KGUpO2Nhc2UgeC5CUkFDRV9MOnJldHVybiB0aGlzLnBhcnNlT2JqZWN0KGUpO2Nhc2UgeC5JTlQ6cmV0dXJuIHRoaXMuYWR2YW5jZUxleGVyKCksdGhpcy5ub2RlKHQse2tpbmQ6Ty5JTlQsdmFsdWU6dC52YWx1ZX0pO2Nhc2UgeC5GTE9BVDpyZXR1cm4gdGhpcy5hZHZhbmNlTGV4ZXIoKSx0aGlzLm5vZGUodCx7a2luZDpPLkZMT0FULHZhbHVlOnQudmFsdWV9KTtjYXNlIHguU1RSSU5HOmNhc2UgeC5CTE9DS19TVFJJTkc6cmV0dXJuIHRoaXMucGFyc2VTdHJpbmdMaXRlcmFsKCk7Y2FzZSB4Lk5BTUU6c3dpdGNoKHRoaXMuYWR2YW5jZUxleGVyKCksdC52YWx1ZSl7Y2FzZSJ0cnVlIjpyZXR1cm4gdGhpcy5ub2RlKHQse2tpbmQ6Ty5CT09MRUFOLHZhbHVlOiEwfSk7Y2FzZSJmYWxzZSI6cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOk8uQk9PTEVBTix2YWx1ZTohMX0pO2Nhc2UibnVsbCI6cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOk8uTlVMTH0pO2RlZmF1bHQ6cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOk8uRU5VTSx2YWx1ZTp0LnZhbHVlfSl9Y2FzZSB4LkRPTExBUjppZihlKXtpZih0aGlzLmV4cGVjdFRva2VuKHguRE9MTEFSKSx0aGlzLl9sZXhlci50b2tlbi5raW5kPT09eC5OQU1FKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLnZhbHVlO3Rocm93IHkodGhpcy5fbGV4ZXIuc291cmNlLHQuc3RhcnQsYFVuZXhwZWN0ZWQgdmFyaWFibGUgIiQke2V9IiBpbiBjb25zdGFudCB2YWx1ZS5gKX10aHJvdyB0aGlzLnVuZXhwZWN0ZWQodCl9cmV0dXJuIHRoaXMucGFyc2VWYXJpYWJsZSgpO2RlZmF1bHQ6dGhyb3cgdGhpcy51bmV4cGVjdGVkKCl9fXBhcnNlQ29uc3RWYWx1ZUxpdGVyYWwoKXtyZXR1cm4gdGhpcy5wYXJzZVZhbHVlTGl0ZXJhbCghMCl9cGFyc2VTdHJpbmdMaXRlcmFsKCl7Y29uc3QgZT10aGlzLl9sZXhlci50b2tlbjtyZXR1cm4gdGhpcy5hZHZhbmNlTGV4ZXIoKSx0aGlzLm5vZGUoZSx7a2luZDpPLlNUUklORyx2YWx1ZTplLnZhbHVlLGJsb2NrOmUua2luZD09PXguQkxPQ0tfU1RSSU5HfSl9cGFyc2VMaXN0KGUpe3JldHVybiB0aGlzLm5vZGUodGhpcy5fbGV4ZXIudG9rZW4se2tpbmQ6Ty5MSVNULHZhbHVlczp0aGlzLmFueSh4LkJSQUNLRVRfTCwoKCk9PnRoaXMucGFyc2VWYWx1ZUxpdGVyYWwoZSkpLHguQlJBQ0tFVF9SKX0pfXBhcnNlT2JqZWN0KGUpe3JldHVybiB0aGlzLm5vZGUodGhpcy5fbGV4ZXIudG9rZW4se2tpbmQ6Ty5PQkpFQ1QsZmllbGRzOnRoaXMuYW55KHguQlJBQ0VfTCwoKCk9PnRoaXMucGFyc2VPYmplY3RGaWVsZChlKSkseC5CUkFDRV9SKX0pfXBhcnNlT2JqZWN0RmllbGQoZSl7Y29uc3QgdD10aGlzLl9sZXhlci50b2tlbixuPXRoaXMucGFyc2VOYW1lKCk7cmV0dXJuIHRoaXMuZXhwZWN0VG9rZW4oeC5DT0xPTiksdGhpcy5ub2RlKHQse2tpbmQ6Ty5PQkpFQ1RfRklFTEQsbmFtZTpuLHZhbHVlOnRoaXMucGFyc2VWYWx1ZUxpdGVyYWwoZSl9KX1wYXJzZURpcmVjdGl2ZXMoZSl7Y29uc3QgdD1bXTtmb3IoO3RoaXMucGVlayh4LkFUKTspdC5wdXNoKHRoaXMucGFyc2VEaXJlY3RpdmUoZSkpO3JldHVybiB0fXBhcnNlQ29uc3REaXJlY3RpdmVzKCl7cmV0dXJuIHRoaXMucGFyc2VEaXJlY3RpdmVzKCEwKX1wYXJzZURpcmVjdGl2ZShlKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuO3JldHVybiB0aGlzLmV4cGVjdFRva2VuKHguQVQpLHRoaXMubm9kZSh0LHtraW5kOk8uRElSRUNUSVZFLG5hbWU6dGhpcy5wYXJzZU5hbWUoKSxhcmd1bWVudHM6dGhpcy5wYXJzZUFyZ3VtZW50cyhlKX0pfXBhcnNlVHlwZVJlZmVyZW5jZSgpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW47bGV0IHQ7aWYodGhpcy5leHBlY3RPcHRpb25hbFRva2VuKHguQlJBQ0tFVF9MKSl7Y29uc3Qgbj10aGlzLnBhcnNlVHlwZVJlZmVyZW5jZSgpO3RoaXMuZXhwZWN0VG9rZW4oeC5CUkFDS0VUX1IpLHQ9dGhpcy5ub2RlKGUse2tpbmQ6Ty5MSVNUX1RZUEUsdHlwZTpufSl9ZWxzZSB0PXRoaXMucGFyc2VOYW1lZFR5cGUoKTtyZXR1cm4gdGhpcy5leHBlY3RPcHRpb25hbFRva2VuKHguQkFORyk/dGhpcy5ub2RlKGUse2tpbmQ6Ty5OT05fTlVMTF9UWVBFLHR5cGU6dH0pOnR9cGFyc2VOYW1lZFR5cGUoKXtyZXR1cm4gdGhpcy5ub2RlKHRoaXMuX2xleGVyLnRva2VuLHtraW5kOk8uTkFNRURfVFlQRSxuYW1lOnRoaXMucGFyc2VOYW1lKCl9KX1wZWVrRGVzY3JpcHRpb24oKXtyZXR1cm4gdGhpcy5wZWVrKHguU1RSSU5HKXx8dGhpcy5wZWVrKHguQkxPQ0tfU1RSSU5HKX1wYXJzZURlc2NyaXB0aW9uKCl7aWYodGhpcy5wZWVrRGVzY3JpcHRpb24oKSlyZXR1cm4gdGhpcy5wYXJzZVN0cmluZ0xpdGVyYWwoKX1wYXJzZVNjaGVtYURlZmluaXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7dGhpcy5leHBlY3RLZXl3b3JkKCJzY2hlbWEiKTtjb25zdCBuPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKSxyPXRoaXMubWFueSh4LkJSQUNFX0wsdGhpcy5wYXJzZU9wZXJhdGlvblR5cGVEZWZpbml0aW9uLHguQlJBQ0VfUik7cmV0dXJuIHRoaXMubm9kZShlLHtraW5kOk8uU0NIRU1BX0RFRklOSVRJT04sZGVzY3JpcHRpb246dCxkaXJlY3RpdmVzOm4sb3BlcmF0aW9uVHlwZXM6cn0pfXBhcnNlT3BlcmF0aW9uVHlwZURlZmluaXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZU9wZXJhdGlvblR5cGUoKTt0aGlzLmV4cGVjdFRva2VuKHguQ09MT04pO2NvbnN0IG49dGhpcy5wYXJzZU5hbWVkVHlwZSgpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLk9QRVJBVElPTl9UWVBFX0RFRklOSVRJT04sb3BlcmF0aW9uOnQsdHlwZTpufSl9cGFyc2VTY2FsYXJUeXBlRGVmaW5pdGlvbigpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW4sdD10aGlzLnBhcnNlRGVzY3JpcHRpb24oKTt0aGlzLmV4cGVjdEtleXdvcmQoInNjYWxhciIpO2NvbnN0IG49dGhpcy5wYXJzZU5hbWUoKSxyPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKTtyZXR1cm4gdGhpcy5ub2RlKGUse2tpbmQ6Ty5TQ0FMQVJfVFlQRV9ERUZJTklUSU9OLGRlc2NyaXB0aW9uOnQsbmFtZTpuLGRpcmVjdGl2ZXM6cn0pfXBhcnNlT2JqZWN0VHlwZURlZmluaXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7dGhpcy5leHBlY3RLZXl3b3JkKCJ0eXBlIik7Y29uc3Qgbj10aGlzLnBhcnNlTmFtZSgpLHI9dGhpcy5wYXJzZUltcGxlbWVudHNJbnRlcmZhY2VzKCksaT10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCkscz10aGlzLnBhcnNlRmllbGRzRGVmaW5pdGlvbigpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLk9CSkVDVF9UWVBFX0RFRklOSVRJT04sZGVzY3JpcHRpb246dCxuYW1lOm4saW50ZXJmYWNlczpyLGRpcmVjdGl2ZXM6aSxmaWVsZHM6c30pfXBhcnNlSW1wbGVtZW50c0ludGVyZmFjZXMoKXtyZXR1cm4gdGhpcy5leHBlY3RPcHRpb25hbEtleXdvcmQoImltcGxlbWVudHMiKT90aGlzLmRlbGltaXRlZE1hbnkoeC5BTVAsdGhpcy5wYXJzZU5hbWVkVHlwZSk6W119cGFyc2VGaWVsZHNEZWZpbml0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9uYWxNYW55KHguQlJBQ0VfTCx0aGlzLnBhcnNlRmllbGREZWZpbml0aW9uLHguQlJBQ0VfUil9cGFyc2VGaWVsZERlZmluaXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZURlc2NyaXB0aW9uKCksbj10aGlzLnBhcnNlTmFtZSgpLHI9dGhpcy5wYXJzZUFyZ3VtZW50RGVmcygpO3RoaXMuZXhwZWN0VG9rZW4oeC5DT0xPTik7Y29uc3QgaT10aGlzLnBhcnNlVHlwZVJlZmVyZW5jZSgpLHM9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLkZJRUxEX0RFRklOSVRJT04sZGVzY3JpcHRpb246dCxuYW1lOm4sYXJndW1lbnRzOnIsdHlwZTppLGRpcmVjdGl2ZXM6c30pfXBhcnNlQXJndW1lbnREZWZzKCl7cmV0dXJuIHRoaXMub3B0aW9uYWxNYW55KHguUEFSRU5fTCx0aGlzLnBhcnNlSW5wdXRWYWx1ZURlZix4LlBBUkVOX1IpfXBhcnNlSW5wdXRWYWx1ZURlZigpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW4sdD10aGlzLnBhcnNlRGVzY3JpcHRpb24oKSxuPXRoaXMucGFyc2VOYW1lKCk7dGhpcy5leHBlY3RUb2tlbih4LkNPTE9OKTtjb25zdCByPXRoaXMucGFyc2VUeXBlUmVmZXJlbmNlKCk7bGV0IGk7dGhpcy5leHBlY3RPcHRpb25hbFRva2VuKHguRVFVQUxTKSYmKGk9dGhpcy5wYXJzZUNvbnN0VmFsdWVMaXRlcmFsKCkpO2NvbnN0IHM9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLklOUFVUX1ZBTFVFX0RFRklOSVRJT04sZGVzY3JpcHRpb246dCxuYW1lOm4sdHlwZTpyLGRlZmF1bHRWYWx1ZTppLGRpcmVjdGl2ZXM6c30pfXBhcnNlSW50ZXJmYWNlVHlwZURlZmluaXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7dGhpcy5leHBlY3RLZXl3b3JkKCJpbnRlcmZhY2UiKTtjb25zdCBuPXRoaXMucGFyc2VOYW1lKCkscj10aGlzLnBhcnNlSW1wbGVtZW50c0ludGVyZmFjZXMoKSxpPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKSxzPXRoaXMucGFyc2VGaWVsZHNEZWZpbml0aW9uKCk7cmV0dXJuIHRoaXMubm9kZShlLHtraW5kOk8uSU5URVJGQUNFX1RZUEVfREVGSU5JVElPTixkZXNjcmlwdGlvbjp0LG5hbWU6bixpbnRlcmZhY2VzOnIsZGlyZWN0aXZlczppLGZpZWxkczpzfSl9cGFyc2VVbmlvblR5cGVEZWZpbml0aW9uKCl7Y29uc3QgZT10aGlzLl9sZXhlci50b2tlbix0PXRoaXMucGFyc2VEZXNjcmlwdGlvbigpO3RoaXMuZXhwZWN0S2V5d29yZCgidW5pb24iKTtjb25zdCBuPXRoaXMucGFyc2VOYW1lKCkscj10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCksaT10aGlzLnBhcnNlVW5pb25NZW1iZXJUeXBlcygpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLlVOSU9OX1RZUEVfREVGSU5JVElPTixkZXNjcmlwdGlvbjp0LG5hbWU6bixkaXJlY3RpdmVzOnIsdHlwZXM6aX0pfXBhcnNlVW5pb25NZW1iZXJUeXBlcygpe3JldHVybiB0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oeC5FUVVBTFMpP3RoaXMuZGVsaW1pdGVkTWFueSh4LlBJUEUsdGhpcy5wYXJzZU5hbWVkVHlwZSk6W119cGFyc2VFbnVtVHlwZURlZmluaXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7dGhpcy5leHBlY3RLZXl3b3JkKCJlbnVtIik7Y29uc3Qgbj10aGlzLnBhcnNlTmFtZSgpLHI9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLGk9dGhpcy5wYXJzZUVudW1WYWx1ZXNEZWZpbml0aW9uKCk7cmV0dXJuIHRoaXMubm9kZShlLHtraW5kOk8uRU5VTV9UWVBFX0RFRklOSVRJT04sZGVzY3JpcHRpb246dCxuYW1lOm4sZGlyZWN0aXZlczpyLHZhbHVlczppfSl9cGFyc2VFbnVtVmFsdWVzRGVmaW5pdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbmFsTWFueSh4LkJSQUNFX0wsdGhpcy5wYXJzZUVudW1WYWx1ZURlZmluaXRpb24seC5CUkFDRV9SKX1wYXJzZUVudW1WYWx1ZURlZmluaXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZURlc2NyaXB0aW9uKCksbj10aGlzLnBhcnNlRW51bVZhbHVlTmFtZSgpLHI9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLkVOVU1fVkFMVUVfREVGSU5JVElPTixkZXNjcmlwdGlvbjp0LG5hbWU6bixkaXJlY3RpdmVzOnJ9KX1wYXJzZUVudW1WYWx1ZU5hbWUoKXtpZigidHJ1ZSI9PT10aGlzLl9sZXhlci50b2tlbi52YWx1ZXx8ImZhbHNlIj09PXRoaXMuX2xleGVyLnRva2VuLnZhbHVlfHwibnVsbCI9PT10aGlzLl9sZXhlci50b2tlbi52YWx1ZSl0aHJvdyB5KHRoaXMuX2xleGVyLnNvdXJjZSx0aGlzLl9sZXhlci50b2tlbi5zdGFydCxgJHtsZSh0aGlzLl9sZXhlci50b2tlbil9IGlzIHJlc2VydmVkIGFuZCBjYW5ub3QgYmUgdXNlZCBmb3IgYW4gZW51bSB2YWx1ZS5gKTtyZXR1cm4gdGhpcy5wYXJzZU5hbWUoKX1wYXJzZUlucHV0T2JqZWN0VHlwZURlZmluaXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7dGhpcy5leHBlY3RLZXl3b3JkKCJpbnB1dCIpO2NvbnN0IG49dGhpcy5wYXJzZU5hbWUoKSxyPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKSxpPXRoaXMucGFyc2VJbnB1dEZpZWxkc0RlZmluaXRpb24oKTtyZXR1cm4gdGhpcy5ub2RlKGUse2tpbmQ6Ty5JTlBVVF9PQkpFQ1RfVFlQRV9ERUZJTklUSU9OLGRlc2NyaXB0aW9uOnQsbmFtZTpuLGRpcmVjdGl2ZXM6cixmaWVsZHM6aX0pfXBhcnNlSW5wdXRGaWVsZHNEZWZpbml0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9uYWxNYW55KHguQlJBQ0VfTCx0aGlzLnBhcnNlSW5wdXRWYWx1ZURlZix4LkJSQUNFX1IpfXBhcnNlVHlwZVN5c3RlbUV4dGVuc2lvbigpe2NvbnN0IGU9dGhpcy5fbGV4ZXIubG9va2FoZWFkKCk7aWYoZS5raW5kPT09eC5OQU1FKXN3aXRjaChlLnZhbHVlKXtjYXNlInNjaGVtYSI6cmV0dXJuIHRoaXMucGFyc2VTY2hlbWFFeHRlbnNpb24oKTtjYXNlInNjYWxhciI6cmV0dXJuIHRoaXMucGFyc2VTY2FsYXJUeXBlRXh0ZW5zaW9uKCk7Y2FzZSJ0eXBlIjpyZXR1cm4gdGhpcy5wYXJzZU9iamVjdFR5cGVFeHRlbnNpb24oKTtjYXNlImludGVyZmFjZSI6cmV0dXJuIHRoaXMucGFyc2VJbnRlcmZhY2VUeXBlRXh0ZW5zaW9uKCk7Y2FzZSJ1bmlvbiI6cmV0dXJuIHRoaXMucGFyc2VVbmlvblR5cGVFeHRlbnNpb24oKTtjYXNlImVudW0iOnJldHVybiB0aGlzLnBhcnNlRW51bVR5cGVFeHRlbnNpb24oKTtjYXNlImlucHV0IjpyZXR1cm4gdGhpcy5wYXJzZUlucHV0T2JqZWN0VHlwZUV4dGVuc2lvbigpfXRocm93IHRoaXMudW5leHBlY3RlZChlKX1wYXJzZVNjaGVtYUV4dGVuc2lvbigpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW47dGhpcy5leHBlY3RLZXl3b3JkKCJleHRlbmQiKSx0aGlzLmV4cGVjdEtleXdvcmQoInNjaGVtYSIpO2NvbnN0IHQ9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLG49dGhpcy5vcHRpb25hbE1hbnkoeC5CUkFDRV9MLHRoaXMucGFyc2VPcGVyYXRpb25UeXBlRGVmaW5pdGlvbix4LkJSQUNFX1IpO2lmKDA9PT10Lmxlbmd0aCYmMD09PW4ubGVuZ3RoKXRocm93IHRoaXMudW5leHBlY3RlZCgpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLlNDSEVNQV9FWFRFTlNJT04sZGlyZWN0aXZlczp0LG9wZXJhdGlvblR5cGVzOm59KX1wYXJzZVNjYWxhclR5cGVFeHRlbnNpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuO3RoaXMuZXhwZWN0S2V5d29yZCgiZXh0ZW5kIiksdGhpcy5leHBlY3RLZXl3b3JkKCJzY2FsYXIiKTtjb25zdCB0PXRoaXMucGFyc2VOYW1lKCksbj10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCk7aWYoMD09PW4ubGVuZ3RoKXRocm93IHRoaXMudW5leHBlY3RlZCgpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLlNDQUxBUl9UWVBFX0VYVEVOU0lPTixuYW1lOnQsZGlyZWN0aXZlczpufSl9cGFyc2VPYmplY3RUeXBlRXh0ZW5zaW9uKCl7Y29uc3QgZT10aGlzLl9sZXhlci50b2tlbjt0aGlzLmV4cGVjdEtleXdvcmQoImV4dGVuZCIpLHRoaXMuZXhwZWN0S2V5d29yZCgidHlwZSIpO2NvbnN0IHQ9dGhpcy5wYXJzZU5hbWUoKSxuPXRoaXMucGFyc2VJbXBsZW1lbnRzSW50ZXJmYWNlcygpLHI9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLGk9dGhpcy5wYXJzZUZpZWxkc0RlZmluaXRpb24oKTtpZigwPT09bi5sZW5ndGgmJjA9PT1yLmxlbmd0aCYmMD09PWkubGVuZ3RoKXRocm93IHRoaXMudW5leHBlY3RlZCgpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLk9CSkVDVF9UWVBFX0VYVEVOU0lPTixuYW1lOnQsaW50ZXJmYWNlczpuLGRpcmVjdGl2ZXM6cixmaWVsZHM6aX0pfXBhcnNlSW50ZXJmYWNlVHlwZUV4dGVuc2lvbigpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW47dGhpcy5leHBlY3RLZXl3b3JkKCJleHRlbmQiKSx0aGlzLmV4cGVjdEtleXdvcmQoImludGVyZmFjZSIpO2NvbnN0IHQ9dGhpcy5wYXJzZU5hbWUoKSxuPXRoaXMucGFyc2VJbXBsZW1lbnRzSW50ZXJmYWNlcygpLHI9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLGk9dGhpcy5wYXJzZUZpZWxkc0RlZmluaXRpb24oKTtpZigwPT09bi5sZW5ndGgmJjA9PT1yLmxlbmd0aCYmMD09PWkubGVuZ3RoKXRocm93IHRoaXMudW5leHBlY3RlZCgpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLklOVEVSRkFDRV9UWVBFX0VYVEVOU0lPTixuYW1lOnQsaW50ZXJmYWNlczpuLGRpcmVjdGl2ZXM6cixmaWVsZHM6aX0pfXBhcnNlVW5pb25UeXBlRXh0ZW5zaW9uKCl7Y29uc3QgZT10aGlzLl9sZXhlci50b2tlbjt0aGlzLmV4cGVjdEtleXdvcmQoImV4dGVuZCIpLHRoaXMuZXhwZWN0S2V5d29yZCgidW5pb24iKTtjb25zdCB0PXRoaXMucGFyc2VOYW1lKCksbj10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCkscj10aGlzLnBhcnNlVW5pb25NZW1iZXJUeXBlcygpO2lmKDA9PT1uLmxlbmd0aCYmMD09PXIubGVuZ3RoKXRocm93IHRoaXMudW5leHBlY3RlZCgpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLlVOSU9OX1RZUEVfRVhURU5TSU9OLG5hbWU6dCxkaXJlY3RpdmVzOm4sdHlwZXM6cn0pfXBhcnNlRW51bVR5cGVFeHRlbnNpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuO3RoaXMuZXhwZWN0S2V5d29yZCgiZXh0ZW5kIiksdGhpcy5leHBlY3RLZXl3b3JkKCJlbnVtIik7Y29uc3QgdD10aGlzLnBhcnNlTmFtZSgpLG49dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLHI9dGhpcy5wYXJzZUVudW1WYWx1ZXNEZWZpbml0aW9uKCk7aWYoMD09PW4ubGVuZ3RoJiYwPT09ci5sZW5ndGgpdGhyb3cgdGhpcy51bmV4cGVjdGVkKCk7cmV0dXJuIHRoaXMubm9kZShlLHtraW5kOk8uRU5VTV9UWVBFX0VYVEVOU0lPTixuYW1lOnQsZGlyZWN0aXZlczpuLHZhbHVlczpyfSl9cGFyc2VJbnB1dE9iamVjdFR5cGVFeHRlbnNpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuO3RoaXMuZXhwZWN0S2V5d29yZCgiZXh0ZW5kIiksdGhpcy5leHBlY3RLZXl3b3JkKCJpbnB1dCIpO2NvbnN0IHQ9dGhpcy5wYXJzZU5hbWUoKSxuPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKSxyPXRoaXMucGFyc2VJbnB1dEZpZWxkc0RlZmluaXRpb24oKTtpZigwPT09bi5sZW5ndGgmJjA9PT1yLmxlbmd0aCl0aHJvdyB0aGlzLnVuZXhwZWN0ZWQoKTtyZXR1cm4gdGhpcy5ub2RlKGUse2tpbmQ6Ty5JTlBVVF9PQkpFQ1RfVFlQRV9FWFRFTlNJT04sbmFtZTp0LGRpcmVjdGl2ZXM6bixmaWVsZHM6cn0pfXBhcnNlRGlyZWN0aXZlRGVmaW5pdGlvbigpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW4sdD10aGlzLnBhcnNlRGVzY3JpcHRpb24oKTt0aGlzLmV4cGVjdEtleXdvcmQoImRpcmVjdGl2ZSIpLHRoaXMuZXhwZWN0VG9rZW4oeC5BVCk7Y29uc3Qgbj10aGlzLnBhcnNlTmFtZSgpLHI9dGhpcy5wYXJzZUFyZ3VtZW50RGVmcygpLGk9dGhpcy5leHBlY3RPcHRpb25hbEtleXdvcmQoInJlcGVhdGFibGUiKTt0aGlzLmV4cGVjdEtleXdvcmQoIm9uIik7Y29uc3Qgcz10aGlzLnBhcnNlRGlyZWN0aXZlTG9jYXRpb25zKCk7cmV0dXJuIHRoaXMubm9kZShlLHtraW5kOk8uRElSRUNUSVZFX0RFRklOSVRJT04sZGVzY3JpcHRpb246dCxuYW1lOm4sYXJndW1lbnRzOnIscmVwZWF0YWJsZTppLGxvY2F0aW9uczpzfSl9cGFyc2VEaXJlY3RpdmVMb2NhdGlvbnMoKXtyZXR1cm4gdGhpcy5kZWxpbWl0ZWRNYW55KHguUElQRSx0aGlzLnBhcnNlRGlyZWN0aXZlTG9jYXRpb24pfXBhcnNlRGlyZWN0aXZlTG9jYXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZU5hbWUoKTtpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoTix0LnZhbHVlKSlyZXR1cm4gdDt0aHJvdyB0aGlzLnVuZXhwZWN0ZWQoZSl9bm9kZShlLHQpe3JldHVybiEwIT09dGhpcy5fb3B0aW9ucy5ub0xvY2F0aW9uJiYodC5sb2M9bmV3IG0oZSx0aGlzLl9sZXhlci5sYXN0VG9rZW4sdGhpcy5fbGV4ZXIuc291cmNlKSksdH1wZWVrKGUpe3JldHVybiB0aGlzLl9sZXhlci50b2tlbi5raW5kPT09ZX1leHBlY3RUb2tlbihlKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuO2lmKHQua2luZD09PWUpcmV0dXJuIHRoaXMuYWR2YW5jZUxleGVyKCksdDt0aHJvdyB5KHRoaXMuX2xleGVyLnNvdXJjZSx0LnN0YXJ0LGBFeHBlY3RlZCAke3VlKGUpfSwgZm91bmQgJHtsZSh0KX0uYCl9ZXhwZWN0T3B0aW9uYWxUb2tlbihlKXtyZXR1cm4gdGhpcy5fbGV4ZXIudG9rZW4ua2luZD09PWUmJih0aGlzLmFkdmFuY2VMZXhlcigpLCEwKX1leHBlY3RLZXl3b3JkKGUpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW47aWYodC5raW5kIT09eC5OQU1FfHx0LnZhbHVlIT09ZSl0aHJvdyB5KHRoaXMuX2xleGVyLnNvdXJjZSx0LnN0YXJ0LGBFeHBlY3RlZCAiJHtlfSIsIGZvdW5kICR7bGUodCl9LmApO3RoaXMuYWR2YW5jZUxleGVyKCl9ZXhwZWN0T3B0aW9uYWxLZXl3b3JkKGUpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW47cmV0dXJuIHQua2luZD09PXguTkFNRSYmdC52YWx1ZT09PWUmJih0aGlzLmFkdmFuY2VMZXhlcigpLCEwKX11bmV4cGVjdGVkKGUpe2NvbnN0IHQ9bnVsbCE9ZT9lOnRoaXMuX2xleGVyLnRva2VuO3JldHVybiB5KHRoaXMuX2xleGVyLnNvdXJjZSx0LnN0YXJ0LGBVbmV4cGVjdGVkICR7bGUodCl9LmApfWFueShlLHQsbil7dGhpcy5leHBlY3RUb2tlbihlKTtjb25zdCByPVtdO2Zvcig7IXRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihuKTspci5wdXNoKHQuY2FsbCh0aGlzKSk7cmV0dXJuIHJ9b3B0aW9uYWxNYW55KGUsdCxuKXtpZih0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oZSkpe2NvbnN0IGU9W107ZG97ZS5wdXNoKHQuY2FsbCh0aGlzKSl9d2hpbGUoIXRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihuKSk7cmV0dXJuIGV9cmV0dXJuW119bWFueShlLHQsbil7dGhpcy5leHBlY3RUb2tlbihlKTtjb25zdCByPVtdO2Rve3IucHVzaCh0LmNhbGwodGhpcykpfXdoaWxlKCF0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4obikpO3JldHVybiByfWRlbGltaXRlZE1hbnkoZSx0KXt0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oZSk7Y29uc3Qgbj1bXTtkb3tuLnB1c2godC5jYWxsKHRoaXMpKX13aGlsZSh0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oZSkpO3JldHVybiBufWFkdmFuY2VMZXhlcigpe2NvbnN0e21heFRva2VuczplfT10aGlzLl9vcHRpb25zLHQ9dGhpcy5fbGV4ZXIuYWR2YW5jZSgpO2lmKHZvaWQgMCE9PWUmJnQua2luZCE9PXguRU9GJiYoKyt0aGlzLl90b2tlbkNvdW50ZXIsdGhpcy5fdG9rZW5Db3VudGVyPmUpKXRocm93IHkodGhpcy5fbGV4ZXIuc291cmNlLHQuc3RhcnQsYERvY3VtZW50IGNvbnRhaW5zIG1vcmUgdGhhdCAke2V9IHRva2Vucy4gUGFyc2luZyBhYm9ydGVkLmApfX1mdW5jdGlvbiBsZShlKXtjb25zdCB0PWUudmFsdWU7cmV0dXJuIHVlKGUua2luZCkrKG51bGwhPXQ/YCAiJHt0fSJgOiIiKX1mdW5jdGlvbiB1ZShlKXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT14LkJBTkd8fGU9PT14LkRPTExBUnx8ZT09PXguQU1QfHxlPT09eC5QQVJFTl9MfHxlPT09eC5QQVJFTl9SfHxlPT09eC5TUFJFQUR8fGU9PT14LkNPTE9OfHxlPT09eC5FUVVBTFN8fGU9PT14LkFUfHxlPT09eC5CUkFDS0VUX0x8fGU9PT14LkJSQUNLRVRfUnx8ZT09PXguQlJBQ0VfTHx8ZT09PXguUElQRXx8ZT09PXguQlJBQ0VfUn0oZSk/YCIke2V9ImA6ZX1jb25zdCBkZT0vW1x4MDAtXHgxZlx4MjJceDVjXHg3Zi1ceDlmXS9nO2Z1bmN0aW9uIHBlKGUpe3JldHVybiBoZVtlLmNoYXJDb2RlQXQoMCldfWNvbnN0IGhlPVsiXFx1MDAwMCIsIlxcdTAwMDEiLCJcXHUwMDAyIiwiXFx1MDAwMyIsIlxcdTAwMDQiLCJcXHUwMDA1IiwiXFx1MDAwNiIsIlxcdTAwMDciLCJcXGIiLCJcXHQiLCJcXG4iLCJcXHUwMDBCIiwiXFxmIiwiXFxyIiwiXFx1MDAwRSIsIlxcdTAwMEYiLCJcXHUwMDEwIiwiXFx1MDAxMSIsIlxcdTAwMTIiLCJcXHUwMDEzIiwiXFx1MDAxNCIsIlxcdTAwMTUiLCJcXHUwMDE2IiwiXFx1MDAxNyIsIlxcdTAwMTgiLCJcXHUwMDE5IiwiXFx1MDAxQSIsIlxcdTAwMUIiLCJcXHUwMDFDIiwiXFx1MDAxRCIsIlxcdTAwMUUiLCJcXHUwMDFGIiwiIiwiIiwnXFwiJywiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiXFxcXCIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIlxcdTAwN0YiLCJcXHUwMDgwIiwiXFx1MDA4MSIsIlxcdTAwODIiLCJcXHUwMDgzIiwiXFx1MDA4NCIsIlxcdTAwODUiLCJcXHUwMDg2IiwiXFx1MDA4NyIsIlxcdTAwODgiLCJcXHUwMDg5IiwiXFx1MDA4QSIsIlxcdTAwOEIiLCJcXHUwMDhDIiwiXFx1MDA4RCIsIlxcdTAwOEUiLCJcXHUwMDhGIiwiXFx1MDA5MCIsIlxcdTAwOTEiLCJcXHUwMDkyIiwiXFx1MDA5MyIsIlxcdTAwOTQiLCJcXHUwMDk1IiwiXFx1MDA5NiIsIlxcdTAwOTciLCJcXHUwMDk4IiwiXFx1MDA5OSIsIlxcdTAwOUEiLCJcXHUwMDlCIiwiXFx1MDA5QyIsIlxcdTAwOUQiLCJcXHUwMDlFIiwiXFx1MDA5RiJdLGZlPU9iamVjdC5mcmVlemUoe30pO2Z1bmN0aW9uIHllKGUsdCl7Y29uc3Qgbj1lW3RdO3JldHVybiJvYmplY3QiPT10eXBlb2Ygbj9uOiJmdW5jdGlvbiI9PXR5cGVvZiBuP3tlbnRlcjpuLGxlYXZlOnZvaWQgMH06e2VudGVyOmUuZW50ZXIsbGVhdmU6ZS5sZWF2ZX19ZnVuY3Rpb24gbWUoZSl7cmV0dXJuIGZ1bmN0aW9uKGUsdCxuPV8pe2NvbnN0IHI9bmV3IE1hcDtmb3IoY29uc3QgYSBvZiBPYmplY3QudmFsdWVzKE8pKXIuc2V0KGEseWUodCxhKSk7bGV0IGkscyxvLGM9QXJyYXkuaXNBcnJheShlKSxsPVtlXSx1PS0xLGQ9W10scD1lO2NvbnN0IGg9W10sZj1bXTtkb3t1Kys7Y29uc3QgZT11PT09bC5sZW5ndGgsXz1lJiYwIT09ZC5sZW5ndGg7aWYoZSl7aWYocz0wPT09Zi5sZW5ndGg/dm9pZCAwOmhbaC5sZW5ndGgtMV0scD1vLG89Zi5wb3AoKSxfKWlmKGMpe3A9cC5zbGljZSgpO2xldCBlPTA7Zm9yKGNvbnN0W3Qsbl1vZiBkKXtjb25zdCByPXQtZTtudWxsPT09bj8ocC5zcGxpY2UociwxKSxlKyspOnBbcl09bn19ZWxzZXtwPU9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHt9LE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHApKTtmb3IoY29uc3RbZSx0XW9mIGQpcFtlXT10fXU9aS5pbmRleCxsPWkua2V5cyxkPWkuZWRpdHMsYz1pLmluQXJyYXksaT1pLnByZXZ9ZWxzZSBpZihvKXtpZihzPWM/dTpsW3VdLHA9b1tzXSxudWxsPT1wKWNvbnRpbnVlO2gucHVzaChzKX1sZXQgZztpZighQXJyYXkuaXNBcnJheShwKSl7dmFyIHksbTtFKHApfHxhKCExLGBJbnZhbGlkIEFTVCBOb2RlOiAke3JlKHApfS5gKTtjb25zdCBuPWU/bnVsbD09PSh5PXIuZ2V0KHAua2luZCkpfHx2b2lkIDA9PT15P3ZvaWQgMDp5LmxlYXZlOm51bGw9PT0obT1yLmdldChwLmtpbmQpKXx8dm9pZCAwPT09bT92b2lkIDA6bS5lbnRlcjtpZihnPW51bGw9PW4/dm9pZCAwOm4uY2FsbCh0LHAscyxvLGgsZiksZz09PWZlKWJyZWFrO2lmKCExPT09Zyl7aWYoIWUpe2gucG9wKCk7Y29udGludWV9fWVsc2UgaWYodm9pZCAwIT09ZyYmKGQucHVzaChbcyxnXSksIWUpKXtpZighRShnKSl7aC5wb3AoKTtjb250aW51ZX1wPWd9fXZhciB2O3ZvaWQgMD09PWcmJl8mJmQucHVzaChbcyxwXSksZT9oLnBvcCgpOihpPXtpbkFycmF5OmMsaW5kZXg6dSxrZXlzOmwsZWRpdHM6ZCxwcmV2Oml9LGM9QXJyYXkuaXNBcnJheShwKSxsPWM/cDpudWxsIT09KHY9bltwLmtpbmRdKSYmdm9pZCAwIT09dj92OltdLHU9LTEsZD1bXSxvJiZmLnB1c2gobyksbz1wKX13aGlsZSh2b2lkIDAhPT1pKTtyZXR1cm4gMCE9PWQubGVuZ3RoP2RbZC5sZW5ndGgtMV1bMV06ZX0oZSx2ZSl9Y29uc3QgdmU9e05hbWU6e2xlYXZlOmU9PmUudmFsdWV9LFZhcmlhYmxlOntsZWF2ZTplPT4iJCIrZS5uYW1lfSxEb2N1bWVudDp7bGVhdmU6ZT0+X2UoZS5kZWZpbml0aW9ucywiXG5cbiIpfSxPcGVyYXRpb25EZWZpbml0aW9uOntsZWF2ZShlKXtjb25zdCB0PUVlKCIoIixfZShlLnZhcmlhYmxlRGVmaW5pdGlvbnMsIiwgIiksIikiKSxuPV9lKFtlLm9wZXJhdGlvbixfZShbZS5uYW1lLHRdKSxfZShlLmRpcmVjdGl2ZXMsIiAiKV0sIiAiKTtyZXR1cm4oInF1ZXJ5Ij09PW4/IiI6bisiICIpK2Uuc2VsZWN0aW9uU2V0fX0sVmFyaWFibGVEZWZpbml0aW9uOntsZWF2ZTooe3ZhcmlhYmxlOmUsdHlwZTp0LGRlZmF1bHRWYWx1ZTpuLGRpcmVjdGl2ZXM6cn0pPT5lKyI6ICIrdCtFZSgiID0gIixuKStFZSgiICIsX2UociwiICIpKX0sU2VsZWN0aW9uU2V0OntsZWF2ZTooe3NlbGVjdGlvbnM6ZX0pPT5nZShlKX0sRmllbGQ6e2xlYXZlKHthbGlhczplLG5hbWU6dCxhcmd1bWVudHM6bixkaXJlY3RpdmVzOnIsc2VsZWN0aW9uU2V0Oml9KXtjb25zdCBzPUVlKCIiLGUsIjogIikrdDtsZXQgbz1zK0VlKCIoIixfZShuLCIsICIpLCIpIik7cmV0dXJuIG8ubGVuZ3RoPjgwJiYobz1zK0VlKCIoXG4iLFRlKF9lKG4sIlxuIikpLCJcbikiKSksX2UoW28sX2UociwiICIpLGldLCIgIil9fSxBcmd1bWVudDp7bGVhdmU6KHtuYW1lOmUsdmFsdWU6dH0pPT5lKyI6ICIrdH0sRnJhZ21lbnRTcHJlYWQ6e2xlYXZlOih7bmFtZTplLGRpcmVjdGl2ZXM6dH0pPT4iLi4uIitlK0VlKCIgIixfZSh0LCIgIikpfSxJbmxpbmVGcmFnbWVudDp7bGVhdmU6KHt0eXBlQ29uZGl0aW9uOmUsZGlyZWN0aXZlczp0LHNlbGVjdGlvblNldDpufSk9Pl9lKFsiLi4uIixFZSgib24gIixlKSxfZSh0LCIgIiksbl0sIiAiKX0sRnJhZ21lbnREZWZpbml0aW9uOntsZWF2ZTooe25hbWU6ZSx0eXBlQ29uZGl0aW9uOnQsdmFyaWFibGVEZWZpbml0aW9uczpuLGRpcmVjdGl2ZXM6cixzZWxlY3Rpb25TZXQ6aX0pPT5gZnJhZ21lbnQgJHtlfSR7RWUoIigiLF9lKG4sIiwgIiksIikiKX0gb24gJHt0fSAke0VlKCIiLF9lKHIsIiAiKSwiICIpfWAraX0sSW50VmFsdWU6e2xlYXZlOih7dmFsdWU6ZX0pPT5lfSxGbG9hdFZhbHVlOntsZWF2ZTooe3ZhbHVlOmV9KT0+ZX0sU3RyaW5nVmFsdWU6e2xlYXZlOih7dmFsdWU6ZSxibG9jazp0fSk9PnQ/ZnVuY3Rpb24oZSx0KXtjb25zdCBuPWUucmVwbGFjZSgvIiIiL2csJ1xcIiIiJykscj1uLnNwbGl0KC9cclxufFtcblxyXS9nKSxpPTE9PT1yLmxlbmd0aCxzPXIubGVuZ3RoPjEmJnIuc2xpY2UoMSkuZXZlcnkoKGU9PjA9PT1lLmxlbmd0aHx8RChlLmNoYXJDb2RlQXQoMCkpKSksbz1uLmVuZHNXaXRoKCdcXCIiIicpLGE9ZS5lbmRzV2l0aCgnIicpJiYhbyxjPWUuZW5kc1dpdGgoIlxcIiksbD1hfHxjLHU9IShudWxsIT10JiZ0Lm1pbmltaXplKSYmKCFpfHxlLmxlbmd0aD43MHx8bHx8c3x8byk7bGV0IGQ9IiI7Y29uc3QgcD1pJiZEKGUuY2hhckNvZGVBdCgwKSk7cmV0dXJuKHUmJiFwfHxzKSYmKGQrPSJcbiIpLGQrPW4sKHV8fGwpJiYoZCs9IlxuIiksJyIiIicrZCsnIiIiJ30oZSk6YCIke2UucmVwbGFjZShkZSxwZSl9ImB9LEJvb2xlYW5WYWx1ZTp7bGVhdmU6KHt2YWx1ZTplfSk9PmU/InRydWUiOiJmYWxzZSJ9LE51bGxWYWx1ZTp7bGVhdmU6KCk9PiJudWxsIn0sRW51bVZhbHVlOntsZWF2ZTooe3ZhbHVlOmV9KT0+ZX0sTGlzdFZhbHVlOntsZWF2ZTooe3ZhbHVlczplfSk9PiJbIitfZShlLCIsICIpKyJdIn0sT2JqZWN0VmFsdWU6e2xlYXZlOih7ZmllbGRzOmV9KT0+InsiK19lKGUsIiwgIikrIn0ifSxPYmplY3RGaWVsZDp7bGVhdmU6KHtuYW1lOmUsdmFsdWU6dH0pPT5lKyI6ICIrdH0sRGlyZWN0aXZlOntsZWF2ZTooe25hbWU6ZSxhcmd1bWVudHM6dH0pPT4iQCIrZStFZSgiKCIsX2UodCwiLCAiKSwiKSIpfSxOYW1lZFR5cGU6e2xlYXZlOih7bmFtZTplfSk9PmV9LExpc3RUeXBlOntsZWF2ZTooe3R5cGU6ZX0pPT4iWyIrZSsiXSJ9LE5vbk51bGxUeXBlOntsZWF2ZTooe3R5cGU6ZX0pPT5lKyIhIn0sU2NoZW1hRGVmaW5pdGlvbjp7bGVhdmU6KHtkZXNjcmlwdGlvbjplLGRpcmVjdGl2ZXM6dCxvcGVyYXRpb25UeXBlczpufSk9PkVlKCIiLGUsIlxuIikrX2UoWyJzY2hlbWEiLF9lKHQsIiAiKSxnZShuKV0sIiAiKX0sT3BlcmF0aW9uVHlwZURlZmluaXRpb246e2xlYXZlOih7b3BlcmF0aW9uOmUsdHlwZTp0fSk9PmUrIjogIit0fSxTY2FsYXJUeXBlRGVmaW5pdGlvbjp7bGVhdmU6KHtkZXNjcmlwdGlvbjplLG5hbWU6dCxkaXJlY3RpdmVzOm59KT0+RWUoIiIsZSwiXG4iKStfZShbInNjYWxhciIsdCxfZShuLCIgIildLCIgIil9LE9iamVjdFR5cGVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGludGVyZmFjZXM6bixkaXJlY3RpdmVzOnIsZmllbGRzOml9KT0+RWUoIiIsZSwiXG4iKStfZShbInR5cGUiLHQsRWUoImltcGxlbWVudHMgIixfZShuLCIgJiAiKSksX2UociwiICIpLGdlKGkpXSwiICIpfSxGaWVsZERlZmluaXRpb246e2xlYXZlOih7ZGVzY3JpcHRpb246ZSxuYW1lOnQsYXJndW1lbnRzOm4sdHlwZTpyLGRpcmVjdGl2ZXM6aX0pPT5FZSgiIixlLCJcbiIpK3QrKGJlKG4pP0VlKCIoXG4iLFRlKF9lKG4sIlxuIikpLCJcbikiKTpFZSgiKCIsX2UobiwiLCAiKSwiKSIpKSsiOiAiK3IrRWUoIiAiLF9lKGksIiAiKSl9LElucHV0VmFsdWVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LHR5cGU6bixkZWZhdWx0VmFsdWU6cixkaXJlY3RpdmVzOml9KT0+RWUoIiIsZSwiXG4iKStfZShbdCsiOiAiK24sRWUoIj0gIixyKSxfZShpLCIgIildLCIgIil9LEludGVyZmFjZVR5cGVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGludGVyZmFjZXM6bixkaXJlY3RpdmVzOnIsZmllbGRzOml9KT0+RWUoIiIsZSwiXG4iKStfZShbImludGVyZmFjZSIsdCxFZSgiaW1wbGVtZW50cyAiLF9lKG4sIiAmICIpKSxfZShyLCIgIiksZ2UoaSldLCIgIil9LFVuaW9uVHlwZURlZmluaXRpb246e2xlYXZlOih7ZGVzY3JpcHRpb246ZSxuYW1lOnQsZGlyZWN0aXZlczpuLHR5cGVzOnJ9KT0+RWUoIiIsZSwiXG4iKStfZShbInVuaW9uIix0LF9lKG4sIiAiKSxFZSgiPSAiLF9lKHIsIiB8ICIpKV0sIiAiKX0sRW51bVR5cGVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGRpcmVjdGl2ZXM6bix2YWx1ZXM6cn0pPT5FZSgiIixlLCJcbiIpK19lKFsiZW51bSIsdCxfZShuLCIgIiksZ2UocildLCIgIil9LEVudW1WYWx1ZURlZmluaXRpb246e2xlYXZlOih7ZGVzY3JpcHRpb246ZSxuYW1lOnQsZGlyZWN0aXZlczpufSk9PkVlKCIiLGUsIlxuIikrX2UoW3QsX2UobiwiICIpXSwiICIpfSxJbnB1dE9iamVjdFR5cGVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGRpcmVjdGl2ZXM6bixmaWVsZHM6cn0pPT5FZSgiIixlLCJcbiIpK19lKFsiaW5wdXQiLHQsX2UobiwiICIpLGdlKHIpXSwiICIpfSxEaXJlY3RpdmVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGFyZ3VtZW50czpuLHJlcGVhdGFibGU6cixsb2NhdGlvbnM6aX0pPT5FZSgiIixlLCJcbiIpKyJkaXJlY3RpdmUgQCIrdCsoYmUobik/RWUoIihcbiIsVGUoX2UobiwiXG4iKSksIlxuKSIpOkVlKCIoIixfZShuLCIsICIpLCIpIikpKyhyPyIgcmVwZWF0YWJsZSI6IiIpKyIgb24gIitfZShpLCIgfCAiKX0sU2NoZW1hRXh0ZW5zaW9uOntsZWF2ZTooe2RpcmVjdGl2ZXM6ZSxvcGVyYXRpb25UeXBlczp0fSk9Pl9lKFsiZXh0ZW5kIHNjaGVtYSIsX2UoZSwiICIpLGdlKHQpXSwiICIpfSxTY2FsYXJUeXBlRXh0ZW5zaW9uOntsZWF2ZTooe25hbWU6ZSxkaXJlY3RpdmVzOnR9KT0+X2UoWyJleHRlbmQgc2NhbGFyIixlLF9lKHQsIiAiKV0sIiAiKX0sT2JqZWN0VHlwZUV4dGVuc2lvbjp7bGVhdmU6KHtuYW1lOmUsaW50ZXJmYWNlczp0LGRpcmVjdGl2ZXM6bixmaWVsZHM6cn0pPT5fZShbImV4dGVuZCB0eXBlIixlLEVlKCJpbXBsZW1lbnRzICIsX2UodCwiICYgIikpLF9lKG4sIiAiKSxnZShyKV0sIiAiKX0sSW50ZXJmYWNlVHlwZUV4dGVuc2lvbjp7bGVhdmU6KHtuYW1lOmUsaW50ZXJmYWNlczp0LGRpcmVjdGl2ZXM6bixmaWVsZHM6cn0pPT5fZShbImV4dGVuZCBpbnRlcmZhY2UiLGUsRWUoImltcGxlbWVudHMgIixfZSh0LCIgJiAiKSksX2UobiwiICIpLGdlKHIpXSwiICIpfSxVbmlvblR5cGVFeHRlbnNpb246e2xlYXZlOih7bmFtZTplLGRpcmVjdGl2ZXM6dCx0eXBlczpufSk9Pl9lKFsiZXh0ZW5kIHVuaW9uIixlLF9lKHQsIiAiKSxFZSgiPSAiLF9lKG4sIiB8ICIpKV0sIiAiKX0sRW51bVR5cGVFeHRlbnNpb246e2xlYXZlOih7bmFtZTplLGRpcmVjdGl2ZXM6dCx2YWx1ZXM6bn0pPT5fZShbImV4dGVuZCBlbnVtIixlLF9lKHQsIiAiKSxnZShuKV0sIiAiKX0sSW5wdXRPYmplY3RUeXBlRXh0ZW5zaW9uOntsZWF2ZTooe25hbWU6ZSxkaXJlY3RpdmVzOnQsZmllbGRzOm59KT0+X2UoWyJleHRlbmQgaW5wdXQiLGUsX2UodCwiICIpLGdlKG4pXSwiICIpfX07ZnVuY3Rpb24gX2UoZSx0PSIiKXt2YXIgbjtyZXR1cm4gbnVsbCE9PShuPW51bGw9PWU/dm9pZCAwOmUuZmlsdGVyKChlPT5lKSkuam9pbih0KSkmJnZvaWQgMCE9PW4/bjoiIn1mdW5jdGlvbiBnZShlKXtyZXR1cm4gRWUoIntcbiIsVGUoX2UoZSwiXG4iKSksIlxufSIpfWZ1bmN0aW9uIEVlKGUsdCxuPSIiKXtyZXR1cm4gbnVsbCE9dCYmIiIhPT10P2UrdCtuOiIifWZ1bmN0aW9uIFRlKGUpe3JldHVybiBFZSgiICAiLGUucmVwbGFjZSgvXG4vZywiXG4gICIpKX1mdW5jdGlvbiBiZShlKXt2YXIgdDtyZXR1cm4gbnVsbCE9PSh0PW51bGw9PWU/dm9pZCAwOmUuc29tZSgoZT0+ZS5pbmNsdWRlcygiXG4iKSkpKSYmdm9pZCAwIT09dCYmdH12YXIgTmU9bmV3IE1hcCxJZT1uZXcgTWFwLE9lPSEwLEFlPSExO2Z1bmN0aW9uIHhlKGUpe3JldHVybiBlLnJlcGxhY2UoL1tccyxdKy9nLCIgIikudHJpbSgpfWZ1bmN0aW9uIFNlKGUpe3ZhciB0PW5ldyBTZXQsbj1bXTtyZXR1cm4gZS5kZWZpbml0aW9ucy5mb3JFYWNoKChmdW5jdGlvbihlKXtpZigiRnJhZ21lbnREZWZpbml0aW9uIj09PWUua2luZCl7dmFyIHI9ZS5uYW1lLnZhbHVlLGk9eGUoKG89ZS5sb2MpLnNvdXJjZS5ib2R5LnN1YnN0cmluZyhvLnN0YXJ0LG8uZW5kKSkscz1JZS5nZXQocik7cyYmIXMuaGFzKGkpP09lJiZjb25zb2xlLndhcm4oIldhcm5pbmc6IGZyYWdtZW50IHdpdGggbmFtZSAiK3IrIiBhbHJlYWR5IGV4aXN0cy5cbmdyYXBocWwtdGFnIGVuZm9yY2VzIGFsbCBmcmFnbWVudCBuYW1lcyBhY3Jvc3MgeW91ciBhcHBsaWNhdGlvbiB0byBiZSB1bmlxdWU7IHJlYWQgbW9yZSBhYm91dFxudGhpcyBpbiB0aGUgZG9jczogaHR0cDovL2Rldi5hcG9sbG9kYXRhLmNvbS9jb3JlL2ZyYWdtZW50cy5odG1sI3VuaXF1ZS1uYW1lcyIpOnN8fEllLnNldChyLHM9bmV3IFNldCkscy5hZGQoaSksdC5oYXMoaSl8fCh0LmFkZChpKSxuLnB1c2goZSkpfWVsc2Ugbi5wdXNoKGUpO3ZhciBvfSkpLG8obyh7fSxlKSx7ZGVmaW5pdGlvbnM6bn0pfWZ1bmN0aW9uIERlKGUpe3ZhciB0PXhlKGUpO2lmKCFOZS5oYXModCkpe3ZhciBuPWFlKGUse2V4cGVyaW1lbnRhbEZyYWdtZW50VmFyaWFibGVzOkFlLGFsbG93TGVnYWN5RnJhZ21lbnRWYXJpYWJsZXM6QWV9KTtpZighbnx8IkRvY3VtZW50IiE9PW4ua2luZCl0aHJvdyBuZXcgRXJyb3IoIk5vdCBhIHZhbGlkIEdyYXBoUUwgZG9jdW1lbnQuIik7TmUuc2V0KHQsZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IFNldChlLmRlZmluaXRpb25zKTt0LmZvckVhY2goKGZ1bmN0aW9uKGUpe2UubG9jJiZkZWxldGUgZS5sb2MsT2JqZWN0LmtleXMoZSkuZm9yRWFjaCgoZnVuY3Rpb24obil7dmFyIHI9ZVtuXTtyJiYib2JqZWN0Ij09dHlwZW9mIHImJnQuYWRkKHIpfSkpfSkpO3ZhciBuPWUubG9jO3JldHVybiBuJiYoZGVsZXRlIG4uc3RhcnRUb2tlbixkZWxldGUgbi5lbmRUb2tlbiksZX0oU2UobikpKX1yZXR1cm4gTmUuZ2V0KHQpfWZ1bmN0aW9uIHdlKGUpe2Zvcih2YXIgdD1bXSxuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl0W24tMV09YXJndW1lbnRzW25dOyJzdHJpbmciPT10eXBlb2YgZSYmKGU9W2VdKTt2YXIgcj1lWzBdO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKHQsbil7dCYmIkRvY3VtZW50Ij09PXQua2luZD9yKz10LmxvYy5zb3VyY2UuYm9keTpyKz10LHIrPWVbbisxXX0pKSxEZShyKX12YXIga2UsQ2U9d2UsUGU9ZnVuY3Rpb24oKXtOZS5jbGVhcigpLEllLmNsZWFyKCl9LFJlPWZ1bmN0aW9uKCl7T2U9ITF9LExlPWZ1bmN0aW9uKCl7QWU9ITB9LEZlPWZ1bmN0aW9uKCl7QWU9ITF9OyhrZT13ZXx8KHdlPXt9KSkuZ3FsPUNlLGtlLnJlc2V0Q2FjaGVzPVBlLGtlLmRpc2FibGVGcmFnbWVudFdhcm5pbmdzPVJlLGtlLmVuYWJsZUV4cGVyaW1lbnRhbEZyYWdtZW50VmFyaWFibGVzPUxlLGtlLmRpc2FibGVFeHBlcmltZW50YWxGcmFnbWVudFZhcmlhYmxlcz1GZSx3ZS5kZWZhdWx0PXdlO2NvbnN0ICRlPXdlYAoJbXV0YXRpb24gUHVzaFBheWxvYWQoCgkJJHNlc3Npb25fc2VjdXJlX2lkOiBTdHJpbmchCgkJJHBheWxvYWRfaWQ6IElEIQoJCSRldmVudHM6IFJlcGxheUV2ZW50c0lucHV0IQoJCSRtZXNzYWdlczogU3RyaW5nIQoJCSRyZXNvdXJjZXM6IFN0cmluZyEKCQkkd2ViX3NvY2tldF9ldmVudHM6IFN0cmluZyEKCQkkZXJyb3JzOiBbRXJyb3JPYmplY3RJbnB1dF0hCgkJJGlzX2JlYWNvbjogQm9vbGVhbgoJCSRoYXNfc2Vzc2lvbl91bmxvYWRlZDogQm9vbGVhbgoJCSRoaWdobGlnaHRfbG9nczogU3RyaW5nCgkpIHsKCQlwdXNoUGF5bG9hZCgKCQkJc2Vzc2lvbl9zZWN1cmVfaWQ6ICRzZXNzaW9uX3NlY3VyZV9pZAoJCQlwYXlsb2FkX2lkOiAkcGF5bG9hZF9pZAoJCQlldmVudHM6ICRldmVudHMKCQkJbWVzc2FnZXM6ICRtZXNzYWdlcwoJCQlyZXNvdXJjZXM6ICRyZXNvdXJjZXMKCQkJd2ViX3NvY2tldF9ldmVudHM6ICR3ZWJfc29ja2V0X2V2ZW50cwoJCQllcnJvcnM6ICRlcnJvcnMKCQkJaXNfYmVhY29uOiAkaXNfYmVhY29uCgkJCWhhc19zZXNzaW9uX3VubG9hZGVkOiAkaGFzX3Nlc3Npb25fdW5sb2FkZWQKCQkJaGlnaGxpZ2h0X2xvZ3M6ICRoaWdobGlnaHRfbG9ncwoJCSkKCX0KYCxNZT13ZWAKCW11dGF0aW9uIFB1c2hQYXlsb2FkQ29tcHJlc3NlZCgKCQkkc2Vzc2lvbl9zZWN1cmVfaWQ6IFN0cmluZyEKCQkkcGF5bG9hZF9pZDogSUQhCgkJJGRhdGE6IFN0cmluZyEKCSkgewoJCXB1c2hQYXlsb2FkQ29tcHJlc3NlZCgKCQkJc2Vzc2lvbl9zZWN1cmVfaWQ6ICRzZXNzaW9uX3NlY3VyZV9pZAoJCQlwYXlsb2FkX2lkOiAkcGF5bG9hZF9pZAoJCQlkYXRhOiAkZGF0YQoJCSkKCX0KYCxWZT13ZWAKCW11dGF0aW9uIGlkZW50aWZ5U2Vzc2lvbigKCQkkc2Vzc2lvbl9zZWN1cmVfaWQ6IFN0cmluZyEKCQkkdXNlcl9pZGVudGlmaWVyOiBTdHJpbmchCgkJJHVzZXJfb2JqZWN0OiBBbnkKCSkgewoJCWlkZW50aWZ5U2Vzc2lvbigKCQkJc2Vzc2lvbl9zZWN1cmVfaWQ6ICRzZXNzaW9uX3NlY3VyZV9pZAoJCQl1c2VyX2lkZW50aWZpZXI6ICR1c2VyX2lkZW50aWZpZXIKCQkJdXNlcl9vYmplY3Q6ICR1c2VyX29iamVjdAoJCSkKCX0KYCxCZT13ZWAKCW11dGF0aW9uIGFkZFNlc3Npb25Qcm9wZXJ0aWVzKAoJCSRzZXNzaW9uX3NlY3VyZV9pZDogU3RyaW5nIQoJCSRwcm9wZXJ0aWVzX29iamVjdDogQW55CgkpIHsKCQlhZGRTZXNzaW9uUHJvcGVydGllcygKCQkJc2Vzc2lvbl9zZWN1cmVfaWQ6ICRzZXNzaW9uX3NlY3VyZV9pZAoJCQlwcm9wZXJ0aWVzX29iamVjdDogJHByb3BlcnRpZXNfb2JqZWN0CgkJKQoJfQpgLGplPXdlYAoJbXV0YXRpb24gcHVzaE1ldHJpY3MoJG1ldHJpY3M6IFtNZXRyaWNJbnB1dF0hKSB7CgkJcHVzaE1ldHJpY3MobWV0cmljczogJG1ldHJpY3MpCgl9CmAsVWU9d2VgCgltdXRhdGlvbiBhZGRTZXNzaW9uRmVlZGJhY2soCgkJJHNlc3Npb25fc2VjdXJlX2lkOiBTdHJpbmchCgkJJHVzZXJfbmFtZTogU3RyaW5nCgkJJHVzZXJfZW1haWw6IFN0cmluZwoJCSR2ZXJiYXRpbTogU3RyaW5nIQoJCSR0aW1lc3RhbXA6IFRpbWVzdGFtcCEKCSkgewoJCWFkZFNlc3Npb25GZWVkYmFjaygKCQkJc2Vzc2lvbl9zZWN1cmVfaWQ6ICRzZXNzaW9uX3NlY3VyZV9pZAoJCQl1c2VyX25hbWU6ICR1c2VyX25hbWUKCQkJdXNlcl9lbWFpbDogJHVzZXJfZW1haWwKCQkJdmVyYmF0aW06ICR2ZXJiYXRpbQoJCQl0aW1lc3RhbXA6ICR0aW1lc3RhbXAKCQkpCgl9CmAscWU9d2VgCgltdXRhdGlvbiBpbml0aWFsaXplU2Vzc2lvbigKCQkkc2Vzc2lvbl9zZWN1cmVfaWQ6IFN0cmluZyEKCQkkb3JnYW5pemF0aW9uX3ZlcmJvc2VfaWQ6IFN0cmluZyEKCQkkZW5hYmxlX3N0cmljdF9wcml2YWN5OiBCb29sZWFuIQoJCSRwcml2YWN5X3NldHRpbmc6IFN0cmluZyEKCQkkZW5hYmxlX3JlY29yZGluZ19uZXR3b3JrX2NvbnRlbnRzOiBCb29sZWFuIQoJCSRjbGllbnRWZXJzaW9uOiBTdHJpbmchCgkJJGZpcnN0bG9hZFZlcnNpb246IFN0cmluZyEKCQkkY2xpZW50Q29uZmlnOiBTdHJpbmchCgkJJGVudmlyb25tZW50OiBTdHJpbmchCgkJJGlkOiBTdHJpbmchCgkJJGFwcFZlcnNpb246IFN0cmluZwoJCSRzZXJ2aWNlTmFtZTogU3RyaW5nIQoJCSRjbGllbnRfaWQ6IFN0cmluZyEKCQkkbmV0d29ya19yZWNvcmRpbmdfZG9tYWluczogW1N0cmluZyFdCgkJJGRpc2FibGVfc2Vzc2lvbl9yZWNvcmRpbmc6IEJvb2xlYW4KCSkgewoJCWluaXRpYWxpemVTZXNzaW9uKAoJCQlzZXNzaW9uX3NlY3VyZV9pZDogJHNlc3Npb25fc2VjdXJlX2lkCgkJCW9yZ2FuaXphdGlvbl92ZXJib3NlX2lkOiAkb3JnYW5pemF0aW9uX3ZlcmJvc2VfaWQKCQkJZW5hYmxlX3N0cmljdF9wcml2YWN5OiAkZW5hYmxlX3N0cmljdF9wcml2YWN5CgkJCWVuYWJsZV9yZWNvcmRpbmdfbmV0d29ya19jb250ZW50czogJGVuYWJsZV9yZWNvcmRpbmdfbmV0d29ya19jb250ZW50cwoJCQljbGllbnRWZXJzaW9uOiAkY2xpZW50VmVyc2lvbgoJCQlmaXJzdGxvYWRWZXJzaW9uOiAkZmlyc3Rsb2FkVmVyc2lvbgoJCQljbGllbnRDb25maWc6ICRjbGllbnRDb25maWcKCQkJZW52aXJvbm1lbnQ6ICRlbnZpcm9ubWVudAoJCQlhcHBWZXJzaW9uOiAkYXBwVmVyc2lvbgoJCQlzZXJ2aWNlTmFtZTogJHNlcnZpY2VOYW1lCgkJCWZpbmdlcnByaW50OiAkaWQKCQkJY2xpZW50X2lkOiAkY2xpZW50X2lkCgkJCW5ldHdvcmtfcmVjb3JkaW5nX2RvbWFpbnM6ICRuZXR3b3JrX3JlY29yZGluZ19kb21haW5zCgkJCWRpc2FibGVfc2Vzc2lvbl9yZWNvcmRpbmc6ICRkaXNhYmxlX3Nlc3Npb25fcmVjb3JkaW5nCgkJCXByaXZhY3lfc2V0dGluZzogJHByaXZhY3lfc2V0dGluZwoJCSkgewoJCQlzZWN1cmVfaWQKCQkJcHJvamVjdF9pZAoJCX0KCX0KYCxLZT13ZWAKCXF1ZXJ5IElnbm9yZSgkaWQ6IElEISkgewoJCWlnbm9yZShpZDogJGlkKQoJfQpgLEdlPShlLHQsbixyKT0+ZSgpO2NvbnN0IHplPUpTT04sWWU9ZT0+e3ZhciB0LG47bGV0IHI7Y29uc3QgaT1lLmRlZmluaXRpb25zLmZpbHRlcigoZT0+Ik9wZXJhdGlvbkRlZmluaXRpb24iPT09ZS5raW5kKSk7cmV0dXJuIDE9PT1pLmxlbmd0aCYmKHI9bnVsbD09KG49bnVsbD09KHQ9aVswXSk/dm9pZCAwOnQubmFtZSk/dm9pZCAwOm4udmFsdWUpLHJ9LEhlPWU9PntpZigic3RyaW5nIj09dHlwZW9mIGUpe2xldCB0O3RyeXtjb25zdCBuPWFlKGUpO3Q9WWUobil9Y2F0Y2gobil7fXJldHVybntxdWVyeTplLG9wZXJhdGlvbk5hbWU6dH19Y29uc3QgdD1ZZShlKTtyZXR1cm57cXVlcnk6bWUoZSksb3BlcmF0aW9uTmFtZTp0fX07Y2xhc3MgSmUgZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKGAke0plLmV4dHJhY3RNZXNzYWdlKGUpfTogJHtKU09OLnN0cmluZ2lmeSh7cmVzcG9uc2U6ZSxyZXF1ZXN0OnR9KX1gKSxPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxKZS5wcm90b3R5cGUpLHRoaXMucmVzcG9uc2U9ZSx0aGlzLnJlcXVlc3Q9dCwiZnVuY3Rpb24iPT10eXBlb2YgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UmJkVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsSmUpfXN0YXRpYyBleHRyYWN0TWVzc2FnZShlKXt2YXIgdCxuLHI7cmV0dXJuIG51bGwhPShyPW51bGw9PShuPW51bGw9PSh0PWUuZXJyb3JzKT92b2lkIDA6dFswXSk/dm9pZCAwOm4ubWVzc2FnZSk/cjpgR3JhcGhRTCBFcnJvciAoQ29kZTogJHtlLnN0YXR1c30pYH19dmFyIFFlPXtleHBvcnRzOnt9fTshZnVuY3Rpb24oZSx0KXt2YXIgcixpPSJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOm4scz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmZldGNoPSExLHRoaXMuRE9NRXhjZXB0aW9uPWkuRE9NRXhjZXB0aW9ufXJldHVybiBlLnByb3RvdHlwZT1pLG5ldyBlfSgpO3I9cyxmdW5jdGlvbihlKXt2YXIgdD0iVVJMU2VhcmNoUGFyYW1zImluIHIsbj0iU3ltYm9sImluIHImJiJpdGVyYXRvciJpbiBTeW1ib2wsaT0iRmlsZVJlYWRlciJpbiByJiYiQmxvYiJpbiByJiZmdW5jdGlvbigpe3RyeXtyZXR1cm4gbmV3IEJsb2IsITB9Y2F0Y2goZSl7cmV0dXJuITF9fSgpLHM9IkZvcm1EYXRhImluIHIsbz0iQXJyYXlCdWZmZXIiaW4gcjtpZihvKXZhciBhPVsiW29iamVjdCBJbnQ4QXJyYXldIiwiW29iamVjdCBVaW50OEFycmF5XSIsIltvYmplY3QgVWludDhDbGFtcGVkQXJyYXldIiwiW29iamVjdCBJbnQxNkFycmF5XSIsIltvYmplY3QgVWludDE2QXJyYXldIiwiW29iamVjdCBJbnQzMkFycmF5XSIsIltvYmplY3QgVWludDMyQXJyYXldIiwiW29iamVjdCBGbG9hdDMyQXJyYXldIiwiW29iamVjdCBGbG9hdDY0QXJyYXldIl0sYz1BcnJheUJ1ZmZlci5pc1ZpZXd8fGZ1bmN0aW9uKGUpe3JldHVybiBlJiZhLmluZGV4T2YoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpKT4tMX07ZnVuY3Rpb24gbChlKXtpZigic3RyaW5nIiE9dHlwZW9mIGUmJihlPVN0cmluZyhlKSksL1teYS16MC05XC0jJCUmJyorLl5fYHx+XS9pLnRlc3QoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBjaGFyYWN0ZXIgaW4gaGVhZGVyIGZpZWxkIG5hbWUiKTtyZXR1cm4gZS50b0xvd2VyQ2FzZSgpfWZ1bmN0aW9uIHUoZSl7cmV0dXJuInN0cmluZyIhPXR5cGVvZiBlJiYoZT1TdHJpbmcoZSkpLGV9ZnVuY3Rpb24gZChlKXt2YXIgdD17bmV4dDpmdW5jdGlvbigpe3ZhciB0PWUuc2hpZnQoKTtyZXR1cm57ZG9uZTp2b2lkIDA9PT10LHZhbHVlOnR9fX07cmV0dXJuIG4mJih0W1N5bWJvbC5pdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gdH0pLHR9ZnVuY3Rpb24gcChlKXt0aGlzLm1hcD17fSxlIGluc3RhbmNlb2YgcD9lLmZvckVhY2goKGZ1bmN0aW9uKGUsdCl7dGhpcy5hcHBlbmQodCxlKX0pLHRoaXMpOkFycmF5LmlzQXJyYXkoZSk/ZS5mb3JFYWNoKChmdW5jdGlvbihlKXt0aGlzLmFwcGVuZChlWzBdLGVbMV0pfSksdGhpcyk6ZSYmT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7dGhpcy5hcHBlbmQodCxlW3RdKX0pLHRoaXMpfWZ1bmN0aW9uIGgoZSl7aWYoZS5ib2R5VXNlZClyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IFR5cGVFcnJvcigiQWxyZWFkeSByZWFkIikpO2UuYm9keVVzZWQ9ITB9ZnVuY3Rpb24gZihlKXtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKHQsbil7ZS5vbmxvYWQ9ZnVuY3Rpb24oKXt0KGUucmVzdWx0KX0sZS5vbmVycm9yPWZ1bmN0aW9uKCl7bihlLmVycm9yKX19KSl9ZnVuY3Rpb24geShlKXt2YXIgdD1uZXcgRmlsZVJlYWRlcixuPWYodCk7cmV0dXJuIHQucmVhZEFzQXJyYXlCdWZmZXIoZSksbn1mdW5jdGlvbiBtKGUpe2lmKGUuc2xpY2UpcmV0dXJuIGUuc2xpY2UoMCk7dmFyIHQ9bmV3IFVpbnQ4QXJyYXkoZS5ieXRlTGVuZ3RoKTtyZXR1cm4gdC5zZXQobmV3IFVpbnQ4QXJyYXkoZSkpLHQuYnVmZmVyfWZ1bmN0aW9uIHYoKXtyZXR1cm4gdGhpcy5ib2R5VXNlZD0hMSx0aGlzLl9pbml0Qm9keT1mdW5jdGlvbihlKXt2YXIgbjt0aGlzLl9ib2R5SW5pdD1lLGU/InN0cmluZyI9PXR5cGVvZiBlP3RoaXMuX2JvZHlUZXh0PWU6aSYmQmxvYi5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihlKT90aGlzLl9ib2R5QmxvYj1lOnMmJkZvcm1EYXRhLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGUpP3RoaXMuX2JvZHlGb3JtRGF0YT1lOnQmJlVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihlKT90aGlzLl9ib2R5VGV4dD1lLnRvU3RyaW5nKCk6byYmaSYmKG49ZSkmJkRhdGFWaWV3LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKG4pPyh0aGlzLl9ib2R5QXJyYXlCdWZmZXI9bShlLmJ1ZmZlciksdGhpcy5fYm9keUluaXQ9bmV3IEJsb2IoW3RoaXMuX2JvZHlBcnJheUJ1ZmZlcl0pKTpvJiYoQXJyYXlCdWZmZXIucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoZSl8fGMoZSkpP3RoaXMuX2JvZHlBcnJheUJ1ZmZlcj1tKGUpOnRoaXMuX2JvZHlUZXh0PWU9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpOnRoaXMuX2JvZHlUZXh0PSIiLHRoaXMuaGVhZGVycy5nZXQoImNvbnRlbnQtdHlwZSIpfHwoInN0cmluZyI9PXR5cGVvZiBlP3RoaXMuaGVhZGVycy5zZXQoImNvbnRlbnQtdHlwZSIsInRleHQvcGxhaW47Y2hhcnNldD1VVEYtOCIpOnRoaXMuX2JvZHlCbG9iJiZ0aGlzLl9ib2R5QmxvYi50eXBlP3RoaXMuaGVhZGVycy5zZXQoImNvbnRlbnQtdHlwZSIsdGhpcy5fYm9keUJsb2IudHlwZSk6dCYmVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGUpJiZ0aGlzLmhlYWRlcnMuc2V0KCJjb250ZW50LXR5cGUiLCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD1VVEYtOCIpKX0saSYmKHRoaXMuYmxvYj1mdW5jdGlvbigpe3ZhciBlPWgodGhpcyk7aWYoZSlyZXR1cm4gZTtpZih0aGlzLl9ib2R5QmxvYilyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlCbG9iKTtpZih0aGlzLl9ib2R5QXJyYXlCdWZmZXIpcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQmxvYihbdGhpcy5fYm9keUFycmF5QnVmZmVyXSkpO2lmKHRoaXMuX2JvZHlGb3JtRGF0YSl0aHJvdyBuZXcgRXJyb3IoImNvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgYmxvYiIpO3JldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEJsb2IoW3RoaXMuX2JvZHlUZXh0XSkpfSx0aGlzLmFycmF5QnVmZmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JvZHlBcnJheUJ1ZmZlcj9oKHRoaXMpfHxQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keUFycmF5QnVmZmVyKTp0aGlzLmJsb2IoKS50aGVuKHkpfSksdGhpcy50ZXh0PWZ1bmN0aW9uKCl7dmFyIGUsdCxuLHI9aCh0aGlzKTtpZihyKXJldHVybiByO2lmKHRoaXMuX2JvZHlCbG9iKXJldHVybiBlPXRoaXMuX2JvZHlCbG9iLHQ9bmV3IEZpbGVSZWFkZXIsbj1mKHQpLHQucmVhZEFzVGV4dChlKSxuO2lmKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcilyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1uZXcgVWludDhBcnJheShlKSxuPW5ldyBBcnJheSh0Lmxlbmd0aCkscj0wO3I8dC5sZW5ndGg7cisrKW5bcl09U3RyaW5nLmZyb21DaGFyQ29kZSh0W3JdKTtyZXR1cm4gbi5qb2luKCIiKX0odGhpcy5fYm9keUFycmF5QnVmZmVyKSk7aWYodGhpcy5fYm9keUZvcm1EYXRhKXRocm93IG5ldyBFcnJvcigiY291bGQgbm90IHJlYWQgRm9ybURhdGEgYm9keSBhcyB0ZXh0Iik7cmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5VGV4dCl9LHMmJih0aGlzLmZvcm1EYXRhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oRSl9KSx0aGlzLmpzb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0KCkudGhlbihKU09OLnBhcnNlKX0sdGhpc31wLnByb3RvdHlwZS5hcHBlbmQ9ZnVuY3Rpb24oZSx0KXtlPWwoZSksdD11KHQpO3ZhciBuPXRoaXMubWFwW2VdO3RoaXMubWFwW2VdPW4/bisiLCAiK3Q6dH0scC5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKGUpe2RlbGV0ZSB0aGlzLm1hcFtsKGUpXX0scC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiBlPWwoZSksdGhpcy5oYXMoZSk/dGhpcy5tYXBbZV06bnVsbH0scC5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm1hcC5oYXNPd25Qcm9wZXJ0eShsKGUpKX0scC5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGUsdCl7dGhpcy5tYXBbbChlKV09dSh0KX0scC5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiB0aGlzLm1hcCl0aGlzLm1hcC5oYXNPd25Qcm9wZXJ0eShuKSYmZS5jYWxsKHQsdGhpcy5tYXBbbl0sbix0aGlzKX0scC5wcm90b3R5cGUua2V5cz1mdW5jdGlvbigpe3ZhciBlPVtdO3JldHVybiB0aGlzLmZvckVhY2goKGZ1bmN0aW9uKHQsbil7ZS5wdXNoKG4pfSkpLGQoZSl9LHAucHJvdG90eXBlLnZhbHVlcz1mdW5jdGlvbigpe3ZhciBlPVtdO3JldHVybiB0aGlzLmZvckVhY2goKGZ1bmN0aW9uKHQpe2UucHVzaCh0KX0pKSxkKGUpfSxwLnByb3RvdHlwZS5lbnRyaWVzPWZ1bmN0aW9uKCl7dmFyIGU9W107cmV0dXJuIHRoaXMuZm9yRWFjaCgoZnVuY3Rpb24odCxuKXtlLnB1c2goW24sdF0pfSkpLGQoZSl9LG4mJihwLnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdPXAucHJvdG90eXBlLmVudHJpZXMpO3ZhciBfPVsiREVMRVRFIiwiR0VUIiwiSEVBRCIsIk9QVElPTlMiLCJQT1NUIiwiUFVUIl07ZnVuY3Rpb24gZyhlLHQpe3ZhciBuLHIsaT0odD10fHx7fSkuYm9keTtpZihlIGluc3RhbmNlb2YgZyl7aWYoZS5ib2R5VXNlZCl0aHJvdyBuZXcgVHlwZUVycm9yKCJBbHJlYWR5IHJlYWQiKTt0aGlzLnVybD1lLnVybCx0aGlzLmNyZWRlbnRpYWxzPWUuY3JlZGVudGlhbHMsdC5oZWFkZXJzfHwodGhpcy5oZWFkZXJzPW5ldyBwKGUuaGVhZGVycykpLHRoaXMubWV0aG9kPWUubWV0aG9kLHRoaXMubW9kZT1lLm1vZGUsdGhpcy5zaWduYWw9ZS5zaWduYWwsaXx8bnVsbD09ZS5fYm9keUluaXR8fChpPWUuX2JvZHlJbml0LGUuYm9keVVzZWQ9ITApfWVsc2UgdGhpcy51cmw9U3RyaW5nKGUpO2lmKHRoaXMuY3JlZGVudGlhbHM9dC5jcmVkZW50aWFsc3x8dGhpcy5jcmVkZW50aWFsc3x8InNhbWUtb3JpZ2luIiwhdC5oZWFkZXJzJiZ0aGlzLmhlYWRlcnN8fCh0aGlzLmhlYWRlcnM9bmV3IHAodC5oZWFkZXJzKSksdGhpcy5tZXRob2Q9KG49dC5tZXRob2R8fHRoaXMubWV0aG9kfHwiR0VUIixyPW4udG9VcHBlckNhc2UoKSxfLmluZGV4T2Yocik+LTE/cjpuKSx0aGlzLm1vZGU9dC5tb2RlfHx0aGlzLm1vZGV8fG51bGwsdGhpcy5zaWduYWw9dC5zaWduYWx8fHRoaXMuc2lnbmFsLHRoaXMucmVmZXJyZXI9bnVsbCwoIkdFVCI9PT10aGlzLm1ldGhvZHx8IkhFQUQiPT09dGhpcy5tZXRob2QpJiZpKXRocm93IG5ldyBUeXBlRXJyb3IoIkJvZHkgbm90IGFsbG93ZWQgZm9yIEdFVCBvciBIRUFEIHJlcXVlc3RzIik7dGhpcy5faW5pdEJvZHkoaSl9ZnVuY3Rpb24gRShlKXt2YXIgdD1uZXcgRm9ybURhdGE7cmV0dXJuIGUudHJpbSgpLnNwbGl0KCImIikuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoZSl7dmFyIG49ZS5zcGxpdCgiPSIpLHI9bi5zaGlmdCgpLnJlcGxhY2UoL1wrL2csIiAiKSxpPW4uam9pbigiPSIpLnJlcGxhY2UoL1wrL2csIiAiKTt0LmFwcGVuZChkZWNvZGVVUklDb21wb25lbnQociksZGVjb2RlVVJJQ29tcG9uZW50KGkpKX19KSksdH1mdW5jdGlvbiBUKGUsdCl7dHx8KHQ9e30pLHRoaXMudHlwZT0iZGVmYXVsdCIsdGhpcy5zdGF0dXM9dm9pZCAwPT09dC5zdGF0dXM/MjAwOnQuc3RhdHVzLHRoaXMub2s9dGhpcy5zdGF0dXM+PTIwMCYmdGhpcy5zdGF0dXM8MzAwLHRoaXMuc3RhdHVzVGV4dD0ic3RhdHVzVGV4dCJpbiB0P3Quc3RhdHVzVGV4dDoiT0siLHRoaXMuaGVhZGVycz1uZXcgcCh0LmhlYWRlcnMpLHRoaXMudXJsPXQudXJsfHwiIix0aGlzLl9pbml0Qm9keShlKX1nLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgZyh0aGlzLHtib2R5OnRoaXMuX2JvZHlJbml0fSl9LHYuY2FsbChnLnByb3RvdHlwZSksdi5jYWxsKFQucHJvdG90eXBlKSxULnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgVCh0aGlzLl9ib2R5SW5pdCx7c3RhdHVzOnRoaXMuc3RhdHVzLHN0YXR1c1RleHQ6dGhpcy5zdGF0dXNUZXh0LGhlYWRlcnM6bmV3IHAodGhpcy5oZWFkZXJzKSx1cmw6dGhpcy51cmx9KX0sVC5lcnJvcj1mdW5jdGlvbigpe3ZhciBlPW5ldyBUKG51bGwse3N0YXR1czowLHN0YXR1c1RleHQ6IiJ9KTtyZXR1cm4gZS50eXBlPSJlcnJvciIsZX07dmFyIGI9WzMwMSwzMDIsMzAzLDMwNywzMDhdO1QucmVkaXJlY3Q9ZnVuY3Rpb24oZSx0KXtpZigtMT09PWIuaW5kZXhPZih0KSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBzdGF0dXMgY29kZSIpO3JldHVybiBuZXcgVChudWxsLHtzdGF0dXM6dCxoZWFkZXJzOntsb2NhdGlvbjplfX0pfSxlLkRPTUV4Y2VwdGlvbj1yLkRPTUV4Y2VwdGlvbjt0cnl7bmV3IGUuRE9NRXhjZXB0aW9ufWNhdGNoKEkpe2UuRE9NRXhjZXB0aW9uPWZ1bmN0aW9uKGUsdCl7dGhpcy5tZXNzYWdlPWUsdGhpcy5uYW1lPXQ7dmFyIG49RXJyb3IoZSk7dGhpcy5zdGFjaz1uLnN0YWNrfSxlLkRPTUV4Y2VwdGlvbi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpLGUuRE9NRXhjZXB0aW9uLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLkRPTUV4Y2VwdGlvbn1mdW5jdGlvbiBOKHQsbil7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihyLHMpe3ZhciBvPW5ldyBnKHQsbik7aWYoby5zaWduYWwmJm8uc2lnbmFsLmFib3J0ZWQpcmV0dXJuIHMobmV3IGUuRE9NRXhjZXB0aW9uKCJBYm9ydGVkIiwiQWJvcnRFcnJvciIpKTt2YXIgYT1uZXcgWE1MSHR0cFJlcXVlc3Q7ZnVuY3Rpb24gYygpe2EuYWJvcnQoKX1hLm9ubG9hZD1mdW5jdGlvbigpe3ZhciBlLHQsbj17c3RhdHVzOmEuc3RhdHVzLHN0YXR1c1RleHQ6YS5zdGF0dXNUZXh0LGhlYWRlcnM6KGU9YS5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKXx8IiIsdD1uZXcgcCxlLnJlcGxhY2UoL1xyP1xuW1x0IF0rL2csIiAiKS5zcGxpdCgvXHI/XG4vKS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLnNwbGl0KCI6Iikscj1uLnNoaWZ0KCkudHJpbSgpO2lmKHIpe3ZhciBpPW4uam9pbigiOiIpLnRyaW0oKTt0LmFwcGVuZChyLGkpfX0pKSx0KX07bi51cmw9InJlc3BvbnNlVVJMImluIGE/YS5yZXNwb25zZVVSTDpuLmhlYWRlcnMuZ2V0KCJYLVJlcXVlc3QtVVJMIik7dmFyIGk9InJlc3BvbnNlImluIGE/YS5yZXNwb25zZTphLnJlc3BvbnNlVGV4dDtyKG5ldyBUKGksbikpfSxhLm9uZXJyb3I9ZnVuY3Rpb24oKXtzKG5ldyBUeXBlRXJyb3IoIk5ldHdvcmsgcmVxdWVzdCBmYWlsZWQiKSl9LGEub250aW1lb3V0PWZ1bmN0aW9uKCl7cyhuZXcgVHlwZUVycm9yKCJOZXR3b3JrIHJlcXVlc3QgZmFpbGVkIikpfSxhLm9uYWJvcnQ9ZnVuY3Rpb24oKXtzKG5ldyBlLkRPTUV4Y2VwdGlvbigiQWJvcnRlZCIsIkFib3J0RXJyb3IiKSl9LGEub3BlbihvLm1ldGhvZCxvLnVybCwhMCksImluY2x1ZGUiPT09by5jcmVkZW50aWFscz9hLndpdGhDcmVkZW50aWFscz0hMDoib21pdCI9PT1vLmNyZWRlbnRpYWxzJiYoYS53aXRoQ3JlZGVudGlhbHM9ITEpLCJyZXNwb25zZVR5cGUiaW4gYSYmaSYmKGEucmVzcG9uc2VUeXBlPSJibG9iIiksby5oZWFkZXJzLmZvckVhY2goKGZ1bmN0aW9uKGUsdCl7YS5zZXRSZXF1ZXN0SGVhZGVyKHQsZSl9KSksby5zaWduYWwmJihvLnNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCJhYm9ydCIsYyksYS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXs0PT09YS5yZWFkeVN0YXRlJiZvLnNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKCJhYm9ydCIsYyl9KSxhLnNlbmQodm9pZCAwPT09by5fYm9keUluaXQ/bnVsbDpvLl9ib2R5SW5pdCl9KSl9Ti5wb2x5ZmlsbD0hMCxyLmZldGNofHwoci5mZXRjaD1OLHIuSGVhZGVycz1wLHIuUmVxdWVzdD1nLHIuUmVzcG9uc2U9VCksZS5IZWFkZXJzPXAsZS5SZXF1ZXN0PWcsZS5SZXNwb25zZT1ULGUuZmV0Y2g9TixPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSl9KHt9KSxzLmZldGNoLnBvbnlmaWxsPSEwLGRlbGV0ZSBzLmZldGNoLnBvbHlmaWxsO3ZhciBvPXM7KHQ9by5mZXRjaCkuZGVmYXVsdD1vLmZldGNoLHQuZmV0Y2g9by5mZXRjaCx0LkhlYWRlcnM9by5IZWFkZXJzLHQuUmVxdWVzdD1vLlJlcXVlc3QsdC5SZXNwb25zZT1vLlJlc3BvbnNlLGUuZXhwb3J0cz10fShRZSxRZS5leHBvcnRzKTt2YXIgWGU9UWUuZXhwb3J0cyxXZT1yKFhlKSxaZT1lKHtfX3Byb3RvX186bnVsbCxkZWZhdWx0OldlfSxbWGVdKTtjb25zdCBldD1lPT57bGV0IHQ9e307cmV0dXJuIGUmJigidW5kZWZpbmVkIiE9dHlwZW9mIEhlYWRlcnMmJmUgaW5zdGFuY2VvZiBIZWFkZXJzfHxaZSYmWGUuSGVhZGVycyYmZSBpbnN0YW5jZW9mIFhlLkhlYWRlcnM/dD0oZT0+e2NvbnN0IHQ9e307cmV0dXJuIGUuZm9yRWFjaCgoKGUsbik9Pnt0W25dPWV9KSksdH0pKGUpOkFycmF5LmlzQXJyYXkoZSk/ZS5mb3JFYWNoKCgoW2Usbl0pPT57ZSYmdm9pZCAwIT09biYmKHRbZV09bil9KSk6dD1lKSx0fSx0dD1lPT5lLnJlcGxhY2UoLyhbXHMsXXwjW15cblxyXSspKy9nLCIgIikudHJpbSgpLG50PWU9PnQ9Pl9fYXN5bmModGhpcyxudWxsLChmdW5jdGlvbiooKXt2YXIgbjtjb25zdHt1cmw6cixxdWVyeTppLHZhcmlhYmxlczpzLG9wZXJhdGlvbk5hbWU6byxmZXRjaDphLGZldGNoT3B0aW9uczpjLG1pZGRsZXdhcmU6bH09dCx1PV9fc3ByZWFkVmFsdWVzKHt9LHQuaGVhZGVycyk7bGV0IGQscD0iIjsiUE9TVCI9PT1lPyhkPXN0KGkscyxvLGMuanNvblNlcmlhbGl6ZXIpLCJzdHJpbmciPT10eXBlb2YgZCYmKHVbIkNvbnRlbnQtVHlwZSJdPSJhcHBsaWNhdGlvbi9qc29uIikpOnA9KGU9PntpZighQXJyYXkuaXNBcnJheShlLnF1ZXJ5KSl7Y29uc3QgdD1lLG49W2BxdWVyeT0ke2VuY29kZVVSSUNvbXBvbmVudCh0dCh0LnF1ZXJ5KSl9YF07cmV0dXJuIGUudmFyaWFibGVzJiZuLnB1c2goYHZhcmlhYmxlcz0ke2VuY29kZVVSSUNvbXBvbmVudCh0Lmpzb25TZXJpYWxpemVyLnN0cmluZ2lmeSh0LnZhcmlhYmxlcykpfWApLHQub3BlcmF0aW9uTmFtZSYmbi5wdXNoKGBvcGVyYXRpb25OYW1lPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHQub3BlcmF0aW9uTmFtZSl9YCksbi5qb2luKCImIil9aWYodm9pZCAwIT09ZS52YXJpYWJsZXMmJiFBcnJheS5pc0FycmF5KGUudmFyaWFibGVzKSl0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBjcmVhdGUgcXVlcnkgd2l0aCBnaXZlbiB2YXJpYWJsZSB0eXBlLCBhcnJheSBleHBlY3RlZCIpO2NvbnN0IHQ9ZSxuPWUucXVlcnkucmVkdWNlKCgoZSxuLHIpPT4oZS5wdXNoKHtxdWVyeTp0dChuKSx2YXJpYWJsZXM6dC52YXJpYWJsZXM/dC5qc29uU2VyaWFsaXplci5zdHJpbmdpZnkodC52YXJpYWJsZXNbcl0pOnZvaWQgMH0pLGUpKSxbXSk7cmV0dXJuYHF1ZXJ5PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHQuanNvblNlcmlhbGl6ZXIuc3RyaW5naWZ5KG4pKX1gfSkoe3F1ZXJ5OmksdmFyaWFibGVzOnMsb3BlcmF0aW9uTmFtZTpvLGpzb25TZXJpYWxpemVyOm51bGwhPShuPWMuanNvblNlcmlhbGl6ZXIpP246emV9KTtjb25zdCBoPV9fc3ByZWFkVmFsdWVzKHttZXRob2Q6ZSxoZWFkZXJzOnUsYm9keTpkfSxjKTtsZXQgZj1yLHk9aDtpZihsKXtjb25zdCBlPXlpZWxkIFByb21pc2UucmVzb2x2ZShsKF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30saCkse3VybDpyLG9wZXJhdGlvbk5hbWU6byx2YXJpYWJsZXM6c30pKSkse3VybDp0fT1lO2Y9dCx5PV9fb2JqUmVzdChlLFsidXJsIl0pfXJldHVybiBwJiYoZj1gJHtmfT8ke3B9YCkseWllbGQgYShmLHkpfSkpO2NsYXNzIHJ0e2NvbnN0cnVjdG9yKGUsdD17fSl7dGhpcy51cmw9ZSx0aGlzLnJlcXVlc3RDb25maWc9dCx0aGlzLnJhd1JlcXVlc3Q9KC4uLmUpPT5fX2FzeW5jKHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7Y29uc3RbdCxuLHJdPWUsaT0oKGUsdCxuKT0+ZS5xdWVyeT9lOntxdWVyeTplLHZhcmlhYmxlczp0LHJlcXVlc3RIZWFkZXJzOm4sc2lnbmFsOnZvaWQgMH0pKHQsbixyKSxzPXRoaXMucmVxdWVzdENvbmZpZyx7aGVhZGVyczpvLGZldGNoOmE9V2UsbWV0aG9kOmM9IlBPU1QiLHJlcXVlc3RNaWRkbGV3YXJlOmwscmVzcG9uc2VNaWRkbGV3YXJlOnV9PXMsZD1fX29ialJlc3QocyxbImhlYWRlcnMiLCJmZXRjaCIsIm1ldGhvZCIsInJlcXVlc3RNaWRkbGV3YXJlIiwicmVzcG9uc2VNaWRkbGV3YXJlIl0pLHt1cmw6cH09dGhpczt2b2lkIDAhPT1pLnNpZ25hbCYmKGQuc2lnbmFsPWkuc2lnbmFsKTtjb25zdHtvcGVyYXRpb25OYW1lOmh9PUhlKGkucXVlcnkpO3JldHVybiBpdCh7dXJsOnAscXVlcnk6aS5xdWVyeSx2YXJpYWJsZXM6aS52YXJpYWJsZXMsaGVhZGVyczpfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSxldChhdChvKSkpLGV0KGkucmVxdWVzdEhlYWRlcnMpKSxvcGVyYXRpb25OYW1lOmgsZmV0Y2g6YSxtZXRob2Q6YyxmZXRjaE9wdGlvbnM6ZCxtaWRkbGV3YXJlOmx9KS50aGVuKChlPT4odSYmdShlKSxlKSkpLmNhdGNoKChlPT57dGhyb3cgdSYmdShlKSxlfSkpfSkpfXJlcXVlc3QoZSwuLi50KXtyZXR1cm4gX19hc3luYyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2NvbnN0W24scl09dCxpPSgoZSx0LG4pPT5lLmRvY3VtZW50P2U6e2RvY3VtZW50OmUsdmFyaWFibGVzOnQscmVxdWVzdEhlYWRlcnM6bixzaWduYWw6dm9pZCAwfSkoZSxuLHIpLHM9dGhpcy5yZXF1ZXN0Q29uZmlnLHtoZWFkZXJzOm8sZmV0Y2g6YT1XZSxtZXRob2Q6Yz0iUE9TVCIscmVxdWVzdE1pZGRsZXdhcmU6bCxyZXNwb25zZU1pZGRsZXdhcmU6dX09cyxkPV9fb2JqUmVzdChzLFsiaGVhZGVycyIsImZldGNoIiwibWV0aG9kIiwicmVxdWVzdE1pZGRsZXdhcmUiLCJyZXNwb25zZU1pZGRsZXdhcmUiXSkse3VybDpwfT10aGlzO3ZvaWQgMCE9PWkuc2lnbmFsJiYoZC5zaWduYWw9aS5zaWduYWwpO2NvbnN0e3F1ZXJ5Omgsb3BlcmF0aW9uTmFtZTpmfT1IZShpLmRvY3VtZW50KTtyZXR1cm4gaXQoe3VybDpwLHF1ZXJ5OmgsdmFyaWFibGVzOmkudmFyaWFibGVzLGhlYWRlcnM6X19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sZXQoYXQobykpKSxldChpLnJlcXVlc3RIZWFkZXJzKSksb3BlcmF0aW9uTmFtZTpmLGZldGNoOmEsbWV0aG9kOmMsZmV0Y2hPcHRpb25zOmQsbWlkZGxld2FyZTpsfSkudGhlbigoZT0+KHUmJnUoZSksZS5kYXRhKSkpLmNhdGNoKChlPT57dGhyb3cgdSYmdShlKSxlfSkpfSkpfWJhdGNoUmVxdWVzdHMoZSx0KXt2YXIgbjtjb25zdCByPSgoZSx0KT0+ZS5kb2N1bWVudHM/ZTp7ZG9jdW1lbnRzOmUscmVxdWVzdEhlYWRlcnM6dCxzaWduYWw6dm9pZCAwfSkoZSx0KSxpPXRoaXMucmVxdWVzdENvbmZpZyx7aGVhZGVyczpzfT1pLG89X19vYmpSZXN0KGksWyJoZWFkZXJzIl0pO3ZvaWQgMCE9PXIuc2lnbmFsJiYoby5zaWduYWw9ci5zaWduYWwpO2NvbnN0IGE9ci5kb2N1bWVudHMubWFwKCgoe2RvY3VtZW50OmV9KT0+SGUoZSkucXVlcnkpKSxjPXIuZG9jdW1lbnRzLm1hcCgoKHt2YXJpYWJsZXM6ZX0pPT5lKSk7cmV0dXJuIGl0KHt1cmw6dGhpcy51cmwscXVlcnk6YSx2YXJpYWJsZXM6YyxoZWFkZXJzOl9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LGV0KGF0KHMpKSksZXQoci5yZXF1ZXN0SGVhZGVycykpLG9wZXJhdGlvbk5hbWU6dm9pZCAwLGZldGNoOm51bGwhPShuPXRoaXMucmVxdWVzdENvbmZpZy5mZXRjaCk/bjpXZSxtZXRob2Q6dGhpcy5yZXF1ZXN0Q29uZmlnLm1ldGhvZHx8IlBPU1QiLGZldGNoT3B0aW9uczpvLG1pZGRsZXdhcmU6dGhpcy5yZXF1ZXN0Q29uZmlnLnJlcXVlc3RNaWRkbGV3YXJlfSkudGhlbigoZT0+KHRoaXMucmVxdWVzdENvbmZpZy5yZXNwb25zZU1pZGRsZXdhcmUmJnRoaXMucmVxdWVzdENvbmZpZy5yZXNwb25zZU1pZGRsZXdhcmUoZSksZS5kYXRhKSkpLmNhdGNoKChlPT57dGhyb3cgdGhpcy5yZXF1ZXN0Q29uZmlnLnJlc3BvbnNlTWlkZGxld2FyZSYmdGhpcy5yZXF1ZXN0Q29uZmlnLnJlc3BvbnNlTWlkZGxld2FyZShlKSxlfSkpfXNldEhlYWRlcnMoZSl7cmV0dXJuIHRoaXMucmVxdWVzdENvbmZpZy5oZWFkZXJzPWUsdGhpc31zZXRIZWFkZXIoZSx0KXtjb25zdHtoZWFkZXJzOm59PXRoaXMucmVxdWVzdENvbmZpZztyZXR1cm4gbj9uW2VdPXQ6dGhpcy5yZXF1ZXN0Q29uZmlnLmhlYWRlcnM9e1tlXTp0fSx0aGlzfXNldEVuZHBvaW50KGUpe3JldHVybiB0aGlzLnVybD1lLHRoaXN9fWNvbnN0IGl0PWU9Pl9fYXN5bmModGhpcyxudWxsLChmdW5jdGlvbiooKXt2YXIgdCxuO2NvbnN0e3F1ZXJ5OnIsdmFyaWFibGVzOmksZmV0Y2hPcHRpb25zOnN9PWUsbz1udCgobnVsbCE9KHQ9ZS5tZXRob2QpP3Q6InBvc3QiKS50b1VwcGVyQ2FzZSgpKTtjb25zdCBhPUFycmF5LmlzQXJyYXkoZS5xdWVyeSksYz15aWVsZCBvKGUpLGw9eWllbGQgb3QoYyxudWxsIT0obj1zLmpzb25TZXJpYWxpemVyKT9uOnplKSx1PUFycmF5LmlzQXJyYXkobCk/IWwuc29tZSgoKHtkYXRhOmV9KT0+IWUpKTpCb29sZWFuKGwuZGF0YSksZD1BcnJheS5pc0FycmF5KGwpfHwhbC5lcnJvcnN8fEFycmF5LmlzQXJyYXkobC5lcnJvcnMpJiYhbC5lcnJvcnMubGVuZ3RofHwiYWxsIj09PXMuZXJyb3JQb2xpY3l8fCJpZ25vcmUiPT09cy5lcnJvclBvbGljeTtpZihjLm9rJiZkJiZ1KXtjb25zdCBlPShBcnJheS5pc0FycmF5KGwpLGwpLHtlcnJvcnM6dH09ZSxuPV9fb2JqUmVzdChlLFsiZXJyb3JzIl0pLHI9Imlnbm9yZSI9PT1zLmVycm9yUG9saWN5P246bDtyZXR1cm4gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSxhP3tkYXRhOnJ9OnIpLHtoZWFkZXJzOmMuaGVhZGVycyxzdGF0dXM6Yy5zdGF0dXN9KX10aHJvdyBuZXcgSmUoX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwic3RyaW5nIj09dHlwZW9mIGw/e2Vycm9yOmx9OmwpLHtzdGF0dXM6Yy5zdGF0dXMsaGVhZGVyczpjLmhlYWRlcnN9KSx7cXVlcnk6cix2YXJpYWJsZXM6aX0pfSkpLHN0PShlLHQsbixyKT0+e2NvbnN0IGk9bnVsbCE9cj9yOnplO2lmKCFBcnJheS5pc0FycmF5KGUpKXJldHVybiBpLnN0cmluZ2lmeSh7cXVlcnk6ZSx2YXJpYWJsZXM6dCxvcGVyYXRpb25OYW1lOm59KTtpZih2b2lkIDAhPT10JiYhQXJyYXkuaXNBcnJheSh0KSl0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBjcmVhdGUgcmVxdWVzdCBib2R5IHdpdGggZ2l2ZW4gdmFyaWFibGUgdHlwZSwgYXJyYXkgZXhwZWN0ZWQiKTtjb25zdCBzPWUucmVkdWNlKCgoZSxuLHIpPT4oZS5wdXNoKHtxdWVyeTpuLHZhcmlhYmxlczp0P3Rbcl06dm9pZCAwfSksZSkpLFtdKTtyZXR1cm4gaS5zdHJpbmdpZnkocyl9LG90PShlLHQpPT5fX2FzeW5jKHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7bGV0IG47cmV0dXJuIGUuaGVhZGVycy5mb3JFYWNoKCgoZSx0KT0+eyJjb250ZW50LXR5cGUiPT09dC50b0xvd2VyQ2FzZSgpJiYobj1lKX0pKSxuJiYobi50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoImFwcGxpY2F0aW9uL2pzb24iKXx8bi50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoImFwcGxpY2F0aW9uL2dyYXBocWwranNvbiIpfHxuLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aCgiYXBwbGljYXRpb24vZ3JhcGhxbC1yZXNwb25zZStqc29uIikpP3QucGFyc2UoeWllbGQgZS50ZXh0KCkpOmUudGV4dCgpfSkpLGF0PWU9PiJmdW5jdGlvbiI9PXR5cGVvZiBlP2UoKTplO3ZhciBjdD0oZT0+KGUuQmlsbGluZ1F1b3RhRXhjZWVkZWQ9IkJpbGxpbmdRdW90YUV4Y2VlZGVkIixlKSkoY3R8fHt9KTtjb25zdCBsdD1bY3QuQmlsbGluZ1F1b3RhRXhjZWVkZWQudG9TdHJpbmcoKV0sdXQ9ZT0+e2NvbnN0IHQ9KG4scixpLHMsbz0wKT0+X19hc3luYyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe3RyeXtyZXR1cm4geWllbGQgbigpfWNhdGNoKGEpe2lmKGEgaW5zdGFuY2VvZiBKZSYmIShlPT57dmFyIHQ7cmV0dXJuIHZvaWQgMD09PShudWxsPT0odD1lLnJlc3BvbnNlLmVycm9ycyk/dm9pZCAwOnQuZmluZCgoZT0+bHQuaW5jbHVkZXMoZS5tZXNzYWdlKSkpKX0pKGEpKXRocm93IGE7aWYobzwxMClyZXR1cm4geWllbGQgbmV3IFByb21pc2UoKGU9PnNldFRpbWVvdXQoZSwxZTMrNTAwKk1hdGgucG93KDIsbykpKSkseWllbGQgdChuLHIsaSxzLG8rMSk7dGhyb3cgY29uc29sZS5lcnJvcihgaGlnaGxpZ2h0LmlvOiBbJHtlfHxlfV0gZGF0YSByZXF1ZXN0IGZhaWxlZCBhZnRlciAke299IHJldHJpZXNgKSxhfX0pKTtyZXR1cm4gdH0sZHQ9WyJudW1iZXIiLCJzdHJpbmciLCJib29sZWFuIl07Y2xhc3MgcHR7Y29uc3RydWN0b3IoZSx0KXtfX3B1YmxpY0ZpZWxkKHRoaXMsImRlYnVnIiksX19wdWJsaWNGaWVsZCh0aGlzLCJuYW1lIiksdGhpcy5kZWJ1Zz1lLHRoaXMubmFtZT10fWxvZyguLi5lKXtpZih0aGlzLmRlYnVnKXtsZXQgdD1gWyR7RGF0ZS5ub3coKX1dYDt0aGlzLm5hbWUmJih0Kz1gIC0gJHt0aGlzLm5hbWV9YCksY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSxbdCwuLi5lXSl9fX12YXIgaHQ9VWludDhBcnJheSxmdD1VaW50MTZBcnJheSx5dD1JbnQzMkFycmF5LG10PW5ldyBodChbMCwwLDAsMCwwLDAsMCwwLDEsMSwxLDEsMiwyLDIsMiwzLDMsMywzLDQsNCw0LDQsNSw1LDUsNSwwLDAsMCwwXSksdnQ9bmV3IGh0KFswLDAsMCwwLDEsMSwyLDIsMywzLDQsNCw1LDUsNiw2LDcsNyw4LDgsOSw5LDEwLDEwLDExLDExLDEyLDEyLDEzLDEzLDAsMF0pLF90PW5ldyBodChbMTYsMTcsMTgsMCw4LDcsOSw2LDEwLDUsMTEsNCwxMiwzLDEzLDIsMTQsMSwxNV0pLGd0PWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPW5ldyBmdCgzMSkscj0wO3I8MzE7KytyKW5bcl09dCs9MTw8ZVtyLTFdO3ZhciBpPW5ldyB5dChuWzMwXSk7Zm9yKHI9MTtyPDMwOysrcilmb3IodmFyIHM9bltyXTtzPG5bcisxXTsrK3MpaVtzXT1zLW5bcl08PDV8cjtyZXR1cm57YjpuLHI6aX19LEV0PWd0KG10LDIpLFR0PUV0LmIsYnQ9RXQucjtUdFsyOF09MjU4LGJ0WzI1OF09Mjg7Zm9yKHZhciBOdD1ndCh2dCwwKS5yLEl0PW5ldyBmdCgzMjc2OCksT3Q9MDtPdDwzMjc2ODsrK090KXt2YXIgQXQ9KDQzNjkwJk90KT4+MXwoMjE4NDUmT3QpPDwxO0F0PSg2MTY4MCYoQXQ9KDUyNDI4JkF0KT4+MnwoMTMxMDcmQXQpPDwyKSk+PjR8KDM4NTUmQXQpPDw0LEl0W090XT0oKDY1MjgwJkF0KT4+OHwoMjU1JkF0KTw8OCk+PjF9dmFyIHh0PWZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9ZS5sZW5ndGgsaT0wLHM9bmV3IGZ0KHQpO2k8cjsrK2kpZVtpXSYmKytzW2VbaV0tMV07dmFyIG8sYT1uZXcgZnQodCk7Zm9yKGk9MTtpPHQ7KytpKWFbaV09YVtpLTFdK3NbaS0xXTw8MTtpZihuKXtvPW5ldyBmdCgxPDx0KTt2YXIgYz0xNS10O2ZvcihpPTA7aTxyOysraSlpZihlW2ldKWZvcih2YXIgbD1pPDw0fGVbaV0sdT10LWVbaV0sZD1hW2VbaV0tMV0rKzw8dSxwPWR8KDE8PHUpLTE7ZDw9cDsrK2Qpb1tJdFtkXT4+Y109bH1lbHNlIGZvcihvPW5ldyBmdChyKSxpPTA7aTxyOysraSllW2ldJiYob1tpXT1JdFthW2VbaV0tMV0rK10+PjE1LWVbaV0pO3JldHVybiBvfSxTdD1uZXcgaHQoMjg4KTtmb3IoT3Q9MDtPdDwxNDQ7KytPdClTdFtPdF09ODtmb3IoT3Q9MTQ0O090PDI1NjsrK090KVN0W090XT05O2ZvcihPdD0yNTY7T3Q8MjgwOysrT3QpU3RbT3RdPTc7Zm9yKE90PTI4MDtPdDwyODg7KytPdClTdFtPdF09ODt2YXIgRHQ9bmV3IGh0KDMyKTtmb3IoT3Q9MDtPdDwzMjsrK090KUR0W090XT01O3ZhciB3dD14dChTdCw5LDApLGt0PXh0KER0LDUsMCksQ3Q9ZnVuY3Rpb24oZSl7cmV0dXJuKGUrNykvOHwwfSxQdD1mdW5jdGlvbihlLHQsbil7cmV0dXJuKG51bGw9PXR8fHQ8MCkmJih0PTApLChudWxsPT1ufHxuPmUubGVuZ3RoKSYmKG49ZS5sZW5ndGgpLG5ldyBodChlLnN1YmFycmF5KHQsbikpfSxSdD1mdW5jdGlvbihlLHQsbil7bjw8PTcmdDt2YXIgcj10Lzh8MDtlW3JdfD1uLGVbcisxXXw9bj4+OH0sTHQ9ZnVuY3Rpb24oZSx0LG4pe248PD03JnQ7dmFyIHI9dC84fDA7ZVtyXXw9bixlW3IrMV18PW4+PjgsZVtyKzJdfD1uPj4xNn0sRnQ9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49W10scj0wO3I8ZS5sZW5ndGg7KytyKWVbcl0mJm4ucHVzaCh7czpyLGY6ZVtyXX0pO3ZhciBpPW4ubGVuZ3RoLHM9bi5zbGljZSgpO2lmKCFpKXJldHVybnt0OnF0LGw6MH07aWYoMT09aSl7dmFyIG89bmV3IGh0KG5bMF0ucysxKTtyZXR1cm4gb1tuWzBdLnNdPTEse3Q6byxsOjF9fW4uc29ydCgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5mLXQuZn0pKSxuLnB1c2goe3M6LTEsZjoyNTAwMX0pO3ZhciBhPW5bMF0sYz1uWzFdLGw9MCx1PTEsZD0yO2ZvcihuWzBdPXtzOi0xLGY6YS5mK2MuZixsOmEscjpjfTt1IT1pLTE7KWE9bltuW2xdLmY8bltkXS5mP2wrKzpkKytdLGM9bltsIT11JiZuW2xdLmY8bltkXS5mP2wrKzpkKytdLG5bdSsrXT17czotMSxmOmEuZitjLmYsbDphLHI6Y307dmFyIHA9c1swXS5zO2ZvcihyPTE7cjxpOysrcilzW3JdLnM+cCYmKHA9c1tyXS5zKTt2YXIgaD1uZXcgZnQocCsxKSxmPSR0KG5bdS0xXSxoLDApO2lmKGY+dCl7cj0wO3ZhciB5PTAsbT1mLXQsdj0xPDxtO2ZvcihzLnNvcnQoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGhbdC5zXS1oW2Uuc118fGUuZi10LmZ9KSk7cjxpOysrcil7dmFyIF89c1tyXS5zO2lmKCEoaFtfXT50KSlicmVhazt5Kz12LSgxPDxmLWhbX10pLGhbX109dH1mb3IoeT4+PW07eT4wOyl7dmFyIGc9c1tyXS5zO2hbZ108dD95LT0xPDx0LWhbZ10rKy0xOisrcn1mb3IoO3I+PTAmJnk7LS1yKXt2YXIgRT1zW3JdLnM7aFtFXT09dCYmKC0taFtFXSwrK3kpfWY9dH1yZXR1cm57dDpuZXcgaHQoaCksbDpmfX0sJHQ9ZnVuY3Rpb24oZSx0LG4pe3JldHVybi0xPT1lLnM/TWF0aC5tYXgoJHQoZS5sLHQsbisxKSwkdChlLnIsdCxuKzEpKTp0W2Uuc109bn0sTXQ9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUubGVuZ3RoO3QmJiFlWy0tdF07KTtmb3IodmFyIG49bmV3IGZ0KCsrdCkscj0wLGk9ZVswXSxzPTEsbz1mdW5jdGlvbihlKXtuW3IrK109ZX0sYT0xO2E8PXQ7KythKWlmKGVbYV09PWkmJmEhPXQpKytzO2Vsc2V7aWYoIWkmJnM+Mil7Zm9yKDtzPjEzODtzLT0xMzgpbygzMjc1NCk7cz4yJiYobyhzPjEwP3MtMTE8PDV8Mjg2OTA6cy0zPDw1fDEyMzA1KSxzPTApfWVsc2UgaWYocz4zKXtmb3IobyhpKSwtLXM7cz42O3MtPTYpbyg4MzA0KTtzPjImJihvKHMtMzw8NXw4MjA4KSxzPTApfWZvcig7cy0tOylvKGkpO3M9MSxpPWVbYV19cmV0dXJue2M6bi5zdWJhcnJheSgwLHIpLG46dH19LFZ0PWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPTAscj0wO3I8dC5sZW5ndGg7KytyKW4rPWVbcl0qdFtyXTtyZXR1cm4gbn0sQnQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPW4ubGVuZ3RoLGk9Q3QodCsyKTtlW2ldPTI1NSZyLGVbaSsxXT1yPj44LGVbaSsyXT0yNTVeZVtpXSxlW2krM109MjU1XmVbaSsxXTtmb3IodmFyIHM9MDtzPHI7KytzKWVbaStzKzRdPW5bc107cmV0dXJuIDgqKGkrNCtyKX0sanQ9ZnVuY3Rpb24oZSx0LG4scixpLHMsbyxhLGMsbCx1KXtSdCh0LHUrKyxuKSwrK2lbMjU2XTtmb3IodmFyIGQ9RnQoaSwxNSkscD1kLnQsaD1kLmwsZj1GdChzLDE1KSx5PWYudCxtPWYubCx2PU10KHApLF89di5jLGc9di5uLEU9TXQoeSksVD1FLmMsYj1FLm4sTj1uZXcgZnQoMTkpLEk9MDtJPF8ubGVuZ3RoOysrSSkrK05bMzEmX1tJXV07Zm9yKEk9MDtJPFQubGVuZ3RoOysrSSkrK05bMzEmVFtJXV07Zm9yKHZhciBPPUZ0KE4sNyksQT1PLnQseD1PLmwsUz0xOTtTPjQmJiFBW190W1MtMV1dOy0tUyk7dmFyIEQsdyxrLEMsUD1sKzU8PDMsUj1WdChpLFN0KStWdChzLER0KStvLEw9VnQoaSxwKStWdChzLHkpK28rMTQrMypTK1Z0KE4sQSkrMipOWzE2XSszKk5bMTddKzcqTlsxOF07aWYoYz49MCYmUDw9UiYmUDw9TClyZXR1cm4gQnQodCx1LGUuc3ViYXJyYXkoYyxjK2wpKTtpZihSdCh0LHUsMSsoTDxSKSksdSs9MixMPFIpe0Q9eHQocCxoLDApLHc9cCxrPXh0KHksbSwwKSxDPXk7dmFyIEY9eHQoQSx4LDApO1J0KHQsdSxnLTI1NyksUnQodCx1KzUsYi0xKSxSdCh0LHUrMTAsUy00KSx1Kz0xNDtmb3IoST0wO0k8UzsrK0kpUnQodCx1KzMqSSxBW190W0ldXSk7dSs9MypTO2Zvcih2YXIgJD1bXyxUXSxNPTA7TTwyOysrTSl7dmFyIFY9JFtNXTtmb3IoST0wO0k8Vi5sZW5ndGg7KytJKXt2YXIgQj0zMSZWW0ldO1J0KHQsdSxGW0JdKSx1Kz1BW0JdLEI+MTUmJihSdCh0LHUsVltJXT4+NSYxMjcpLHUrPVZbSV0+PjEyKX19fWVsc2UgRD13dCx3PVN0LGs9a3QsQz1EdDtmb3IoST0wO0k8YTsrK0kpe3ZhciBqPXJbSV07aWYoaj4yNTUpe0x0KHQsdSxEWyhCPWo+PjE4JjMxKSsyNTddKSx1Kz13W0IrMjU3XSxCPjcmJihSdCh0LHUsaj4+MjMmMzEpLHUrPW10W0JdKTt2YXIgVT0zMSZqO0x0KHQsdSxrW1VdKSx1Kz1DW1VdLFU+MyYmKEx0KHQsdSxqPj41JjgxOTEpLHUrPXZ0W1VdKX1lbHNlIEx0KHQsdSxEW2pdKSx1Kz13W2pdfXJldHVybiBMdCh0LHUsRFsyNTZdKSx1K3dbMjU2XX0sVXQ9bmV3IHl0KFs2NTU0MCwxMzEwODAsMTMxMDg4LDEzMTEwNCwyNjIxNzYsMTA0ODcwNCwxMDQ4ODMyLDIxMTQ1NjAsMjExNzYzMl0pLHF0PW5ldyBodCgwKSxLdD1mdW5jdGlvbigpe2Zvcih2YXIgZT1uZXcgSW50MzJBcnJheSgyNTYpLHQ9MDt0PDI1NjsrK3Qpe2Zvcih2YXIgbj10LHI9OTstLXI7KW49KDEmbiYmLTMwNjY3NDkxMilebj4+PjE7ZVt0XT1ufXJldHVybiBlfSgpLEd0PWZ1bmN0aW9uKGUsdCxuLHIsaSl7aWYoIWkmJihpPXtsOjF9LHQuZGljdGlvbmFyeSkpe3ZhciBzPXQuZGljdGlvbmFyeS5zdWJhcnJheSgtMzI3NjgpLG89bmV3IGh0KHMubGVuZ3RoK2UubGVuZ3RoKTtvLnNldChzKSxvLnNldChlLHMubGVuZ3RoKSxlPW8saS53PXMubGVuZ3RofXJldHVybiBmdW5jdGlvbihlLHQsbixyLGkscyl7dmFyIG89cy56fHxlLmxlbmd0aCxhPW5ldyBodChyK28rNSooMStNYXRoLmNlaWwoby83ZTMpKStpKSxjPWEuc3ViYXJyYXkocixhLmxlbmd0aC1pKSxsPXMubCx1PTcmKHMucnx8MCk7aWYodCl7dSYmKGNbMF09cy5yPj4zKTtmb3IodmFyIGQ9VXRbdC0xXSxwPWQ+PjEzLGg9ODE5MSZkLGY9KDE8PG4pLTEseT1zLnB8fG5ldyBmdCgzMjc2OCksbT1zLmh8fG5ldyBmdChmKzEpLHY9TWF0aC5jZWlsKG4vMyksXz0yKnYsZz1mdW5jdGlvbih0KXtyZXR1cm4oZVt0XV5lW3QrMV08PHZeZVt0KzJdPDxfKSZmfSxFPW5ldyB5dCgyNWUzKSxUPW5ldyBmdCgyODgpLGI9bmV3IGZ0KDMyKSxOPTAsST0wLE89cy5pfHwwLEE9MCx4PXMud3x8MCxTPTA7TysyPG87KytPKXt2YXIgRD1nKE8pLHc9MzI3NjcmTyxrPW1bRF07aWYoeVt3XT1rLG1bRF09dyx4PD1PKXt2YXIgQz1vLU87aWYoKE4+N2UzfHxBPjI0NTc2KSYmKEM+NDIzfHwhbCkpe3U9anQoZSxjLDAsRSxULGIsSSxBLFMsTy1TLHUpLEE9Tj1JPTAsUz1PO2Zvcih2YXIgUD0wO1A8Mjg2OysrUClUW1BdPTA7Zm9yKFA9MDtQPDMwOysrUCliW1BdPTB9dmFyIFI9MixMPTAsRj1oLCQ9dy1rJjMyNzY3O2lmKEM+MiYmRD09ZyhPLSQpKWZvcih2YXIgTT1NYXRoLm1pbihwLEMpLTEsVj1NYXRoLm1pbigzMjc2NyxPKSxCPU1hdGgubWluKDI1OCxDKTskPD1WJiYtLUYmJnchPWs7KXtpZihlW08rUl09PWVbTytSLSRdKXtmb3IodmFyIGo9MDtqPEImJmVbTytqXT09ZVtPK2otJF07KytqKTtpZihqPlIpe2lmKFI9aixMPSQsaj5NKWJyZWFrO3ZhciBVPU1hdGgubWluKCQsai0yKSxxPTA7Zm9yKFA9MDtQPFU7KytQKXt2YXIgSz1PLSQrUCYzMjc2NyxHPUsteVtLXSYzMjc2NztHPnEmJihxPUcsaz1LKX19fSQrPSh3PWspLShrPXlbd10pJjMyNzY3fWlmKEwpe0VbQSsrXT0yNjg0MzU0NTZ8YnRbUl08PDE4fE50W0xdO3ZhciB6PTMxJmJ0W1JdLFk9MzEmTnRbTF07SSs9bXRbel0rdnRbWV0sKytUWzI1Nyt6XSwrK2JbWV0seD1PK1IsKytOfWVsc2UgRVtBKytdPWVbT10sKytUW2VbT11dfX1mb3IoTz1NYXRoLm1heChPLHgpO088bzsrK08pRVtBKytdPWVbT10sKytUW2VbT11dO3U9anQoZSxjLGwsRSxULGIsSSxBLFMsTy1TLHUpLGx8fChzLnI9NyZ1fGNbdS84fDBdPDwzLHUtPTcscy5oPW0scy5wPXkscy5pPU8scy53PXgpfWVsc2V7Zm9yKE89cy53fHwwO088bytsO08rPTY1NTM1KXt2YXIgSD1PKzY1NTM1O0g+PW8mJihjW3UvOHwwXT1sLEg9byksdT1CdChjLHUrMSxlLnN1YmFycmF5KE8sSCkpfXMuaT1vfXJldHVybiBQdChhLDAscitDdCh1KStpKX0oZSxudWxsPT10LmxldmVsPzY6dC5sZXZlbCxudWxsPT10Lm1lbT9NYXRoLmNlaWwoMS41Kk1hdGgubWF4KDgsTWF0aC5taW4oMTMsTWF0aC5sb2coZS5sZW5ndGgpKSkpOjEyK3QubWVtLG4scixpKX0senQ9ZnVuY3Rpb24oZSx0LG4pe2Zvcig7bjsrK3QpZVt0XT1uLG4+Pj49OH07ZnVuY3Rpb24gWXQoZSx0KXt0fHwodD17fSk7dmFyIG49ZnVuY3Rpb24oKXt2YXIgZT0tMTtyZXR1cm57cDpmdW5jdGlvbih0KXtmb3IodmFyIG49ZSxyPTA7cjx0Lmxlbmd0aDsrK3Ipbj1LdFsyNTUmbl50W3JdXV5uPj4+ODtlPW59LGQ6ZnVuY3Rpb24oKXtyZXR1cm5+ZX19fSgpLHI9ZS5sZW5ndGg7bi5wKGUpO3ZhciBpLHM9R3QoZSx0LDEwKygoaT10KS5maWxlbmFtZT9pLmZpbGVuYW1lLmxlbmd0aCsxOjApLDgpLG89cy5sZW5ndGg7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7dmFyIG49dC5maWxlbmFtZTtpZihlWzBdPTMxLGVbMV09MTM5LGVbMl09OCxlWzhdPXQubGV2ZWw8Mj80Ojk9PXQubGV2ZWw/MjowLGVbOV09MywwIT10Lm10aW1lJiZ6dChlLDQsTWF0aC5mbG9vcihuZXcgRGF0ZSh0Lm10aW1lfHxEYXRlLm5vdygpKS8xZTMpKSxuKXtlWzNdPTg7Zm9yKHZhciByPTA7cjw9bi5sZW5ndGg7KytyKWVbcisxMF09bi5jaGFyQ29kZUF0KHIpfX0ocyx0KSx6dChzLG8tOCxuLmQoKSksenQocyxvLTQsciksc312YXIgSHQ9InVuZGVmaW5lZCIhPXR5cGVvZiBUZXh0RW5jb2RlciYmbmV3IFRleHRFbmNvZGVyLEp0PSJ1bmRlZmluZWQiIT10eXBlb2YgVGV4dERlY29kZXImJm5ldyBUZXh0RGVjb2Rlcjt0cnl7SnQuZGVjb2RlKHF0LHtzdHJlYW06ITB9KSwxfWNhdGNoKFd0KXt9Y29uc3QgUXQ9c2VsZjtmdW5jdGlvbiBYdChlLHQpe2NvbnN0IG49e30scj1bXSxpPVtdO2Zvcihjb25zdFtvLGFdb2YgT2JqZWN0LmVudHJpZXMoZSkpe2lmKG51bGw9PWEpY29udGludWU7bGV0IGU7ZHQuaW5jbHVkZXModHlwZW9mIGEpfHxyLnB1c2goe1tvXTphfSksZT0ic3RyaW5nIj09dHlwZW9mIGE/YTpzKGEpLGUubGVuZ3RoPjJlMyYmKGkucHVzaCh7W29dOmF9KSxlPWUuc3Vic3RyaW5nKDAsMmUzKSksbltvXT1lfXJldHVybiJzZXNzaW9uIiE9PXQmJihyLmxlbmd0aD4wJiZjb25zb2xlLndhcm4oYEhpZ2hsaWdodCB3YXMgcGFzc2VkIG9uZSBvciBtb3JlICR7dH0gcHJvcGVydGllcyBub3Qgb2YgdHlwZSBzdHJpbmcsIG51bWJlciwgb3IgYm9vbGVhbi5gLHIpLGkubGVuZ3RoPjAmJmNvbnNvbGUud2FybihgSGlnaGxpZ2h0IHdhcyBwYXNzZWQgb25lIG9yIG1vcmUgJHt0fSBwcm9wZXJ0aWVzIGV4Y2VlZGluZyAyMDAwIGNoYXJhY3RlcnMsIHdoaWNoIHdpbGwgYmUgdHJ1bmNhdGVkLmAsaSkpLG59e2xldCBlLG4scixpPTAsbz0hMSxhPTAsYz1uZXcgcHQoITEsIlt3b3JrZXJdIik7Y29uc3QgbD1bXSx1PSgpPT4wIT09YSYmaTw1JiYhIShudWxsPT1yP3ZvaWQgMDpyLmxlbmd0aCksZD0oZSxuKT0+e1F0LnBvc3RNZXNzYWdlKHtyZXNwb25zZTp7dHlwZTp0LkN1c3RvbUV2ZW50LHRhZzplLHBheWxvYWQ6bn19KX0scD1uPT5fX2FzeW5jKHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7Y29uc3R7aWQ6aSxldmVudHM6byxtZXNzYWdlczphLGVycm9yczp1LHJlc291cmNlc1N0cmluZzpkLHdlYlNvY2tldEV2ZW50c1N0cmluZzpwLGhhc1Nlc3Npb25VbmxvYWRlZDpoLGhpZ2hsaWdodExvZ3M6Zn09bix5PXMoe21lc3NhZ2VzOmF9KTtsZXQgbT17c2Vzc2lvbl9zZWN1cmVfaWQ6cixwYXlsb2FkX2lkOmkudG9TdHJpbmcoKSxldmVudHM6e2V2ZW50czpvfSxtZXNzYWdlczp5LHJlc291cmNlczpkLHdlYl9zb2NrZXRfZXZlbnRzOnAsZXJyb3JzOnUsaXNfYmVhY29uOiExLGhhc19zZXNzaW9uX3VubG9hZGVkOmh9O2YmJihtLmhpZ2hsaWdodF9sb2dzPWYpO2NvbnN0IHY9ZnVuY3Rpb24oZSx0KXtpZih0KXtmb3IodmFyIG49bmV3IGh0KGUubGVuZ3RoKSxyPTA7cjxlLmxlbmd0aDsrK3IpbltyXT1lLmNoYXJDb2RlQXQocik7cmV0dXJuIG59aWYoSHQpcmV0dXJuIEh0LmVuY29kZShlKTt2YXIgaT1lLmxlbmd0aCxzPW5ldyBodChlLmxlbmd0aCsoZS5sZW5ndGg+PjEpKSxvPTAsYT1mdW5jdGlvbihlKXtzW28rK109ZX07Zm9yKHI9MDtyPGk7KytyKXtpZihvKzU+cy5sZW5ndGgpe3ZhciBjPW5ldyBodChvKzgrKGktcjw8MSkpO2Muc2V0KHMpLHM9Y312YXIgbD1lLmNoYXJDb2RlQXQocik7bDwxMjh8fHQ/YShsKTpsPDIwNDg/KGEoMTkyfGw+PjYpLGEoMTI4fDYzJmwpKTpsPjU1Mjk1JiZsPDU3MzQ0PyhhKDI0MHwobD02NTUzNisoMTA0NzU1MiZsKXwxMDIzJmUuY2hhckNvZGVBdCgrK3IpKT4+MTgpLGEoMTI4fGw+PjEyJjYzKSxhKDEyOHxsPj42JjYzKSxhKDEyOHw2MyZsKSk6KGEoMjI0fGw+PjEyKSxhKDEyOHxsPj42JjYzKSxhKDEyOHw2MyZsKSl9cmV0dXJuIFB0KHMsMCxvKX0oSlNPTi5zdHJpbmdpZnkobSkpLF89WXQodiksZz15aWVsZCBmdW5jdGlvbihlKXtyZXR1cm4gX19hc3luYyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9eWllbGQgbmV3IFByb21pc2UoKHQ9Pntjb25zdCBuPW5ldyBGaWxlUmVhZGVyO24ub25sb2FkPSgpPT50KG4ucmVzdWx0KSxuLnJlYWRBc0RhdGFVUkwobmV3IEJsb2IoW2VdKSl9KSk7cmV0dXJuIHQuc2xpY2UodC5pbmRleE9mKCIsIikrMSl9KSl9KF8pO2MubG9nKGBQdXNoaW5nIHBheWxvYWQ6ICR7SlNPTi5zdHJpbmdpZnkoe3Nlc3Npb25TZWN1cmVJRDpyLGlkOmksZmlyc3RTSUQ6TWF0aC5taW4oLi4ubS5ldmVudHMuZXZlbnRzLm1hcCgoZT0+bnVsbD09ZT92b2lkIDA6ZS5fc2lkKSkuZmlsdGVyKChlPT4hIWUpKSksZXZlbnRzTGVuZ3RoOm0uZXZlbnRzLmV2ZW50cy5sZW5ndGgsbWVzc2FnZXNMZW5ndGg6YS5sZW5ndGgscmVzb3VyY2VzTGVuZ3RoOmQubGVuZ3RoLHdlYlNvY2tldExlbmd0aDpwLmxlbmd0aCxlcnJvcnNMZW5ndGg6dS5sZW5ndGgsYnVmTGVuZ3RoOnYubGVuZ3RoLGNvbXByZXNzZWRMZW5ndGg6Xy5sZW5ndGgsY29tcHJlc3NlZEJhc2U2NExlbmd0aDpnLmxlbmd0aH0sdm9pZCAwLDIpfWApO2NvbnN0IEU9ZS5QdXNoUGF5bG9hZENvbXByZXNzZWQoe3Nlc3Npb25fc2VjdXJlX2lkOnIscGF5bG9hZF9pZDppLnRvU3RyaW5nKCksZGF0YTpnfSk7bGV0IFQ9UHJvbWlzZS5yZXNvbHZlKCk7bC5sZW5ndGgmJihUPWUucHVzaE1ldHJpY3Moe21ldHJpY3M6bH0pLGwuc3BsaWNlKDApKSx5aWVsZCBQcm9taXNlLmFsbChbRSxUXSksUXQucG9zdE1lc3NhZ2Uoe3Jlc3BvbnNlOnt0eXBlOnQuQXN5bmNFdmVudHMsaWQ6aSxldmVudHNTaXplOnYubGVuZ3RoLGNvbXByZXNzZWRTaXplOmcubGVuZ3RofX0pfSkpLGg9dD0+X19hc3luYyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2NvbnN0e3VzZXJPYmplY3Q6aSx1c2VySWRlbnRpZmllcjpvLHNvdXJjZTphfT10O2QoInNlZ21lbnQiPT09YT8iU2VnbWVudCBJZGVudGlmeSI6IklkZW50aWZ5IixzKF9fc3ByZWFkVmFsdWVzKHt1c2VySWRlbnRpZmllcjpvfSxpKSkpLHlpZWxkIGUuaWRlbnRpZnlTZXNzaW9uKHtzZXNzaW9uX3NlY3VyZV9pZDpyLHVzZXJfaWRlbnRpZmllcjpvLHVzZXJfb2JqZWN0Olh0KGksInVzZXIiKX0pO2NvbnN0IGw9InNlZ21lbnQiPT09YT9hOiJkZWZhdWx0IjtjLmxvZyhgSWRlbnRpZnkgKCR7b30sIHNvdXJjZTogJHtsfSkgdy8gb2JqOiAke3MoaSl9IEAgJHtufWApfSkpLGY9dD0+X19hc3luYyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2NvbnN0e3Byb3BlcnRpZXNPYmplY3Q6aSxwcm9wZXJ0eVR5cGU6b309dDtsZXQgYTt2b2lkIDAhPT0obnVsbD09aT92b2lkIDA6aS5jbGlja1RleHRDb250ZW50KT8oYT0iQ2xpY2tUZXh0Q29udGVudCIseWllbGQgZS5hZGRTZXNzaW9uUHJvcGVydGllcyh7c2Vzc2lvbl9zZWN1cmVfaWQ6cixwcm9wZXJ0aWVzX29iamVjdDpYdChpLCJzZXNzaW9uIil9KSk6InNlc3Npb24iPT09KG51bGw9PW8/dm9pZCAwOm8udHlwZSk/KGE9IlNlc3Npb24iLHlpZWxkIGUuYWRkU2Vzc2lvblByb3BlcnRpZXMoe3Nlc3Npb25fc2VjdXJlX2lkOnIscHJvcGVydGllc19vYmplY3Q6WHQoaSwic2Vzc2lvbiIpfSkpOiJzZWdtZW50Ij09PShudWxsPT1vP3ZvaWQgMDpvLnNvdXJjZSk/KGE9IlNlZ21lbnQiLGQoIlNlZ21lbnQgVHJhY2siLHMoaSkpKTooYT0iVHJhY2siLGQoYSxzKGkpKSksYy5sb2coYEFkZGluZyAke2F9IFByb3BlcnRpZXMgdG8gc2Vzc2lvbiAoJHtyfSkgdy8gb2JqOiAke0pTT04uc3RyaW5naWZ5KGkpfSBAICR7bn1gKX0pKSx5PWU9Pl9fYXN5bmModGhpcyxudWxsLChmdW5jdGlvbiooKXtsLnB1c2goLi4uZS5tZXRyaWNzLm1hcCgoZT0+KHtuYW1lOmUubmFtZSx2YWx1ZTplLnZhbHVlLHNlc3Npb25fc2VjdXJlX2lkOnIsY2F0ZWdvcnk6ZS5jYXRlZ29yeSxncm91cDplLmdyb3VwLHRpbWVzdGFtcDplLnRpbWVzdGFtcC50b0lTT1N0cmluZygpLHRhZ3M6ZS50YWdzfSkpKSl9KSksbT10PT5fX2FzeW5jKHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7Y29uc3R7dGltZXN0YW1wOm4sdmVyYmF0aW06aSx1c2VyRW1haWw6cyx1c2VyTmFtZTpvfT10O3lpZWxkIGUuYWRkU2Vzc2lvbkZlZWRiYWNrKHtzZXNzaW9uX3NlY3VyZV9pZDpyLHRpbWVzdGFtcDpuLHZlcmJhdGltOmksdXNlcl9lbWFpbDpzLHVzZXJfbmFtZTpvfSl9KSk7UXQub25tZXNzYWdlPWZ1bmN0aW9uKHMpe3JldHVybiBfX2FzeW5jKHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7aWYocy5kYXRhLm1lc3NhZ2UudHlwZT09PXQuSW5pdGlhbGl6ZSlyZXR1cm4gbj1zLmRhdGEubWVzc2FnZS5iYWNrZW5kLHI9cy5kYXRhLm1lc3NhZ2Uuc2Vzc2lvblNlY3VyZUlELG89cy5kYXRhLm1lc3NhZ2UuZGVidWcsYT1zLmRhdGEubWVzc2FnZS5yZWNvcmRpbmdTdGFydFRpbWUsYy5kZWJ1Zz1vLHZvaWQoZT1mdW5jdGlvbihlLHQ9R2Upe3JldHVybntQdXNoUGF5bG9hZDoobixyKT0+dCgodD0+ZS5yZXF1ZXN0KCRlLG4sX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sciksdCkpKSwiUHVzaFBheWxvYWQiLCJtdXRhdGlvbiIsbiksUHVzaFBheWxvYWRDb21wcmVzc2VkOihuLHIpPT50KCh0PT5lLnJlcXVlc3QoTWUsbixfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSxyKSx0KSkpLCJQdXNoUGF5bG9hZENvbXByZXNzZWQiLCJtdXRhdGlvbiIsbiksaWRlbnRpZnlTZXNzaW9uOihuLHIpPT50KCh0PT5lLnJlcXVlc3QoVmUsbixfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSxyKSx0KSkpLCJpZGVudGlmeVNlc3Npb24iLCJtdXRhdGlvbiIsbiksYWRkU2Vzc2lvblByb3BlcnRpZXM6KG4scik9PnQoKHQ9PmUucmVxdWVzdChCZSxuLF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LHIpLHQpKSksImFkZFNlc3Npb25Qcm9wZXJ0aWVzIiwibXV0YXRpb24iLG4pLHB1c2hNZXRyaWNzOihuLHIpPT50KCh0PT5lLnJlcXVlc3QoamUsbixfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSxyKSx0KSkpLCJwdXNoTWV0cmljcyIsIm11dGF0aW9uIixuKSxhZGRTZXNzaW9uRmVlZGJhY2s6KG4scik9PnQoKHQ9PmUucmVxdWVzdChVZSxuLF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LHIpLHQpKSksImFkZFNlc3Npb25GZWVkYmFjayIsIm11dGF0aW9uIixuKSxpbml0aWFsaXplU2Vzc2lvbjoobixyKT0+dCgodD0+ZS5yZXF1ZXN0KHFlLG4sX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sciksdCkpKSwiaW5pdGlhbGl6ZVNlc3Npb24iLCJtdXRhdGlvbiIsbiksSWdub3JlOihuLHIpPT50KCh0PT5lLnJlcXVlc3QoS2UsbixfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSxyKSx0KSkpLCJJZ25vcmUiLCJxdWVyeSIsbil9fShuZXcgcnQobix7aGVhZGVyczp7fX0pLHV0KHIpKSk7aWYodSgpKXRyeXtzLmRhdGEubWVzc2FnZS50eXBlPT09dC5Bc3luY0V2ZW50cz95aWVsZCBwKHMuZGF0YS5tZXNzYWdlKTpzLmRhdGEubWVzc2FnZS50eXBlPT09dC5JZGVudGlmeT95aWVsZCBoKHMuZGF0YS5tZXNzYWdlKTpzLmRhdGEubWVzc2FnZS50eXBlPT09dC5Qcm9wZXJ0aWVzP3lpZWxkIGYocy5kYXRhLm1lc3NhZ2UpOnMuZGF0YS5tZXNzYWdlLnR5cGU9PT10Lk1ldHJpY3M/eWllbGQgeShzLmRhdGEubWVzc2FnZSk6cy5kYXRhLm1lc3NhZ2UudHlwZT09PXQuRmVlZGJhY2smJih5aWVsZCBtKHMuZGF0YS5tZXNzYWdlKSksaT0wfWNhdGNoKGwpe28mJmNvbnNvbGUuZXJyb3IobCksaSs9MX19KSl9fX0oKTsK",sD="undefined"!=typeof window&&window.Blob&&new Blob([Uint8Array.from(atob(sA),e=>e.charCodeAt(0))],{type:"text/javascript;charset=utf-8"});function sQ(e){let t;try{if(!(t=sD&&(window.URL||window.webkitURL).createObjectURL(sD)))throw"";let i=new Worker(t,{name:null==e?void 0:e.name});return i.addEventListener("error",()=>{(window.URL||window.webkitURL).revokeObjectURL(t)}),i}catch(t){return new Worker("data:text/javascript;base64,"+sA,{name:null==e?void 0:e.name})}finally{t&&(window.URL||window.webkitURL).revokeObjectURL(t)}}var sj=((l=sj||{}).BillingQuotaExceeded="BillingQuotaExceeded",l);let s_=[sj.BillingQuotaExceeded.toString()],sq=e=>{let t=(i,n,s,l,o=0)=>S(this,null,function*(){try{return yield i()}catch(a){var r;if(a instanceof i5&&(null==(r=a.response.errors)?void 0:r.find(e=>s_.includes(e.message)))!==void 0)throw a;if(o<10)return yield new Promise(e=>setTimeout(e,1e3+500*Math.pow(2,o))),yield t(i,n,s,l,o+1);throw console.error(`highlight.io: [${e||e}] data request failed after ${o} retries`),a}});return t};var s$=((o=s$||{})[o.Initialize=0]="Initialize",o[o.AsyncEvents=1]="AsyncEvents",o[o.Identify=2]="Identify",o[o.Properties=3]="Properties",o[o.Metrics=4]="Metrics",o[o.Feedback=5]="Feedback",o[o.CustomEvent=6]="CustomEvent",o);class s0{constructor(e,t){I(this,"debug"),I(this,"name"),this.debug=e,this.name=t}log(...e){if(this.debug){let t=`[${Date.now()}]`;this.name&&(t+=` - ${this.name}`),console.log.apply(console,[t,...e])}}}let s2=()=>S(this,null,function*(){let e=[];for(let t=0;t<30;t++)e.push((yield new Promise(e=>requestAnimationFrame(t=>requestAnimationFrame(i=>e(i-t))))));return e.reduce((e,t)=>e+t,0)/e.length}),s9="iframe parent ready",s1="iframe ok",s5=(e,t)=>{console.warn(`Highlight Warning: (${e}): `,{output:t})},s3="app.highlight.run";class s4{constructor(e,t){var i,n,s,l,o;I(this,"options"),I(this,"isRunningOnHighlight"),I(this,"organizationID"),I(this,"graphqlSDK"),I(this,"events"),I(this,"sessionData"),I(this,"ready"),I(this,"manualStopped"),I(this,"state"),I(this,"logger"),I(this,"enableSegmentIntegration"),I(this,"privacySetting"),I(this,"enableCanvasRecording"),I(this,"enablePerformanceRecording"),I(this,"samplingStrategy"),I(this,"inlineImages"),I(this,"inlineStylesheet"),I(this,"debugOptions"),I(this,"listeners"),I(this,"firstloadVersion"),I(this,"environment"),I(this,"sessionShortcut"),I(this,"appVersion"),I(this,"serviceName"),I(this,"_worker"),I(this,"_optionsInternal"),I(this,"_backendUrl"),I(this,"_recordingStartTime"),I(this,"_isOnLocalHost"),I(this,"_onToggleFeedbackFormVisibility"),I(this,"_firstLoadListeners"),I(this,"_isCrossOriginIframe"),I(this,"_eventBytesSinceSnapshot"),I(this,"_lastSnapshotTime"),I(this,"_lastVisibilityChangeTime"),I(this,"pushPayloadTimerId"),I(this,"hasSessionUnloaded"),I(this,"hasPushedData"),I(this,"reloaded"),I(this,"_hasPreviouslyInitialized"),I(this,"_payloadId"),I(this,"_recordStop"),e.sessionSecureID||(e.sessionSecureID=sB()),this.options=e,"boolean"==typeof(null==(i=this.options)?void 0:i.debug)?this.debugOptions=this.options.debug?{clientInteractions:!0}:{}:this.debugOptions=null!=(s=null==(n=this.options)?void 0:n.debug)?s:{},this.logger=new s0(this.debugOptions.clientInteractions),e.storageMode&&(this.logger.log(`initializing in ${e.storageMode} session mode`),tM=e.storageMode),this._worker=new sQ,this._worker.onmessage=e=>{var t,i;(null==(t=e.data.response)?void 0:t.type)===s$.AsyncEvents?(this._eventBytesSinceSnapshot+=e.data.response.eventsSize,this.logger.log(`Web worker sent payloadID ${e.data.response.id} size ${e.data.response.eventsSize} bytes, compression ratio ${e.data.response.eventsSize/e.data.response.compressedSize}.
                Total since snapshot: ${(this._eventBytesSinceSnapshot/1e6).toFixed(1)}MB`)):(null==(i=e.data.response)?void 0:i.type)===s$.CustomEvent&&this.addCustomEvent(e.data.response.tag,e.data.response.payload)};let r=tj();if(this.reloaded=!1,!(null!=(l=this.sessionData)&&l.sessionSecureID)&&(null==r?void 0:r.sessionSecureID))this.sessionData=r,this.options.sessionSecureID=r.sessionSecureID,this.reloaded=!0,this.logger.log(`Tab reloaded, continuing previous session: ${this.sessionData.sessionSecureID}`);else{for(let e of Object.values(tE))tA(e);this.sessionData={sessionSecureID:this.options.sessionSecureID,projectID:0,sessionStartTime:Date.now()}}this._hasPreviouslyInitialized=!1,this._firstLoadListeners=t||new ir(this.options);try{window.parent.document&&(this._isCrossOriginIframe=!1)}catch(e){this._isCrossOriginIframe=null==(o=this.options.recordCrossOriginIframe)||o}this._initMembers(this.options)}static create(e){return new s4(e)}_reset(e){return S(this,arguments,function*({forceNew:e}){let t,i;if(this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0),!e)try{t=tP(tE.USER_IDENTIFIER);let e=tP(tE.USER_OBJECT);e&&(i=JSON.parse(e))}catch(e){}for(let e of Object.values(tE))tA(e);this.sessionData.sessionSecureID=sB(),this.sessionData.sessionStartTime=Date.now(),this.options.sessionSecureID=this.sessionData.sessionSecureID,this._payloadId=0,this.stopRecording(),this._firstLoadListeners=new ir(this.options),yield this.initialize(),t&&i&&this.identify(t,i)})}_initMembers(e){var t,i,n,s,l,o,r,a,c,d,u,p;this.sessionShortcut=!1,this._recordingStartTime=0,this._isOnLocalHost="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname||""===window.location.hostname,this.ready=!1,this.state="NotRecording",this.manualStopped=!1,this.enableSegmentIntegration=!!e.enableSegmentIntegration,this.privacySetting=null!=(t=e.privacySetting)?t:"default",this.enableCanvasRecording=null!=(i=e.enableCanvasRecording)&&i,this.enablePerformanceRecording=null==(n=e.enablePerformanceRecording)||n,this.inlineImages=null!=(s=e.inlineImages)?s:this._isOnLocalHost,this.inlineStylesheet=null==(l=e.inlineStylesheet)||l,this.samplingStrategy=Z({canvasFactor:.5,canvasMaxSnapshotDimension:360,canvasClearWebGLBuffer:!0},null!=(o=e.samplingStrategy)?o:{canvas:2}),this._backendUrl=null!=(r=null==e?void 0:e.backendUrl)?r:"https://pub.highlight.io","/"===this._backendUrl[0]&&(this._backendUrl=new URL(this._backendUrl,document.baseURI).href);let h=new ni(`${this._backendUrl}`,{headers:{}});this.graphqlSDK=function(e,t=nU){return{PushPayload:(i,n)=>t(t=>e.request(nT,i,Z(Z({},n),t)),"PushPayload","mutation",i),PushPayloadCompressed:(i,n)=>t(t=>e.request(nN,i,Z(Z({},n),t)),"PushPayloadCompressed","mutation",i),identifySession:(i,n)=>t(t=>e.request(nw,i,Z(Z({},n),t)),"identifySession","mutation",i),addSessionProperties:(i,n)=>t(t=>e.request(nL,i,Z(Z({},n),t)),"addSessionProperties","mutation",i),pushMetrics:(i,n)=>t(t=>e.request(nx,i,Z(Z({},n),t)),"pushMetrics","mutation",i),addSessionFeedback:(i,n)=>t(t=>e.request(nJ,i,Z(Z({},n),t)),"addSessionFeedback","mutation",i),initializeSession:(i,n)=>t(t=>e.request(nK,i,Z(Z({},n),t)),"initializeSession","mutation",i),Ignore:(i,n)=>t(t=>e.request(nY,i,Z(Z({},n),t)),"Ignore","query",i)}}(h,sq((null==(a=this.sessionData)?void 0:a.sessionSecureID)||(null==(c=this.options)?void 0:c.sessionSecureID))),this.environment=null!=(d=e.environment)?d:"production",this.appVersion=e.appVersion,this.serviceName=null!=(u=e.serviceName)?u:"","string"==typeof e.organizationID?this.organizationID=e.organizationID:this.organizationID=e.organizationID.toString(),this.isRunningOnHighlight="1"===this.organizationID||"1jdkoe52"===this.organizationID,this.firstloadVersion=e.firstloadVersion||"unknown",this.sessionShortcut=e.sessionShortcut||!1,this._onToggleFeedbackFormVisibility=()=>{};let m=g(e,["firstloadVersion"]);this._optionsInternal=m,this.listeners=[],this.events=[],this.hasSessionUnloaded=!1,this.hasPushedData=!1,window.Intercom&&window.Intercom("onShow",()=>{window.Intercom("update",{highlightSessionURL:this.getCurrentSessionURLWithTimestamp()}),this.addProperties({event:"Intercom onShow"})}),this._eventBytesSinceSnapshot=0,this._lastSnapshotTime=new Date().getTime(),this._lastVisibilityChangeTime=new Date().getTime(),this._payloadId=null!=(p=Number(tP(tE.PAYLOAD_ID)))?p:1,tB(tE.PAYLOAD_ID,this._payloadId.toString())}identify(e,t={},i){e&&""!==e?(this.sessionData.userIdentifier=e.toString(),this.sessionData.userObject=t,tB(tE.USER_IDENTIFIER,e.toString()),tB(tE.USER_OBJECT,JSON.stringify(t)),this._worker.postMessage({message:{type:s$.Identify,userIdentifier:e,userObject:t,source:i}})):console.warn("Highlight's identify() call was passed an empty identifier.",{user_identifier:e,user_object:t})}pushCustomError(e,t){return this.consumeCustomError(Error(e),void 0,t)}consumeCustomError(e,t,i){let n={};if(i)try{n=Z(Z({},JSON.parse(i)),n)}catch(e){}return this.consumeError(e,{message:t,payload:n})}consumeError(e,{message:t,payload:i,source:n,type:s}){var l,o,r,a;e.cause&&(i=y(Z({},i),{"exception.cause":e.cause}));let c=t?t+":"+e.message:e.message;"React.ErrorBoundary"===s&&(c="ErrorBoundary: "+c);let d=tC.parse(e);this._firstLoadListeners.errors.push({event:c,type:null!=s?s:"custom",url:window.location.href,source:null!=n?n:"",lineNumber:null!=(l=d[0])&&l.lineNumber?null==(o=d[0])?void 0:o.lineNumber:0,columnNumber:null!=(r=d[0])&&r.columnNumber?null==(a=d[0])?void 0:a.columnNumber:0,stackTrace:d,timestamp:new Date().toISOString(),payload:JSON.stringify(i)})}addProperties(e={},t){let i=Z({},e);Object.entries(i).forEach(([e,t])=>{try{structuredClone(t)}catch(t){delete i[e]}}),this._worker.postMessage({message:{type:s$.Properties,propertiesObject:i,propertyType:t}})}initialize(e){return S(this,null,function*(){var t,i,n,s,l,o;if(this.logger.log("Initializing...",e,this.sessionData,this.options),(null==navigator?void 0:navigator.webdriver)&&!window.Cypress||(null==(t=null==navigator?void 0:navigator.userAgent)?void 0:t.includes("Googlebot"))||(null==(i=null==navigator?void 0:navigator.userAgent)?void 0:i.includes("AdsBot")))null==(n=this._firstLoadListeners)||n.stopListening();else try{if(null!=e&&e.forceNew)return void(yield this._reset(e));let t=tP(tE.RECORDING_START_TIME);t?this._recordingStartTime=parseInt(t,10):(this._recordingStartTime=new Date().getTime(),tB(tE.RECORDING_START_TIME,this._recordingStartTime.toString()));let i,n=tP("highlightClientID");n||(n=sB(),tB("highlightClientID",n)),t_(null),i=!this.options.disableSessionRecording&&void 0===this.options.disableNetworkRecording&&"boolean"!=typeof this.options.networkRecording&&((null==(s=this.options.networkRecording)?void 0:s.recordHeadersAndBody)||!1);let r=[];if("object"==typeof this.options.networkRecording&&null!=(l=this.options.networkRecording.destinationDomains)&&l.length&&(r=this.options.networkRecording.destinationDomains),this._isCrossOriginIframe)yield this._setupCrossOriginIframe();else{let e=yield this.graphqlSDK.initializeSession({organization_verbose_id:this.organizationID,enable_strict_privacy:"strict"===this.privacySetting,privacy_setting:this.privacySetting,enable_recording_network_contents:i,clientVersion:this.firstloadVersion,firstloadVersion:this.firstloadVersion,clientConfig:JSON.stringify(this._optionsInternal),environment:this.environment,id:n,appVersion:this.appVersion,serviceName:this.serviceName,session_secure_id:this.sessionData.sessionSecureID,client_id:n,network_recording_domains:r,disable_session_recording:this.options.disableSessionRecording});if(e.initializeSession.secure_id!==this.sessionData.sessionSecureID&&this.logger.log(`Unexpected secure id returned by initializeSession: ${e.initializeSession.secure_id}, expected ${this.sessionData.sessionSecureID}`),this.sessionData.sessionSecureID=e.initializeSession.secure_id,this.sessionData.projectID=parseInt((null==(o=null==e?void 0:e.initializeSession)?void 0:o.project_id)||"0"),!this.sessionData.projectID||!this.sessionData.sessionSecureID)return void console.error("Failed to initialize Highlight; an error occurred on our end.",this.sessionData)}if(this.logger.log(`Loaded Highlight
Remote: ${this._backendUrl}
Project ID: ${this.sessionData.projectID}
SessionSecureID: ${this.sessionData.sessionSecureID}`),this.options.sessionSecureID=this.sessionData.sessionSecureID,this._worker.postMessage({message:{type:s$.Initialize,sessionSecureID:this.sessionData.sessionSecureID,backend:this._backendUrl,debug:!!this.debugOptions.clientInteractions,recordingStartTime:this._recordingStartTime}}),tq(this.sessionData.sessionSecureID),this.sessionData.userIdentifier&&this.identify(this.sessionData.userIdentifier,this.sessionData.userObject),this._firstLoadListeners.isListening()?this._firstLoadListeners.hasNetworkRecording||ir.setupNetworkListener(this._firstLoadListeners,this.options):this._firstLoadListeners.startListening(),this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0),this._isCrossOriginIframe||(this.pushPayloadTimerId=setTimeout(()=>{this._save()},1e3)),this.options.disableSessionRecording)return this.logger.log("Highlight is NOT RECORDING a session replay per H.init setting."),this.ready=!0,this.state="Recording",void(this.manualStopped=!1);let{getDeviceDetails:a}=(()=>{if(!("performance"in window)||!("memory"in performance))return{getDeviceDetails:void 0,getCurrentDeviceDetails:void 0};let e=window.performance;return{getDeviceDetails:()=>({deviceMemory:sM(navigator.deviceMemory||0)}),getCurrentDeviceDetails:()=>({jsHeapSizeLimit:sE(e.memory.jsHeapSizeLimit),totalJSHeapSize:sE(e.memory.totalJSHeapSize),usedJSHeapSize:sE(e.memory.usedJSHeapSize)})}})();a&&this.recordMetric([{name:tL.DeviceMemory,value:a().deviceMemory,category:tx.Device,group:window.location.href}]);let c=e=>{this.events.push(e)};c.bind(this),this._recordStop&&(this._recordStop(),this._recordStop=void 0);let[d,u]=(e=>{switch(e){case"strict":case"default":return[!0,void 0];case"none":return[!1,{password:!0}]}})(this.privacySetting);this._recordStop=tu({ignoreClass:"highlight-ignore",blockClass:"highlight-block",emit:c,recordCrossOriginIframes:this.options.recordCrossOriginIframe,privacySetting:this.privacySetting,maskAllInputs:d,maskInputOptions:u,recordCanvas:this.enableCanvasRecording,sampling:{canvas:{fps:this.samplingStrategy.canvas,fpsManual:this.samplingStrategy.canvasManualSnapshot,resizeFactor:this.samplingStrategy.canvasFactor,clearWebGLBuffer:this.samplingStrategy.canvasClearWebGLBuffer,initialSnapshotDelay:this.samplingStrategy.canvasInitialSnapshotDelay,dataURLOptions:{type:"image/webp",quality:.9},maxSnapshotDimension:this.samplingStrategy.canvasMaxSnapshotDimension}},keepIframeSrcFn:e=>!this.options.recordCrossOriginIframe,inlineImages:this.inlineImages,inlineStylesheet:this.inlineStylesheet,plugins:[tm()],logger:"boolean"==typeof this.options.debug&&this.options.debug||"object"==typeof this.options.debug&&this.options.debug.domRecording?{debug:this.logger.log,warn:s5}:void 0});let p={height:window.innerHeight,width:window.innerWidth};this.addCustomEvent("Viewport",p),this.submitViewportMetrics(p),this._recordStop||this.options.recordCrossOriginIframe&&this._setupCrossOriginIframeParent(),document.referrer&&(window&&document.referrer.includes(window.location.origin)||(this.addCustomEvent("Referrer",document.referrer),this.addProperties({referrer:document.referrer},{type:"session"}))),this._setupWindowListeners(),this.ready=!0,this.state="Recording",this.manualStopped=!1}catch(e){this._isOnLocalHost&&(console.error(e),s5("initializeSession",e))}})}_visibilityHandler(e){return S(this,null,function*(){this.manualStopped?this.logger.log("Ignoring visibility event due to manual stop."):new Date().getTime()-this._lastVisibilityChangeTime<100||(this._lastVisibilityChangeTime=new Date().getTime(),this.logger.log(`Detected window ${e?"hidden":"visible"}.`),e?(this.addCustomEvent("TabHidden",!0),this.options.disableBackgroundRecording&&this.stopRecording()):(this.options.disableBackgroundRecording&&(yield this.initialize()),this.addCustomEvent("TabHidden",!1)))})}_setupCrossOriginIframe(){return S(this,null,function*(){this.logger.log("highlight in cross-origin iframe is waiting "),yield new Promise(e=>{let t=i=>{if(i.data.highlight===s9){let n=i.data;this.logger.log("highlight got window message ",n),this.sessionData.projectID=n.projectID,this.sessionData.sessionSecureID=n.sessionSecureID,window.parent.postMessage({highlight:s1},"*"),window.removeEventListener("message",t),e()}};window.addEventListener("message",t)})})}_setupCrossOriginIframeParent(){this.logger.log("highlight setting up cross origin iframe parent notification"),setInterval(()=>{window.document.querySelectorAll("iframe").forEach(e=>{var t;null==(t=e.contentWindow)||t.postMessage({highlight:s9,projectID:this.sessionData.projectID,sessionSecureID:this.sessionData.sessionSecureID},"*")})},1e3),window.addEventListener("message",e=>{e.data.highlight===s1&&this.logger.log("highlight got response from initialized iframe")})}_setupWindowListeners(){var e;try{let t=this;this.enableSegmentIntegration&&this.listeners.push(nF(e=>{if("track"===e.type){let i={};i["segment-event"]=e.event,t.addProperties(i,{type:"track",source:"segment"})}else if("identify"===e.type){let i=e.userId.replace(/^"(.*)"$/,"$1");t.identify(i,e.traits,"segment")}})),this.listeners.push(ia(e=>{this.reloaded?(this.addCustomEvent("Reload",e),this.reloaded=!1,t.addProperties({reload:!0},{type:"session"})):this.addCustomEvent("Navigate",e),t.addProperties({"visited-url":e},{type:"session"})})),this.listeners.push((e=>{let t;let i=()=>{clearTimeout(t),t=setTimeout(()=>{e({height:window.innerHeight,width:window.innerWidth})},500)};return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)})(e=>{this.addCustomEvent("Viewport",e),this.submitViewportMetrics(e)})),this.listeners.push((e=>{let t=t=>{if(t.target){var i;let n=(i=t.target,nO(i));e(n,t)}};return window.addEventListener("click",t),()=>window.removeEventListener("click",t)})((e,i)=>{e&&this.addCustomEvent("Click",e);let n=null,s=null;if(i&&i.target){let e=i.target;n=nz(e),(s=e.textContent)&&s.length>2e3&&(s=s.substring(0,2e3))}t.addProperties({clickTextContent:s,clickSelector:n},{type:"session"})})),this.listeners.push((e=>{let t=t=>{if(t.target){var i;let n=(i=t.target,nO(i));e(n)}};return window.addEventListener("focusin",t),()=>window.removeEventListener("focusin",t)})(e=>{e&&this.addCustomEvent("Focus",e)})),this.listeners.push(sH(e=>{let{name:t,value:i}=e;this.recordMetric([{name:t,value:i,group:window.location.href,category:tx.WebVital}])})),this.sessionShortcut&&nB(this.sessionShortcut,()=>{window.open(this.getCurrentSessionURLWithTimestamp(),"_blank")}),this.enablePerformanceRecording&&(this.listeners.push(((e,t)=>{let i,n=0,s=0,l=()=>{let i=(new Date().getTime()-t)/1e3,s=sz.memory.jsHeapSizeLimit||0,l=sz.memory.usedJSHeapSize||0;e({jsHeapSizeLimit:s,usedJSHeapSize:l,relativeTimestamp:i,fps:n})};l(),i=setInterval(()=>{l()},5e3);let o=0,r=Date.now(),a=function(){var e=Date.now();o++,e>1e3+r&&(n=Math.round(1e3*o/(e-r)),o=0,r=e),s=requestAnimationFrame(a)};return a(),()=>{clearInterval(i),cancelAnimationFrame(s)}})(e=>{this.addCustomEvent("Performance",tv(e)),this.recordMetric(Object.entries(e).map(([e,t])=>t?{name:e,value:t,category:tx.Performance,group:window.location.href}:void 0).filter(e=>e))},this._recordingStartTime)),this.listeners.push(((e,t)=>{let i={},n=16.666666666666668;s2().then(e=>n=e);let s=e=>{var t;null!=i&&i.event||(i={event:e,location:window.location.href,timerStart:null==(t=window.performance)?void 0:t.now()},window.requestAnimationFrame(l))},l=()=>{if(!(null!=i&&i.timerStart))return;let e=window.performance.now()-i.timerStart-n;o(e),i={}},o=n=>{let s=(new Date().getTime()-t)/1e3;e({relativeTimestamp:s,jankAmount:n,querySelector:r(),newLocation:window.location.href!=i.location?window.location.href:void 0})},r=()=>{var e;return null!=(e=null==i?void 0:i.event)&&e.target?nz(i.event.target):""};return window.addEventListener("click",s,!0),window.addEventListener("keydown",s,!0),()=>{window.removeEventListener("keydown",s,!0),window.removeEventListener("click",s,!0)}})(e=>{this.addCustomEvent("Jank",tv(e)),this.recordMetric([{name:"Jank",value:e.jankAmount,category:tx.WebVital,group:e.querySelector}])},this._recordingStartTime))),this._hasPreviouslyInitialized||(null!=(e=window.electron)&&e.ipcRenderer?(window.electron.ipcRenderer.on("highlight.run",({visible:e})=>{this._visibilityHandler(!e)}),this.logger.log("Set up Electron highlight.run events.")):((e=>{let t,i;if(void 0!==document.hidden?(t="hidden",i="visibilitychange"):void 0!==document.msHidden?(t="msHidden",i="msvisibilitychange"):void 0!==document.webkitHidden&&(t="webkitHidden",i="webkitvisibilitychange"),void 0===i||void 0===t)return()=>{};let n=t;document.addEventListener(i,()=>{let t=document[n];e(!!t)})})(e=>this._visibilityHandler(e)),this.logger.log("Set up document visibility listener.")),this._hasPreviouslyInitialized=!0);let i=()=>{this.hasSessionUnloaded=!0,this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0)};window.addEventListener("beforeunload",i),this.listeners.push(()=>window.removeEventListener("beforeunload",i))}catch(e){this._isOnLocalHost&&(console.error(e),s5("initializeSession _setupWindowListeners",e))}let t=()=>{this.addCustomEvent("Page Unload",""),t_(this.sessionData)};if(window.addEventListener("beforeunload",t),this.listeners.push(()=>window.removeEventListener("beforeunload",t)),navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i)){let e=()=>{this.addCustomEvent("Page Unload",""),t_(this.sessionData)};window.addEventListener("pagehide",e),this.listeners.push(()=>window.removeEventListener("beforeunload",e))}}submitViewportMetrics({height:e,width:t}){this.recordMetric([{name:tL.ViewportHeight,value:e,category:tx.Device,group:window.location.href},{name:tL.ViewportWidth,value:t,category:tx.Device,group:window.location.href},{name:tL.ViewportArea,value:e*t,category:tx.Device,group:window.location.href}])}recordMetric(e){this._worker.postMessage({message:{type:s$.Metrics,metrics:e.map(e=>y(Z({},e),{tags:e.tags||[],group:e.group||window.location.href,category:e.category||tx.Frontend,timestamp:new Date}))}})}stopRecording(e){this.manualStopped=!!e,this.manualStopped&&this.addCustomEvent("Stop","H.stop() was called which stops Highlight from recording."),this.state="NotRecording",e&&this._recordStop&&(this._recordStop(),this._recordStop=void 0),this.listeners.forEach(e=>e()),this.listeners=[]}getCurrentSessionTimestamp(){return this._recordingStartTime}getCurrentSessionURLWithTimestamp(){let e=new Date().getTime(),{projectID:t,sessionSecureID:i}=this.sessionData,n=(e-this._recordingStartTime)/1e3;return`https://${s3}/${t}/sessions/${i}?ts=${n}`}getCurrentSessionURL(){let e=this.sessionData.projectID,t=this.sessionData.sessionSecureID;return e&&t?`https://${s3}/${e}/sessions/${t}`:null}snapshot(e){return S(this,null,function*(){yield tu.snapshotCanvas(e)})}addSessionFeedback({timestamp:e,verbatim:t,user_email:i,user_name:n}){var s;this._worker.postMessage({message:{type:s$.Feedback,verbatim:t,timestamp:e,userName:n||this.sessionData.userIdentifier,userEmail:i||(null==(s=this.sessionData.userObject)?void 0:s.name)}})}_save(){return S(this,null,function*(){var e;try{let t;"Recording"===this.state&&this.listeners&&this.sessionData.sessionStartTime&&Date.now()-this.sessionData.sessionStartTime>144e5&&(this.logger.log("Resetting session",{start:this.sessionData.sessionStartTime}),yield this._reset({})),(null==(e=this.options)?void 0:e.sendMode)==="local"&&(t=e=>S(this,null,function*(){let t=new Blob([JSON.stringify({query:iQ(nT),variables:e})],{type:"application/json"});return yield window.fetch(`${this._backendUrl}`,{method:"POST",body:t}),0})),yield this._sendPayload({sendFn:t}),this.hasPushedData=!0,this.sessionData.lastPushTime=Date.now()}catch(e){this._isOnLocalHost&&(console.error(e),s5("_save",e))}"Recording"===this.state&&(this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0),this.pushPayloadTimerId=setTimeout(()=>{this._save()},2e3))})}addCustomEvent(e,t){if("NotRecording"===this.state){let i;let n=()=>{clearInterval(i),"Recording"===this.state&&this.events.length>0?tp(e,t):i=setTimeout(n,500)};i=setTimeout(n,500)}else"Recording"===this.state&&(this.events.length>0||this.hasPushedData)&&tp(e,t)}_sendPayload(e){return S(this,arguments,function*({sendFn:e}){let t=ir.getRecordedNetworkResources(this._firstLoadListeners,this._recordingStartTime),i=ir.getRecordedWebSocketEvents(this._firstLoadListeners),n=[...this.events],s=[...this._firstLoadListeners.messages],l=[...this._firstLoadListeners.errors],{bytes:o,time:r}=this.enableCanvasRecording?tQ.canvas:tQ.normal;this._eventBytesSinceSnapshot>=o&&new Date().getTime()-this._lastSnapshotTime>=r&&this.takeFullSnapshot(),this.logger.log(`Sending: ${n.length} events, ${s.length} messages, ${t.length} network resources, ${l.length} errors 
To: ${this._backendUrl}
Org: ${this.organizationID}
SessionSecureID: ${this.sessionData.sessionSecureID}`);let a=tP(sO)||"";e?yield e({session_secure_id:this.sessionData.sessionSecureID,payload_id:this._payloadId.toString(),events:{events:n},messages:tv({messages:s}),resources:JSON.stringify({resources:t}),web_socket_events:JSON.stringify({webSocketEvents:i}),errors:l,is_beacon:!1,has_session_unloaded:this.hasSessionUnloaded}):this._worker.postMessage({message:{type:s$.AsyncEvents,id:this._payloadId,events:n,messages:s,errors:l,resourcesString:JSON.stringify({resources:t}),webSocketEventsString:JSON.stringify({webSocketEvents:i}),hasSessionUnloaded:this.hasSessionUnloaded,highlightLogs:a}}),this._payloadId++,tB(tE.PAYLOAD_ID,this._payloadId.toString()),ir.clearRecordedNetworkResources(this._firstLoadListeners),this.events=this.events.slice(n.length),this._firstLoadListeners.messages=this._firstLoadListeners.messages.slice(s.length),this._firstLoadListeners.errors=this._firstLoadListeners.errors.slice(l.length),sP(a)})}takeFullSnapshot(){tu.takeFullSnapshot(),this._eventBytesSinceSnapshot=0,this._lastSnapshotTime=new Date().getTime()}}e.FirstLoadListeners=ir,e.GenerateSecureID=sB,e.Highlight=s4,e.HighlightWarning=s5,e.MetricCategory=tx,e.getPreviousSessionData=tj,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}(n);let o=function(e,t){for(var i=0;i<t.length;i++){let n=t[i];if("string"!=typeof n&&!Array.isArray(n)){for(let t in n)if("default"!==t&&!(t in e)){let i=Object.getOwnPropertyDescriptor(n,t);i&&Object.defineProperty(e,t,i.get?i:{enumerable:!0,get:()=>n[t]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}({__proto__:null},[l.exports])}}]);