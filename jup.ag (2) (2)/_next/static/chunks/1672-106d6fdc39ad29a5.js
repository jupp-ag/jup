"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1672,4180],{71130:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(93981),a=n(50269),i=n(89388),s=n(29541),l=function(e){var t=e.children,n=e.className,a=void 0===n?"":n,l=e.height,o=e.maxHeight,c=e.expanded,u=(0,r.useState)(l),d=u[0],x=u[1];(0,r.useEffect)((function(){x(c?o:l)}),[l,o,c]);var f=c?"animate-fade-in":"animate-fade-out";return(0,s.jsx)("div",{className:(0,i.cn)("transition-all duration-200 overflow-hidden",f,a),style:{height:d,maxHeight:o},children:t})},o=function(e){var t=e.message,n=e.iconSize,r=void 0===n?20:n,o=e.className;return(0,s.jsx)(l,{height:0,maxHeight:"auto",expanded:Boolean(t),children:(0,s.jsxs)("div",{className:(0,i.cn)("md:px-6 mt-1 flex items-center text-xs fill-current text-black-50 dark:text-white font-semibold",o),children:[(0,s.jsx)(a.Z,{width:r,style:{minWidth:r},height:r}),(0,s.jsx)("span",{className:"ml-2",children:t})]})})}},17463:function(e,t,n){n.d(t,{x:function(){return j}});var r=n(97620),a=n(73360),i=n(7761),s=n(65838),l=n(93981),o=n(90342),c=n(97431),u=n(86150),d=n(57917),x=n(89388),f=n(25546),h=n(85394),p=n(44180),v=n(59394),m=n(54524),g=n(57731),b=n(88951),w=n(29541),j=function(e){var t=e.toastProps,n=t.closeToast,j=t.toastId,y=e.className,k=e.customTitle,S=(0,d.Sk)(j.toString()),N=S.tx,C=S.errorTitle,T=S.description,Z=S.shouldShowFeedbackLink,_=S.shouldShowUpdatePriorityFee,P=S.customTitle,F=S.shouldShowShareLink,O=(0,s.jB)().asLegacyTransaction,M=(0,o.gs)().toggle,L=l.useState(!1),E=(0,r.Z)(L,2),H=E[0],I=E[1],R=(0,d.kH)(j.toString()),W=R.isWaitingWalletToSign,V=R.isProcessing,A=R.isTxSuccess,D=R.isTxProcessed,U=R.isTxFailed,B=(0,l.useRef)(null);if((0,l.useEffect)((function(){var e,t;(N&&(U||A)&&!B.current&&(B.current=new f.o6(n,5e3)),H)?null===(e=B.current)||void 0===e||e.pause():null===(t=B.current)||void 0===t||t.resume()}),[A,U,n,N,H]),!N&&!C)return null;var J=P||k||(W?i.ag._("Waiting For Wallet To Sign Transaction"):V?i.ag._("Processing Transaction"):D?i.ag._("Confirming Transaction"):A?i.ag._("Transaction Confirmed"):i.ag._("Transaction Failed{0}",{0:C&&" (".concat(C,")")}));return(0,w.jsxs)("div",{className:(0,x.cn)("bg-white dark:bg-black dark:text-white px-6 py-5 shadow-lg rounded-lg max-w-[420px]",y),children:[(0,w.jsx)("div",{className:"flex justify-between items-center mb-1",children:(0,w.jsx)("div",{className:"text-lg font-semibold",children:J})}),(0,w.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,w.jsxs)("div",{className:"text-[13px] leading-4 text-black-50 dark:text-white-50",children:[T,!O&&C&&!N&&(0,w.jsx)("div",{children:(0,w.jsx)(a.cC,{id:"This wallet might not support Versioned Transaction, turn it off and try again."})}),(0,w.jsx)("div",{className:"text-xs flex flex-col text-black-75 dark:text-white-75",children:function(){if(!N)return null;var e=N.status,t=N.txid,n=N.additionalSteps;return"fail-no-txid"===e?(0,w.jsx)("span",{children:N.stepText}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:"flex space-x-2.5 mt-2",children:[(V||W)&&(0,w.jsx)(h.Z,{width:20,height:20}),"unknown"===e&&(0,w.jsx)(g.Z,{width:20,height:20}),"fail"===e&&(0,w.jsx)(m.Z,{width:20,height:20}),"success"===e&&(0,w.jsx)(b.Z,{width:20,height:20}),(0,w.jsxs)("span",{className:"my-auto inline-block overflow-hidden",children:[t?(0,w.jsx)(v.Z,{txid:t}):null,N.stepText&&(0,w.jsxs)(w.Fragment,{children:[t&&(0,w.jsx)("span",{children:":"}),(0,w.jsx)("span",{className:(0,x.cn)(t&&"pl-0.5"),children:N.stepText})]})]})]}),null===n||void 0===n?void 0:n.map((function(e,t){return(0,w.jsx)("div",{children:e},t)}))]})}()})]}),F&&null!==N&&void 0!==N&&N.txid?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("button",{type:"button",onClick:function(){return I(!0)},className:(0,x.cn)("rounded-lg flex px-3 py-2  fill-current space-x-2 text-xs font-semibold items-center w-auto self-start border border-white/10","hover:bg-v2-primary/5 hover:border-v2-primary/10 hover:text-v2-primary"),children:[(0,w.jsx)("span",{children:i.ag._("Share")}),(0,w.jsx)(u.Z,{})]}),(0,w.jsx)(p.default,{txid:N.txid,open:H,onClose:function(){return I(!1)}})]}):null,_&&(0,w.jsx)("div",{className:"flex items-center space-x-2",children:(0,w.jsx)("button",{className:"bg-v2-background border hover:dark:border-v2-primary/50 hover:text-v2-primary dark:border-white/[.35] py-1 px-3 rounded flex items-center text-xs dark:text-white/35 w-fit",onClick:function(){n(),M()},children:(0,w.jsx)(a.cC,{id:"Update Priority Fee"})})}),Z?(0,w.jsx)("div",{className:"flex items-center space-x-2",children:(0,w.jsxs)("a",{className:"bg-transparent border border-black/[.35] dark:border-white/[.35] py-1 px-2 rounded flex items-center text-xs dark:text-white/50 text-black/50 w-fit",href:"https://discord.gg/jup",target:"_blank",rel:"noreferrer",children:[(0,w.jsx)("div",{className:"mr-1 w-4 h-4 text-black/50 dark:text-white/50",children:(0,w.jsx)(c.Z,{width:16,height:16})}),(0,w.jsx)(a.cC,{id:"Discord"})]})}):null]})]})}},16330:function(e,t,n){var r=n(93981),a=n(87821),i=n(65838),s=n(25546),l=n(89388),o=n(29541),c=r.forwardRef((function(e,t){e.testId;var n=e.name,c=e.onChange,u=e.onChangeWithoutEffect,d=e.value,x=e.disabled,f=void 0!==x&&x,h=e.decimals,p=void 0===h?6:h,v=e.onMouseOver,m=e.onFocus,g=e.className,b=e.placeholder,w=e.customWithValueLimit,j=e.suffix,y=(0,i.MG)().constants.MAX_INPUT_LIMIT,k=r.useMemo((function(){return function(e){var t=e.floatValue;return w?!t||w(t):!t||t<=y}}),[y,w]),S=String(d).length>=9?"text-sm sm:text-base lg:text-lg":"text-lg",N=","===s.A5?".":",",C=","===s.A5?",":".";return(0,o.jsx)(a.Z,{name:n,inputMode:"decimal","data-lpignore":"true",decimalSeparator:C,allowedDecimalSeparators:[".",","],value:null!==d&&void 0!==d?d:"",thousandSeparator:N,decimalScale:p,allowNegative:!1,allowLeadingZeros:!1,disabled:f,isAllowed:k,suffix:j,onChange:function(e){var t=e.target.value,n=(0,s.jj)(t).replaceAll(",","");u&&u(n)},onValueChange:function(e){e.value!==(null===d||void 0===d?void 0:d.toString())&&c&&c(e.value)},isNumericString:!0,placeholder:null!==b&&void 0!==b?b:"0.00",className:(0,l.cn)("h-full w-full bg-transparent disabled:opacity-100 disabled:text-black dark:text-white text-right font-semibold dark:placeholder:text-white/25 outline-none",S,g),onMouseOver:v||void 0,onFocus:m||void 0,getInputRef:t})}));t.Z=c},44180:function(e,t,n){n.r(t);var r=n(27195),a=n(8857),i=n.n(a),s=n(7761),l=n(12197),o=n(93981),c=n(12866),u=n(85216),d=n(16178),x=n(85394),f=n(89388),h=n(47222),p=n(19976),v=n(24628),m=n(29541),g=1e3;t.default=function(e){var t=e.txid,n=e.open,a=e.onClose,b=(0,o.useRef)(null),w=(0,o.useRef)(null);(0,l.O3)(w,(function(){var e;return null===(e=b.current)||void 0===e?void 0:e.close()}));var j=(0,o.useMemo)((function(){return(0,h.cK)(t)}),[t]),y=function(e,t){var n=(0,o.useRef)(0),a=(0,o.useState)(null),s=a[0],l=a[1];return(0,o.useEffect)((function(){l(null)}),[t]),(0,o.useEffect)((function(){function a(){return o.apply(this,arguments)}function o(){return(o=(0,r.Z)(i().mark((function e(){var r,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://stats.jup.ag/transactions/".concat(t));case 3:if(200===(r=e.sent).status){e.next=6;break}throw"Failed to fetch metadata";case 6:return e.next=8,r.json();case 8:s=e.sent,l(s),e.next=20;break;case 12:if(e.prev=12,e.t0=e.catch(0),!(n.current<30)){e.next=20;break}return n.current+=1,e.next=18,(0,p.D)(g);case 18:return e.next=20,a();case 20:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}e&&!s&&a()}),[t,s,e]),s}(n,t),k=(0,o.useMemo)((function(){return t?(0,h.W3)(t):""}),[t]),S=(0,o.useState)(!1),N=S[0],C=S[1],T=(0,o.useState)(""),Z=T[0],_=T[1],P=(0,o.useCallback)((function(){k&&(navigator.clipboard.writeText(k),C(!0),setTimeout((function(){C(!1)}),1500))}),[k]),F=function(e,t){var n=(0,o.useRef)(0),a=(0,o.useState)(null),l=a[0],c=a[1],u=(0,o.useState)(null),d=u[0],f=u[1],h=(0,o.useState)(null),v=h[0],b=h[1],w=(0,o.useCallback)((function(){b((0,m.jsxs)("div",{className:"h-full w-full flex flex-col space-y-4 items-center justify-center text-xs flex-wrap",children:[(0,m.jsx)("span",{className:"p-6 text-center",children:s.ag._("Generating Image...")}),(0,m.jsx)(x.Z,{})]}))}),[]),j=(0,o.useCallback)((0,r.Z)(i().mark((function e(){var r,a,s,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return r=e.sent,e.next=6,r.blob();case 6:return a=e.sent,s=URL.createObjectURL(a),l=new Promise((function(e,t){var n=new Image;n.src=s,n.onload=function(){c(s),f(a),b(null),e()},n.onerror=t})),e.next=11,l;case 11:e.next=22;break;case 13:if(e.prev=13,e.t0=e.catch(0),w(),!(n.current<30)){e.next=22;break}return n.current+=1,e.next=20,(0,p.D)(g);case 20:console.log("retrying...",n.current),j();case 22:case"end":return e.stop()}}),e,null,[[0,13]])}))),[t,w]);return(0,o.useEffect)((function(){t&&e&&j()}),[t,j,e]),(0,o.useEffect)((function(){n.current>30&&b((0,m.jsxs)("div",{className:"h-full w-full flex flex-col items-center justify-center text-xs flex-wrap p-6",children:[(0,m.jsx)("span",{className:"text-center",children:s.ag._("Failed to generate swap image.")}),(0,m.jsx)("span",{className:"mt-2 text-center",children:s.ag._("Please try again later.")})]}))}),[]),{imageSrc:l,imageBlob:d,errorMessage:v}}(n,j),O=F.imageSrc,M=F.imageBlob,L=F.errorMessage,E=(0,o.useMemo)((function(){return"undefined"!==typeof window.navigator.share}),[]),H=(0,o.useMemo)((function(){if(!y)return"";var e=new URLSearchParams({text:"I just swapped ".concat(y.inSymbol," for ").concat(y.outSymbol," on Jupiter!"),url:k,via:"JupiterExchange"});return"http://twitter.com/share?".concat(e.toString())}),[k,y]),I=(0,o.useCallback)((function(){if(!y)return"";if(E){var e=["I just swapped ".concat(y.inSymbol," for ").concat(y.outSymbol," on Jupiter!"),k].join("\n");navigator.share({title:"Jupiter",text:e,files:M?[new File([M],"".concat(y.inSymbol," ").concat(y.outSymbol," Swap.png"),{type:"image/png"})]:void 0}).then((function(){})).catch((function(){}))}}),[y,E,k,M]),R=(0,o.useCallback)((function(){var e;null===(e=b.current)||void 0===e||e.close(),a()}),[a,b]);(0,o.useEffect)((function(){if(b.current&&(n?b.current.open||b.current.show():b.current.close()),n){var e=b.current;return null===e||void 0===e||e.addEventListener("close",R),function(){null===e||void 0===e||e.removeEventListener("close",R)}}}),[R,n]);var W=(0,o.useCallback)((0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,navigator.clipboard.write([new ClipboardItem({"image/png":M})]);case 5:_(s.ag._("Copied to clipboard!")),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0),_(s.ag._("Failed to copy"));case 12:return e.prev=12,setTimeout((function(){_("")}),1500),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,8,12,15]])}))),[M]);return n?(0,m.jsx)("dialog",{role:"dialog","aria-modal":"true",className:"top-0 left-0 h-full w-full flex items-center justify-center bg-black/25 backdrop-blur-md animate-fade-in cursor-auto",ref:b,children:(0,m.jsxs)("div",{ref:w,className:"max-w-[90wv] max-h-[90vh] w-[326px] rounded-xl overflow-hidden relative",children:[(0,m.jsx)("div",{className:"absolute right-3 top-3 cursor-pointer",onClick:R,children:(0,m.jsx)(c.Z,{width:12,height:12})}),(0,m.jsxs)("div",{className:"bg-tuna rounded-lg shadow-lg",children:[(0,m.jsxs)("div",{className:"h-[184px] w-[326px]",children:[L||null,!L&&O?(0,m.jsx)("img",{src:O,alt:"Share tx ".concat(t),className:"w-full h-full"}):null]}),(0,m.jsxs)("div",{className:"max-h-[50vh] overflow-y-scroll hideScrollbar px-4 py-5 bg-[#1B2229]",children:[E?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"text-xs text-white/75",children:s.ag._("Share to")}),(0,m.jsx)("div",{className:"mt-2 space-y-2",children:(0,m.jsxs)("button",{onClick:I,className:(0,f.cn)("flex space-x-2 text-xs items-center rounded-lg bg-v2-lily/5 border border-v2-lily/[.15] px-4 py-3 w-full hover:bg-v2-lily/10",L?"!cursor-not-allowed pointer-events-none opacity-50":""),children:[(0,m.jsx)(v.Z,{width:16,height:16}),(0,m.jsx)("div",{className:"font-semibold",children:s.ag._("Share")})]})})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"text-xs text-white/75",children:s.ag._("Copy Image")}),(0,m.jsx)("div",{className:"mt-2 space-y-2",children:(0,m.jsx)("button",{type:"button",disabled:Boolean(L||Z),className:(0,f.cn)("flex space-x-2 text-xs items-center rounded-lg bg-v2-lily/5 border border-v2-lily/[.15] px-4 py-3 w-full hover:bg-v2-lily/10",L?"!cursor-not-allowed pointer-events-none opacity-50":""),onClick:W,children:(0,m.jsx)("div",{className:"font-semibold",children:Z||s.ag._("Copy Image")})})}),(0,m.jsx)("div",{className:"mt-4 text-xs text-white/75",children:s.ag._("Share to")}),(0,m.jsx)("div",{className:"mt-2 space-y-2",children:(0,m.jsxs)("a",{target:"_blank",href:H,rel:"noopener noreferrer",className:(0,f.cn)("flex space-x-2 text-xs items-center rounded-lg bg-v2-lily/5 border border-v2-lily/[.15] px-4 py-3 w-full hover:bg-v2-lily/10",L?"!cursor-not-allowed pointer-events-none opacity-50":""),children:[(0,m.jsx)(d.Z,{width:16,height:16}),(0,m.jsx)("div",{className:"font-semibold",children:s.ag._("X / Twitter")})]})})]}),(0,m.jsxs)("div",{className:"mt-5 flex items-center justify-between text-xs",children:[(0,m.jsx)("div",{children:s.ag._("or copy swap link")}),(0,m.jsxs)("div",{onClick:P,className:(0,f.cn)("cursor-pointer bg-black/[.35] rounded-lg px-3 py-2  w-[184px]  space-x-2 flex items-center justify-between",L?"!cursor-not-allowed opacity-50":""),children:[(0,m.jsx)("span",{className:"whitespace-nowrap truncate w-[82%] overflow-hidden",children:N?s.ag._("Copied!"):k}),(0,m.jsx)(u.Z,{width:20,height:20})]})]})]})]})]})}):null}},94223:function(e,t,n){n(93981);var r=n(29541);t.Z=function(e){var t=e.width,n=void 0===t?32:t,a=e.height,i=void 0===a?32:a;return(0,r.jsx)("svg",{width:n,height:i,viewBox:"0 0 32 32",fill:"inherit",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.1425 8.45597H5.22047L5.22025 8.45592C4.66944 8.40838 4.15821 8.1496 3.79392 7.73368C3.52351 7.52371 3.34106 7.22064 3.28188 6.88329C3.24718 5.65089 4.6625 4.79883 5.9425 4.79883H22.3996C23.1264 4.80107 23.8229 5.09067 24.3368 5.60455C24.8507 6.11843 25.1403 6.81496 25.1425 7.54168V8.45597ZM26.0564 10.2846H5.02779C4.54289 10.2846 4.07777 10.092 3.73473 9.74912C3.39187 9.40605 3.19922 8.94094 3.19922 8.45605V25.8275C3.19922 26.555 3.4882 27.2526 4.00248 27.7671C4.51698 28.2814 5.21451 28.5703 5.94208 28.5703H26.0564C26.7839 28.5703 27.4814 28.2814 27.996 27.7671C28.5102 27.2526 28.7992 26.555 28.7992 25.8275V23.0846H24.2278C22.9213 23.0846 21.7139 22.3875 21.0607 21.2561C20.4074 20.1246 20.4074 18.7303 21.0607 17.5989C21.7139 16.4675 22.9213 15.7703 24.2278 15.7703H28.7992V13.0275C28.7992 12.2999 28.5102 11.6024 27.996 11.0879C27.4815 10.5736 26.7839 10.2846 26.0564 10.2846ZM22.4014 19.4277C22.4014 19.9126 22.594 20.3777 22.9369 20.7208C23.2799 21.0636 23.7451 21.2563 24.2299 21.2563H28.8014V17.5991H24.2299C23.745 17.5991 23.2799 17.7918 22.9369 18.1346C22.594 18.4777 22.4014 18.9428 22.4014 19.4277Z",fill:"currentColor"})})}},57917:function(e,t,n){n.d(t,{SR:function(){return h},Sk:function(){return x},kH:function(){return f}});var r=n(63956),a=n(9364),i=n(3011),s=n(93981),l=n(49803);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={tx:void 0,errorTitle:"",shouldShowFeedbackLink:!1,shouldShowUpdatePriorityFee:!1,shouldShowShareLink:!1},d=(0,a.cn)({}),x=function(e){return(0,i.Dv)(d,{store:l.e})[e]||u},f=function(e){var t=x(e).tx;return(0,s.useMemo)((function(){return{isWaitingWalletToSign:(!t||"loading"===(null===t||void 0===t?void 0:t.status))&&!(null!==t&&void 0!==t&&t.txid),isProcessing:"loading"===(null===t||void 0===t?void 0:t.status)&&t.txid||(null===t||void 0===t?void 0:t.hasAdditionalPendingSteps),isTxSuccess:"success"===(null===t||void 0===t?void 0:t.status),isTxProcessed:"processed"===(null===t||void 0===t?void 0:t.status),isTxFailed:"fail"===(null===t||void 0===t?void 0:t.status)||"fail-no-txid"===(null===t||void 0===t?void 0:t.status)}}),[t])},h=function(){var e=(0,i.b9)(d,{store:l.e}),t=(0,s.useCallback)((function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e((function(e){return c(c({},e),{},(0,r.Z)({},t,c(c(c(c({},u),e[t]),a),{},{tx:n})))}))}),[e]),n=(0,s.useCallback)((function(t){e((function(e){return e[t]=c({},u),e}))}),[e]);return{addNotificationTx:t,updateNotificationTxStatus:(0,s.useCallback)((function(t,n,r){e((function(e){var a,i=null===e||void 0===e||null===(a=e[t])||void 0===a?void 0:a.tx;return i&&(i=c(c(c({},i),n),{},{hasAdditionalPendingSteps:null===r||void 0===r?void 0:r.hasAdditionalPendingSteps,additionalSteps:null===r||void 0===r?void 0:r.additionalSteps}),e[t].tx=i,"fail"!==n.status&&"fail-no-txid"!==n.status||(e[t].shouldShowFeedbackLink=!0)),c({},e)}))}),[e]),resetNotificationMultipleTxs:n,updateNotificationMetadata:(0,s.useCallback)((function(t,n){e((function(e){return c(c({},e),{},(0,r.Z)({},t,c(c({},e[t]),n)))}))}),[e])}}},47222:function(e,t,n){n.d(t,{L5:function(){return i},SV:function(){return s},W3:function(){return a},cK:function(){return r}});var r=function(e){var t="api/swap/".concat(e),n=s();if(n.includes("vercel.app")){var r=n.replace("jupiter","dynamic-og");return"".concat(r,"/").concat(t)}return"https://og.jup.ag/".concat(t)},a=function(e){return"".concat(s(),"/share/").concat(e)},i=function(e){var t=e.inSymbol,n=e.outSymbol,r=e.amount,a=e.baseUrl;return"".concat(a,"/swap/").concat(t,"-").concat(n,"?inAmount=").concat(r)},s=function(){var e,t="jupiter-git-mainnet-wowcats.vercel.app";return t=null!==(e=t)&&void 0!==e&&e.includes("vercel.app")?"https://".concat("jupiter-git-mainnet-wowcats.vercel.app"):"https://jup.ag",window.location.origin}}}]);
//# sourceMappingURL=1672-106d6fdc39ad29a5.js.map